if(function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(f,t){var e=[],c=e.slice,m=e.concat,a=e.push,o=e.indexOf,n={},i=n.toString,g=n.hasOwnProperty,v={},y=f.document,r="2.1.4",C=function(t,e){return new C.fn.init(t,e)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,l=/^-ms-/,u=/-([\da-z])/gi,h=function(t,e){return e.toUpperCase()};function d(t){var e="length"in t&&t.length,n=C.type(t);return"function"!==n&&!C.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t))}C.fn=C.prototype={jquery:r,constructor:C,selector:"",length:0,toArray:function(){return c.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:c.call(this)},pushStack:function(t){var e=C.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return C.each(this,t,e)},map:function(n){return this.pushStack(C.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:a,sort:e.sort,splice:e.splice},C.extend=C.fn.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||C.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],s!==(i=t[e])&&(u&&i&&(C.isPlainObject(i)||(o=C.isArray(i)))?(r=o?(o=!1,n&&C.isArray(n)?n:[]):n&&C.isPlainObject(n)?n:{},s[e]=C.extend(u,r,i)):void 0!==i&&(s[e]=i));return s},C.extend({expando:"jQuery"+(r+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===C.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!C.isArray(t)&&0<=t-parseFloat(t)+1},isPlainObject:function(t){return"object"===C.type(t)&&!t.nodeType&&!C.isWindow(t)&&!(t.constructor&&!g.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?n[i.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;(t=C.trim(t))&&(1===t.indexOf("use strict")?((e=y.createElement("script")).text=t,y.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(l,"ms-").replace(u,h)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var i=0,o=t.length,r=d(t);if(n){if(r)for(;i<o&&!1!==e.apply(t[i],n);i++);else for(i in t)if(!1===e.apply(t[i],n))break}else if(r)for(;i<o&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(s,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(d(Object(t))?C.merge(n,"string"==typeof t?[t]:t):a.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:o.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,s=!n;o<r;o++)!e(t[o],o)!==s&&i.push(t[o]);return i},map:function(t,e,n){var i,o=0,r=t.length,s=[];if(d(t))for(;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return m.apply([],s)},guid:1,proxy:function(t,e){var n,i,o;if("string"==typeof e&&(n=t[e],e=t,t=n),C.isFunction(t))return i=c.call(arguments,2),(o=function(){return t.apply(e||this,i.concat(c.call(arguments)))}).guid=t.guid=t.guid||C.guid++,o},now:Date.now,support:v}),C.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var p=function(n){var t,f,_,r,i,m,h,g,w,u,c,v,x,o,y,b,s,a,C,k="sizzle"+1*new Date,$=n.document,T=0,d=0,l=rt(),p=rt(),S=rt(),M=function(t,e){return t===e&&(c=!0),0},D={}.hasOwnProperty,e=[],L=e.pop,E=e.push,P=e.push,A=e.slice,O=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",z=R.replace("w","w#"),U="\\["+N+"*("+R+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+N+"*\\]",F=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",H=new RegExp(N+"+","g"),B=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),j=new RegExp("^"+N+"*,"+N+"*"),q=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),W=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),V=new RegExp(F),Z=new RegExp("^"+z+"$"),G={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,tt=/'|\\/g,et=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),nt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},it=function(){v()};try{P.apply(e=A.call($.childNodes),$.childNodes),e[$.childNodes.length].nodeType}catch(t){P={apply:e.length?function(t,e){E.apply(t,A.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function ot(t,e,n,i){var o,r,s,a,l,u,c,h,d,p;if((e?e.ownerDocument||e:$)!==x&&v(e),n=n||[],a=(e=e||x).nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return n;if(!i&&y){if(11!==a&&(o=J.exec(t)))if(s=o[1]){if(9===a){if(!(r=e.getElementById(s))||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&C(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return P.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&f.getElementsByClassName)return P.apply(n,e.getElementsByClassName(s)),n}if(f.qsa&&(!b||!b.test(t))){if(h=c=k,d=e,p=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=m(t),(c=e.getAttribute("id"))?h=c.replace(tt,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=u.length;l--;)u[l]=h+mt(u[l]);d=Q.test(t)&&pt(e.parentNode)||e,p=u.join(",")}if(p)try{return P.apply(n,d.querySelectorAll(p)),n}catch(t){}finally{c||e.removeAttribute("id")}}}return g(t.replace(B,"$1"),e,n,i)}function rt(){var i=[];return function t(e,n){return i.push(e+" ")>_.cacheLength&&delete t[i.shift()],t[e+" "]=n}}function st(t){return t[k]=!0,t}function at(t){var e=x.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function lt(t,e){for(var n=t.split("|"),i=t.length;i--;)_.attrHandle[n[i]]=e}function ut(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ct(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ht(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function dt(s){return st(function(r){return r=+r,st(function(t,e){for(var n,i=s([],t.length,r),o=i.length;o--;)t[n=i[o]]&&(t[n]=!(e[n]=t[n]))})})}function pt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in f=ot.support={},i=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},v=ot.setDocument=function(t){var e,n,l=t?t.ownerDocument||t:$;return l!==x&&9===l.nodeType&&l.documentElement?(o=(x=l).documentElement,(n=l.defaultView)&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",it,!1):n.attachEvent&&n.attachEvent("onunload",it)),y=!i(l),f.attributes=at(function(t){return t.className="i",!t.getAttribute("className")}),f.getElementsByTagName=at(function(t){return t.appendChild(l.createComment("")),!t.getElementsByTagName("*").length}),f.getElementsByClassName=X.test(l.getElementsByClassName),f.getById=at(function(t){return o.appendChild(t).id=k,!l.getElementsByName||!l.getElementsByName(k).length}),f.getById?(_.find.ID=function(t,e){if(void 0!==e.getElementById&&y){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var n=t.replace(et,nt);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}}),_.find.TAG=f.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):f.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"!==t)return r;for(;n=r[o++];)1===n.nodeType&&i.push(n);return i},_.find.CLASS=f.getElementsByClassName&&function(t,e){if(y)return e.getElementsByClassName(t)},s=[],b=[],(f.qsa=X.test(l.querySelectorAll))&&(at(function(t){o.appendChild(t).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&b.push("[*^$]="+N+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||b.push("\\["+N+"*(?:value|"+I+")"),t.querySelectorAll("[id~="+k+"-]").length||b.push("~="),t.querySelectorAll(":checked").length||b.push(":checked"),t.querySelectorAll("a#"+k+"+*").length||b.push(".#.+[+~]")}),at(function(t){var e=l.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&b.push("name"+N+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||b.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),b.push(",.*:")})),(f.matchesSelector=X.test(a=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&at(function(t){f.disconnectedMatch=a.call(t,"div"),a.call(t,"[s!='']:x"),s.push("!=",F)}),b=b.length&&new RegExp(b.join("|")),s=s.length&&new RegExp(s.join("|")),e=X.test(o.compareDocumentPosition),C=e||X.test(o.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},M=e?function(t,e){if(t===e)return c=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!f.sortDetached&&e.compareDocumentPosition(t)===n?t===l||t.ownerDocument===$&&C($,t)?-1:e===l||e.ownerDocument===$&&C($,e)?1:u?O(u,t)-O(u,e):0:4&n?-1:1)}:function(t,e){if(t===e)return c=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!o||!r)return t===l?-1:e===l?1:o?-1:r?1:u?O(u,t)-O(u,e):0;if(o===r)return ut(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?ut(s[i],a[i]):s[i]===$?-1:a[i]===$?1:0},l):x},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==x&&v(t),e=e.replace(W,"='$1']"),f.matchesSelector&&y&&(!s||!s.test(e))&&(!b||!b.test(e)))try{var n=a.call(t,e);if(n||f.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return 0<ot(e,x,null,[t]).length},ot.contains=function(t,e){return(t.ownerDocument||t)!==x&&v(t),C(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==x&&v(t);var n=_.attrHandle[e.toLowerCase()],i=n&&D.call(_.attrHandle,e.toLowerCase())?n(t,e,!y):void 0;return void 0!==i?i:f.attributes||!y?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,n=[],i=0,o=0;if(c=!f.detectDuplicates,u=!f.sortStable&&t.slice(0),t.sort(M),c){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return u=null,t},r=ot.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(_=ot.selectors={cacheLength:50,createPseudo:st,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&V.test(n)&&(e=m(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=l[t+" "];return e||(e=new RegExp("(^|"+N+")"+t+"("+N+"|$)"))&&l(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,i,o){return function(t){var e=ot.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===o:"!="===i?e!==o:"^="===i?o&&0===e.indexOf(o):"*="===i?o&&-1<e.indexOf(o):"$="===i?o&&e.slice(-o.length)===o:"~="===i?-1<(" "+e.replace(H," ")+" ").indexOf(o):"|="===i&&(e===o||e.slice(0,o.length+1)===o+"-"))}},CHILD:function(p,t,e,f,m){var g="nth"!==p.slice(0,3),v="last"!==p.slice(-4),y="of-type"===t;return 1===f&&0===m?function(t){return!!t.parentNode}:function(t,e,n){var i,o,r,s,a,l,u=g!==v?"nextSibling":"previousSibling",c=t.parentNode,h=y&&t.nodeName.toLowerCase(),d=!n&&!y;if(c){if(g){for(;u;){for(r=t;r=r[u];)if(y?r.nodeName.toLowerCase()===h:1===r.nodeType)return!1;l=u="only"===p&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&d){for(a=(i=(o=c[k]||(c[k]={}))[p]||[])[0]===T&&i[1],s=i[0]===T&&i[2],r=a&&c.childNodes[a];r=++a&&r&&r[u]||(s=a=0)||l.pop();)if(1===r.nodeType&&++s&&r===t){o[p]=[T,a,s];break}}else if(d&&(i=(t[k]||(t[k]={}))[p])&&i[0]===T)s=i[1];else for(;(r=++a&&r&&r[u]||(s=a=0)||l.pop())&&((y?r.nodeName.toLowerCase()!==h:1!==r.nodeType)||!++s||(d&&((r[k]||(r[k]={}))[p]=[T,s]),r!==t)););return(s-=m)===f||s%f==0&&0<=s/f}}},PSEUDO:function(t,r){var e,s=_.pseudos[t]||_.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return s[k]?s(r):1<s.length?(e=[t,t,"",r],_.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,e){for(var n,i=s(t,r),o=i.length;o--;)t[n=O(t,i[o])]=!(e[n]=i[o])}):function(t){return s(t,0,e)}):s}},pseudos:{not:st(function(t){var i=[],o=[],a=h(t.replace(B,"$1"));return a[k]?st(function(t,e,n,i){for(var o,r=a(t,null,i,[]),s=t.length;s--;)(o=r[s])&&(t[s]=!(e[s]=o))}):function(t,e,n){return i[0]=t,a(i,null,n,o),i[0]=null,!o.pop()}}),has:st(function(e){return function(t){return 0<ot(e,t).length}}),contains:st(function(e){return e=e.replace(et,nt),function(t){return-1<(t.textContent||t.innerText||r(t)).indexOf(e)}}),lang:st(function(n){return Z.test(n||"")||ot.error("unsupported lang: "+n),n=n.replace(et,nt).toLowerCase(),function(t){var e;do{if(e=y?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===o},focus:function(t){return t===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return Y.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:dt(function(){return[0]}),last:dt(function(t,e){return[e-1]}),eq:dt(function(t,e,n){return[n<0?n+e:n]}),even:dt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:dt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:dt(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:dt(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[t]=ct(t);for(t in{submit:!0,reset:!0})_.pseudos[t]=ht(t);function ft(){}function mt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function gt(s,t,e){var a=t.dir,l=e&&"parentNode"===a,u=d++;return t.first?function(t,e,n){for(;t=t[a];)if(1===t.nodeType||l)return s(t,e,n)}:function(t,e,n){var i,o,r=[T,u];if(n){for(;t=t[a];)if((1===t.nodeType||l)&&s(t,e,n))return!0}else for(;t=t[a];)if(1===t.nodeType||l){if((i=(o=t[k]||(t[k]={}))[a])&&i[0]===T&&i[1]===u)return r[2]=i[2];if((o[a]=r)[2]=s(t,e,n))return!0}}}function vt(o){return 1<o.length?function(t,e,n){for(var i=o.length;i--;)if(!o[i](t,e,n))return!1;return!0}:o[0]}function yt(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,u=null!=e;a<l;a++)(r=t[a])&&(n&&!n(r,i,o)||(s.push(r),u&&e.push(a)));return s}function bt(p,f,m,g,v,t){return g&&!g[k]&&(g=bt(g)),v&&!v[k]&&(v=bt(v,t)),st(function(t,e,n,i){var o,r,s,a=[],l=[],u=e.length,c=t||function(t,e,n){for(var i=0,o=e.length;i<o;i++)ot(t,e[i],n);return n}(f||"*",n.nodeType?[n]:n,[]),h=!p||!t&&f?c:yt(c,a,p,n,i),d=m?v||(t?p:u||g)?[]:e:h;if(m&&m(h,d,n,i),g)for(o=yt(d,l),g(o,[],n,i),r=o.length;r--;)(s=o[r])&&(d[l[r]]=!(h[l[r]]=s));if(t){if(v||p){if(v){for(o=[],r=d.length;r--;)(s=d[r])&&o.push(h[r]=s);v(null,d=[],o,i)}for(r=d.length;r--;)(s=d[r])&&-1<(o=v?O(t,s):a[r])&&(t[o]=!(e[o]=s))}}else d=yt(d===e?d.splice(u,d.length):d),v?v(null,e,d,i):P.apply(e,d)})}function _t(t){for(var o,e,n,i=t.length,r=_.relative[t[0].type],s=r||_.relative[" "],a=r?1:0,l=gt(function(t){return t===o},s,!0),u=gt(function(t){return-1<O(o,t)},s,!0),c=[function(t,e,n){var i=!r&&(n||e!==w)||((o=e).nodeType?l(t,e,n):u(t,e,n));return o=null,i}];a<i;a++)if(e=_.relative[t[a].type])c=[gt(vt(c),e)];else{if((e=_.filter[t[a].type].apply(null,t[a].matches))[k]){for(n=++a;n<i&&!_.relative[t[n].type];n++);return bt(1<a&&vt(c),1<a&&mt(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(B,"$1"),e,a<n&&_t(t.slice(a,n)),n<i&&_t(t=t.slice(n)),n<i&&mt(t))}c.push(e)}return vt(c)}return ft.prototype=_.filters=_.pseudos,_.setFilters=new ft,m=ot.tokenize=function(t,e){var n,i,o,r,s,a,l,u=p[t+" "];if(u)return e?0:u.slice(0);for(s=t,a=[],l=_.preFilter;s;){for(r in n&&!(i=j.exec(s))||(i&&(s=s.slice(i[0].length)||s),a.push(o=[])),n=!1,(i=q.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length)),_.filter)!(i=G[r].exec(s))||l[r]&&!(i=l[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?ot.error(t):p(t,a).slice(0)},h=ot.compile=function(t,e){var n,g,v,y,b,i,o=[],r=[],s=S[t+" "];if(!s){for(e||(e=m(t)),n=e.length;n--;)(s=_t(e[n]))[k]?o.push(s):r.push(s);(s=S(t,(g=r,y=0<(v=o).length,b=0<g.length,i=function(t,e,n,i,o){var r,s,a,l=0,u="0",c=t&&[],h=[],d=w,p=t||b&&_.find.TAG("*",o),f=T+=null==d?1:Math.random()||.1,m=p.length;for(o&&(w=e!==x&&e);u!==m&&null!=(r=p[u]);u++){if(b&&r){for(s=0;a=g[s++];)if(a(r,e,n)){i.push(r);break}o&&(T=f)}y&&((r=!a&&r)&&l--,t&&c.push(r))}if(l+=u,y&&u!==l){for(s=0;a=v[s++];)a(c,h,e,n);if(t){if(0<l)for(;u--;)c[u]||h[u]||(h[u]=L.call(i));h=yt(h)}P.apply(i,h),o&&!t&&0<h.length&&1<l+v.length&&ot.uniqueSort(i)}return o&&(T=f,w=d),c},y?st(i):i))).selector=t}return s},g=ot.select=function(t,e,n,i){var o,r,s,a,l,u="function"==typeof t&&t,c=!i&&m(t=u.selector||t);if(n=n||[],1===c.length){if(2<(r=c[0]=c[0].slice(0)).length&&"ID"===(s=r[0]).type&&f.getById&&9===e.nodeType&&y&&_.relative[r[1].type]){if(!(e=(_.find.ID(s.matches[0].replace(et,nt),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=G.needsContext.test(t)?0:r.length;o--&&(s=r[o],!_.relative[a=s.type]);)if((l=_.find[a])&&(i=l(s.matches[0].replace(et,nt),Q.test(r[0].type)&&pt(e.parentNode)||e))){if(r.splice(o,1),!(t=i.length&&mt(r)))return P.apply(n,i),n;break}}return(u||h(t,c))(i,e,!y,n,Q.test(t)&&pt(e.parentNode)||e),n},f.sortStable=k.split("").sort(M).join("")===k,f.detectDuplicates=!!c,v(),f.sortDetached=at(function(t){return 1&t.compareDocumentPosition(x.createElement("div"))}),at(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||lt("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),f.attributes&&at(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||lt("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),at(function(t){return null==t.getAttribute("disabled")})||lt(I,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),ot}(f);C.find=p,C.expr=p.selectors,C.expr[":"]=C.expr.pseudos,C.unique=p.uniqueSort,C.text=p.getText,C.isXMLDoc=p.isXML,C.contains=p.contains;var b=C.expr.match.needsContext,_=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(t,n,i){if(C.isFunction(n))return C.grep(t,function(t,e){return!!n.call(t,e,t)!==i});if(n.nodeType)return C.grep(t,function(t){return t===n!==i});if("string"==typeof n){if(w.test(n))return C.filter(n,t,i);n=C.filter(n,t)}return C.grep(t,function(t){return 0<=o.call(n,t)!==i})}C.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?C.find.matchesSelector(i,t)?[i]:[]:C.find.matches(t,C.grep(e,function(t){return 1===t.nodeType}))},C.fn.extend({find:function(t){var e,n=this.length,i=[],o=this;if("string"!=typeof t)return this.pushStack(C(t).filter(function(){for(e=0;e<n;e++)if(C.contains(o[e],this))return!0}));for(e=0;e<n;e++)C.find(t,o[e],i);return(i=this.pushStack(1<n?C.unique(i):i)).selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(x(this,t||[],!1))},not:function(t){return this.pushStack(x(this,t||[],!0))},is:function(t){return!!x(this,"string"==typeof t&&b.test(t)?C(t):t||[],!1).length}});var k,$=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(C.fn.init=function(t,e){var n,i;if(!t)return this;if("string"!=typeof t)return t.nodeType?(this.context=this[0]=t,this.length=1,this):C.isFunction(t)?void 0!==k.ready?k.ready(t):t(C):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),C.makeArray(t,this));if(!(n="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:$.exec(t))||!n[1]&&e)return!e||e.jquery?(e||k).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof C?e[0]:e,C.merge(this,C.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:y,!0)),_.test(n[1])&&C.isPlainObject(e))for(n in e)C.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(i=y.getElementById(n[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=y,this.selector=t,this}).prototype=C.fn,k=C(y);var T=/^(?:parents|prev(?:Until|All))/,S={children:!0,contents:!0,next:!0,prev:!0};function M(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}C.extend({dir:function(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&C(t).is(n))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),C.fn.extend({has:function(t){var e=C(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(C.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,r=[],s=b.test(t)||"string"!=typeof t?C(t,e||this.context):0;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&C.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(1<r.length?C.unique(r):r)},index:function(t){return t?"string"==typeof t?o.call(C(t),this[0]):o.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(C.unique(C.merge(this.get(),C(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),C.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return C.dir(t,"parentNode")},parentsUntil:function(t,e,n){return C.dir(t,"parentNode",n)},next:function(t){return M(t,"nextSibling")},prev:function(t){return M(t,"previousSibling")},nextAll:function(t){return C.dir(t,"nextSibling")},prevAll:function(t){return C.dir(t,"previousSibling")},nextUntil:function(t,e,n){return C.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return C.dir(t,"previousSibling",n)},siblings:function(t){return C.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return C.sibling(t.firstChild)},contents:function(t){return t.contentDocument||C.merge([],t.childNodes)}},function(i,o){C.fn[i]=function(t,e){var n=C.map(this,o,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=C.filter(e,n)),1<this.length&&(S[i]||C.unique(n),T.test(i)&&n.reverse()),this.pushStack(n)}});var D,L=/\S+/g,E={};function P(){y.removeEventListener("DOMContentLoaded",P,!1),f.removeEventListener("load",P,!1),C.ready()}C.Callbacks=function(o){var t,n;o="string"==typeof o?E[o]||(n=E[t=o]={},C.each(t.match(L)||[],function(t,e){n[e]=!0}),n):C.extend({},o);var e,i,r,s,a,l,u=[],c=!o.once&&[],h=function(t){for(e=o.memory&&t,i=!0,l=s||0,s=0,a=u.length,r=!0;u&&l<a;l++)if(!1===u[l].apply(t[0],t[1])&&o.stopOnFalse){e=!1;break}r=!1,u&&(c?c.length&&h(c.shift()):e?u=[]:d.disable())},d={add:function(){if(u){var t=u.length;!function i(t){C.each(t,function(t,e){var n=C.type(e);"function"===n?o.unique&&d.has(e)||u.push(e):e&&e.length&&"string"!==n&&i(e)})}(arguments),r?a=u.length:e&&(s=t,h(e))}return this},remove:function(){return u&&C.each(arguments,function(t,e){for(var n;-1<(n=C.inArray(e,u,n));)u.splice(n,1),r&&(n<=a&&a--,n<=l&&l--)}),this},has:function(t){return t?-1<C.inArray(t,u):!(!u||!u.length)},empty:function(){return u=[],a=0,this},disable:function(){return u=c=e=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,e||d.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!u||i&&!c||(e=[t,(e=e||[]).slice?e.slice():e],r?c.push(e):h(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},C.extend({Deferred:function(t){var r=[["resolve","done",C.Callbacks("once memory"),"resolved"],["reject","fail",C.Callbacks("once memory"),"rejected"],["notify","progress",C.Callbacks("memory")]],o="pending",s={state:function(){return o},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var o=arguments;return C.Deferred(function(i){C.each(r,function(t,e){var n=C.isFunction(o[t])&&o[t];a[e[1]](function(){var t=n&&n.apply(this,arguments);t&&C.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[e[0]+"With"](this===s?i.promise():this,n?[t]:arguments)})}),o=null}).promise()},promise:function(t){return null!=t?C.extend(t,s):s}},a={};return s.pipe=s.then,C.each(r,function(t,e){var n=e[2],i=e[3];s[e[1]]=n.add,i&&n.add(function(){o=i},r[1^t][2].disable,r[2][2].lock),a[e[0]]=function(){return a[e[0]+"With"](this===a?s:this,arguments),this},a[e[0]+"With"]=n.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){var o,e,n,i=0,r=c.call(arguments),s=r.length,a=1!==s||t&&C.isFunction(t.promise)?s:0,l=1===a?t:C.Deferred(),u=function(e,n,i){return function(t){n[e]=this,i[e]=1<arguments.length?c.call(arguments):t,i===o?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(1<s)for(o=new Array(s),e=new Array(s),n=new Array(s);i<s;i++)r[i]&&C.isFunction(r[i].promise)?r[i].promise().done(u(i,n,r)).fail(l.reject).progress(u(i,e,o)):--a;return a||l.resolveWith(n,r),l.promise()}}),C.fn.ready=function(t){return C.ready.promise().done(t),this},C.extend({isReady:!1,readyWait:1,holdReady:function(t){t?C.readyWait++:C.ready(!0)},ready:function(t){(!0===t?--C.readyWait:C.isReady)||(C.isReady=!0)!==t&&0<--C.readyWait||(D.resolveWith(y,[C]),C.fn.triggerHandler&&(C(y).triggerHandler("ready"),C(y).off("ready")))}}),C.ready.promise=function(t){return D||(D=C.Deferred(),"complete"===y.readyState?setTimeout(C.ready):(y.addEventListener("DOMContentLoaded",P,!1),f.addEventListener("load",P,!1))),D.promise(t)},C.ready.promise();var A=C.access=function(t,e,n,i,o,r,s){var a=0,l=t.length,u=null==n;if("object"===C.type(n))for(a in o=!0,n)C.access(t,e,a,n[a],!0,r,s);else if(void 0!==i&&(o=!0,C.isFunction(i)||(s=!0),u&&(e=s?(e.call(t,i),null):(u=e,function(t,e,n){return u.call(C(t),n)})),e))for(;a<l;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return o?t:u?e.call(t):l?e(t[0],n):r};function O(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=C.expando+O.uid++}C.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},O.uid=1,O.accepts=C.acceptData,O.prototype={key:function(e){if(!O.accepts(e))return 0;var n={},i=e[this.expando];if(!i){i=O.uid++;try{n[this.expando]={value:i},Object.defineProperties(e,n)}catch(t){n[this.expando]=i,C.extend(e,n)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,n){var i,o=this.key(t),r=this.cache[o];if("string"==typeof e)r[e]=n;else if(C.isEmptyObject(r))C.extend(this.cache[o],e);else for(i in e)r[i]=e[i];return r},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?void 0!==(i=this.get(t,e))?i:this.get(t,C.camelCase(e)):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,o,r=this.key(t),s=this.cache[r];if(void 0===e)this.cache[r]={};else{n=(i=C.isArray(e)?e.concat(e.map(C.camelCase)):(o=C.camelCase(e),e in s?[e,o]:(i=o)in s?[i]:i.match(L)||[])).length;for(;n--;)delete s[i[n]]}},hasData:function(t){return!C.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var I=new O,N=new O,R=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,z=/([A-Z])/g;function U(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(z,"-$1").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:R.test(n)?C.parseJSON(n):n)}catch(t){}N.set(t,e,n)}else n=void 0;return n}C.extend({hasData:function(t){return N.hasData(t)||I.hasData(t)},data:function(t,e,n){return N.access(t,e,n)},removeData:function(t,e){N.remove(t,e)},_data:function(t,e,n){return I.access(t,e,n)},_removeData:function(t,e){I.remove(t,e)}}),C.fn.extend({data:function(i,t){var e,n,o,r=this[0],s=r&&r.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){N.set(this,i)}):A(this,function(e){var t,n=C.camelCase(i);if(r&&void 0===e)return void 0!==(t=N.get(r,i))?t:void 0!==(t=N.get(r,n))?t:void 0!==(t=U(r,n,void 0))?t:void 0;this.each(function(){var t=N.get(this,n);N.set(this,n,e),-1!==i.indexOf("-")&&void 0!==t&&N.set(this,i,e)})},null,t,1<arguments.length,null,!0);if(this.length&&(o=N.get(r),1===r.nodeType&&!I.get(r,"hasDataAttrs"))){for(e=s.length;e--;)s[e]&&0===(n=s[e].name).indexOf("data-")&&(n=C.camelCase(n.slice(5)),U(r,n,o[n]));I.set(r,"hasDataAttrs",!0)}return o},removeData:function(t){return this.each(function(){N.remove(this,t)})}}),C.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=I.get(t,e),n&&(!i||C.isArray(n)?i=I.access(t,e,C.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=C.queue(t,e),i=n.length,o=n.shift(),r=C._queueHooks(t,e);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,function(){C.dequeue(t,e)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return I.get(t,n)||I.access(t,n,{empty:C.Callbacks("once memory").add(function(){I.remove(t,[e+"queue",n])})})}}),C.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?C.queue(this[0],e):void 0===n?this:this.each(function(){var t=C.queue(this,e,n);C._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&C.dequeue(this,e)})},dequeue:function(t){return this.each(function(){C.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=C.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=I.get(r[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(e)}});var F,H,B=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,j=["Top","Right","Bottom","Left"],q=function(t,e){return t=e||t,"none"===C.css(t,"display")||!C.contains(t.ownerDocument,t)},W=/^(?:checkbox|radio)$/i;F=y.createDocumentFragment().appendChild(y.createElement("div")),(H=y.createElement("input")).setAttribute("type","radio"),H.setAttribute("checked","checked"),H.setAttribute("name","t"),F.appendChild(H),v.checkClone=F.cloneNode(!0).cloneNode(!0).lastChild.checked,F.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!F.cloneNode(!0).lastChild.defaultValue;var V="undefined";v.focusinBubbles="onfocusin"in f;var Z=/^key/,G=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,K=/^([^.]*)(?:\.(.+)|)$/;function X(){return!0}function J(){return!1}function Q(){try{return y.activeElement}catch(t){}}C.event={global:{},add:function(e,t,n,i,o){var r,s,a,l,u,c,h,d,p,f,m,g=I.get(e);if(g)for(n.handler&&(n=(r=n).handler,o=r.selector),n.guid||(n.guid=C.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return typeof C!==V&&C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(L)||[""]).length;u--;)p=m=(a=K.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p&&(h=C.event.special[p]||{},p=(o?h.delegateType:h.bindType)||p,h=C.event.special[p]||{},c=C.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&C.expr.match.needsContext.test(o),namespace:f.join(".")},r),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,f,s)||e.addEventListener&&e.addEventListener(p,s,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,c):d.push(c),C.event.global[p]=!0)},remove:function(t,e,n,i,o){var r,s,a,l,u,c,h,d,p,f,m,g=I.hasData(t)&&I.get(t);if(g&&(l=g.events)){for(u=(e=(e||"").match(L)||[""]).length;u--;)if(p=m=(a=K.exec(e[u])||[])[1],f=(a[2]||"").split(".").sort(),p){for(h=C.event.special[p]||{},d=l[p=(i?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)c=d[r],!o&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(r,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,g.handle)||C.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)C.event.remove(t,p+e[u],n,i,!0);C.isEmptyObject(l)&&(delete g.handle,I.remove(t,"events"))}},trigger:function(t,e,n,i){var o,r,s,a,l,u,c,h=[n||y],d=g.call(t,"type")?t.type:t,p=g.call(t,"namespace")?t.namespace.split("."):[];if(r=s=n=n||y,3!==n.nodeType&&8!==n.nodeType&&!Y.test(d+C.event.triggered)&&(0<=d.indexOf(".")&&(d=(p=d.split(".")).shift(),p.sort()),l=d.indexOf(":")<0&&"on"+d,(t=t[C.expando]?t:new C.Event(d,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:C.makeArray(e,[t]),c=C.event.special[d]||{},i||!c.trigger||!1!==c.trigger.apply(n,e))){if(!i&&!c.noBubble&&!C.isWindow(n)){for(a=c.delegateType||d,Y.test(a+d)||(r=r.parentNode);r;r=r.parentNode)h.push(r),s=r;s===(n.ownerDocument||y)&&h.push(s.defaultView||s.parentWindow||f)}for(o=0;(r=h[o++])&&!t.isPropagationStopped();)t.type=1<o?a:c.bindType||d,(u=(I.get(r,"events")||{})[t.type]&&I.get(r,"handle"))&&u.apply(r,e),(u=l&&r[l])&&u.apply&&C.acceptData(r)&&(t.result=u.apply(r,e),!1===t.result&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(h.pop(),e)||!C.acceptData(n)||l&&C.isFunction(n[d])&&!C.isWindow(n)&&((s=n[l])&&(n[l]=null),n[C.event.triggered=d](),C.event.triggered=void 0,s&&(n[l]=s)),t.result}},dispatch:function(t){t=C.event.fix(t);var e,n,i,o,r,s,a=c.call(arguments),l=(I.get(this,"events")||{})[t.type]||[],u=C.event.special[t.type]||{};if((a[0]=t).delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(s=C.event.handlers.call(this,t,l),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(r.namespace)||(t.handleObj=r,t.data=r.data,void 0!==(i=((C.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,r,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==t.type){for(i=[],n=0;n<a;n++)void 0===i[o=(r=e[n]).selector+" "]&&(i[o]=r.needsContext?0<=C(o,this).index(l):C.find(o,this,null,[l]).length),i[o]&&i.push(r);i.length&&s.push({elem:l,handlers:i})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,r=e.button;return null==t.pageX&&null!=e.clientX&&(i=(n=t.target.ownerDocument||y).documentElement,o=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[C.expando])return t;var e,n,i,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=G.test(o)?this.mouseHooks:Z.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new C.Event(r),e=i.length;e--;)t[n=i[e]]=r[n];return t.target||(t.target=y),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Q()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Q()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&C.nodeName(this,"input"))return this.click(),!1},_default:function(t){return C.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=C.extend(new C.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?C.event.trigger(o,null,e):C.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},C.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},C.Event=function(t,e){if(!(this instanceof C.Event))return new C.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?X:J):this.type=t,e&&C.extend(this,e),this.timeStamp=t&&t.timeStamp||C.now(),this[C.expando]=!0},C.Event.prototype={isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=X,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=X,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=X,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){C.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||C.contains(this,n))||(t.type=i.origType,e=i.handler.apply(this,arguments),t.type=o),e}}}),v.focusinBubbles||C.each({focus:"focusin",blur:"focusout"},function(n,i){var o=function(t){C.event.simulate(i,t.target,C.event.fix(t),!0)};C.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=I.access(t,i);e||t.addEventListener(n,o,!0),I.access(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=I.access(t,i)-1;e?I.access(t,i,e):(t.removeEventListener(n,o,!0),I.remove(t,i))}}}),C.fn.extend({on:function(t,e,n,i,o){var r,s;if("object"==typeof t){for(s in"string"!=typeof e&&(n=n||e,e=void 0),t)this.on(s,e,n,t[s],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),!1===i)i=J;else if(!i)return this;return 1===o&&(r=i,(i=function(t){return C().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=C.guid++)),this.each(function(){C.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,C(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=J),this.each(function(){C.event.remove(this,t,n,e)});for(o in t)this.off(o,e,t[o]);return this},trigger:function(t,e){return this.each(function(){C.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return C.event.trigger(t,e,n,!0)}});var tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,et=/<([\w:]+)/,nt=/<|&#?\w+;/,it=/<(?:script|style|link)/i,ot=/checked\s*(?:[^=]|=\s*.checked.)/i,rt=/^$|\/(?:java|ecma)script/i,st=/^true\/(.*)/,at=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,lt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ut(t,e){return C.nodeName(t,"table")&&C.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function ct(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function ht(t){var e=st.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function dt(t,e){for(var n=0,i=t.length;n<i;n++)I.set(t[n],"globalEval",!e||I.get(e[n],"globalEval"))}function pt(t,e){var n,i,o,r,s,a,l,u;if(1===e.nodeType){if(I.hasData(t)&&(r=I.access(t),s=I.set(e,r),u=r.events))for(o in delete s.handle,s.events={},u)for(n=0,i=u[o].length;n<i;n++)C.event.add(e,o,u[o][n]);N.hasData(t)&&(a=N.access(t),l=C.extend({},a),N.set(e,l))}}function ft(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&C.nodeName(t,e)?C.merge([t],n):n}lt.optgroup=lt.option,lt.tbody=lt.tfoot=lt.colgroup=lt.caption=lt.thead,lt.th=lt.td,C.extend({clone:function(t,e,n){var i,o,r,s,a,l,u,c=t.cloneNode(!0),h=C.contains(t.ownerDocument,t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||C.isXMLDoc(t)))for(s=ft(c),i=0,o=(r=ft(t)).length;i<o;i++)a=r[i],l=s[i],void 0,"input"===(u=l.nodeName.toLowerCase())&&W.test(a.type)?l.checked=a.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=a.defaultValue);if(e)if(n)for(r=r||ft(t),s=s||ft(c),i=0,o=r.length;i<o;i++)pt(r[i],s[i]);else pt(t,c);return 0<(s=ft(c,"script")).length&&dt(s,!h&&ft(t,"script")),c},buildFragment:function(t,e,n,i){for(var o,r,s,a,l,u,c=e.createDocumentFragment(),h=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===C.type(o))C.merge(h,o.nodeType?[o]:o);else if(nt.test(o)){for(r=r||c.appendChild(e.createElement("div")),s=(et.exec(o)||["",""])[1].toLowerCase(),a=lt[s]||lt._default,r.innerHTML=a[1]+o.replace(tt,"<$1></$2>")+a[2],u=a[0];u--;)r=r.lastChild;C.merge(h,r.childNodes),(r=c.firstChild).textContent=""}else h.push(e.createTextNode(o));for(c.textContent="",d=0;o=h[d++];)if((!i||-1===C.inArray(o,i))&&(l=C.contains(o.ownerDocument,o),r=ft(c.appendChild(o),"script"),l&&dt(r),n))for(u=0;o=r[u++];)rt.test(o.type||"")&&n.push(o);return c},cleanData:function(t){for(var e,n,i,o,r=C.event.special,s=0;void 0!==(n=t[s]);s++){if(C.acceptData(n)&&(o=n[I.expando])&&(e=I.cache[o])){if(e.events)for(i in e.events)r[i]?C.event.remove(n,i):C.removeEvent(n,i,e.handle);I.cache[o]&&delete I.cache[o]}delete N.cache[n[N.expando]]}}}),C.fn.extend({text:function(t){return A(this,function(t){return void 0===t?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ut(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=ut(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?C.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||C.cleanData(ft(n)),n.parentNode&&(e&&C.contains(n.ownerDocument,n)&&dt(ft(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(C.cleanData(ft(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return C.clone(this,t,e)})},html:function(t){return A(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!it.test(t)&&!lt[(et.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(tt,"<$1></$2>");try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(C.cleanData(ft(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,C.cleanData(ft(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(n,i){n=m.apply([],n);var t,e,o,r,s,a,l=0,u=this.length,c=this,h=u-1,d=n[0],p=C.isFunction(d);if(p||1<u&&"string"==typeof d&&!v.checkClone&&ot.test(d))return this.each(function(t){var e=c.eq(t);p&&(n[0]=d.call(this,t,e.html())),e.domManip(n,i)});if(u&&(e=(t=C.buildFragment(n,this[0].ownerDocument,!1,this)).firstChild,1===t.childNodes.length&&(t=e),e)){for(r=(o=C.map(ft(t,"script"),ct)).length;l<u;l++)s=t,l!==h&&(s=C.clone(s,!0,!0),r&&C.merge(o,ft(s,"script"))),i.call(this[l],s,l);if(r)for(a=o[o.length-1].ownerDocument,C.map(o,ht),l=0;l<r;l++)s=o[l],rt.test(s.type||"")&&!I.access(s,"globalEval")&&C.contains(a,s)&&(s.src?C._evalUrl&&C._evalUrl(s.src):C.globalEval(s.textContent.replace(at,"")))}return this}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){C.fn[t]=function(t){for(var e,n=[],i=C(t),o=i.length-1,r=0;r<=o;r++)e=r===o?this:this.clone(!0),C(i[r])[s](e),a.apply(n,e.get());return this.pushStack(n)}});var mt,gt={};function vt(t,e){var n,i=C(e.createElement(t)).appendTo(e.body),o=f.getDefaultComputedStyle&&(n=f.getDefaultComputedStyle(i[0]))?n.display:C.css(i[0],"display");return i.detach(),o}function yt(t){var e=y,n=gt[t];return n||("none"!==(n=vt(t,e))&&n||((e=(mt=(mt||C("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),n=vt(t,e),mt.detach()),gt[t]=n),n}var bt=/^margin/,_t=new RegExp("^("+B+")(?!px)[a-z%]+$","i"),wt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):f.getComputedStyle(t,null)};function xt(t,e,n){var i,o,r,s,a=t.style;return(n=n||wt(t))&&(s=n.getPropertyValue(e)||n[e]),n&&(""!==s||C.contains(t.ownerDocument,t)||(s=C.style(t,e)),_t.test(s)&&bt.test(e)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function Ct(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){var e,n,i=y.documentElement,o=y.createElement("div"),r=y.createElement("div");function t(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r.innerHTML="",i.appendChild(o);var t=f.getComputedStyle(r,null);e="1%"!==t.top,n="4px"===t.width,i.removeChild(o)}r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===r.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(r),f.getComputedStyle&&C.extend(v,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return null==n&&t(),n},reliableMarginRight:function(){var t,e=r.appendChild(y.createElement("div"));return e.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",r.style.width="1px",i.appendChild(o),t=!parseFloat(f.getComputedStyle(e,null).marginRight),i.removeChild(o),r.removeChild(e),t}}))}(),C.swap=function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in o=n.apply(t,i||[]),e)t.style[r]=s[r];return o};var kt=/^(none|table(?!-c[ea]).+)/,$t=new RegExp("^("+B+")(.*)$","i"),Tt=new RegExp("^([+-])=("+B+")","i"),St={position:"absolute",visibility:"hidden",display:"block"},Mt={letterSpacing:"0",fontWeight:"400"},Dt=["Webkit","O","Moz","ms"];function Lt(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),i=e,o=Dt.length;o--;)if((e=Dt[o]+n)in t)return e;return i}function Et(t,e,n){var i=$t.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function Pt(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,s=0;r<4;r+=2)"margin"===n&&(s+=C.css(t,n+j[r],!0,o)),i?("content"===n&&(s-=C.css(t,"padding"+j[r],!0,o)),"margin"!==n&&(s-=C.css(t,"border"+j[r]+"Width",!0,o))):(s+=C.css(t,"padding"+j[r],!0,o),"padding"!==n&&(s+=C.css(t,"border"+j[r]+"Width",!0,o)));return s}function At(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=wt(t),s="border-box"===C.css(t,"boxSizing",!1,r);if(o<=0||null==o){if(((o=xt(t,e,r))<0||null==o)&&(o=t.style[e]),_t.test(o))return o;i=s&&(v.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+Pt(t,e,n||(s?"border":"content"),i,r)+"px"}function Ot(t,e){for(var n,i,o,r=[],s=0,a=t.length;s<a;s++)(i=t[s]).style&&(r[s]=I.get(i,"olddisplay"),n=i.style.display,e?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&q(i)&&(r[s]=I.access(i,"olddisplay",yt(i.nodeName)))):(o=q(i),"none"===n&&o||I.set(i,"olddisplay",o?n:C.css(i,"display"))));for(s=0;s<a;s++)(i=t[s]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[s]||"":"none"));return t}function It(t,e,n,i,o){return new It.prototype.init(t,e,n,i,o)}C.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=xt(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=C.camelCase(e),l=t.style;if(e=C.cssProps[a]||(C.cssProps[a]=Lt(l,a)),s=C.cssHooks[e]||C.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:l[e];"string"===(r=typeof n)&&(o=Tt.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(C.css(t,e)),r="number"),null!=n&&n==n&&("number"!==r||C.cssNumber[a]||(n+="px"),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l[e]=n))}},css:function(t,e,n,i){var o,r,s,a=C.camelCase(e);return e=C.cssProps[a]||(C.cssProps[a]=Lt(t.style,a)),(s=C.cssHooks[e]||C.cssHooks[a])&&"get"in s&&(o=s.get(t,!0,n)),void 0===o&&(o=xt(t,e,i)),"normal"===o&&e in Mt&&(o=Mt[e]),""===n||n?(r=parseFloat(o),!0===n||C.isNumeric(r)?r||0:o):o}}),C.each(["height","width"],function(t,o){C.cssHooks[o]={get:function(t,e,n){if(e)return kt.test(C.css(t,"display"))&&0===t.offsetWidth?C.swap(t,St,function(){return At(t,o,n)}):At(t,o,n)},set:function(t,e,n){var i=n&&wt(t);return Et(0,e,n?Pt(t,o,n,"border-box"===C.css(t,"boxSizing",!1,i),i):0)}}}),C.cssHooks.marginRight=Ct(v.reliableMarginRight,function(t,e){if(e)return C.swap(t,{display:"inline-block"},xt,[t,"marginRight"])}),C.each({margin:"",padding:"",border:"Width"},function(o,r){C.cssHooks[o+r]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[o+j[e]+r]=i[e]||i[e-2]||i[0];return n}},bt.test(o)||(C.cssHooks[o+r].set=Et)}),C.fn.extend({css:function(t,e){return A(this,function(t,e,n){var i,o,r={},s=0;if(C.isArray(e)){for(i=wt(t),o=e.length;s<o;s++)r[e[s]]=C.css(t,e[s],!1,i);return r}return void 0!==n?C.style(t,e,n):C.css(t,e)},t,e,1<arguments.length)},show:function(){return Ot(this,!0)},hide:function(){return Ot(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){q(this)?C(this).show():C(this).hide()})}}),((C.Tween=It).prototype={constructor:It,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(C.cssNumber[n]?"":"px")},cur:function(){var t=It.propHooks[this.prop];return t&&t.get?t.get(this):It.propHooks._default.get(this)},run:function(t){var e,n=It.propHooks[this.prop];return this.options.duration?this.pos=e=C.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):It.propHooks._default.set(this),this}}).init.prototype=It.prototype,(It.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=C.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){C.fx.step[t.prop]?C.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[C.cssProps[t.prop]]||C.cssHooks[t.prop])?C.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}}).scrollTop=It.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},C.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},C.fx=It.prototype.init,C.fx.step={};var Nt,Rt,zt,Ut,Ft,Ht=/^(?:toggle|show|hide)$/,Bt=new RegExp("^(?:([+-])=|)("+B+")([a-z%]*)$","i"),jt=/queueHooks$/,qt=[function(e,t,n){var i,o,r,s,a,l,u,c=this,h={},d=e.style,p=e.nodeType&&q(e),f=I.get(e,"fxshow");n.queue||(null==(a=C._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,C.queue(e,"fx").length||a.empty.fire()})}));1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],u=C.css(e,"display"),"inline"===("none"===u?I.get(e,"olddisplay")||yt(e.nodeName):u)&&"none"===C.css(e,"float")&&(d.display="inline-block"));n.overflow&&(d.overflow="hidden",c.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],Ht.exec(o)){if(delete t[i],r=r||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!f||void 0===f[i])continue;p=!0}h[i]=f&&f[i]||C.style(e,i)}else u=void 0;if(C.isEmptyObject(h))"inline"===("none"===u?yt(e.nodeName):u)&&(d.display=u);else for(i in f?"hidden"in f&&(p=f.hidden):f=I.access(e,"fxshow",{}),r&&(f.hidden=!p),p?C(e).show():c.done(function(){C(e).hide()}),c.done(function(){var t;for(t in I.remove(e,"fxshow"),h)C.style(e,t,h[t])}),h)s=Gt(p?f[i]:0,i,c),i in f||(f[i]=s.start,p&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}],Wt={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=Bt.exec(e),r=o&&o[3]||(C.cssNumber[t]?"":"px"),s=(C.cssNumber[t]||"px"!==r&&+i)&&Bt.exec(C.css(n.elem,t)),a=1,l=20;if(s&&s[3]!==r)for(r=r||s[3],o=o||[],s=+i||1;s/=a=a||".5",C.style(n.elem,t,s+r),a!==(a=n.cur()/i)&&1!==a&&--l;);return o&&(s=n.start=+s||+i||0,n.unit=r,n.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),n}]};function Vt(){return setTimeout(function(){Nt=void 0}),Nt=C.now()}function Zt(t,e){var n,i=0,o={height:t};for(e=e?1:0;i<4;i+=2-e)o["margin"+(n=j[i])]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function Gt(t,e,n){for(var i,o=(Wt[e]||[]).concat(Wt["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,e,t))return i}function Yt(r,t,e){var n,s,i=0,o=qt.length,a=C.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=Nt||Vt(),e=Math.max(0,u.startTime+u.duration-t),n=1-(e/u.duration||0),i=0,o=u.tweens.length;i<o;i++)u.tweens[i].run(n);return a.notifyWith(r,[u,n,e]),n<1&&o?e:(a.resolveWith(r,[u]),!1)},u=a.promise({elem:r,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{}},e),originalProperties:t,originalOptions:e,startTime:Nt||Vt(),duration:e.duration,tweens:[],createTween:function(t,e){var n=C.Tween(r,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var e=0,n=t?u.tweens.length:0;if(s)return this;for(s=!0;e<n;e++)u.tweens[e].run(1);return t?a.resolveWith(r,[u,t]):a.rejectWith(r,[u,t]),this}}),c=u.props;for(!function(t,e){var n,i,o,r,s;for(n in t)if(o=e[i=C.camelCase(n)],r=t[n],C.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(s=C.cssHooks[i])&&"expand"in s)for(n in r=s.expand(r),delete t[i],r)n in t||(t[n]=r[n],e[n]=o);else e[i]=o}(c,u.opts.specialEasing);i<o;i++)if(n=qt[i].call(u,r,c,u.opts))return n;return C.map(c,Gt,u),C.isFunction(u.opts.start)&&u.opts.start.call(r,u),C.fx.timer(C.extend(l,{elem:r,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}C.Animation=C.extend(Yt,{tweener:function(t,e){for(var n,i=0,o=(t=C.isFunction(t)?(e=t,["*"]):t.split(" ")).length;i<o;i++)n=t[i],Wt[n]=Wt[n]||[],Wt[n].unshift(e)},prefilter:function(t,e){e?qt.unshift(t):qt.push(t)}}),C.speed=function(t,e,n){var i=t&&"object"==typeof t?C.extend({},t):{complete:n||!n&&e||C.isFunction(t)&&t,duration:t,easing:n&&e||e&&!C.isFunction(e)&&e};return i.duration=C.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in C.fx.speeds?C.fx.speeds[i.duration]:C.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){C.isFunction(i.old)&&i.old.call(this),i.queue&&C.dequeue(this,i.queue)},i},C.fn.extend({fadeTo:function(t,e,n,i){return this.filter(q).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var o=C.isEmptyObject(e),r=C.speed(t,n,i),s=function(){var t=Yt(this,C.extend({},e),r);(o||I.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(o,t,r){var s=function(t){var e=t.stop;delete t.stop,e(r)};return"string"!=typeof o&&(r=t,t=o,o=void 0),t&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var t=!0,e=null!=o&&o+"queueHooks",n=C.timers,i=I.get(this);if(e)i[e]&&i[e].stop&&s(i[e]);else for(e in i)i[e]&&i[e].stop&&jt.test(e)&&s(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=o&&n[e].queue!==o||(n[e].anim.stop(r),t=!1,n.splice(e,1));!t&&r||C.dequeue(this,o)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=I.get(this),n=e[s+"queue"],i=e[s+"queueHooks"],o=C.timers,r=n?n.length:0;for(e.finish=!0,C.queue(this,s,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===s&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),C.each(["toggle","show","hide"],function(t,i){var o=C.fn[i];C.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(Zt(i,!0),t,e,n)}}),C.each({slideDown:Zt("show"),slideUp:Zt("hide"),slideToggle:Zt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){C.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),C.timers=[],C.fx.tick=function(){var t,e=0,n=C.timers;for(Nt=C.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||C.fx.stop(),Nt=void 0},C.fx.timer=function(t){C.timers.push(t),t()?C.fx.start():C.timers.pop()},C.fx.interval=13,C.fx.start=function(){Rt||(Rt=setInterval(C.fx.tick,C.fx.interval))},C.fx.stop=function(){clearInterval(Rt),Rt=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(i,t){return i=C.fx&&C.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=setTimeout(t,i);e.stop=function(){clearTimeout(n)}})},zt=y.createElement("input"),Ut=y.createElement("select"),Ft=Ut.appendChild(y.createElement("option")),zt.type="checkbox",v.checkOn=""!==zt.value,v.optSelected=Ft.selected,Ut.disabled=!0,v.optDisabled=!Ft.disabled,(zt=y.createElement("input")).value="t",zt.type="radio",v.radioValue="t"===zt.value;var Kt,Xt=C.expr.attrHandle;C.fn.extend({attr:function(t,e){return A(this,C.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){C.removeAttr(this,t)})}}),C.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===V?C.prop(t,e,n):(1===r&&C.isXMLDoc(t)||(e=e.toLowerCase(),i=C.attrHooks[e]||(C.expr.match.bool.test(e)?Kt:void 0)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:null==(o=C.find.attr(t,e))?void 0:o:null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void C.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(L);if(r&&1===t.nodeType)for(;n=r[o++];)i=C.propFix[n]||n,C.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&C.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),Kt={set:function(t,e,n){return!1===e?C.removeAttr(t,n):t.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),function(t,e){var r=Xt[e]||C.find.attr;Xt[e]=function(t,e,n){var i,o;return n||(o=Xt[e],Xt[e]=i,i=null!=r(t,e,n)?e.toLowerCase():null,Xt[e]=o),i}});var Jt=/^(?:input|select|textarea|button)$/i;C.fn.extend({prop:function(t,e){return A(this,C.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[C.propFix[t]||t]})}}),C.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return(1!==r||!C.isXMLDoc(t))&&(e=C.propFix[e]||e,o=C.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||Jt.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),v.optSelected||(C.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this});var Qt=/[\t\r\n\f]/g;C.fn.extend({addClass:function(e){var t,n,i,o,r,s,a="string"==typeof e&&e,l=0,u=this.length;if(C.isFunction(e))return this.each(function(t){C(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(L)||[];l<u;l++)if(i=1===(n=this[l]).nodeType&&(n.className?(" "+n.className+" ").replace(Qt," "):" ")){for(r=0;o=t[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=C.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,i,o,r,s,a=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(C.isFunction(e))return this.each(function(t){C(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(L)||[];l<u;l++)if(i=1===(n=this[l]).nodeType&&(n.className?(" "+n.className+" ").replace(Qt," "):"")){for(r=0;o=t[r++];)for(;0<=i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");s=e?C.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(o,e){var r=typeof o;return"boolean"==typeof e&&"string"===r?e?this.addClass(o):this.removeClass(o):C.isFunction(o)?this.each(function(t){C(this).toggleClass(o.call(this,t,this.className,e),e)}):this.each(function(){if("string"===r)for(var t,e=0,n=C(this),i=o.match(L)||[];t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else r!==V&&"boolean"!==r||(this.className&&I.set(this,"__className__",this.className),this.className=this.className||!1===o?"":I.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(Qt," ").indexOf(e))return!0;return!1}});var te=/\r/g;C.fn.extend({val:function(n){var i,t,o,e=this[0];return arguments.length?(o=C.isFunction(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=o?n.call(this,t,C(this).val()):n)?e="":"number"==typeof e?e+="":C.isArray(e)&&(e=C.map(e,function(t){return null==t?"":t+""})),(i=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):e?(i=C.valHooks[e.type]||C.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&void 0!==(t=i.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(te,""):null==t?"":t:void 0}}),C.extend({valHooks:{option:{get:function(t){var e=C.find.attr(t,"value");return null!=e?e:C.trim(C.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||o<0,s=r?null:[],a=r?o+1:i.length,l=o<0?a:r?o:0;l<a;l++)if(((n=i[l]).selected||l===o)&&(v.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!C.nodeName(n.parentNode,"optgroup"))){if(e=C(n).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var n,i,o=t.options,r=C.makeArray(e),s=o.length;s--;)((i=o[s]).selected=0<=C.inArray(i.value,r))&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(t,e){if(C.isArray(e))return t.checked=0<=C.inArray(C(t).val(),e)}},v.checkOn||(C.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),C.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,n){C.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),C.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var ee=C.now(),ne=/\?/;C.parseJSON=function(t){return JSON.parse(t+"")},C.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+t),e};var ie=/#.*$/,oe=/([?&])_=[^&]*/,re=/^(.*?):[ \t]*([^\r\n]*)$/gm,se=/^(?:GET|HEAD)$/,ae=/^\/\//,le=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ue={},ce={},he="*/".concat("*"),de=f.location.href,pe=le.exec(de.toLowerCase())||[];function fe(r){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,o=t.toLowerCase().match(L)||[];if(C.isFunction(e))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(r[n]=r[n]||[]).unshift(e)):(r[n]=r[n]||[]).push(e)}}function me(e,o,r,s){var a={},l=e===ce;function u(t){var i;return a[t]=!0,C.each(e[t]||[],function(t,e){var n=e(o,r,s);return"string"!=typeof n||l||a[n]?l?!(i=n):void 0:(o.dataTypes.unshift(n),u(n),!1)}),i}return u(o.dataTypes[0])||!a["*"]&&u("*")}function ge(t,e){var n,i,o=C.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&C.extend(!0,t,i),t}C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:de,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pe[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":he,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":C.parseJSON,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ge(ge(t,C.ajaxSettings),e):ge(C.ajaxSettings,t)},ajaxPrefilter:fe(ue),ajaxTransport:fe(ce),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var c,h,d,n,p,i,f,o,m=C.ajaxSetup({},e),g=m.context||m,v=m.context&&(g.nodeType||g.jquery)?C(g):C.event,y=C.Deferred(),b=C.Callbacks("once memory"),_=m.statusCode||{},r={},s={},w=0,a="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!n)for(n={};e=re.exec(d);)n[e[1].toLowerCase()]=e[2];e=n[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?d:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=s[n]=s[n]||t,r[t]=e),this},overrideMimeType:function(t){return w||(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(w<2)for(e in t)_[e]=[_[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||a;return c&&c.abort(e),l(0,e),this}};if(y.promise(x).complete=b.add,x.success=x.done,x.error=x.fail,m.url=((t||m.url||de)+"").replace(ie,"").replace(ae,pe[1]+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=C.trim(m.dataType||"*").toLowerCase().match(L)||[""],null==m.crossDomain&&(i=le.exec(m.url.toLowerCase()),m.crossDomain=!(!i||i[1]===pe[1]&&i[2]===pe[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(pe[3]||("http:"===pe[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=C.param(m.data,m.traditional)),me(ue,m,e,x),2===w)return x;for(o in(f=C.event&&m.global)&&0==C.active++&&C.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!se.test(m.type),h=m.url,m.hasContent||(m.data&&(h=m.url+=(ne.test(h)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=oe.test(h)?h.replace(oe,"$1_="+ee++):h+(ne.test(h)?"&":"?")+"_="+ee++)),m.ifModified&&(C.lastModified[h]&&x.setRequestHeader("If-Modified-Since",C.lastModified[h]),C.etag[h]&&x.setRequestHeader("If-None-Match",C.etag[h])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+he+"; q=0.01":""):m.accepts["*"]),m.headers)x.setRequestHeader(o,m.headers[o]);if(m.beforeSend&&(!1===m.beforeSend.call(g,x,m)||2===w))return x.abort();for(o in a="abort",{success:1,error:1,complete:1})x[o](m[o]);if(c=me(ce,m,e,x)){x.readyState=1,f&&v.trigger("ajaxSend",[x,m]),m.async&&0<m.timeout&&(p=setTimeout(function(){x.abort("timeout")},m.timeout));try{w=1,c.send(r,l)}catch(t){if(!(w<2))throw t;l(-1,t)}}else l(-1,"No Transport");function l(t,e,n,i){var o,r,s,a,l,u=e;2!==w&&(w=2,p&&clearTimeout(p),c=void 0,d=i||"",x.readyState=0<t?4:0,o=200<=t&&t<300||304===t,n&&(a=function(t,e,n){for(var i,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),n[r]}(m,x,n)),a=function(t,e,n,i){var o,r,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(r=c.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=c.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=u[l+" "+r]||u["* "+r]))for(o in u)if((a=o.split(" "))[1]===r&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[o]:!0!==u[o]&&(r=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(m,a,x,o),o?(m.ifModified&&((l=x.getResponseHeader("Last-Modified"))&&(C.lastModified[h]=l),(l=x.getResponseHeader("etag"))&&(C.etag[h]=l)),204===t||"HEAD"===m.type?u="nocontent":304===t?u="notmodified":(u=a.state,r=a.data,o=!(s=a.error))):(s=u,!t&&u||(u="error",t<0&&(t=0))),x.status=t,x.statusText=(e||u)+"",o?y.resolveWith(g,[r,u,x]):y.rejectWith(g,[x,u,s]),x.statusCode(_),_=void 0,f&&v.trigger(o?"ajaxSuccess":"ajaxError",[x,m,o?r:s]),b.fireWith(g,[x,u]),f&&(v.trigger("ajaxComplete",[x,m]),--C.active||C.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,n){return C.get(t,e,n,"json")},getScript:function(t,e){return C.get(t,void 0,e,"script")}}),C.each(["get","post"],function(t,o){C[o]=function(t,e,n,i){return C.isFunction(e)&&(i=i||n,n=e,e=void 0),C.ajax({url:t,type:o,dataType:i,data:e,success:n})}}),C._evalUrl=function(t){return C.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},C.fn.extend({wrapAll:function(e){var t;return C.isFunction(e)?this.each(function(t){C(this).wrapAll(e.call(this,t))}):(this[0]&&(t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(n){return C.isFunction(n)?this.each(function(t){C(this).wrapInner(n.call(this,t))}):this.each(function(){var t=C(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=C.isFunction(e);return this.each(function(t){C(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){C.nodeName(this,"body")||C(this).replaceWith(this.childNodes)}).end()}}),C.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},C.expr.filters.visible=function(t){return!C.expr.filters.hidden(t)};var ve=/%20/g,ye=/\[\]$/,be=/\r?\n/g,_e=/^(?:submit|button|image|reset|file)$/i,we=/^(?:input|select|textarea|keygen)/i;function xe(n,t,i,o){var e;if(C.isArray(t))C.each(t,function(t,e){i||ye.test(n)?o(n,e):xe(n+"["+("object"==typeof e?t:"")+"]",e,i,o)});else if(i||"object"!==C.type(t))o(n,t);else for(e in t)xe(n+"["+e+"]",t[e],i,o)}C.param=function(t,e){var n,i=[],o=function(t,e){e=C.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=C.ajaxSettings&&C.ajaxSettings.traditional),C.isArray(t)||t.jquery&&!C.isPlainObject(t))C.each(t,function(){o(this.name,this.value)});else for(n in t)xe(n,t[n],e,o);return i.join("&").replace(ve,"+")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=C.prop(this,"elements");return t?C.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!C(this).is(":disabled")&&we.test(this.nodeName)&&!_e.test(t)&&(this.checked||!W.test(t))}).map(function(t,e){var n=C(this).val();return null==n?null:C.isArray(n)?C.map(n,function(t){return{name:e.name,value:t.replace(be,"\r\n")}}):{name:e.name,value:n.replace(be,"\r\n")}}).get()}}),C.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ce=0,ke={},$e={0:200,1223:204},Te=C.ajaxSettings.xhr();f.attachEvent&&f.attachEvent("onunload",function(){for(var t in ke)ke[t]()}),v.cors=!!Te&&"withCredentials"in Te,v.ajax=Te=!!Te,C.ajaxTransport(function(r){var s;if(v.cors||Te&&!r.crossDomain)return{send:function(t,e){var n,i=r.xhr(),o=++Ce;if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)i.setRequestHeader(n,t[n]);s=function(t){return function(){s&&(delete ke[o],s=i.onload=i.onerror=null,"abort"===t?i.abort():"error"===t?e(i.status,i.statusText):e($e[i.status]||i.status,i.statusText,"string"==typeof i.responseText?{text:i.responseText}:void 0,i.getAllResponseHeaders()))}},i.onload=s(),i.onerror=s("error"),s=ke[o]=s("abort");try{i.send(r.hasContent&&r.data||null)}catch(t){if(s)throw t}},abort:function(){s&&s()}}}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return C.globalEval(t),t}}}),C.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),C.ajaxTransport("script",function(n){var i,o;if(n.crossDomain)return{send:function(t,e){i=C("<script>").prop({async:!0,charset:n.scriptCharset,src:n.url}).on("load error",o=function(t){i.remove(),o=null,t&&e("error"===t.type?404:200,t.type)}),y.head.appendChild(i[0])},abort:function(){o&&o()}}});var Se=[],Me=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Se.pop()||C.expando+"_"+ee++;return this[t]=!0,t}}),C.ajaxPrefilter("json jsonp",function(t,e,n){var i,o,r,s=!1!==t.jsonp&&(Me.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Me.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=C.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Me,"$1"+i):!1!==t.jsonp&&(t.url+=(ne.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return r||C.error(i+" was not called"),r[0]},t.dataTypes[0]="json",o=f[i],f[i]=function(){r=arguments},n.always(function(){f[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,Se.push(i)),r&&C.isFunction(o)&&o(r[0]),r=o=void 0}),"script"}),C.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||y;var i=_.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=C.buildFragment([t],e,o),o&&o.length&&C(o).remove(),C.merge([],i.childNodes))};var De=C.fn.load;C.fn.load=function(t,e,n){if("string"!=typeof t&&De)return De.apply(this,arguments);var i,o,r,s=this,a=t.indexOf(" ");return 0<=a&&(i=C.trim(t.slice(a)),t=t.slice(0,a)),C.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),0<s.length&&C.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,s.html(i?C("<div>").append(C.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){s.each(n,r||[t.responseText,e,t])}),this},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){C.fn[e]=function(t){return this.on(e,t)}}),C.expr.filters.animated=function(e){return C.grep(C.timers,function(t){return e===t.elem}).length};var Le=f.document.documentElement;function Ee(t){return C.isWindow(t)?t:9===t.nodeType&&t.defaultView}C.offset={setOffset:function(t,e,n){var i,o,r,s,a,l,u=C.css(t,"position"),c=C(t),h={};"static"===u&&(t.style.position="relative"),a=c.offset(),r=C.css(t,"top"),l=C.css(t,"left"),o=("absolute"===u||"fixed"===u)&&-1<(r+l).indexOf("auto")?(s=(i=c.position()).top,i.left):(s=parseFloat(r)||0,parseFloat(l)||0),C.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+o),"using"in e?e.using.call(t,h):c.css(h)}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){C.offset.setOffset(this,e,t)});var t,n,i=this[0],o={top:0,left:0},r=i&&i.ownerDocument;return r?(t=r.documentElement,C.contains(t,i)?(typeof i.getBoundingClientRect!==V&&(o=i.getBoundingClientRect()),n=Ee(r),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o):void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===C.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),C.nodeName(t[0],"html")||(i=t.offset()),i.top+=C.css(t[0],"borderTopWidth",!0),i.left+=C.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-C.css(n,"marginTop",!0),left:e.left-i.left-C.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Le;t&&!C.nodeName(t,"html")&&"static"===C.css(t,"position");)t=t.offsetParent;return t||Le})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,o){var r="pageYOffset"===o;C.fn[e]=function(t){return A(this,function(t,e,n){var i=Ee(t);if(void 0===n)return i?i[o]:t[e];i?i.scrollTo(r?f.pageXOffset:n,r?n:f.pageYOffset):t[e]=n},e,t,arguments.length,null)}}),C.each(["top","left"],function(t,n){C.cssHooks[n]=Ct(v.pixelPosition,function(t,e){if(e)return e=xt(t,n),_t.test(e)?C(t).position()[n]+"px":e})}),C.each({Height:"height",Width:"width"},function(r,s){C.each({padding:"inner"+r,content:s,"":"outer"+r},function(i,t){C.fn[t]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),o=i||(!0===t||!0===e?"margin":"border");return A(this,function(t,e,n){var i;return C.isWindow(t)?t.document.documentElement["client"+r]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+r],i["scroll"+r],t.body["offset"+r],i["offset"+r],i["client"+r])):void 0===n?C.css(t,e,o):C.style(t,e,n,o)},s,n?t:void 0,n,null)}})}),C.fn.size=function(){return this.length},C.fn.andSelf=C.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var Pe=f.jQuery,Ae=f.$;return C.noConflict=function(t){return f.$===C&&(f.$=Ae),t&&f.jQuery===C&&(f.jQuery=Pe),C},typeof t===V&&(f.jQuery=f.$=C),C}),function(R){"use strict";function f(r,s){return s=s||Error,function(){var t,e,n=arguments,i=n[0],o="["+(r?r+":":"")+i+"] ";for(o+=n[1].replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1)+2;return e<n.length?Ut(n[e]):t}),o+="\nhttp://errors.angularjs.org/1.5.5/"+(r?r+"/":"")+i,e=2,t="?";e<n.length;e++,t="&")o+=t+"p"+(e-2)+"="+encodeURIComponent(Ut(n[e]));return new s(o)}}var r=/^\/(.+)\/([a-z]*)$/,h="validity",z=Object.prototype.hasOwnProperty,U=function(t){return pt(t)?t.toLowerCase():t},c=function(t){return pt(t)?t.toUpperCase():t};"i"!=="I".toLowerCase()&&(U=function(t){return pt(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},c=function(t){return pt(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t});var F,lt,s,g,a=[].slice,n=[].splice,t=[].push,C=Object.prototype.toString,l=Object.getPrototypeOf,u=f("ng"),$=R.angular||(R.angular={}),e=0;function O(t){if(null==t||L(t))return!1;if(ft(t)||pt(t)||lt&&t instanceof lt)return!0;var e="length"in Object(t)&&t.length;return w(e)&&(0<=e&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function ut(t,e,n){var i,o;if(t)if(mt(t))for(i in t)"prototype"==i||"length"==i||"name"==i||t.hasOwnProperty&&!t.hasOwnProperty(i)||e.call(n,t[i],i,t);else if(ft(t)||O(t)){var r="object"!=typeof t;for(i=0,o=t.length;i<o;i++)(r||i in t)&&e.call(n,t[i],i,t)}else if(t.forEach&&t.forEach!==ut)t.forEach(e,n,t);else if(_(t))for(i in t)e.call(n,t[i],i,t);else if("function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else for(i in t)z.call(t,i)&&e.call(n,t[i],i,t);return t}function d(t,e,n){for(var i=Object.keys(t).sort(),o=0;o<i.length;o++)e.call(n,t[i[o]],i[o]);return i}function v(n){return function(t,e){n(e,t)}}function T(){return++e}function p(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function m(t,e,n){for(var i=t.$$hashKey,o=0,r=e.length;o<r;++o){var s=e[o];if(dt(s)||mt(s))for(var a=Object.keys(s),l=0,u=a.length;l<u;l++){var c=a[l],h=s[c];n&&dt(h)?k(h)?t[c]=new Date(h.valueOf()):D(h)?t[c]=new RegExp(h):h.nodeName?t[c]=h.cloneNode(!0):I(h)?t[c]=h.clone():(dt(t[c])||(t[c]=ft(h)?[]:{}),m(t[c],[h],!0)):t[c]=h}}return p(t,i),t}function ct(t){return m(t,a.call(arguments,1),!1)}function i(t){return m(t,a.call(arguments,1),!0)}function y(t){return parseInt(t,10)}function H(t,e){return ct(Object.create(t),e)}function B(){}function x(t){return t}function S(t){return function(){return t}}function b(t){return mt(t.toString)&&t.toString!==C}function ht(t){return void 0===t}function M(t){return void 0!==t}function dt(t){return null!==t&&"object"==typeof t}function _(t){return null!==t&&"object"==typeof t&&!l(t)}function pt(t){return"string"==typeof t}function w(t){return"number"==typeof t}function k(t){return"[object Date]"===C.call(t)}F=R.document.documentMode,B.$inject=[],x.$inject=[];var ft=Array.isArray;function mt(t){return"function"==typeof t}function D(t){return"[object RegExp]"===C.call(t)}function L(t){return t&&t.window===t}function gt(t){return t&&t.$evalAsync&&t.$watch}function vt(t){return"boolean"==typeof t}function E(t){return t&&mt(t.then)}var P=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/;var yt=function(t){return pt(t)?t.trim():t},A=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function I(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function bt(t){return U(t.nodeName||t[0]&&t[0].nodeName)}function _t(t,e){var n=t.indexOf(e);return 0<=n&&t.splice(n,1),n}function N(t,n){var e,i,o=[],r=[];if(n){if((i=n)&&w(i.length)&&P.test(C.call(i))||(e=n,"[object ArrayBuffer]"===C.call(e)))throw u("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===n)throw u("cpi","Can't copy! Source and destination are identical.");return ft(n)?n.length=0:ut(n,function(t,e){"$$hashKey"!==e&&delete n[e]}),o.push(t),r.push(n),s(t,n)}return a(t);function s(t,e){var n,i=e.$$hashKey;if(ft(t))for(var o=0,r=t.length;o<r;o++)e.push(a(t[o]));else if(_(t))for(n in t)e[n]=a(t[n]);else if(t&&"function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&(e[n]=a(t[n]));else for(n in t)z.call(t,n)&&(e[n]=a(t[n]));return p(e,i),e}function a(t){if(!dt(t))return t;var e=o.indexOf(t);if(-1!==e)return r[e];if(L(t)||gt(t))throw u("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var n=!1,i=function(t){switch(C.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(a(t.buffer));case"[object ArrayBuffer]":if(t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e;case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(mt(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===i&&(i=ft(t)?[]:Object.create(l(t)),n=!0),o.push(t),r.push(i),n?s(t,i):i}}function j(t,e){if(ft(t)){e=e||[];for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}else if(dt(t))for(var o in e=e||{},t)"$"===o.charAt(0)&&"$"===o.charAt(1)||(e[o]=t[o]);return e||t}function wt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,i,o,r=typeof t;if(r==typeof e&&"object"==r){if(!ft(t)){if(k(t))return!!k(e)&&wt(t.getTime(),e.getTime());if(D(t))return!!D(e)&&t.toString()==e.toString();if(gt(t)||gt(e)||L(t)||L(e)||ft(e)||k(e)||D(e))return!1;for(i in o=At(),t)if("$"!==i.charAt(0)&&!mt(t[i])){if(!wt(t[i],e[i]))return!1;o[i]=!0}for(i in e)if(!(i in o)&&"$"!==i.charAt(0)&&M(e[i])&&!mt(e[i]))return!1;return!0}if(!ft(e))return!1;if((n=t.length)==e.length){for(i=0;i<n;i++)if(!wt(t[i],e[i]))return!1;return!0}}return!1}var q=function(){if(!M(q.rules)){var t=R.document.querySelector("[ng-csp]")||R.document.querySelector("[data-ng-csp]");if(t){var e=t.getAttribute("ng-csp")||t.getAttribute("data-ng-csp");q.rules={noUnsafeEval:!e||-1!==e.indexOf("no-unsafe-eval"),noInlineStyle:!e||-1!==e.indexOf("no-inline-style")}}else q.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return q.rules},W=function(){if(M(W.name_))return W.name_;var t,e,n,i,o=ot.length;for(e=0;e<o;++e)if(n=ot[e],t=R.document.querySelector("["+n.replace(":","\\:")+"jq]")){i=t.getAttribute(n+"jq");break}return W.name_=i};function V(t,e,n){return t.concat(a.call(e,n))}function xt(t,e){return a.call(t,e||0)}function Z(t,e){var n=2<arguments.length?xt(arguments,2):[];return!mt(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,V(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function o(t,e){var n=e;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?n=void 0:L(e)?n="$WINDOW":e&&R.document===e?n="$DOCUMENT":gt(e)&&(n="$SCOPE"),n}function G(t,e){if(!ht(t))return w(e)||(e=e?2:null),JSON.stringify(t,o,e)}function Y(t){return pt(t)?JSON.parse(t):t}var K=/:/g;function X(t,e){t=t.replace(K,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function J(t,e,n){n=n?-1:1;var i,o,r=t.getTimezoneOffset(),s=X(e,r);return i=t,o=n*(s-r),(i=new Date(i.getTime())).setMinutes(i.getMinutes()+o),i}function Ct(t){t=lt(t).clone();try{t.empty()}catch(t){}var e=lt("<div>").append(t).html();try{return t[0].nodeType===It?U(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+U(e)})}catch(t){return U(e)}}function Q(t){try{return decodeURIComponent(t)}catch(t){}}function tt(t){var o={};return ut((t||"").split("&"),function(t){var e,n,i;t&&(n=t=t.replace(/\+/g,"%20"),-1!==(e=t.indexOf("="))&&(n=t.substring(0,e),i=t.substring(e+1)),M(n=Q(n))&&(i=!M(i)||Q(i),z.call(o,n)?ft(o[n])?o[n].push(i):o[n]=[o[n],i]:o[n]=i))}),o}function et(t){var n=[];return ut(t,function(t,e){ft(t)?ut(t,function(t){n.push(it(e,!0)+(!0===t?"":"="+it(t,!0)))}):n.push(it(e,!0)+(!0===t?"":"="+it(t,!0)))}),n.length?n.join("&"):""}function nt(t){return it(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function it(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var ot=["ng-","data-ng-","ng:","x-ng-"];function rt(i,t){var o,r,e={};ut(ot,function(t){var e=t+"app";!o&&i.hasAttribute&&i.hasAttribute(e)&&(r=(o=i).getAttribute(e))}),ut(ot,function(t){var e,n=t+"app";!o&&(e=i.querySelector("["+n.replace(":","\\:")+"]"))&&(r=(o=e).getAttribute(n))}),o&&(e.strictDi=null!==function(t,e){var n,i,o=ot.length;for(i=0;i<o;++i)if(n=ot[i]+e,pt(n=t.getAttribute(n)))return n;return null}(o,"strict-di"),t(o,r?[r]:[],e))}function st(n,i,o){dt(o)||(o={});o=ct({strictDi:!1},o);var e=function(){if((n=lt(n)).injector()){var t=n[0]===R.document?"document":Ct(n);throw u("btstrpd","App already bootstrapped with this element '{0}'",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}(i=i||[]).unshift(["$provide",function(t){t.value("$rootElement",n)}]),o.debugInfoEnabled&&i.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),i.unshift("ng");var e=Ue(i,o.strictDi);return e.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply(function(){e.data("$injector",i),n(e)(t)})}]),e},t=/^NG_ENABLE_DEBUG_INFO!/,r=/^NG_DEFER_BOOTSTRAP!/;if(R&&t.test(R.name)&&(o.debugInfoEnabled=!0,R.name=R.name.replace(t,"")),R&&!r.test(R.name))return e();R.name=R.name.replace(r,""),$.resumeBootstrap=function(t){return ut(t,function(t){i.push(t)}),e()},mt($.resumeDeferredBootstrap)&&$.resumeDeferredBootstrap()}function at(){R.name="NG_ENABLE_DEBUG_INFO!"+R.name,R.location.reload()}function kt(t){var e=$.element(t).injector();if(!e)throw u("test","no injector found for element argument to getTestability");return e.get("$$testability")}var $t=/[A-Z]/g;function Tt(t,n){return n=n||"_",t.replace($t,function(t,e){return(e?n:"")+t.toLowerCase()})}var St=!1;function Mt(t,e,n){if(!t)throw u("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function Dt(t,e,n){return n&&ft(t)&&(t=t[t.length-1]),Mt(mt(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Lt(t,e){if("hasOwnProperty"===t)throw u("badname","hasOwnProperty is not a valid {0} name",e)}function Et(t,e,n){if(!e)return t;for(var i,o=e.split("."),r=t,s=o.length,a=0;a<s;a++)i=o[a],t&&(t=(r=t)[i]);return!n&&mt(t)?Z(r,t):t}function Pt(t){for(var e,n=t[0],i=t[t.length-1],o=1;n!==i&&(n=n.nextSibling);o++)(e||t[o]!==n)&&(e||(e=lt(a.call(t,0,o))),e.push(n));return e||t}function At(){return Object.create(null)}var Ot=1,It=3,Nt=8,Rt=9,zt=11;function Ut(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):ht(t)?"undefined":"string"!=typeof t?(e=t,n=[],JSON.stringify(e,function(t,e){if(dt(e=o(t,e))){if(0<=n.indexOf(e))return"...";n.push(e)}return e})):t;var e,n}var Ft={full:"1.5.5",major:1,minor:5,dot:5,codeName:"material-conspiration"};se.expando="ng339";var Ht=se.cache={},Bt=1,jt=function(t,e,n){t.addEventListener(e,n,!1)},qt=function(t,e,n){t.removeEventListener(e,n,!1)};se._data=function(t){return this.cache[t[this.expando]]||{}};var Wt=/([\:\-\_]+(.))/g,Vt=/^moz([A-Z])/,Zt={mouseleave:"mouseout",mouseenter:"mouseover"},Gt=f("jqLite");function Yt(t){return t.replace(Wt,function(t,e,n,i){return i?n.toUpperCase():n}).replace(Vt,"Moz$1")}var Kt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Xt=/<|&#?\w+;/,Jt=/<([\w:-]+)/,Qt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,te={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ee(t){return!Xt.test(t)}function ne(t){var e=t.nodeType;return e===Ot||!e||e===Rt}function ie(t,e){var n,i,o,r,s=e.createDocumentFragment(),a=[];if(ee(t))a.push(e.createTextNode(t));else{for(n=n||s.appendChild(e.createElement("div")),i=(Jt.exec(t)||["",""])[1].toLowerCase(),o=te[i]||te._default,n.innerHTML=o[1]+t.replace(Qt,"<$1></$2>")+o[2],r=o[0];r--;)n=n.lastChild;a=V(a,n.childNodes),(n=s.firstChild).textContent=""}return s.textContent="",s.innerHTML="",ut(a,function(t){s.appendChild(t)}),s}function oe(t,e){var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)}te.optgroup=te.option,te.tbody=te.tfoot=te.colgroup=te.caption=te.thead,te.th=te.td;var re=R.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function se(t){if(t instanceof se)return t;var e,n,i,o;if(pt(t)&&(t=yt(t),e=!0),!(this instanceof se)){if(e&&"<"!=t.charAt(0))throw Gt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new se(t)}ge(this,e?(n=t,i=i||R.document,(o=Kt.exec(n))?[i.createElement(o[1])]:(o=ie(n,i))?o.childNodes:[]):t)}function ae(t){return t.cloneNode(!0)}function le(t,e){if(e||ce(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),i=0,o=n.length;i<o;i++)ce(n[i])}function ue(n,t,i,e){if(M(e))throw Gt("offargs","jqLite#off() does not support the `selector` argument");var o=he(n),r=o&&o.events,s=o&&o.handle;if(s)if(t){var a=function(t){var e=r[t];M(i)&&_t(e||[],i),M(i)&&e&&0<e.length||(qt(n,t,s),delete r[t])};ut(t.split(" "),function(t){a(t),Zt[t]&&a(Zt[t])})}else for(t in r)"$destroy"!==t&&qt(n,t,s),delete r[t]}function ce(t,e){var n=t.ng339,i=n&&Ht[n];if(i){if(e)return void delete i.data[e];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),ue(t)),delete Ht[n],t.ng339=void 0}}function he(t,e){var n=t.ng339,i=n&&Ht[n];return e&&!i&&(t.ng339=n=++Bt,i=Ht[n]={events:{},data:{},handle:void 0}),i}function de(t,e,n){if(ne(t)){var i=M(n),o=!i&&e&&!dt(e),r=!e,s=he(t,!o),a=s&&s.data;if(i)a[e]=n;else{if(r)return a;if(o)return a&&a[e];ct(a,e)}}}function pe(t,e){return!!t.getAttribute&&-1<(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")}function fe(e,t){t&&e.setAttribute&&ut(t.split(" "),function(t){e.setAttribute("class",yt((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+yt(t)+" "," ")))})}function me(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");ut(e.split(" "),function(t){t=yt(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",yt(n))}}function ge(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;i<n;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function ve(t,e){return ye(t,"$"+(e||"ngController")+"Controller")}function ye(t,e,n){t.nodeType==Rt&&(t=t.documentElement);for(var i=ft(e)?e:[e];t;){for(var o=0,r=i.length;o<r;o++)if(M(n=lt.data(t,i[o])))return n;t=t.parentNode||t.nodeType===zt&&t.host}}function be(t){for(le(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function _e(t,e){e||le(t);var n=t.parentNode;n&&n.removeChild(t)}var we=se.prototype={ready:function(t){var e=!1;function n(){e||(e=!0,t())}"complete"===R.document.readyState?R.setTimeout(n):(this.on("DOMContentLoaded",n),se(R).on("load",n))},toString:function(){var e=[];return ut(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(t){return lt(0<=t?this[t]:this[this.length+t])},length:0,push:t,sort:[].sort,splice:[].splice},xe={};ut("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){xe[U(t)]=t});var Ce={};ut("input,select,option,textarea,button,form,details".split(","),function(t){Ce[t]=!0});var ke={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};function $e(t,e){var n=xe[e.toLowerCase()];return n&&Ce[bt(t)]&&n}function Te(t,e,n){n.call(t,e)}function Se(t,e,n){var i=e.relatedTarget;i&&(i===t||re.call(t,i))||n.call(t,e)}function Me(){this.$get=function(){return ct(se,{hasClass:function(t,e){return t.attr&&(t=t[0]),pe(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),me(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),fe(t,e)}})}}function De(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var i=typeof t;return n="function"==i||"object"==i&&null!==t?t.$$hashKey=i+":"+(e||T)():i+":"+t}function Le(t,e){if(e){var n=0;this.nextUid=function(){return++n}}ut(t,this.put,this)}ut({data:de,removeData:ce,hasData:function(t){for(var e in Ht[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)ce(t[e])}},function(t,e){se[e]=t}),ut({data:de,inheritedData:ye,scope:function(t){return lt.data(t,"$scope")||ye(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return lt.data(t,"$isolateScope")||lt.data(t,"$isolateScopeNoTemplate")},controller:ve,injector:function(t){return ye(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:pe,css:function(t,e,n){if(e=Yt(e),!M(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var i=t.nodeType;if(i!==It&&2!==i&&i!==Nt){var o=U(e);if(xe[o]){if(!M(n))return t[e]||(t.attributes.getNamedItem(e)||B).specified?o:void 0;n?(t[e]=!0,t.setAttribute(e,o)):(t[e]=!1,t.removeAttribute(o))}else if(M(n))t.setAttribute(e,n);else if(t.getAttribute){var r=t.getAttribute(e,2);return null===r?void 0:r}}},prop:function(t,e,n){if(!M(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(ht(e)){var n=t.nodeType;return n===Ot||n===It?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(ht(e)){if(t.multiple&&"select"===bt(t)){var n=[];return ut(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){if(ht(e))return t.innerHTML;le(t,!0),t.innerHTML=e},empty:be},function(u,t){se.prototype[t]=function(t,e){var n,i,o=this.length;if(u!==be&&ht(2==u.length&&u!==pe&&u!==ve?t:e)){if(dt(t)){for(n=0;n<o;n++)if(u===de)u(this[n],t);else for(i in t)u(this[n],i,t[i]);return this}for(var r=u.$dv,s=ht(r)?Math.min(o,1):o,a=0;a<s;a++){var l=u(this[a],t,e);r=r?r+l:l}return r}for(n=0;n<o;n++)u(this[n],t,e);return this}}),ut({removeData:ce,on:function(o,t,r,e){if(M(e))throw Gt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ne(o)){var a,l,n,i=he(o,!0),s=i.events,u=i.handle;u||(u=i.handle=(l=s,(n=function(t,e){t.isDefaultPrevented=function(){return t.defaultPrevented};var n=l[e||t.type],i=n?n.length:0;if(i){if(ht(t.immediatePropagationStopped)){var o=t.stopImmediatePropagation;t.stopImmediatePropagation=function(){t.immediatePropagationStopped=!0,t.stopPropagation&&t.stopPropagation(),o&&o.call(t)}}t.isImmediatePropagationStopped=function(){return!0===t.immediatePropagationStopped};var r=n.specialHandlerWrapper||Te;1<i&&(n=j(n));for(var s=0;s<i;s++)t.isImmediatePropagationStopped()||r(a,t,n[s])}}).elem=a=o,n));for(var c=0<=t.indexOf(" ")?t.split(" "):[t],h=c.length,d=function(t,e,n){var i=s[t];i||((i=s[t]=[]).specialHandlerWrapper=e,"$destroy"===t||n||jt(o,t,u)),i.push(r)};h--;)t=c[h],Zt[t]?(d(Zt[t],Se),d(t,void 0,!0)):d(t)}},off:ue,one:function(e,n,i){(e=lt(e)).on(n,function t(){e.off(n,i),e.off(n,t)}),e.on(n,i)},replaceWith:function(e,t){var n,i=e.parentNode;le(e),ut(new se(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(t){var e=[];return ut(t.childNodes,function(t){t.nodeType===Ot&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Ot||n===zt)for(var i=0,o=(e=new se(e)).length;i<o;i++){var r=e[i];t.appendChild(r)}},prepend:function(e,t){if(e.nodeType===Ot){var n=e.firstChild;ut(new se(t),function(t){e.insertBefore(t,n)})}},wrap:function(t,e){oe(t,lt(e).eq(0).clone()[0])},remove:_e,detach:function(t){_e(t,!0)},after:function(t,e){for(var n=t,i=t.parentNode,o=0,r=(e=new se(e)).length;o<r;o++){var s=e[o];i.insertBefore(s,n.nextSibling),n=s}},addClass:me,removeClass:fe,toggleClass:function(n,t,i){t&&ut(t.split(" "),function(t){var e=i;ht(e)&&(e=!pe(n,t)),(e?me:fe)(n,t)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==zt?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:ae,triggerHandler:function(e,t,n){var i,o,r,s=t.type||t,a=he(e),l=a&&a.events,u=l&&l[s];u&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:B,type:s,target:e},t.type&&(i=ct(i,t)),o=j(u),r=n?[i].concat(n):[i],ut(o,function(t){i.isImmediatePropagationStopped()||t.apply(e,r)}))}},function(s,t){se.prototype[t]=function(t,e,n){for(var i,o=0,r=this.length;o<r;o++)ht(i)?M(i=s(this[o],t,e,n))&&(i=lt(i)):ge(i,s(this[o],t,e,n));return M(i)?i:this},se.prototype.bind=se.prototype.on,se.prototype.unbind=se.prototype.off}),Le.prototype={put:function(t,e){this[De(t,this.nextUid)]=e},get:function(t){return this[De(t,this.nextUid)]},remove:function(t){var e=this[t=De(t,this.nextUid)];return delete this[t],e}};var Ee=[function(){this.$get=[function(){return Le}]}],Pe=/^([^\(]+?)=>/,Ae=/^[^\(]*\(\s*([^\)]*)\)/m,Oe=/,/,Ie=/^\s*(_?)(\S+?)\1\s*$/,Ne=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Re=f("$injector");function ze(t){var e=Function.prototype.toString.call(t).replace(Ne,"");return e.match(Pe)||e.match(Ae)}function Ue(t,u){u=!0===u;var o={},r="Provider",a=[],s=new Le([],!0),c={$provide:{provider:d(p),factory:d(f),service:d(function(t,e){return f(t,["$injector",function(t){return t.instantiate(e)}])}),value:d(function(t,e){return f(t,S(e),!1)}),constant:d(function(t,e){Lt(t,"constant"),c[t]=e,n[t]=e}),decorator:function(t,e){var n=l.get(t+r),i=n.$get;n.$get=function(){var t=h.invoke(i,n);return h.invoke(e,null,{$delegate:t})}}}},l=c.$injector=m(c,function(t,e){throw $.isString(e)&&a.push(e),Re("unpr","Unknown provider: {0}",a.join(" <- "))}),n={},e=m(n,function(t,e){var n=l.get(t+r,e);return h.invoke(n.$get,n,void 0,t)}),h=e;c["$injector"+r]={$get:S(e)};var i=function n(t){Mt(ht(t)||ft(t),"modulesToLoad","not an array");var i,o=[];ut(t,function(e){if(!s.get(e)){s.put(e,!0);try{pt(e)?(i=g(e),o=o.concat(n(i.requires)).concat(i._runBlocks),t(i._invokeQueue),t(i._configBlocks)):mt(e)?o.push(l.invoke(e)):ft(e)?o.push(l.invoke(e)):Dt(e,"module")}catch(t){throw ft(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1==t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),Re("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}function t(t){var e,n;for(e=0,n=t.length;e<n;e++){var i=t[e],o=l.get(i[0]);o[i[1]].apply(o,i[2])}}});return o}(t);return(h=e.get("$injector")).strictDi=u,ut(i,function(t){t&&h.invoke(t)}),h;function d(n){return function(t,e){if(!dt(t))return n(t,e);ut(t,v(n))}}function p(t,e){if(Lt(t,"service"),(mt(e)||ft(e))&&(e=l.instantiate(e)),!e.$get)throw Re("pget","Provider '{0}' must define $get factory method.",t);return c[t+r]=e}function f(t,e,n){return p(t,{$get:!1!==n?(i=t,o=e,function(){var t=h.invoke(o,this);if(ht(t))throw Re("undef","Provider '{0}' must return a value from $get factory method.",i);return t}):e});var i,o}function m(n,i){function l(e,t){if(n.hasOwnProperty(e)){if(n[e]===o)throw Re("cdep","Circular dependency found: {0}",e+" <- "+a.join(" <- "));return n[e]}try{return a.unshift(e),n[e]=o,n[e]=i(e,t)}catch(t){throw n[e]===o&&delete n[e],t}finally{a.shift()}}function s(t,e,n){for(var i=[],o=Ue.$$annotate(t,u,n),r=0,s=o.length;r<s;r++){var a=o[r];if("string"!=typeof a)throw Re("itkn","Incorrect injection token! Expected service name as string, got {0}",a);i.push(e&&e.hasOwnProperty(a)?e[a]:l(a,n))}return i}return{invoke:function(t,e,n,i){"string"==typeof n&&(i=n,n=null);var o,r=s(t,n,i);return ft(t)&&(t=t[t.length-1]),o=t,F<=11||"function"!=typeof o||!/^(?:class\s|constructor\()/.test(Function.prototype.toString.call(o))?t.apply(e,r):(r.unshift(null),new(Function.prototype.bind.apply(t,r)))},instantiate:function(t,e,n){var i=ft(t)?t[t.length-1]:t,o=s(t,e,n);return o.unshift(null),new(Function.prototype.bind.apply(i,o))},get:l,annotate:Ue.$$annotate,has:function(t){return c.hasOwnProperty(t+r)||n.hasOwnProperty(t)}}}}function Fe(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(i,o,r){var s=i.document;function a(t){if(t){t.scrollIntoView();var e=function(){var t=l.yOffset;if(mt(t))t=t();else if(I(t)){var e=t[0];t="fixed"!==i.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else w(t)||(t=0);return t}();if(e){var n=t.getBoundingClientRect().top;i.scrollBy(0,n-e)}}else i.scrollTo(0,0)}function l(t){var e,n,i;(t=pt(t)?t:o.hash())?(e=s.getElementById(t))?a(e):(n=s.getElementsByName(t),i=null,Array.prototype.some.call(n,function(t){if("a"===bt(t))return i=t,!0}),(e=i)?a(e):"top"===t&&a(null)):a(null)}return t&&r.$watch(function(){return o.hash()},function(t,e){var n,i;t===e&&""===t||(n=function(){r.$evalAsync(l)},"complete"===(i=i||R).document.readyState?i.setTimeout(n):lt(i).on("load",n))}),l}]}Ue.$$annotate=function(t,e,n){var i,o,r;if("function"==typeof t){if(!(i=t.$inject)){if(i=[],t.length){if(e)throw pt(n)&&n||(n=t.name||((r=ze(t))?"function("+(r[1]||"").replace(/[\s\r\n]+/," ")+")":"fn")),Re("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);ut(ze(t)[1].split(Oe),function(t){t.replace(Ie,function(t,e,n){i.push(n)})})}t.$inject=i}}else ft(t)?(Dt(t[o=t.length-1],"fn"),i=t.slice(0,o)):Dt(t,"fn",!0);return i};var He=f("$animate"),Be=1,je="ng-animate";function qe(t,e){return t||e?t?e?(ft(t)&&(t=t.join(" ")),ft(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function We(t){return dt(t)?t:{}}var Ve=function(){this.$get=B},Ze=function(){var m=new Le,g=[];this.$get=["$$AnimateRunner","$rootScope",function(h,d){return{enabled:B,on:B,off:B,pin:B,push:function(t,e,n,i){var o,r,s,a,l,u;i&&i(),(n=n||{}).from&&t.css(n.from),n.to&&t.css(n.to),(n.addClass||n.removeClass)&&(o=t,r=n.addClass,s=n.removeClass,a=m.get(o)||{},l=p(a,r,!0),u=p(a,s,!1),(l||u)&&(m.put(o,a),g.push(o),1===g.length&&d.$$postDigest(f)));var c=new h;return c.complete(),c}};function p(e,t,n){var i=!1;return t&&ut(t=pt(t)?t.split(" "):ft(t)?t:[],function(t){t&&(i=!0,e[t]=n)}),i}function f(){ut(g,function(t){var e=m.get(t);if(e){var n=function(t){pt(t)&&(t=t.split(" "));var e=At();return ut(t,function(t){t.length&&(e[t]=!0)}),e}(t.attr("class")),i="",o="";ut(e,function(t,e){t!==!!n[e]&&(t?i+=(i.length?" ":"")+e:o+=(o.length?" ":"")+e)}),ut(t,function(t){i&&me(t,i),o&&fe(t,o)}),m.remove(t)}}),g.length=0}}]},Ge=["$provide",function(i){var o=this;this.$$registeredAnimations=Object.create(null),this.register=function(t,e){if(t&&"."!==t.charAt(0))throw He("notcsel","Expecting class selector starting with '.' got '{0}'.",t);var n=t+"-animation";o.$$registeredAnimations[t.substr(1)]=n,i.factory(n,e)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null,this.$$classNameFilter&&new RegExp("(\\s+|\\/)"+je+"(\\s+|\\/)").test(this.$$classNameFilter.toString())))throw He("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',je);return this.$$classNameFilter},this.$get=["$$animateQueue",function(r){function o(t,e,n){if(n){var i=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===Be)return n}}(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:r.on,off:r.off,pin:r.pin,enabled:r.enabled,cancel:function(t){t.end&&t.end()},enter:function(t,e,n,i){return e=e&&lt(e),n=n&&lt(n),o(t,e=e||n.parent(),n),r.push(t,"enter",We(i))},move:function(t,e,n,i){return e=e&&lt(e),n=n&&lt(n),o(t,e=e||n.parent(),n),r.push(t,"move",We(i))},leave:function(t,e){return r.push(t,"leave",We(e),function(){t.remove()})},addClass:function(t,e,n){return(n=We(n)).addClass=qe(n.addclass,e),r.push(t,"addClass",n)},removeClass:function(t,e,n){return(n=We(n)).removeClass=qe(n.removeClass,e),r.push(t,"removeClass",n)},setClass:function(t,e,n,i){return(i=We(i)).addClass=qe(i.addClass,e),i.removeClass=qe(i.removeClass,n),r.push(t,"setClass",i)},animate:function(t,e,n,i,o){return(o=We(o)).from=o.from?ct(o.from,e):e,o.to=o.to?ct(o.to,n):n,i=i||"ng-inline-animate",o.tempClasses=qe(o.tempClasses,i),r.push(t,"animate",o)}}}]}],Ye=function(){this.$get=["$$rAF",function(e){var n=[];function i(t){n.push(t),1<n.length||e(function(){for(var t=0;t<n.length;t++)n[t]();n=[]})}return function(){var e=!1;return i(function(){e=!0}),function(t){e?t():i(t)}}}]},Ke=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(e,t,i,o,r){function n(t){this.setHost(t);var n=i();this._doneCallbacks=[],this._tick=function(t){var e=o[0];e&&e.hidden?r(t,0,!1):n(t)},this._state=0}return n.chain=function(t,n){var i=0;!function e(){if(i===t.length)return void n(!0);t[i](function(t){!1!==t?(i++,e()):n(!1)})}()},n.all=function(e,n){var i=0,o=!0;function r(t){o=o&&t,++i===e.length&&n(o)}ut(e,function(t){t.done(r)})},n.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:B,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){!1===t?n():e()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(e){2!==this._state&&(ut(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=2)}},n}]},Xe=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(s,t,a){return function(t,e){var n=e||{};n.$$prepared||(n=N(n)),n.cleanupStyles&&(n.from=n.to=null),n.from&&(t.css(n.from),n.from=null);var i,o=new a;return{start:r,end:r};function r(){return s(function(){!function(){n.addClass&&(t.addClass(n.addClass),n.addClass=null);n.removeClass&&(t.removeClass(n.removeClass),n.removeClass=null);n.to&&(t.css(n.to),n.to=null)}(),i||o.complete(),i=!0}),o}}}]};function Je(a,t,e,l){var u=this,c=a.location,h=a.history,i=a.setTimeout,n=a.clearTimeout,o={};u.isMock=!1;var r=0,s=[];function d(t){try{t.apply(null,xt(arguments,1))}finally{if(0===--r)for(;s.length;)try{s.pop()()}catch(t){e.error(t)}}}u.$$completeOutstandingRequest=d,u.$$incOutstandingRequestCount=function(){r++},u.notifyWhenNoOutstandingRequests=function(t){0===r?t():s.push(t)};var p,f,m=c.href,g=t.find("base"),v=null,y=l.history?function(){try{return h.state}catch(t){}}:B;C(),f=p,u.url=function(t,e,n){if(ht(n)&&(n=null),c!==a.location&&(c=a.location),h!==a.history&&(h=a.history),t){var i=f===n;if(m===t&&(!l.history||i))return u;var o=m&&Vn(m)===Vn(t);return m=t,f=n,!l.history||o&&i?(o&&!v||(v=t),e?c.replace(t):o?c.hash=-1===(s=(r=t).indexOf("#"))?"":r.substr(s):c.href=t,c.href!==t&&(v=t)):(h[e?"replaceState":"pushState"](n,"",t),C(),f=p),u}return v||c.href.replace(/%27/g,"'");var r,s},u.state=function(){return p};var b=[],_=!1;function w(){v=null,C(),k()}var x=null;function C(){wt(p=ht(p=y())?null:p,x)&&(p=x),x=p}function k(){m===u.url()&&f===p||(m=u.url(),f=p,ut(b,function(t){t(u.url(),p)}))}u.onUrlChange=function(t){return _||(l.history&&lt(a).on("popstate",w),lt(a).on("hashchange",w),_=!0),b.push(t),t},u.$$applicationDestroyed=function(){lt(a).off("hashchange popstate",w)},u.$$checkUrlChange=k,u.baseHref=function(){var t=g.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""},u.defer=function(t,e){var n;return r++,n=i(function(){delete o[n],d(t)},e||0),o[n]=!0,n},u.defer.cancel=function(t){return!!o[t]&&(delete o[t],n(t),d(B),!0)}}function Qe(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,i){return new Je(t,i,e,n)}]}function tn(){this.$get=function(){var h={};function t(t,e){if(t in h)throw f("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var n=0,i=ct({},e,{id:t}),o=At(),r=e&&e.capacity||Number.MAX_VALUE,s=At(),a=null,l=null;return h[t]={put:function(t,e){if(!ht(e)){if(r<Number.MAX_VALUE)u(s[t]||(s[t]={key:t}));return t in o||n++,o[t]=e,r<n&&this.remove(l.key),e}},get:function(t){if(r<Number.MAX_VALUE){var e=s[t];if(!e)return;u(e)}return o[t]},remove:function(t){if(r<Number.MAX_VALUE){var e=s[t];if(!e)return;e==a&&(a=e.p),e==l&&(l=e.n),c(e.n,e.p),delete s[t]}t in o&&(delete o[t],n--)},removeAll:function(){o=At(),n=0,s=At(),a=l=null},destroy:function(){s=i=o=null,delete h[t]},info:function(){return ct({},i,{size:n})}};function u(t){t!=a&&(l?l==t&&(l=t.n):l=t,c(t.n,t.p),c(t,a),(a=t).n=null)}function c(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}}return t.info=function(){var n={};return ut(h,function(t,e){n[e]=t.info()}),n},t.get=function(t){return h[t]},t}}function en(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var nn=f("$compile");var on=new function(){};function rn(n,e){var f={},m="Directive",I=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,N=/(([\w\-]+)(?:\:([^;]+))?;?)/,c=function(t){var e,n={},i=t.split(",");for(e=0;e<i.length;e++)n[i[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),d=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,h=/^(on[a-z]+|formaction)$/,a=At();function r(t,i,o){var r=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,s=At();return ut(t,function(t,e){if(t in a)s[e]=a[t];else{var n=t.match(r);if(!n)throw nn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",i,e,t,o?"controller bindings definition":"isolate scope definition");s[e]={mode:n[1][0],collection:"*"===n[2],optional:"?"===n[3],attrName:n[4]||e},n[4]&&(a[t]=s[e])}}),s}function g(t,e){var n={isolateScope:null,bindToController:null};if(dt(t.scope)&&(!0===t.bindToController?(n.bindToController=r(t.scope,e,!0),n.isolateScope={}):n.isolateScope=r(t.scope,e,!1)),dt(t.bindToController)&&(n.bindToController=r(t.bindToController,e,!0)),dt(n.bindToController)){var i=t.controller,o=t.controllerAs;if(!i)throw nn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);if(!pn(i,o))throw nn("noident","Cannot bind to controller without identifier for directive '{0}'.",e)}return n}this.directive=function t(s,e){return Lt(s,"directive"),pt(s)?(!function(t){var e=t.charAt(0);if(!e||e!==U(e))throw nn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw nn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(s),Mt(e,"directiveFactory"),f.hasOwnProperty(s)||(f[s]=[],n.factory(s+m,["$injector","$exceptionHandler",function(i,o){var r=[];return ut(f[s],function(t,e){try{var n=i.invoke(t);mt(n)?n={compile:S(n)}:!n.compile&&n.link&&(n.compile=S(n.link)),n.priority=n.priority||0,n.index=e,n.name=n.name||s,n.require=n.require||n.controller&&n.name,n.restrict=n.restrict||"EA",n.$$moduleName=t.$$moduleName,r.push(n)}catch(t){o(t)}}),r}])),f[s].push(e)):ut(s,v(t)),this},this.component=function(t,o){var r=o.controller||function(){};function n(i){function t(n){return mt(n)||ft(n)?function(t,e){return i.invoke(n,this,{$element:t,$attrs:e})}:n}var e=o.template||o.templateUrl?o.template:"",n={controller:r,controllerAs:pn(o.controller)||o.controllerAs||"$ctrl",template:t(e),templateUrl:t(o.templateUrl),transclude:o.transclude,scope:{},bindToController:o.bindings||{},restrict:"E",require:o.require};return ut(o,function(t,e){"$"===e.charAt(0)&&(n[e]=t)}),n}return ut(o,function(t,e){"$"===e.charAt(0)&&(n[e]=t,mt(r)&&(r[e]=t))}),n.$inject=["$injector"],this.directive(t,n)},this.aHrefSanitizationWhitelist=function(t){return M(t)?(e.aHrefSanitizationWhitelist(t),this):e.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return M(t)?(e.imgSrcSanitizationWhitelist(t),this):e.imgSrcSanitizationWhitelist()};var u=!0;this.debugInfoEnabled=function(t){return M(t)?(u=t,this):u};var w=10;this.onChangesTtl=function(t){return arguments.length?(w=t,this):w},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(p,k,j,t,v,q,r,i,o,y){var s,b=/^\w/,_=R.document.createElement("div"),e=w;function a(){try{if(!--e)throw s=void 0,nn("infchng","{0} $onChanges() iterations reached. Aborting!\n",w);r.$apply(function(){for(var t=0,e=s.length;t<e;++t)s[t]();s=void 0})}finally{e++}}function W(t,e){if(e){var n,i,o,r=Object.keys(e);for(n=0,i=r.length;n<i;n++)this[o=r[n]]=e[o]}else this.$attr={};this.$$element=t}function M(t,e){try{t.addClass(e)}catch(t){}}W.prototype={$normalize:ln,$addClass:function(t){t&&0<t.length&&o.addClass(this.$$element,t)},$removeClass:function(t){t&&0<t.length&&o.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=un(t,e);n&&n.length&&o.addClass(this.$$element,n);var i=un(e,t);i&&i.length&&o.removeClass(this.$$element,i)},$set:function(t,e,n,i){var o,r=$e(this.$$element[0],t),s=ke[t],a=t;if(r?(this.$$element.prop(t,e),i=r):s&&(this[s]=e,a=s),this[t]=e,i?this.$attr[t]=i:(i=this.$attr[t])||(this.$attr[t]=i=Tt(t,"-")),"a"===(o=bt(this.$$element))&&("href"===t||"xlinkHref"===t)||"img"===o&&"src"===t)this[t]=e=y(e,"src"===t);else if("img"===o&&"srcset"===t){for(var l="",u=yt(e),c=/\s/.test(u)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,h=u.split(c),d=Math.floor(h.length/2),p=0;p<d;p++){var f=2*p;l+=y(yt(h[f]),!0),l+=" "+yt(h[f+1])}var m=yt(h[2*p]).split(/\s/);l+=y(yt(m[0]),!0),2===m.length&&(l+=" "+yt(m[1])),this[t]=e=l}!1!==n&&(null===e||ht(e)?this.$$element.removeAttr(i):b.test(i)?this.$$element.attr(i,e):function(t,e,n){_.innerHTML="<span "+e+">";var i=_.firstChild.attributes,o=i[0];i.removeNamedItem(o.name),o.value=n,t.attributes.setNamedItem(o)}(this.$$element[0],i,e));var g=this.$$observers;g&&ut(g[a],function(t){try{t(e)}catch(t){j(t)}})},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=At()),o=i[t]||(i[t]=[]);return o.push(e),r.$evalAsync(function(){o.$$inter||!n.hasOwnProperty(t)||ht(n[t])||e(n[t])}),function(){_t(o,e)}}};var n=k.startSymbol(),l=k.endSymbol(),V="{{"==n&&"}}"==l?x:function(t){return t.replace(/\{\{/g,n).replace(/}}/g,l)},$=/^ngAttr[A-Z]/,T=/^(.+)Start$/;return Z.$$addBindingInfo=u?function(t,e){var n=t.data("$binding")||[];ft(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:B,Z.$$addBindingClass=u?function(t){M(t,"ng-binding")}:B,Z.$$addScopeInfo=u?function(t,e,n,i){var o=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(o,e)}:B,Z.$$addScopeClass=u?function(t,e){M(t,e?"ng-isolate-scope":"ng-scope")}:B,Z.$$createComment=function(t,e){var n="";return u&&(n=" "+(t||"")+": "+(e||"")+" "),R.document.createComment(n)},Z;function Z(c,t,e,n,h){c instanceof lt||(c=lt(c));for(var i=/\S+/,o=0,r=c.length;o<r;o++){var s=c[o];s.nodeType===It&&s.nodeValue.match(i)&&oe(s,c[o]=R.document.createElement("span"))}var d=D(c,t,c,e,n,h);Z.$$addScopeClass(c);var p=null;return function(t,e,n){Mt(t,"scope"),h&&h.needsNewScope&&(t=t.$parent.$new());var i,o,r,s=(n=n||{}).parentBoundTranscludeFn,a=n.transcludeControllers,l=n.futureParentElement;if(s&&s.$$boundTransclude&&(s=s.$$boundTransclude),p||(o=(i=l)&&i[0],p=o&&"foreignobject"!==bt(o)&&C.call(o).match(/SVG/)?"svg":"html"),r="html"!==p?lt(it(p,lt("<div>").append(c).html())):e?we.clone.call(c):c,a)for(var u in a)r.data("$"+u+"Controller",a[u].instance);return Z.$$addScopeInfo(r,t),e&&e(r,t),d&&d(t,r,r,s),r}}function D(t,f,e,n,i,o){for(var r,s,a,l,u,c,m,g=[],h=0;h<t.length;h++)r=new W,(a=(s=G(t[h],[],r,0===h?n:void 0,i)).length?E(s,t[h],r,f,e,null,[],[],o):null)&&a.scope&&Z.$$addScopeClass(r.$$element),u=a&&a.terminal||!(l=t[h].childNodes)||!l.length?null:D(l,a?(a.transcludeOnThisElement||!a.templateOnThisElement)&&a.transclude:f),(a||u)&&(g.push(h,a,u),c=!0,m=m||a),o=null;return c?function(t,e,n,i){var o,r,s,a,l,u,c,h,d;if(m){var p=e.length;for(d=new Array(p),l=0;l<g.length;l+=3)c=g[l],d[c]=e[c]}else d=e;for(l=0,u=g.length;l<u;)s=d[g[l++]],o=g[l++],r=g[l++],o?(o.scope?(a=t.$new(),Z.$$addScopeInfo(lt(s),a)):a=t,h=o.transcludeOnThisElement?L(t,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&f?L(t,f):null,o(r,a,s,n,h)):r&&r(t,s.childNodes,void 0,i)}:null}function L(r,s,a){function t(t,e,n,i,o){return t||((t=r.$new(!1,o)).$$transcluded=!0),s(t,e,{parentBoundTranscludeFn:a,transcludeControllers:n,futureParentElement:i})}var e=t.$$slots=At();for(var n in s.$$slots)s.$$slots[n]?e[n]=L(r,s.$$slots[n],a):e[n]=null;return t}function G(t,e,n,i,o){var r,s,a,l,u,c=t.nodeType,h=n.$attr;switch(c){case Ot:S(e,ln(bt(t)),"E",i,o);for(var d,p,f,m,g,v,y=t.attributes,b=0,_=y&&y.length;b<_;b++){var w=!1,x=!1;p=(d=y[b]).name,g=yt(d.value),m=ln(p),(v=$.test(m))&&(p=p.replace(an,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var C=m.match(T);C&&P(C[1])&&(x=(w=p).substr(0,p.length-5)+"end",p=p.substr(0,p.length-6)),h[f=ln(p.toLowerCase())]=p,!v&&n.hasOwnProperty(f)||(n[f]=g,$e(t,f)&&(n[f]=!0)),O(t,e,g,f,v),S(e,f,"A",i,o,w,x)}if(dt(s=t.className)&&(s=s.animVal),pt(s)&&""!==s)for(;r=N.exec(s);)S(e,f=ln(r[2]),"C",i,o)&&(n[f]=yt(r[3])),s=s.substr(r.index+r[0].length);break;case It:if(11===F)for(;t.parentNode&&t.nextSibling&&t.nextSibling.nodeType===It;)t.nodeValue=t.nodeValue+t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);a=e,l=t.nodeValue,(u=k(l,!0))&&a.push({priority:0,compile:function(t){var e=t.parent(),i=!!e.length;return i&&Z.$$addBindingClass(e),function(t,e){var n=e.parent();i||Z.$$addBindingClass(n),Z.$$addBindingInfo(n,u.expressions),t.$watch(u,function(t){e[0].nodeValue=t})}}});break;case Nt:try{(r=I.exec(t.nodeValue))&&S(e,f=ln(r[1]),"M",i,o)&&(n[f]=yt(r[2]))}catch(t){}}return e.sort(A),e}function Y(t,e,n){var i=[],o=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw nn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType==Ot&&(t.hasAttribute(e)&&o++,t.hasAttribute(n)&&o--),i.push(t),t=t.nextSibling}while(0<o);else i.push(t);return lt(i)}function K(r,s,a){return function(t,e,n,i,o){return e=Y(e[0],s,a),r(t,e,n,i,o)}}function X(t,e,n,i,o,r){var s;return t?Z(e,n,i,o,r):function(){return s||(s=Z(e,n,i,o,r),e=n=r=null),s.apply(this,arguments)}}function E(t,w,x,e,n,i,C,k,o){o=o||{};for(var r,s,a,l,u,c=-Number.MAX_VALUE,$=o.newScopeDirective,T=o.controllerDirectives,S=o.newIsolateScopeDirective,M=o.templateDirective,h=o.nonTlbTranscludeDirective,d=!1,p=!1,D=o.hasElementTranscludeDirective,f=x.$$element=lt(w),m=i,g=e,v=!1,y=!1,b=0,_=t.length;b<_;b++){var L=(r=t[b]).$$start,E=r.$$end;if(L&&(f=Y(w,L,E)),a=void 0,c>r.priority)break;if((u=r.scope)&&(r.templateUrl||(dt(u)?(nt("new/isolated scope",S||$,r,f),S=r):nt("new/isolated scope",S,r,f)),$=$||r),s=r.name,!v&&(r.replace&&(r.templateUrl||r.template)||r.transclude&&!r.$$tlb)){for(var P,A=b+1;P=t[A++];)if(P.transclude&&!P.$$tlb||P.replace&&(P.templateUrl||P.template)){y=!0;break}v=!0}if(!r.templateUrl&&r.controller&&(u=r.controller,T=T||At(),nt("'"+s+"' controller",T[s],r,f),T[s]=r),u=r.transclude)if(d=!0,r.$$tlb||(nt("transclusion",h,r,f),h=r),"element"==u)D=!0,c=r.priority,a=f,f=x.$$element=lt(Z.$$createComment(s,x[s])),w=f[0],ot(n,xt(a),w),a[0].$$parentNode=a[0].parentNode,g=X(y,a,e,c,m&&m.name,{nonTlbTranscludeDirective:h});else{var O=At();if(a=lt(ae(w)).contents(),dt(u)){a=[];var I=At(),N=At();for(var R in ut(u,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,I[t]=e,O[e]=null,N[e]=n}),ut(f.contents(),function(t){var e=I[ln(bt(t))];e?(N[e]=!0,O[e]=O[e]||[],O[e].push(t)):a.push(t)}),ut(N,function(t,e){if(!t)throw nn("reqslot","Required transclusion slot `{0}` was not filled.",e)}),O)O[R]&&(O[R]=X(y,O[R],e))}f.empty(),(g=X(y,a,e,void 0,void 0,{needsNewScope:r.$$isolateScope||r.$$newScope})).$$slots=O}if(r.template)if(p=!0,nt("template",M,r,f),u=mt((M=r).template)?r.template(f,x):r.template,u=V(u),r.replace){if(m=r,a=ee(u)?[]:cn(it(r.templateNamespace,yt(u))),w=a[0],1!=a.length||w.nodeType!==Ot)throw nn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",s,"");ot(n,f,w);var z={$attr:{}},U=G(w,[],z),F=t.splice(b+1,t.length-(b+1));(S||$)&&Q(U,S,$),t=t.concat(U).concat(F),tt(x,z),_=t.length}else f.html(u);if(r.templateUrl)p=!0,nt("template",M,r,f),(M=r).replace&&(m=r),B=et(t.splice(b,t.length-b),f,x,n,d&&g,C,k,{controllerDirectives:T,newScopeDirective:$!==r&&$,newIsolateScopeDirective:S,templateDirective:M,nonTlbTranscludeDirective:h}),_=t.length;else if(r.compile)try{mt(l=r.compile(f,x,g))?H(null,l,L,E):l&&H(l.pre,l.post,L,E)}catch(t){j(t,Ct(f))}r.terminal&&(B.terminal=!0,c=Math.max(c,r.priority))}return B.scope=$&&!0===$.scope,B.transcludeOnThisElement=d,B.templateOnThisElement=p,B.transclude=g,o.hasElementTranscludeDirective=D,B;function H(t,e,n,i){t&&(n&&(t=K(t,n,i)),t.require=r.require,t.directiveName=s,(S===r||r.$$isolateScope)&&(t=rt(t,{isolateScope:!0})),C.push(t)),e&&(n&&(e=K(e,n,i)),e.require=r.require,e.directiveName=s,(S===r||r.$$isolateScope)&&(e=rt(e,{isolateScope:!0})),k.push(e))}function B(t,e,n,i,s){var o,r,a,l,u,c,h,d,p,f;for(var m in w===n?d=(p=x).$$element:p=new W(d=lt(n),x),u=e,S?l=e.$new(!0):$&&(u=e.$parent),s&&((h=function(t,e,n,i){var o;gt(t)||(i=n,n=e,e=t,t=void 0);D&&(o=c);n||(n=D?d.parent():d);{if(!i)return s(t,e,o,n,_);var r=s.$$slots[i];if(r)return r(t,e,o,n,_);if(ht(r))throw nn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,Ct(d))}}).$$boundTransclude=s,h.isSlotFilled=function(t){return!!s.$$slots[t]}),T&&(c=function(t,e,n,i,o,r,s){var a=At();for(var l in i){var u=i[l],c={$scope:u===s||u.$$isolateScope?o:r,$element:t,$attrs:e,$transclude:n},h=u.controller;"@"==h&&(h=e[u.name]);var d=q(h,c,!0,u.controllerAs);a[u.name]=d,t.data("$"+u.name+"Controller",d.instance)}return a}(d,p,h,T,l,e,S)),S&&(Z.$$addScopeInfo(d,l,!0,!(M&&(M===S||M===S.$$originalDirective))),Z.$$addScopeClass(d,!0),l.$$isolateBindings=S.$$isolateBindings,(f=at(e,p,l,l.$$isolateBindings,S)).removeWatches&&l.$on("$destroy",f.removeWatches)),c){var g=T[m],v=c[m],y=g.$$bindings.bindToController;v.identifier&&y?v.bindingInfo=at(u,p,v.instance,y,g):v.bindingInfo={};var b=v();b!==v.instance&&(v.instance=b,d.data("$"+g.name+"Controller",b),v.bindingInfo.removeWatches&&v.bindingInfo.removeWatches(),v.bindingInfo=at(u,p,v.instance,y,g))}for(ut(T,function(t,e){var n=t.require;t.bindToController&&!ft(n)&&dt(n)&&ct(c[e].instance,J(e,n,d,c))}),ut(c,function(t){var e=t.instance;mt(e.$onChanges)&&e.$onChanges(t.bindingInfo.initialChanges),mt(e.$onInit)&&e.$onInit(),mt(e.$onDestroy)&&u.$on("$destroy",function(){e.$onDestroy()})}),o=0,r=C.length;o<r;o++)st(a=C[o],a.isolateScope?l:e,d,p,a.require&&J(a.directiveName,a.require,d,c),h);var _=e;for(S&&(S.template||null===S.templateUrl)&&(_=l),t&&t(_,n.childNodes,void 0,s),o=k.length-1;0<=o;o--)st(a=k[o],a.isolateScope?l:e,d,p,a.require&&J(a.directiveName,a.require,d,c),h);ut(c,function(t){var e=t.instance;mt(e.$postLink)&&e.$postLink()})}}function J(n,t,i,o){var r;if(pt(t)){var e=t.match(d),s=t.substring(e[0].length),a=e[1]||e[3],l="?"===e[2];if("^^"===a?i=i.parent():r=(r=o&&o[s])&&r.instance,!r){var u="$"+s+"Controller";r=a?i.inheritedData(u):i.data(u)}if(!r&&!l)throw nn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,n)}else if(ft(t)){r=[];for(var c=0,h=t.length;c<h;c++)r[c]=J(n,t[c],i,o)}else dt(t)&&(r={},ut(t,function(t,e){r[e]=J(n,t,i,o)}));return r||null}function Q(t,e,n){for(var i=0,o=t.length;i<o;i++)t[i]=H(t[i],{$$isolateScope:e,$$newScope:n})}function S(t,e,n,i,o,r,s){if(e===o)return null;var a=null;if(f.hasOwnProperty(e))for(var l,u=p.get(e+m),c=0,h=u.length;c<h;c++)try{if(l=u[c],(ht(i)||i>l.priority)&&-1!=l.restrict.indexOf(n)){if(r&&(l=H(l,{$$start:r,$$end:s})),!l.$$bindings){var d=l.$$bindings=g(l,l.name);dt(d.isolateScope)&&(l.$$isolateBindings=d.isolateScope)}t.push(l),a=l}}catch(t){j(t)}return a}function P(t){if(f.hasOwnProperty(t))for(var e=p.get(t+m),n=0,i=e.length;n<i;n++)if(e[n].multiElement)return!0;return!1}function tt(n,i){var o=i.$attr,r=n.$attr,s=n.$$element;ut(n,function(t,e){"$"!=e.charAt(0)&&(i[e]&&i[e]!==t&&(t+=("style"===e?";":" ")+i[e]),n.$set(e,t,!0,o[e]))}),ut(i,function(t,e){"class"==e?(M(s,t),n.class=(n.class?n.class+" ":"")+t):"style"==e?(s.attr("style",s.attr("style")+";"+t),n.style=(n.style?n.style+";":"")+t):"$"==e.charAt(0)||n.hasOwnProperty(e)||(n[e]=t,r[e]=o[e])})}function et(d,p,f,m,g,v,y,b){var _,w,x=[],C=p[0],k=d.shift(),$=H(k,{templateUrl:null,transclude:null,replace:null,$$originalDirective:k}),T=mt(k.templateUrl)?k.templateUrl(p,f):k.templateUrl,S=k.templateNamespace;return p.empty(),t(T).then(function(t){var n,e,i,o;if(t=V(t),k.replace){if(i=ee(t)?[]:cn(it(S,yt(t))),n=i[0],1!=i.length||n.nodeType!==Ot)throw nn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",k.name,T);e={$attr:{}},ot(m,p,n);var r=G(n,[],e);dt(k.scope)&&Q(r,!0),d=r.concat(d),tt(f,e)}else n=C,p.html(t);for(d.unshift($),_=E(d,n,f,g,p,k,v,y,b),ut(m,function(t,e){t==n&&(m[e]=p[0])}),w=D(p[0].childNodes,g);x.length;){var s=x.shift(),a=x.shift(),l=x.shift(),u=x.shift(),c=p[0];if(!s.$$destroyed){if(a!==C){var h=a.className;b.hasElementTranscludeDirective&&k.replace||(c=ae(n)),ot(l,lt(a),c),M(lt(c),h)}o=_.transcludeOnThisElement?L(s,_.transclude,u):u,_(w,s,c,m,o)}}x=null}),function(t,e,n,i,o){var r=o;e.$$destroyed||(x?x.push(e,n,i,r):(_.transcludeOnThisElement&&(r=L(e,_.transclude,o)),_(w,e,n,i,r)))}}function A(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function nt(t,e,n,i){function o(t){return t?" (module: "+t+")":""}if(e)throw nn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,o(e.$$moduleName),n.name,o(n.$$moduleName),t,Ct(i))}function it(t,e){switch(t=U(t||"html")){case"svg":case"math":var n=R.document.createElement("div");return n.innerHTML="<"+t+">"+e+"</"+t+">",n.childNodes[0].childNodes;default:return e}}function O(t,e,r,s,a){var l=function(t,e){if("srcdoc"==e)return i.HTML;var n=bt(t);return"xlinkHref"==e||"form"==n&&"action"==e||"img"!=n&&("src"==e||"ngSrc"==e)?i.RESOURCE_URL:void 0}(t,s);a=c[s]||a;var u=k(r,!0,l,a);if(u){if("multiple"===s&&"select"===bt(t))throw nn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Ct(t));e.push({priority:100,compile:function(){return{pre:function(t,e,n){var i=n.$$observers||(n.$$observers=At());if(h.test(s))throw nn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var o=n[s];o!==r&&(u=o&&k(o,!0,l,a),r=o),u&&(n[s]=u(t),(i[s]||(i[s]=[])).$$inter=!0,(n.$$observers&&n.$$observers[s].$$scope||t).$watch(u,function(t,e){"class"===s&&t!=e?n.$updateClass(t,e):n.$set(s,t)}))}}}})}}function ot(t,e,n){var i,o,r=e[0],s=e.length,a=r.parentNode;if(t)for(i=0,o=t.length;i<o;i++)if(t[i]==r){t[i++]=n;for(var l=i,u=l+s-1,c=t.length;l<c;l++,u++)u<c?t[l]=t[u]:delete t[l];t.length-=s-1,t.context===r&&(t.context=n);break}a&&a.replaceChild(n,r);var h=R.document.createDocumentFragment();for(i=0;i<s;i++)h.appendChild(e[i]);for(lt.hasData(r)&&(lt.data(n,lt.data(r)),lt(r).off("$destroy")),lt.cleanData(h.querySelectorAll("*")),i=1;i<s;i++)delete e[i];e[0]=n,e.length=1}function rt(t,e){return ct(function(){return t.apply(null,arguments)},t,e)}function st(t,e,n,i,o,r){try{t(e,n,i,o,r)}catch(t){j(t,Ct(n))}}function at(c,h,d,t,p){var i,f=[],m={};function g(t,e,n){mt(d.$onChanges)&&e!==n&&(s||(c.$$postDigest(a),s=[]),i||(i={},s.push(o)),i[t]&&(n=i[t].previousValue),i[t]=new sn(n,e))}function o(){d.$onChanges(i),i=void 0}return ut(t,function(t,n){var e,i,o,r,s,a=t.attrName,l=t.optional;switch(t.mode){case"@":l||z.call(h,a)||(d[n]=h[a]=void 0),h.$observe(a,function(t){if(pt(t)||vt(t)){var e=d[n];g(n,t,e),d[n]=t}}),h.$$observers[a].$$scope=c,pt(e=h[a])?d[n]=k(e)(c):vt(e)&&(d[n]=e),m[n]=new sn(on,d[n]);break;case"=":if(!z.call(h,a)){if(l)break;h[a]=void 0}if(l&&!h[a])break;i=v(h[a]),r=i.literal?wt:function(t,e){return t===e||t!=t&&e!=e},o=i.assign||function(){throw e=d[n]=i(c),nn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",h[a],a,p.name)},e=d[n]=i(c);var u=function(t){return r(t,d[n])||(r(t,e)?o(c,t=d[n]):d[n]=t),e=t};u.$stateful=!0,s=t.collection?c.$watchCollection(h[a],u):c.$watch(v(h[a],u),null,i.literal),f.push(s);break;case"<":if(!z.call(h,a)){if(l)break;h[a]=void 0}if(l&&!h[a])break;i=v(h[a]),d[n]=i(c),m[n]=new sn(on,d[n]),s=c.$watch(i,function(t,e){t===e&&(e=d[n]),g(n,t,e),d[n]=t},i.literal),f.push(s);break;case"&":if((i=h.hasOwnProperty(a)?v(h[a]):B)===B&&l)break;d[n]=function(t){return i(c,t)}}}),{initialChanges:m,removeWatches:f.length&&function(){for(var t=0,e=f.length;t<e;++t)f[t]()}}}}]}function sn(t,e){this.previousValue=t,this.currentValue=e}rn.$inject=["$provide","$$sanitizeUriProvider"],sn.prototype.isFirstChange=function(){return this.previousValue===on};var an=/^((?:x|data)[\:\-_])/i;function ln(t){return Yt(t.replace(an,""))}function un(t,e){var n="",i=t.split(/\s+/),o=e.split(/\s+/);t:for(var r=0;r<i.length;r++){for(var s=i[r],a=0;a<o.length;a++)if(s==o[a])continue t;n+=(0<n.length?" ":"")+s}return n}function cn(t){var e=(t=lt(t)).length;if(e<=1)return t;for(;e--;){t[e].nodeType===Nt&&n.call(t,e,1)}return t}var hn=f("$controller"),dn=/^(\S+)(\s+as\s+([\w$]+))?$/;function pn(t,e){if(e&&pt(e))return e;if(pt(t)){var n=dn.exec(t);if(n)return n[3]}}function fn(){var d={},p=!1;this.has=function(t){return d.hasOwnProperty(t)},this.register=function(t,e){Lt(t,"controller"),dt(t)?ct(d,t):d[t]=e},this.allowGlobals=function(){p=!0},this.$get=["$injector","$window",function(u,c){return function(e,n,t,i){var o,r,s,a;if(t=!0===t,i&&pt(i)&&(a=i),pt(e)){if(!(r=e.match(dn)))throw hn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",e);s=r[1],a=a||r[3],Dt(e=d.hasOwnProperty(s)?d[s]:Et(n.$scope,s,!0)||(p?Et(c,s,!0):void 0),s,!0)}if(t){var l=(ft(e)?e[e.length-1]:e).prototype;return o=Object.create(l||null),a&&h(n,a,o,s||e.name),ct(function(){var t=u.invoke(e,o,n,s);return t!==o&&(dt(t)||mt(t))&&(o=t,a&&h(n,a,o,s||e.name)),o},{instance:o,identifier:a})}return o=u.instantiate(e,n,s),a&&h(n,a,o,s||e.name),o};function h(t,e,n,i){if(!t||!dt(t.$scope))throw f("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,e);t.$scope[e]=n}}]}function mn(){this.$get=["$window",function(t){return lt(t.document)}]}function gn(){this.$get=["$log",function(n){return function(t,e){n.error.apply(n,arguments)}}]}var vn=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof lt&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},yn="application/json",bn={"Content-Type":yn+";charset=utf-8"},_n=/^\[|^\{(?!\{)/,wn={"[":/]$/,"{":/}$/},xn=/^\)\]\}',?\n/,Cn=f("$http"),kn=function(t){return function(){throw Cn("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",t)}};function $n(t){return dt(t)?k(t)?t.toISOString():G(t):t}function Tn(){this.$get=function(){return function(t){if(!t)return"";var n=[];return d(t,function(t,e){null===t||ht(t)||(ft(t)?ut(t,function(t){n.push(it(e)+"="+it($n(t)))}):n.push(it(e)+"="+it($n(t))))}),n.join("&")}}}function Sn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function n(t,i,o){if(null===t||ht(t))return;ft(t)?ut(t,function(t,e){n(t,i+"["+(dt(t)?e:"")+"]")}):dt(t)&&!k(t)?d(t,function(t,e){n(t,i+(o?"":"[")+e+(o?"":"]"))}):e.push(it(i)+"="+it($n(t)))}(t,"",!0),e.join("&")}}}function Mn(t,e){if(pt(t)){var n=t.replace(xn,"").trim();if(n){var i=e("Content-Type");(i&&0===i.indexOf(yn)||(r=(o=n).match(_n))&&wn[r[0]].test(o))&&(t=Y(n))}}var o,r;return t}function Dn(t){var e,n=At();function i(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return pt(t)?ut(t.split("\n"),function(t){e=t.indexOf(":"),i(U(yt(t.substr(0,e))),yt(t.substr(e+1)))}):dt(t)&&ut(t,function(t,e){i(U(e),yt(t))}),n}function Ln(n){var i;return function(t){if(i||(i=Dn(n)),t){var e=i[U(t)];return void 0===e&&(e=null),e}return i}}function En(e,n,i,t){return mt(t)?t(e,n,i):(ut(t,function(t){e=t(e,n,i)}),e)}function Pn(t){return 200<=t&&t<300}function An(){var w=this.defaults={transformResponse:[Mn],transformRequest:[function(t){return dt(t)&&(i=t,"[object File]"!==C.call(i))&&(n=t,"[object Blob]"!==C.call(n))&&(e=t,"[object FormData]"!==C.call(e))?G(t):t;var e,n,i}],headers:{common:{Accept:"application/json, text/plain, */*"},post:j(bn),put:j(bn),patch:j(bn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},x=!1;this.useApplyAsync=function(t){return M(t)?(x=!!t,this):x};var u=!0;this.useLegacyPromiseExtensions=function(t){return M(t)?(u=!!t,this):u};var e=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(m,g,t,v,y,a){var b=t("$http");w.paramSerializer=pt(w.paramSerializer)?a.get(w.paramSerializer):w.paramSerializer;var l=[];function _(t){if(!dt(t))throw f("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);if(!pt(t.url))throw f("$http")("badreq","Http request configuration url must be a string.  Received: {0}",t.url);var n=ct({method:"get",transformRequest:w.transformRequest,transformResponse:w.transformResponse,paramSerializer:w.paramSerializer},t);n.headers=function(t){var e,n,i,o=w.headers,r=ct({},t.headers);o=ct({},o.common,o[U(t.method)]);t:for(e in o){for(i in n=U(e),r)if(U(i)===n)continue t;r[e]=o[e]}return s=r,a=j(t),u={},ut(s,function(t,e){mt(t)?null!=(l=t(a))&&(u[e]=l):u[e]=t}),u;var s,a,l,u}(t),n.method=c(n.method),n.paramSerializer=pt(n.paramSerializer)?a.get(n.paramSerializer):n.paramSerializer;var e=[function(t){var n=t.headers,e=En(t.data,Ln(n),void 0,t.transformRequest);return ht(e)&&ut(n,function(t,e){"content-type"===U(e)&&delete n[e]}),ht(t.withCredentials)&&!ht(w.withCredentials)&&(t.withCredentials=w.withCredentials),function(o,t){var r,e,n,i,s=y.defer(),a=s.promise,l=o.headers,u=(n=o.url,0<(i=o.paramSerializer(o.params)).length&&(n+=(-1==n.indexOf("?")?"?":"&")+i),n);if(_.pendingRequests.push(o),a.then(f,f),!o.cache&&!w.cache||!1===o.cache||"GET"!==o.method&&"JSONP"!==o.method||(r=dt(o.cache)?o.cache:dt(w.cache)?w.cache:b),r&&(M(e=r.get(u))?E(e)?e.then(p,p):ft(e)?d(e[1],e[0],j(e[2]),e[3]):d(e,200,{},"OK"):r.put(u,a)),ht(e)){var c=Ki(o.url)?g()[o.xsrfCookieName||w.xsrfCookieName]:void 0;c&&(l[o.xsrfHeaderName||w.xsrfHeaderName]=c),m(o.method,u,t,function(t,e,n,i){function o(){d(e,t,n,i)}r&&(Pn(t)?r.put(u,[t,e,Dn(n),i]):r.remove(u)),x?v.$applyAsync(o):(o(),v.$$phase||v.$apply())},l,o.timeout,o.withCredentials,o.responseType,h(o.eventHandlers),h(o.uploadEventHandlers))}return a;function h(t){if(t){var e={};return ut(t,function(n,t){e[t]=function(t){function e(){n(t)}x?v.$applyAsync(e):v.$$phase?e():v.$apply(e)}}),e}}function d(t,e,n,i){(Pn(e=-1<=e?e:0)?s.resolve:s.reject)({data:t,status:e,headers:Ln(n),config:o,statusText:i})}function p(t){d(t.data,t.status,j(t.headers()),t.statusText)}function f(){var t=_.pendingRequests.indexOf(o);-1!==t&&_.pendingRequests.splice(t,1)}}(t,e).then(s,s)},void 0],i=y.when(n);for(ut(l,function(t){(t.request||t.requestError)&&e.unshift(t.request,t.requestError),(t.response||t.responseError)&&e.push(t.response,t.responseError)});e.length;){var o=e.shift(),r=e.shift();i=i.then(o,r)}return i.error=u?(i.success=function(e){return Dt(e,"fn"),i.then(function(t){e(t.data,t.status,t.headers,n)}),i},function(e){return Dt(e,"fn"),i.then(null,function(t){e(t.data,t.status,t.headers,n)}),i}):(i.success=kn("success"),kn("error")),i;function s(t){var e=ct({},t);return e.data=En(t.data,t.headers,t.status,n.transformResponse),Pn(t.status)?e:y.reject(e)}}return ut(e,function(t){l.unshift(pt(t)?a.get(t):a.invoke(t))}),_.pendingRequests=[],function(t){ut(arguments,function(n){_[n]=function(t,e){return _(ct({},e||{},{method:n,url:t}))}})}("get","delete","head","jsonp"),function(t){ut(arguments,function(i){_[i]=function(t,e,n){return _(ct({},n||{},{method:i,url:t,data:e}))}})}("post","put","patch"),_.defaults=w,_}]}function On(){this.$get=function(){return function(){return new R.XMLHttpRequest}}}function In(){this.$get=["$browser","$window","$document","$xhrFactory",function(t,e,n,i){return C=i,k=(x=t).defer,$=e.angular.callbacks,T=n[0],function(t,i,e,o,n,r,s,a,l,u){if(x.$$incOutstandingRequestCount(),i=i||x.url(),"jsonp"==U(t)){var c="_"+($.counter++).toString(36);$[c]=function(t){$[c].data=t,$[c].called=!0};var h=(f=i.replace("JSON_CALLBACK","angular.callbacks."+c),m=c,g=function(t,e){w(o,t,$[c].data,"",e),$[c]=B},v=T.createElement("script"),y=null,v.type="text/javascript",v.src=f,v.async=!0,jt(v,"load",y=function(t){qt(v,"load",y),qt(v,"error",y),T.body.removeChild(v),v=null;var e=-1,n="unknown";t&&("load"!==t.type||$[m].called||(t={type:"error"}),n=t.type,e="error"===t.type?404:200),g&&g(e,n)}),jt(v,"error",y),T.body.appendChild(v),y)}else{var d=C(t,i);d.open(t,i,!0),ut(n,function(t,e){M(t)&&d.setRequestHeader(e,t)}),d.onload=function(){var t=d.statusText||"",e="response"in d?d.response:d.responseText,n=1223===d.status?204:d.status;0===n&&(n=e?200:"file"==Yi(i).protocol?404:0),w(o,n,e,d.getAllResponseHeaders(),t)};var p=function(){w(o,-1,null,null,"")};if(d.onerror=p,d.onabort=p,ut(l,function(t,e){d.addEventListener(e,t)}),ut(u,function(t,e){d.upload.addEventListener(e,t)}),s&&(d.withCredentials=!0),a)try{d.responseType=a}catch(t){if("json"!==a)throw t}d.send(ht(e)?null:e)}var f,m,g,v,y;if(0<r)var b=k(_,r);else E(r)&&r.then(_);function _(){h&&h(),d&&d.abort()}function w(t,e,n,i,o){M(b)&&k.cancel(b),h=d=null,t(e,n,i,o),x.$$completeOutstandingRequest(B)}};var x,C,k,$,T}]}var Nn=$.$interpolateMinErr=f("$interpolate");function Rn(){var k="{{",$="}}";this.startSymbol=function(t){return t?(k=t,this):k},this.endSymbol=function(t){return t?($=t,this):$},this.$get=["$parse","$exceptionHandler","$sce",function(v,y,b){var _=k.length,w=$.length,e=new RegExp(k.replace(/./g,t),"g"),n=new RegExp($.replace(/./g,t),"g");function t(t){return"\\\\\\"+t}function x(t){return t.replace(e,k).replace(n,$)}function C(t,e,n,i){var o;return o=t.$watch(function(t){return o(),i(t)},e,n)}function i(o,t,e,i){if(!o.length||-1===o.indexOf(k)){var n;if(!t)(n=S(x(o))).exp=o,n.expressions=[],n.$$watchDelegate=C;return n}i=!!i;for(var r,s,a,l=0,u=[],c=[],h=o.length,d=[],p=[];l<h;){if(-1==(r=o.indexOf(k,l))||-1==(s=o.indexOf($,r+_))){l!==h&&d.push(x(o.substring(l)));break}l!==r&&d.push(x(o.substring(l,r))),a=o.substring(r+_,s),u.push(a),c.push(v(a,g)),l=s+w,p.push(d.length),d.push("")}if(e&&1<d.length&&Nn.throwNoconcat(o),!t||u.length){var f=function(t){for(var e=0,n=u.length;e<n;e++){if(i&&ht(t[e]))return;d[p[e]]=t[e]}return d.join("")},m=function(t){return e?b.getTrusted(e,t):b.valueOf(t)};return ct(function(t){var e=0,n=u.length,i=new Array(n);try{for(;e<n;e++)i[e]=c[e](t);return f(i)}catch(t){y(Nn.interr(o,t))}},{exp:o,expressions:u,$$watchDelegate:function(i,o){var r;return i.$watchGroup(c,function(t,e){var n=f(t);mt(o)&&o.call(this,n,t!==e?r:n,i),r=n})}})}function g(t){try{return t=m(t),i&&!M(t)?t:function(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=G(t)}return t}(t)}catch(t){y(Nn.interr(o,t))}}}return i.startSymbol=function(){return k},i.endSymbol=function(){return $},i}]}function zn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(p,f,m,g,v){var y={};function t(t,e,n,i){var o=4<arguments.length,r=o?xt(arguments,4):[],s=f.setInterval,a=f.clearInterval,l=0,u=M(i)&&!i,c=(u?g:m).defer(),h=c.promise;return n=M(n)?n:0,h.$$intervalId=s(function(){u?v.defer(d):p.$evalAsync(d),c.notify(l++),0<n&&n<=l&&(c.resolve(l),a(h.$$intervalId),delete y[h.$$intervalId]),u||p.$apply()},e),y[h.$$intervalId]=c,h;function d(){o?t.apply(null,r):t(l)}}return t.cancel=function(t){return!!(t&&t.$$intervalId in y)&&(y[t.$$intervalId].reject("canceled"),f.clearInterval(t.$$intervalId),delete y[t.$$intervalId],!0)},t}]}Nn.throwNoconcat=function(t){throw Nn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Nn.interr=function(t,e){return Nn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Un=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Fn={http:80,https:443,ftp:21},Hn=f("$location");function Bn(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=nt(e[n]);return e.join("/")}function jn(t,e){var n=Yi(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=y(n.port)||Fn[n.protocol]||null}function qn(t,e){var n="/"!==t.charAt(0);n&&(t="/"+t);var i=Yi(t);e.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),e.$$search=tt(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Wn(t,e){if(0===e.indexOf(t))return e.substr(t.length)}function Vn(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function Zn(t){return t.replace(/(#.+)|#$/,"$1")}function Gn(r,s,a){this.$$html5=!0,a=a||"",jn(r,this),this.$$parse=function(t){var e=Wn(s,t);if(!pt(e))throw Hn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,s);qn(e,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=et(this.$$search),e=this.$$hash?"#"+nt(this.$$hash):"";this.$$url=Bn(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=s+this.$$url.substr(1)},this.$$parseLinkUrl=function(t,e){return e&&"#"===e[0]?(this.hash(e.slice(1)),!0):(M(n=Wn(r,t))?o=M(n=Wn(a,i=n))?s+(Wn("/",n)||n):r+i:M(n=Wn(s,t))?o=s+n:s==t+"/"&&(o=s),o&&this.$$parse(o),!!o);var n,i,o}}function Yn(i,o,r){jn(i,this),this.$$parse=function(t){var e,n=Wn(i,t)||Wn(o,t);ht(n)||"#"!==n.charAt(0)?this.$$html5?e=n:(e="",ht(n)&&(i=t,this.replace())):ht(e=Wn(r,n))&&(e=n),qn(e,this),this.$$path=function(t,e,n){var i,o=/^\/[A-Z]:(\/.*)/;0===e.indexOf(n)&&(e=e.replace(n,""));if(o.exec(e))return t;return(i=o.exec(t))?i[1]:t}(this.$$path,e,i),this.$$compose()},this.$$compose=function(){var t=et(this.$$search),e=this.$$hash?"#"+nt(this.$$hash):"";this.$$url=Bn(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=i+(this.$$url?r+this.$$url:"")},this.$$parseLinkUrl=function(t,e){return Vn(i)==Vn(t)&&(this.$$parse(t),!0)}}function Kn(o,r,s){this.$$html5=!0,Yn.apply(this,arguments),this.$$parseLinkUrl=function(t,e){return e&&"#"===e[0]?(this.hash(e.slice(1)),!0):(o==Vn(t)?n=t:(i=Wn(r,t))?n=o+s+i:r===t+"/"&&(n=r),n&&this.$$parse(n),!!n);var n,i},this.$$compose=function(){var t=et(this.$$search),e=this.$$hash?"#"+nt(this.$$hash):"";this.$$url=Bn(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=o+s+this.$$url}}var Xn={$$html5:!1,$$replace:!1,absUrl:Jn("$$absUrl"),url:function(t){if(ht(t))return this.$$url;var e=Un.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:Jn("$$protocol"),host:Jn("$$host"),port:Jn("$$port"),path:Qn("$$path",function(t){return"/"==(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(n,t){switch(arguments.length){case 0:return this.$$search;case 1:if(pt(n)||w(n))n=n.toString(),this.$$search=tt(n);else{if(!dt(n))throw Hn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");ut(n=N(n,{}),function(t,e){null==t&&delete n[e]}),this.$$search=n}break;default:ht(t)||null===t?delete this.$$search[n]:this.$$search[n]=t}return this.$$compose(),this},hash:Qn("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function Jn(t){return function(){return this[t]}}function Qn(e,n){return function(t){return ht(t)?this[e]:(this[e]=n(t),this.$$compose(),this)}}function ti(){var v="",y={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return M(t)?(v=t,this):v},this.html5Mode=function(t){return vt(t)?(y.enabled=t,this):dt(t)?(vt(t.enabled)&&(y.enabled=t.enabled),vt(t.requireBase)&&(y.requireBase=t.requireBase),vt(t.rewriteLinks)&&(y.rewriteLinks=t.rewriteLinks),this):y},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(s,a,e,o,r){var l,t,n,i,u=a.baseHref(),c=a.url();if(y.enabled){if(!u&&y.requireBase)throw Hn("nobase","$location in HTML5 mode requires a <base> tag to be present!");n=(i=c).substring(0,i.indexOf("/",i.indexOf("//")+2))+(u||"/"),t=e.history?Gn:Kn}else n=Vn(c),t=Yn;var h,d=(h=n).substr(0,Vn(h).lastIndexOf("/")+1);(l=new t(n,d,"#"+v)).$$parseLinkUrl(c,c),l.$$state=a.state();var p=/^\s*(javascript|mailto):/i;function f(t,e,n){var i=l.url(),o=l.$$state;try{a.url(t,e,n),l.$$state=a.state()}catch(t){throw l.url(i),l.$$state=o,t}}o.on("click",function(t){if(y.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(var e=lt(t.target);"a"!==bt(e[0]);)if(e[0]===o[0]||!(e=e.parent())[0])return;var n=e.prop("href"),i=e.attr("href")||e.attr("xlink:href");dt(n)&&"[object SVGAnimatedString]"===n.toString()&&(n=Yi(n.animVal).href),p.test(n)||!n||e.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(n,i)&&(t.preventDefault(),l.absUrl()!=a.url()&&(s.$apply(),r.angular["ff-684208-preventDefault"]=!0))}}),Zn(l.absUrl())!=Zn(c)&&a.url(l.absUrl(),!0);var m=!0;return a.onUrlChange(function(i,o){ht(Wn(d,i))?r.location.href=i:(s.$evalAsync(function(){var t,e=l.absUrl(),n=l.$$state;i=Zn(i),l.$$parse(i),l.$$state=o,t=s.$broadcast("$locationChangeStart",i,e,o,n).defaultPrevented,l.absUrl()===i&&(t?(l.$$parse(e),f(e,!1,l.$$state=n)):(m=!1,g(e,n)))}),s.$$phase||s.$digest())}),s.$watch(function(){var n=Zn(a.url()),t=Zn(l.absUrl()),i=a.state(),o=l.$$replace,r=n!==t||l.$$html5&&e.history&&i!==l.$$state;(m||r)&&(m=!1,s.$evalAsync(function(){var t=l.absUrl(),e=s.$broadcast("$locationChangeStart",t,n,l.$$state,i).defaultPrevented;l.absUrl()===t&&(e?(l.$$parse(n),l.$$state=i):(r&&f(t,o,i===l.$$state?null:l.$$state),g(n,i)))})),l.$$replace=!1}),l;function g(t,e){s.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}}]}function ei(){var n=!0,i=this;this.debugEnabled=function(t){return M(t)?(n=t,this):n},this.$get=["$window",function(o){return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:(t=e("debug"),function(){n&&t.apply(i,arguments)})};var t;function e(t){var e=o.console||{},i=e[t]||e.log||B,n=!1;try{n=!!i.apply}catch(t){}return n?function(){var n=[];return ut(arguments,function(t){var e;n.push(((e=t)instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e))}),i.apply(e,n)}:function(t,e){i(t,null==e?"":e)}}}]}ut([Kn,Yn,Gn],function(e){e.prototype=Object.create(Xn),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Gn||!this.$$html5)throw Hn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=ht(t)?null:t,this}});var ni=f("$parse");function ii(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw ni("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function oi(t){return t+""}function ri(t,e){if(t){if(t.constructor===t)throw ni("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw ni("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw ni("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw ni("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}var si=Function.prototype.call,ai=Function.prototype.apply,li=Function.prototype.bind;function ui(t,e){if(t){if(t.constructor===t)throw ni("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===si||t===ai||t===li)throw ni("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function ci(t,e){if(t&&(t===(0).constructor||t===(!1).constructor||t==="".constructor||t==={}.constructor||t===[].constructor||t===Function.constructor))throw ni("isecaf","Assigning to a constructor is disallowed! Expression: {0}",e)}var hi=At();ut("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){hi[t]=!0});var di={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},pi=function(t){this.options=t};pi.prototype={constructor:pi,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),o=hi[e],r=hi[n],s=hi[i];if(o||r||s){var a=s?i:r?n:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||""===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return 55296<=n&&n<=56319&&56320<=i&&i<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=M(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw ni("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=U(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,o=!1;this.index<this.text.length;){var r=this.text.charAt(this.index);if(i+=r,o){if("u"===r){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else{n+=di[r]||r}o=!1}else if("\\"===r)o=!0;else{if(r===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=r}this.index++}this.throwError("Unterminated quote",e)}};var fi=function(t,e){this.lexer=t,this.options=e};function mi(t,e){return void 0!==t?t:e}function gi(t,e){return void 0===t?e:void 0===e?t:t+e}function vi(t,e){return!t(e).$stateful}function yi(t,e){var n,i;switch(t.type){case fi.Program:n=!0,ut(t.body,function(t){yi(t.expression,e),n=n&&t.expression.constant}),t.constant=n;break;case fi.Literal:t.constant=!0,t.toWatch=[];break;case fi.UnaryExpression:yi(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case fi.BinaryExpression:yi(t.left,e),yi(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case fi.LogicalExpression:yi(t.left,e),yi(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case fi.ConditionalExpression:yi(t.test,e),yi(t.alternate,e),yi(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case fi.Identifier:t.constant=!1,t.toWatch=[t];break;case fi.MemberExpression:yi(t.object,e),t.computed&&yi(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case fi.CallExpression:n=!!t.filter&&vi(e,t.callee.name),i=[],ut(t.arguments,function(t){yi(t,e),n=n&&t.constant,t.constant||i.push.apply(i,t.toWatch)}),t.constant=n,t.toWatch=t.filter&&vi(e,t.callee.name)?i:[t];break;case fi.AssignmentExpression:yi(t.left,e),yi(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case fi.ArrayExpression:n=!0,i=[],ut(t.elements,function(t){yi(t,e),n=n&&t.constant,t.constant||i.push.apply(i,t.toWatch)}),t.constant=n,t.toWatch=i;break;case fi.ObjectExpression:n=!0,i=[],ut(t.properties,function(t){yi(t.value,e),n=n&&t.value.constant,t.value.constant||i.push.apply(i,t.value.toWatch)}),t.constant=n,t.toWatch=i;break;case fi.ThisExpression:case fi.LocalsExpression:t.constant=!1,t.toWatch=[]}}function bi(t){if(1==t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function _i(t){return t.type===fi.Identifier||t.type===fi.MemberExpression}function wi(t){if(1===t.body.length&&_i(t.body[0].expression))return{type:fi.AssignmentExpression,left:t.body[0].expression,right:{type:fi.NGValueParameter},operator:"="}}function xi(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===fi.Literal||t.body[0].expression.type===fi.ArrayExpression||t.body[0].expression.type===fi.ObjectExpression)}function Ci(t){return t.constant}function ki(t,e){this.astBuilder=t,this.$filter=e}function $i(t,e){this.astBuilder=t,this.$filter=e}fi.Program="Program",fi.ExpressionStatement="ExpressionStatement",fi.AssignmentExpression="AssignmentExpression",fi.ConditionalExpression="ConditionalExpression",fi.LogicalExpression="LogicalExpression",fi.BinaryExpression="BinaryExpression",fi.UnaryExpression="UnaryExpression",fi.CallExpression="CallExpression",fi.MemberExpression="MemberExpression",fi.Identifier="Identifier",fi.Literal="Literal",fi.ArrayExpression="ArrayExpression",fi.Property="Property",fi.ObjectExpression="ObjectExpression",fi.ThisExpression="ThisExpression",fi.LocalsExpression="LocalsExpression",fi.NGValueParameter="NGValueParameter",fi.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:fi.Program,body:t}},expressionStatement:function(){return{type:fi.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();return this.expect("=")&&(t={type:fi.AssignmentExpression,left:t,right:this.assignment(),operator:"="}),t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:fi.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:fi.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:fi.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:fi.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:fi.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:fi.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:fi.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:fi.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=N(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:fi.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:fi.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:fi.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:fi.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:fi.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)for(;t.push(this.expression()),this.expect(","););return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:fi.Identifier,name:t.text}},constant:function(){return{type:fi.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:fi.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:fi.Property,kind:"init"},this.peek().constant?t.key=this.constant():this.peek().identifier?t.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),t.value=this.expression(),e.push(t)}while(this.expect(","));return this.consume("}"),{type:fi.ObjectExpression,properties:e}},throwError:function(t,e){throw ni("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw ni("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw ni("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,o){if(this.tokens.length>t){var r=this.tokens[t],s=r.text;if(s===e||s===n||s===i||s===o||!e&&!n&&!i&&!o)return r}return!1},expect:function(t,e,n,i){var o=this.peek(t,e,n,i);return!!o&&(this.tokens.shift(),o)},selfReferential:{this:{type:fi.ThisExpression},$locals:{type:fi.LocalsExpression}}},ki.prototype={compile:function(t,e){var o=this,n=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},yi(n,o.$filter);var i,r="";if(this.stage="assign",i=wi(n)){this.state.computing="assign";var s=this.nextId();this.recurse(i,s),this.return_(s),r="fn.assign="+this.generateFunction("assign","s,v,l")}var a=bi(n.body);o.stage="inputs",ut(a,function(t,e){var n="fn"+e;o.state[n]={vars:[],body:[],own:{}},o.state.computing=n;var i=o.nextId();o.recurse(t,i),o.return_(i),o.state.inputs.push(n),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(n);var l='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",u=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",l)(this.$filter,ii,ri,ui,oi,ci,mi,gi,t);return this.state=this.stage=void 0,u.literal=xi(n),u.constant=Ci(n),u},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return ut(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var n=[],i=this;return ut(this.state.filters,function(t,e){n.push(t+"=$filter("+i.escape(e)+")")}),n.length?"var "+n.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(n,t,e,i,o,r){var s,a,l,u,c=this;if(i=i||B,!r&&M(n.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",n.watchId)),this.lazyRecurse(n,t,e,i,o,!0));switch(n.type){case fi.Program:ut(n.body,function(t,e){c.recurse(t.expression,void 0,void 0,function(t){a=t}),e!==n.body.length-1?c.current().body.push(a,";"):c.return_(a)});break;case fi.Literal:u=this.escape(n.value),this.assign(t,u),i(u);break;case fi.UnaryExpression:this.recurse(n.argument,void 0,void 0,function(t){a=t}),u=n.operator+"("+this.ifDefined(a,0)+")",this.assign(t,u),i(u);break;case fi.BinaryExpression:this.recurse(n.left,void 0,void 0,function(t){s=t}),this.recurse(n.right,void 0,void 0,function(t){a=t}),u="+"===n.operator?this.plus(s,a):"-"===n.operator?this.ifDefined(s,0)+n.operator+this.ifDefined(a,0):"("+s+")"+n.operator+"("+a+")",this.assign(t,u),i(u);break;case fi.LogicalExpression:t=t||this.nextId(),c.recurse(n.left,t),c.if_("&&"===n.operator?t:c.not(t),c.lazyRecurse(n.right,t)),i(t);break;case fi.ConditionalExpression:t=t||this.nextId(),c.recurse(n.test,t),c.if_(t,c.lazyRecurse(n.alternate,t),c.lazyRecurse(n.consequent,t)),i(t);break;case fi.Identifier:t=t||this.nextId(),e&&(e.context="inputs"===c.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",n.name)+"?l:s"),e.computed=!1,e.name=n.name),ii(n.name),c.if_("inputs"===c.stage||c.not(c.getHasOwnProperty("l",n.name)),function(){c.if_("inputs"===c.stage||"s",function(){o&&1!==o&&c.if_(c.not(c.nonComputedMember("s",n.name)),c.lazyAssign(c.nonComputedMember("s",n.name),"{}")),c.assign(t,c.nonComputedMember("s",n.name))})},t&&c.lazyAssign(t,c.nonComputedMember("l",n.name))),(c.state.expensiveChecks||Si(n.name))&&c.addEnsureSafeObject(t),i(t);break;case fi.MemberExpression:s=e&&(e.context=this.nextId())||this.nextId(),t=t||this.nextId(),c.recurse(n.object,s,void 0,function(){c.if_(c.notNull(s),function(){o&&1!==o&&c.addEnsureSafeAssignContext(s),n.computed?(a=c.nextId(),c.recurse(n.property,a),c.getStringValue(a),c.addEnsureSafeMemberName(a),o&&1!==o&&c.if_(c.not(c.computedMember(s,a)),c.lazyAssign(c.computedMember(s,a),"{}")),u=c.ensureSafeObject(c.computedMember(s,a)),c.assign(t,u),e&&(e.computed=!0,e.name=a)):(ii(n.property.name),o&&1!==o&&c.if_(c.not(c.nonComputedMember(s,n.property.name)),c.lazyAssign(c.nonComputedMember(s,n.property.name),"{}")),u=c.nonComputedMember(s,n.property.name),(c.state.expensiveChecks||Si(n.property.name))&&(u=c.ensureSafeObject(u)),c.assign(t,u),e&&(e.computed=!1,e.name=n.property.name))},function(){c.assign(t,"undefined")}),i(t)},!!o);break;case fi.CallExpression:t=t||this.nextId(),n.filter?(a=c.filter(n.callee.name),l=[],ut(n.arguments,function(t){var e=c.nextId();c.recurse(t,e),l.push(e)}),u=a+"("+l.join(",")+")",c.assign(t,u),i(t)):(a=c.nextId(),s={},l=[],c.recurse(n.callee,a,s,function(){c.if_(c.notNull(a),function(){c.addEnsureSafeFunction(a),ut(n.arguments,function(t){c.recurse(t,c.nextId(),void 0,function(t){l.push(c.ensureSafeObject(t))})}),u=s.name?(c.state.expensiveChecks||c.addEnsureSafeObject(s.context),c.member(s.context,s.name,s.computed)+"("+l.join(",")+")"):a+"("+l.join(",")+")",u=c.ensureSafeObject(u),c.assign(t,u)},function(){c.assign(t,"undefined")}),i(t)}));break;case fi.AssignmentExpression:if(a=this.nextId(),s={},!_i(n.left))throw ni("lval","Trying to assign a value to a non l-value");this.recurse(n.left,void 0,s,function(){c.if_(c.notNull(s.context),function(){c.recurse(n.right,a),c.addEnsureSafeObject(c.member(s.context,s.name,s.computed)),c.addEnsureSafeAssignContext(s.context),u=c.member(s.context,s.name,s.computed)+n.operator+a,c.assign(t,u),i(t||u)})},1);break;case fi.ArrayExpression:l=[],ut(n.elements,function(t){c.recurse(t,c.nextId(),void 0,function(t){l.push(t)})}),u="["+l.join(",")+"]",this.assign(t,u),i(u);break;case fi.ObjectExpression:l=[],ut(n.properties,function(e){c.recurse(e.value,c.nextId(),void 0,function(t){l.push(c.escape(e.key.type===fi.Identifier?e.key.name:""+e.key.value)+":"+t)})}),u="{"+l.join(",")+"}",this.assign(t,u),i(u);break;case fi.ThisExpression:this.assign(t,"s"),i("s");break;case fi.LocalsExpression:this.assign(t,"l"),i("l");break;case fi.NGValueParameter:this.assign(t,"v"),i("v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),i[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var i=this.current().body;i.push("if(",t,"){"),e(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/[$_a-zA-Z][$_a-zA-Z0-9]*/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},addEnsureSafeAssignContext:function(t){this.current().body.push(this.ensureSafeAssignContext(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},ensureSafeAssignContext:function(t){return"ensureSafeAssignContext("+t+",text)"},lazyRecurse:function(t,e,n,i,o,r){var s=this;return function(){s.recurse(t,e,n,i,o,r)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(pt(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(w(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw ni("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},$i.prototype={compile:function(t,e){var n,i,o=this,r=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,yi(r,o.$filter),(n=wi(r))&&(i=this.recurse(n));var s,a=bi(r.body);a&&(s=[],ut(a,function(t,e){var n=o.recurse(t);t.input=n,s.push(n),t.watchId=e}));var l=[];ut(r.body,function(t){l.push(o.recurse(t.expression))});var u=0===r.body.length?B:1===r.body.length?l[0]:function(e,n){var i;return ut(l,function(t){i=t(e,n)}),i};return i&&(u.assign=function(t,e,n){return i(t,n,e)}),s&&(u.inputs=s),u.literal=xi(r),u.constant=Ci(r),u},recurse:function(t,l,e){var s,u,c,h=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case fi.Literal:return this.value(t.value,l);case fi.UnaryExpression:return u=this.recurse(t.argument),this["unary"+t.operator](u,l);case fi.BinaryExpression:case fi.LogicalExpression:return s=this.recurse(t.left),u=this.recurse(t.right),this["binary"+t.operator](s,u,l);case fi.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),l);case fi.Identifier:return ii(t.name,h.expression),h.identifier(t.name,h.expensiveChecks||Si(t.name),l,e,h.expression);case fi.MemberExpression:return s=this.recurse(t.object,!1,!!e),t.computed||(ii(t.property.name,h.expression),u=t.property.name),t.computed&&(u=this.recurse(t.property)),t.computed?this.computedMember(s,u,l,e,h.expression):this.nonComputedMember(s,u,h.expensiveChecks,l,e,h.expression);case fi.CallExpression:return c=[],ut(t.arguments,function(t){c.push(h.recurse(t))}),t.filter&&(u=this.$filter(t.callee.name)),t.filter||(u=this.recurse(t.callee,!0)),t.filter?function(t,e,n,i){for(var o=[],r=0;r<c.length;++r)o.push(c[r](t,e,n,i));var s=u.apply(void 0,o,i);return l?{context:void 0,name:void 0,value:s}:s}:function(t,e,n,i){var o,r=u(t,e,n,i);if(null!=r.value){ri(r.context,h.expression),ui(r.value,h.expression);for(var s=[],a=0;a<c.length;++a)s.push(ri(c[a](t,e,n,i),h.expression));o=ri(r.value.apply(r.context,s),h.expression)}return l?{value:o}:o};case fi.AssignmentExpression:return s=this.recurse(t.left,!0,1),u=this.recurse(t.right),function(t,e,n,i){var o=s(t,e,n,i),r=u(t,e,n,i);return ri(o.value,h.expression),ci(o.context),o.context[o.name]=r,l?{value:r}:r};case fi.ArrayExpression:return c=[],ut(t.elements,function(t){c.push(h.recurse(t))}),function(t,e,n,i){for(var o=[],r=0;r<c.length;++r)o.push(c[r](t,e,n,i));return l?{value:o}:o};case fi.ObjectExpression:return c=[],ut(t.properties,function(t){c.push({key:t.key.type===fi.Identifier?t.key.name:""+t.key.value,value:h.recurse(t.value)})}),function(t,e,n,i){for(var o={},r=0;r<c.length;++r)o[c[r].key]=c[r].value(t,e,n,i);return l?{value:o}:o};case fi.ThisExpression:return function(t){return l?{value:t}:t};case fi.LocalsExpression:return function(t,e){return l?{value:e}:e};case fi.NGValueParameter:return function(t,e,n){return l?{value:n}:n}}},"unary+":function(r,s){return function(t,e,n,i){var o=r(t,e,n,i);return o=M(o)?+o:0,s?{value:o}:o}},"unary-":function(r,s){return function(t,e,n,i){var o=r(t,e,n,i);return o=M(o)?-o:0,s?{value:o}:o}},"unary!":function(r,s){return function(t,e,n,i){var o=!r(t,e,n,i);return s?{value:o}:o}},"binary+":function(r,s,a){return function(t,e,n,i){var o=gi(r(t,e,n,i),s(t,e,n,i));return a?{value:o}:o}},"binary-":function(a,l,u){return function(t,e,n,i){var o=a(t,e,n,i),r=l(t,e,n,i),s=(M(o)?o:0)-(M(r)?r:0);return u?{value:s}:s}},"binary*":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)*s(t,e,n,i);return a?{value:o}:o}},"binary/":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)/s(t,e,n,i);return a?{value:o}:o}},"binary%":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)%s(t,e,n,i);return a?{value:o}:o}},"binary===":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)===s(t,e,n,i);return a?{value:o}:o}},"binary!==":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)!==s(t,e,n,i);return a?{value:o}:o}},"binary==":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)==s(t,e,n,i);return a?{value:o}:o}},"binary!=":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)!=s(t,e,n,i);return a?{value:o}:o}},"binary<":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)<s(t,e,n,i);return a?{value:o}:o}},"binary>":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)>s(t,e,n,i);return a?{value:o}:o}},"binary<=":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)<=s(t,e,n,i);return a?{value:o}:o}},"binary>=":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)>=s(t,e,n,i);return a?{value:o}:o}},"binary&&":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)&&s(t,e,n,i);return a?{value:o}:o}},"binary||":function(r,s,a){return function(t,e,n,i){var o=r(t,e,n,i)||s(t,e,n,i);return a?{value:o}:o}},"ternary?:":function(r,s,a,l){return function(t,e,n,i){var o=r(t,e,n,i)?s(t,e,n,i):a(t,e,n,i);return l?{value:o}:o}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(s,a,l,u,c){return function(t,e,n,i){var o=e&&s in e?e:t;u&&1!==u&&o&&!o[s]&&(o[s]={});var r=o?o[s]:void 0;return a&&ri(r,c),l?{context:o,name:s,value:r}:r}},computedMember:function(a,l,u,c,h){return function(t,e,n,i){var o,r,s=a(t,e,n,i);return null!=s&&(ii(o=oi(o=l(t,e,n,i)),h),c&&1!==c&&(ci(s),s&&!s[o]&&(s[o]={})),ri(r=s[o],h)),u?{context:s,name:o,value:r}:r}},nonComputedMember:function(s,a,l,u,c,h){return function(t,e,n,i){var o=s(t,e,n,i);c&&1!==c&&(ci(o),o&&!o[a]&&(o[a]={}));var r=null!=o?o[a]:void 0;return(l||Si(a))&&ri(r,h),u?{context:o,name:a,value:r}:r}},inputs:function(o,r){return function(t,e,n,i){return i?i[r]:o(t,e,n)}}};var Ti=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n,this.ast=new fi(t,n),this.astCompiler=n.csp?new $i(this.ast,e):new ki(this.ast,e)};function Si(t){return"constructor"==t}Ti.prototype={constructor:Ti,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}};var Mi=Object.prototype.valueOf;function Di(t){return mt(t.valueOf)?t.valueOf():Mi.call(t)}function Li(){var n,i,b=At(),_=At(),o={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){o[t]=e},this.setIdentifierFns=function(t,e){return n=t,i=e,this},this.$get=["$filter",function(u){var t=q().noUnsafeEval,c={csp:t,expensiveChecks:!1,literals:N(o),isIdentifierStart:mt(n)&&n,isIdentifierContinue:mt(i)&&i},h={csp:t,expensiveChecks:!0,literals:N(o),isIdentifierStart:mt(n)&&n,isIdentifierContinue:mt(i)&&i},d=!1;return e.$$runningExpensiveChecks=function(){return d},e;function e(t,e,n){var i,o,r;switch(n=n||d,typeof t){case"string":t=t.trim();var s=n?_:b;if(!(i=s[r=t])){":"===t.charAt(0)&&":"===t.charAt(1)&&(o=!0,t=t.substring(2));var a=n?h:c,l=new pi(a);(i=new Ti(l,u,a).parse(t)).constant?i.$$watchDelegate=v:o?i.$$watchDelegate=i.literal?g:m:i.inputs&&(i.$$watchDelegate=f),n&&(i=function t(r){if(!r)return r;n.$$watchDelegate=r.$$watchDelegate;n.assign=t(r.assign);n.constant=r.constant;n.literal=r.literal;for(var e=0;r.inputs&&e<r.inputs.length;++e)r.inputs[e]=t(r.inputs[e]);n.inputs=r.inputs;return n;function n(t,e,n,i){var o=d;d=!0;try{return r(t,e,n,i)}finally{d=o}}}(i)),s[r]=i}return y(i,e);case"function":return y(t,e);default:return y(B,e)}}function p(t,e){return null==t||null==e?t===e:("object"!=typeof t||"object"!=typeof(t=Di(t)))&&(t===e||t!=t&&e!=e)}function f(t,e,n,r,i){var s,a=r.inputs;if(1===a.length){var o=p;return a=a[0],t.$watch(function(t){var e=a(t);return p(e,o)||(s=r(t,void 0,void 0,[e]),o=e&&Di(e)),s},e,n,i)}for(var l=[],u=[],c=0,h=a.length;c<h;c++)l[c]=p,u[c]=null;return t.$watch(function(t){for(var e=!1,n=0,i=a.length;n<i;n++){var o=a[n](t);(e||(e=!p(o,l[n])))&&(u[n]=o,l[n]=o&&Di(o))}return e&&(s=r(t,void 0,void 0,u)),s},e,n,i)}function m(t,i,e,n){var o,r;return o=t.$watch(function(t){return n(t)},function(t,e,n){r=t,mt(i)&&i.apply(this,arguments),M(t)&&n.$$postDigest(function(){M(r)&&o()})},e)}function g(t,i,e,n){var o,r;return o=t.$watch(function(t){return n(t)},function(t,e,n){r=t,mt(i)&&i.call(this,t,e,n),s(t)&&n.$$postDigest(function(){s(r)&&o()})},e);function s(t){var e=!0;return ut(t,function(t){M(t)||(e=!1)}),e}}function v(t,e,n,i){var o;return o=t.$watch(function(t){return o(),i(t)},e,n)}function y(s,a){if(!a)return s;var t=s.$$watchDelegate,r=!1,e=t!==g&&t!==m?function(t,e,n,i){var o=r&&i?i[0]:s(t,e,n,i);return a(o,t,e)}:function(t,e,n,i){var o=s(t,e,n,i),r=a(o,t,e);return M(o)?r:o};return s.$$watchDelegate&&s.$$watchDelegate!==f?e.$$watchDelegate=s.$$watchDelegate:a.$stateful||(e.$$watchDelegate=f,r=!s.inputs,e.inputs=s.inputs?s.inputs:[s]),e}}]}function Ei(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Ai(function(t){e.$evalAsync(t)},t)}]}function Pi(){this.$get=["$browser","$exceptionHandler",function(e,t){return Ai(function(t){e.defer(t)},t)}]}function Ai(e,s){var n=f("$q",TypeError);function t(){this.$$state={status:0}}function r(e,n){return function(t){n.call(e,t)}}function a(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){!function(t){var e,n,i;i=t.pending,t.processScheduled=!1,t.pending=void 0;for(var o=0,r=i.length;o<r;++o){n=i[o][0],e=i[o][t.status];try{mt(e)?n.resolve(e(t.value)):1===t.status?n.resolve(t.value):n.reject(t.value)}catch(t){n.reject(t),s(t)}}}(t)}))}function l(){this.promise=new t}ct(t.prototype,{then:function(t,e,n){if(ht(t)&&ht(e)&&ht(n))return this;var i=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),0<this.$$state.status&&a(this.$$state),i.promise},catch:function(t){return this.then(null,t)},finally:function(e,t){return this.then(function(t){return i(t,!0,e)},function(t){return i(t,!1,e)},t)}}),ct(l.prototype,{resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(n("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){var e,n=this,i=!1;try{(dt(t)||mt(t))&&(e=t&&t.then),mt(e)?(this.promise.$$state.status=-1,e.call(t,function(t){if(i)return;i=!0,n.$$resolve(t)},o,r(this,this.notify))):(this.promise.$$state.value=t,this.promise.$$state.status=1,a(this.promise.$$state))}catch(t){o(t),s(t)}function o(t){i||(i=!0,n.$$reject(t))}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,a(this.promise.$$state)},notify:function(o){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){for(var t,e,n=0,i=r.length;n<i;n++){e=r[n][0],t=r[n][3];try{e.notify(mt(t)?t(o):o)}catch(t){s(t)}}})}});var o=function(t,e){var n=new l;return e?n.resolve(t):n.reject(t),n.promise},i=function(t,e,n){var i=null;try{mt(n)&&(i=n())}catch(t){return o(t,!1)}return E(i)?i.then(function(){return o(t,e)},function(t){return o(t,!1)}):o(t,e)},u=function(t,e,n,i){var o=new l;return o.resolve(t),o.promise.then(e,n,i)},c=u;var h=function(t){if(!mt(t))throw n("norslvr","Expected resolverFn, got '{0}'",t);var e=new l;return t(function(t){e.resolve(t)},function(t){e.reject(t)}),e.promise};return h.prototype=t.prototype,h.defer=function(){var t=new l;return t.resolve=r(t,t.resolve),t.reject=r(t,t.reject),t.notify=r(t,t.notify),t},h.reject=function(t){var e=new l;return e.reject(t),e.promise},h.when=u,h.resolve=c,h.all=function(t){var n=new l,i=0,o=ft(t)?[]:{};return ut(t,function(t,e){i++,u(t).then(function(t){o.hasOwnProperty(e)||(o[e]=t,--i||n.resolve(o))},function(t){o.hasOwnProperty(e)||n.reject(t)})}),0===i&&n.resolve(o),n.promise},h}function Oi(){this.$get=["$window","$timeout",function(t,n){var i=t.requestAnimationFrame||t.webkitRequestAnimationFrame,o=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,e=!!i,r=e?function(t){var e=i(t);return function(){o(e)}}:function(t){var e=n(t,16.66,!1);return function(){n.cancel(e)}};return r.supported=e,r}]}function Ii(){var x=10,C=f("$rootScope"),k=null,$=null;this.digestTtl=function(t){return arguments.length&&(x=t),x},this.$get=["$exceptionHandler","$parse","$browser",function(d,f,p){function i(t){t.currentScope.$$destroyed=!0}function o(){this.$id=T(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,(this.$root=this).$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}o.prototype={constructor:o,$new:function(t,e){var n;return e=e||this,t?(n=new o).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=T(),this.$$ChildScope=null}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!=this)&&n.$on("$destroy",i),n},$watch:function(t,e,n,i){var o=f(t);if(o.$$watchDelegate)return o.$$watchDelegate(this,e,n,o,t);var r=this,s=r.$$watchers,a={fn:e,last:_,get:o,exp:i||t,eq:!!n};return k=null,mt(e)||(a.fn=B),s||(s=r.$$watchers=[]),s.unshift(a),l(this,1),function(){0<=_t(s,a)&&l(r,-1),k=null}},$watchGroup:function(t,i){var o=new Array(t.length),r=new Array(t.length),s=[],a=this,l=!1,e=!0;if(!t.length){var n=!0;return a.$evalAsync(function(){n&&i(r,r,a)}),function(){n=!1}}if(1===t.length)return this.$watch(t[0],function(t,e,n){r[0]=t,o[0]=e,i(r,t===e?r:o,n)});function u(){l=!1,e?(e=!1,i(r,r,a)):i(r,o,a)}return ut(t,function(t,n){var e=a.$watch(t,function(t,e){r[n]=t,o[n]=e,l||(l=!0,a.$evalAsync(u))});s.push(e)}),function(){for(;s.length;)s.shift()()}},$watchCollection:function(t,n){p.$stateful=!0;var s,a,i,o=this,r=1<n.length,l=0,e=f(t,p),u=[],c={},h=!0,d=0;function p(t){var e,n,i,o;if(!ht(s=t)){if(dt(s))if(O(s)){a!==u&&(d=(a=u).length=0,l++),e=s.length,d!==e&&(l++,a.length=d=e);for(var r=0;r<e;r++)o=a[r],i=s[r],o!=o&&i!=i||o===i||(l++,a[r]=i)}else{for(n in a!==c&&(a=c={},d=0,l++),e=0,s)z.call(s,n)&&(e++,i=s[n],o=a[n],n in a?o!=o&&i!=i||o===i||(l++,a[n]=i):(d++,a[n]=i,l++));if(e<d)for(n in l++,a)z.call(s,n)||(d--,delete a[n])}else a!==s&&(a=s,l++);return l}}return this.$watch(e,function(){if(h?(h=!1,n(s,s,o)):n(s,i,o),r)if(dt(s))if(O(s)){i=new Array(s.length);for(var t=0;t<s.length;t++)i[t]=s[t]}else for(var e in i={},s)z.call(s,e)&&(i[e]=s[e]);else i=s})},$digest:function(){var t,e,n,i,o,r,s,a,l,u,c=x,h=[];y("$digest"),p.$$checkUrlChange(),this===m&&null!==$&&(p.defer.cancel($),w()),k=null;do{for(r=!1,a=this;g.length;){try{(u=g.shift()).scope.$eval(u.expression,u.locals)}catch(t){d(t)}k=null}t:do{if(i=a.$$watchers)for(o=i.length;o--;)try{if(t=i[o])if((e=(0,t.get)(a))===(n=t.last)||(t.eq?wt(e,n):"number"==typeof e&&"number"==typeof n&&isNaN(e)&&isNaN(n))){if(t===k){r=!1;break t}}else r=!0,(k=t).last=t.eq?N(e,null):e,(0,t.fn)(e,n===_?e:n,a),c<5&&(h[l=4-c]||(h[l]=[]),h[l].push({msg:mt(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,newVal:e,oldVal:n}))}catch(t){d(t)}if(!(s=a.$$watchersCount&&a.$$childHead||a!==this&&a.$$nextSibling))for(;a!==this&&!(s=a.$$nextSibling);)a=a.$parent}while(a=s);if((r||g.length)&&!c--)throw b(),C("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",x,h)}while(r||g.length);for(b();v.length;)try{v.shift()()}catch(t){d(t)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===m&&p.$$applicationDestroyed(),l(this,-this.$$watchersCount),this.$$listenerCount)r(this,this.$$listenerCount[e],e);t&&t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=B,this.$on=this.$watch=this.$watchGroup=function(){return B},this.$$listeners={},this.$$nextSibling=null,function t(e){9===F&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return f(t)(this,e)},$evalAsync:function(t,e){m.$$phase||g.length||p.defer(function(){g.length&&m.$digest()}),g.push({scope:this,expression:f(t),locals:e})},$$postDigest:function(t){v.push(t)},$apply:function(t){try{y("$apply");try{return this.$eval(t)}finally{b()}}catch(t){d(t)}finally{try{m.$digest()}catch(t){throw d(t),t}}},$applyAsync:function(t){var e=this;t&&n.push(function(){e.$eval(t)}),t=f(t),null===$&&($=p.defer(function(){m.$apply(w)}))},$on:function(e,n){var i=this.$$listeners[e];i||(this.$$listeners[e]=i=[]),i.push(n);for(var t=this;t.$$listenerCount[e]||(t.$$listenerCount[e]=0),t.$$listenerCount[e]++,t=t.$parent;);var o=this;return function(){var t=i.indexOf(n);-1!==t&&(i[t]=null,r(o,1,e))}},$emit:function(t,e){var n,i,o,r=[],s=this,a=!1,l={name:t,targetScope:s,stopPropagation:function(){a=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},u=V([l],arguments,1);do{for(n=s.$$listeners[t]||r,l.currentScope=s,i=0,o=n.length;i<o;i++)if(n[i])try{n[i].apply(null,u)}catch(t){d(t)}else n.splice(i,1),i--,o--;if(a)return l.currentScope=null,l;s=s.$parent}while(s);return l.currentScope=null,l},$broadcast:function(t,e){var n=this,i=this,o={name:t,targetScope:this,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return o;for(var r,s,a,l=V([o],arguments,1);n=i;){for(s=0,a=(r=(o.currentScope=n).$$listeners[t]||[]).length;s<a;s++)if(r[s])try{r[s].apply(null,l)}catch(t){d(t)}else r.splice(s,1),s--,a--;if(!(i=n.$$listenerCount[t]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(i=n.$$nextSibling);)n=n.$parent}return o.currentScope=null,o}};var m=new o,g=m.$$asyncQueue=[],v=m.$$postDigestQueue=[],n=m.$$applyAsyncQueue=[];return m;function y(t){if(m.$$phase)throw C("inprog","{0} already in progress",m.$$phase);m.$$phase=t}function b(){m.$$phase=null}function l(t,e){for(;t.$$watchersCount+=e,t=t.$parent;);}function r(t,e,n){for(;t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n],t=t.$parent;);}function _(){}function w(){for(;n.length;)try{n.shift()()}catch(t){d(t)}$=null}}]}function Ni(){var o=/^\s*(https?|ftp|mailto|tel|file):/,r=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return M(t)?(o=t,this):o},this.imgSrcSanitizationWhitelist=function(t){return M(t)?(r=t,this):r},this.$get=function(){return function(t,e){var n,i=e?r:o;return""===(n=Yi(t).href)||n.match(i)?t:"unsafe:"+n}}}var Ri=f("$sce"),zi={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function Ui(t){var e=[];return M(t)&&ut(t,function(t){e.push(function(t){if("self"===t)return t;if(pt(t)){if(-1<t.indexOf("***"))throw Ri("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=A(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(D(t))return new RegExp("^"+t.source+"$");throw Ri("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function Fi(){this.SCE_CONTEXTS=zi;var s=["self"],a=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(s=Ui(t)),s},this.resourceUrlBlacklist=function(t){return arguments.length&&(a=Ui(t)),a},this.$get=["$injector",function(t){var i=function(t){throw Ri("unsafe","Attempting to use an unsafe value in a safe context.")};function r(t,e){return"self"===t?Ki(e):!!t.exec(e.href)}function e(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}t.has("$sanitize")&&(i=t.get("$sanitize"));var n=e(),o={};return o[zi.HTML]=e(n),o[zi.CSS]=e(n),o[zi.URL]=e(n),o[zi.JS]=e(n),o[zi.RESOURCE_URL]=e(o[zi.URL]),{trustAs:function(t,e){var n=o.hasOwnProperty(t)?o[t]:null;if(!n)throw Ri("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||ht(e)||""===e)return e;if("string"!=typeof e)throw Ri("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(t,e){if(null===e||ht(e)||""===e)return e;var n=o.hasOwnProperty(t)?o[t]:null;if(n&&e instanceof n)return e.$$unwrapTrustedValue();if(t===zi.RESOURCE_URL){if(function(t){var e,n,i=Yi(t.toString()),o=!1;for(e=0,n=s.length;e<n;e++)if(r(s[e],i)){o=!0;break}if(o)for(e=0,n=a.length;e<n;e++)if(r(a[e],i)){o=!1;break}return o}(e))return e;throw Ri("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}if(t===zi.HTML)return i(e);throw Ri("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof n?t.$$unwrapTrustedValue():t}}}]}function Hi(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(i,t){if(e&&F<8)throw Ri("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var o=j(zi);o.isEnabled=function(){return e},o.trustAs=t.trustAs,o.getTrusted=t.getTrusted,o.valueOf=t.valueOf,e||(o.trustAs=o.getTrusted=function(t,e){return e},o.valueOf=x),o.parseAs=function(e,t){var n=i(t);return n.literal&&n.constant?n:i(t,function(t){return o.getTrusted(e,t)})};var r=o.parseAs,s=o.getTrusted,a=o.trustAs;return ut(zi,function(e,t){var n=U(t);o[Yt("parse_as_"+n)]=function(t){return r(e,t)},o[Yt("get_trusted_"+n)]=function(t){return s(e,t)},o[Yt("trust_as_"+n)]=function(t){return a(e,t)}}),o}]}function Bi(){this.$get=["$window","$document",function(t,e){var n,i,o={},r=!(t.chrome&&t.chrome.app&&t.chrome.app.runtime)&&t.history&&t.history.pushState,s=y((/android (\d+)/.exec(U((t.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((t.navigator||{}).userAgent),l=e[0]||{},u=/^(Moz|webkit|ms)(?=[A-Z])/,c=l.body&&l.body.style,h=!1,d=!1;if(c){for(var p in c)if(i=u.exec(p)){n=(n=i[0]).substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in c&&"webkit"),h=!!("transition"in c||n+"Transition"in c),d=!!("animation"in c||n+"Animation"in c),!s||h&&d||(h=pt(c.webkitTransition),d=pt(c.webkitAnimation))}return{history:!(!r||s<4||a),hasEvent:function(t){if("input"===t&&F<=11)return!1;if(ht(o[t])){var e=l.createElement("div");o[t]="on"+t in e}return o[t]},csp:q(),vendorPrefix:n,transitions:h,animations:d,android:s}}]}var ji=f("$compile");function qi(){var l;this.httpOptions=function(t){return t?(l=t,this):l},this.$get=["$templateCache","$http","$q","$sce",function(i,o,r,s){function a(e,n){a.totalPendingRequests++,pt(e)&&i.get(e)||(e=s.getTrustedResourceUrl(e));var t=o.defaults&&o.defaults.transformResponse;return ft(t)?t=t.filter(function(t){return t!==Mn}):t===Mn&&(t=null),o.get(e,ct({cache:i,transformResponse:t},l)).finally(function(){a.totalPendingRequests--}).then(function(t){return i.put(e,t.data),t.data},function(t){if(n)return r.reject(t);throw ji("tpload","Failed to load template: {0} (HTTP status: {1} {2})",e,t.status,t.statusText)})}return a.totalPendingRequests=0,a}]}function Wi(){this.$get=["$rootScope","$browser","$location",function(e,n,i){var t={findBindings:function(t,n,i){var e=t.getElementsByClassName("ng-binding"),o=[];return ut(e,function(e){var t=$.element(e).data("$binding");t&&ut(t,function(t){i?new RegExp("(^|\\s)"+A(n)+"(\\s|\\||$)").test(t)&&o.push(e):-1!=t.indexOf(n)&&o.push(e)})}),o},findModels:function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],o=0;o<i.length;++o){var r="["+i[o]+"model"+(n?"=":"*=")+'"'+e+'"]',s=t.querySelectorAll(r);if(s.length)return s}},getLocation:function(){return i.url()},setLocation:function(t){t!==i.url()&&(i.url(t),e.$digest())},whenStable:function(t){n.notifyWhenNoOutstandingRequests(t)}};return t}]}function Vi(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(l,u,c,h,d){var p={};function t(t,e,n){mt(t)||(n=e,e=t,t=B);var i,o=xt(arguments,3),r=M(n)&&!n,s=(r?h:c).defer(),a=s.promise;return i=u.defer(function(){try{s.resolve(t.apply(null,o))}catch(t){s.reject(t),d(t)}finally{delete p[a.$$timeoutId]}r||l.$apply()},e),a.$$timeoutId=i,p[i]=s,a}return t.cancel=function(t){return!!(t&&t.$$timeoutId in p)&&(p[t.$$timeoutId].reject("canceled"),delete p[t.$$timeoutId],u.defer.cancel(t.$$timeoutId))},t}]}var Zi=R.document.createElement("a"),Gi=Yi(R.location.href);function Yi(t){var e=t;return F&&(Zi.setAttribute("href",e),e=Zi.href),Zi.setAttribute("href",e),{href:Zi.href,protocol:Zi.protocol?Zi.protocol.replace(/:$/,""):"",host:Zi.host,search:Zi.search?Zi.search.replace(/^\?/,""):"",hash:Zi.hash?Zi.hash.replace(/^#/,""):"",hostname:Zi.hostname,port:Zi.port,pathname:"/"===Zi.pathname.charAt(0)?Zi.pathname:"/"+Zi.pathname}}function Ki(t){var e=pt(t)?Yi(t):t;return e.protocol===Gi.protocol&&e.host===Gi.host}function Xi(){this.$get=S(R)}function Ji(t){var s=t[0]||{},a={},l="";function u(e){try{return decodeURIComponent(e)}catch(t){return e}}return function(){var t,e,n,i,o,r=s.cookie||"";if(r!==l)for(t=(l=r).split("; "),a={},n=0;n<t.length;n++)0<(i=(e=t[n]).indexOf("="))&&(o=u(e.substring(0,i)),ht(a[o])&&(a[o]=u(e.substring(i+1))));return a}}function Qi(){this.$get=Ji}function to(i){var o="Filter";function r(t,e){if(dt(t)){var n={};return ut(t,function(t,e){n[e]=r(e,t)}),n}return i.factory(t+o,e)}this.register=r,this.$get=["$injector",function(e){return function(t){return e.get(t+o)}}],r("currency",ao),r("date",_o),r("filter",eo),r("json",wo),r("limitTo",ko),r("lowercase",xo),r("number",lo),r("orderBy",$o),r("uppercase",Co)}function eo(){return function(t,e,n){if(!O(t)){if(null==t)return t;throw f("filter")("notarray","Expected array but received: {0}",t)}var i,o;switch(io(e)){case"function":i=e;break;case"boolean":case"null":case"number":case"string":o=!0;case"object":i=function(e,n,i){var o=dt(e)&&"$"in e;!0===n?n=wt:mt(n)||(n=function(t,e){return!ht(t)&&(null===t||null===e?t===e:!(dt(e)||dt(t)&&!b(t))&&(t=U(""+t),e=U(""+e),-1!==t.indexOf(e)))});return function(t){return o&&!dt(t)?no(t,e.$,n,!1):no(t,e,n,i)}}(e,n,o);break;default:return t}return Array.prototype.filter.call(t,i)}}function no(t,e,n,i,o){var r=io(t),s=io(e);if("string"===s&&"!"===e.charAt(0))return!no(t,e.substring(1),n,i);if(ft(t))return t.some(function(t){return no(t,e,n,i)});switch(r){case"object":var a;if(i){for(a in t)if("$"!==a.charAt(0)&&no(t[a],e,n,!0))return!0;return!o&&no(t,e,n,!1)}if("object"!==s)return n(t,e);for(a in e){var l=e[a];if(!mt(l)&&!ht(l)){var u="$"===a;if(!no(u?t:t[a],l,n,u,u))return!1}}return!0;case"function":return!1;default:return n(t,e)}}function io(t){return null===t?"null":typeof t}Ji.$inject=["$document"],to.$inject=["$provide"];var oo=22,ro=".",so="0";function ao(t){var i=t.NUMBER_FORMATS;return function(t,e,n){return ht(e)&&(e=i.CURRENCY_SYM),ht(n)&&(n=i.PATTERNS[1].maxFrac),null==t?t:uo(t,i.PATTERNS[1],i.GROUP_SEP,i.DECIMAL_SEP,n).replace(/\u00A4/g,e)}}function lo(t){var n=t.NUMBER_FORMATS;return function(t,e){return null==t?t:uo(t,n.PATTERNS[0],n.GROUP_SEP,n.DECIMAL_SEP,e)}}function uo(t,e,n,i,o){if(!pt(t)&&!w(t)||isNaN(t))return"";var r,s=!isFinite(t),a=!1,l=Math.abs(t)+"",u="";if(s)u="";else{(function(t,e,n,i){var o=t.d,r=o.length-t.i,s=(e=ht(e)?Math.min(Math.max(n,r),i):+e)+t.i,a=o[s];if(0<s){o.splice(Math.max(t.i,s));for(var l=s;l<o.length;l++)o[l]=0}else{r=Math.max(0,r),t.i=1,o.length=Math.max(1,s=e+1),o[0]=0;for(var u=1;u<s;u++)o[u]=0}if(5<=a)if(s-1<0){for(var c=0;s<c;c--)o.unshift(0),t.i++;o.unshift(1),t.i++}else o[s-1]++;for(;r<Math.max(0,e);r++)o.push(0);var h=o.reduceRight(function(t,e,n,i){return e+=t,i[n]=e%10,Math.floor(e/10)},0);h&&(o.unshift(h),t.i++)})(r=function(t){var e,n,i,o,r,s=0;for(-1<(n=t.indexOf(ro))&&(t=t.replace(ro,"")),0<(i=t.search(/e/i))?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charAt(i)==so;i++);if(i==(r=t.length))e=[0],n=1;else{for(r--;t.charAt(r)==so;)r--;for(n-=i,e=[],o=0;i<=r;i++,o++)e[o]=+t.charAt(i)}return oo<n&&(e=e.splice(0,oo-1),s=n-1,n=1),{d:e,e:s,i:n}}(l),o,e.minFrac,e.maxFrac);var c=r.d,h=r.i,d=r.e,p=[];for(a=c.reduce(function(t,e){return t&&!e},!0);h<0;)c.unshift(0),h++;0<h?p=c.splice(h):(p=c,c=[0]);var f=[];for(c.length>=e.lgSize&&f.unshift(c.splice(-e.lgSize).join(""));c.length>e.gSize;)f.unshift(c.splice(-e.gSize).join(""));c.length&&f.unshift(c.join("")),u=f.join(n),p.length&&(u+=i+p.join("")),d&&(u+="e+"+d)}return t<0&&!a?e.negPre+u+e.negSuf:e.posPre+u+e.posSuf}function co(t,e,n,i){var o="";for((t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o="-")),t=""+t;t.length<e;)t=so+t;return n&&(t=t.substr(t.length-e)),o+t}function ho(n,i,o,r,s){return o=o||0,function(t){var e=t["get"+n]();return(0<o||-o<e)&&(e+=o),0===e&&-12==o&&(e=12),co(e,i,r,s)}}function po(i,o,r){return function(t,e){var n=t["get"+i]();return e[c((r?"STANDALONE":"")+(o?"SHORT":"")+i)][n]}}function fo(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function mo(o){return function(t){var e,n=fo(t.getFullYear()),i=+(e=t,new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay())))-+n;return co(1+Math.round(i/6048e5),o)}}function go(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}ao.$inject=["$locale"];var vo={yyyy:ho("FullYear",4,0,!(lo.$inject=["$locale"]),!0),yy:ho("FullYear",2,0,!0,!0),y:ho("FullYear",1,0,!1,!0),MMMM:po("Month"),MMM:po("Month",!0),MM:ho("Month",2,1),M:ho("Month",1,1),LLLL:po("Month",!1,!0),dd:ho("Date",2),d:ho("Date",1),HH:ho("Hours",2),H:ho("Hours",1),hh:ho("Hours",2,-12),h:ho("Hours",1,-12),mm:ho("Minutes",2),m:ho("Minutes",1),ss:ho("Seconds",2),s:ho("Seconds",1),sss:ho("Milliseconds",3),EEEE:po("Day"),EEE:po("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var i=-1*n,o=0<=i?"+":"";return o+=co(Math[0<i?"floor":"ceil"](i/60),2)+co(Math.abs(i%60),2)},ww:mo(2),w:mo(1),G:go,GG:go,GGG:go,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},yo=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,bo=/^\-?\d+$/;function _o(l){var h=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(e,t,n){var i,o,r="",s=[];if(t=t||"mediumDate",t=l.DATETIME_FORMATS[t]||t,pt(e)&&(e=bo.test(e)?y(e):function(t){var e;if(e=t.match(h)){var n=new Date(0),i=0,o=0,r=e[8]?n.setUTCFullYear:n.setFullYear,s=e[8]?n.setUTCHours:n.setHours;e[9]&&(i=y(e[9]+e[10]),o=y(e[9]+e[11])),r.call(n,y(e[1]),y(e[2])-1,y(e[3]));var a=y(e[4]||0)-i,l=y(e[5]||0)-o,u=y(e[6]||0),c=Math.round(1e3*parseFloat("0."+(e[7]||0)));return s.call(n,a,l,u,c),n}return t}(e)),w(e)&&(e=new Date(e)),!k(e)||!isFinite(e.getTime()))return e;for(;t;)t=(o=yo.exec(t))?(s=V(s,o,1)).pop():(s.push(t),null);var a=e.getTimezoneOffset();return n&&(a=X(n,a),e=J(e,n,!0)),ut(s,function(t){i=vo[t],r+=i?i(e,l.DATETIME_FORMATS,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),r}}function wo(){return function(t,e){return ht(e)&&(e=2),G(t,e)}}_o.$inject=["$locale"];var xo=S(U),Co=S(c);function ko(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):y(e),isNaN(e)?t:(w(t)&&(t=t.toString()),ft(t)||pt(t)?(n=(n=!n||isNaN(n)?0:y(n))<0?Math.max(0,t.length+n):n,0<=e?t.slice(n,n+e):0===n?t.slice(e,t.length):t.slice(Math.max(0,n+e),n)):t)}}function $o(s){return function(t,e,n){if(null==t)return t;if(!O(t))throw f("orderBy")("notarray","Expected array but received: {0}",t);ft(e)||(e=[e]),0===e.length&&(e=["+"]);var o,r=(o=(o=n)?-1:1,e.map(function(t){var e=1,n=x;if(mt(t))n=t;else if(pt(t)&&("+"!=t.charAt(0)&&"-"!=t.charAt(0)||(e="-"==t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(n=s(t)).constant)){var i=n();n=function(t){return t[i]}}return{get:n,descending:e*o}}));r.push({get:function(){return{}},descending:n?-1:1});var i=Array.prototype.map.call(t,function(e,n){return{value:e,predicateValues:r.map(function(t){return function(t,e){var n=typeof t;null===t?(n="string",t="null"):"string"===n?t=t.toLowerCase():"object"===n&&(t=function(t,e){if("function"==typeof t.valueOf&&a(t=t.valueOf()))return t;if(b(t)&&a(t=t.toString()))return t;return e}(t,e));return{value:t,type:n}}(t.get(e),n)})}});return i.sort(function(t,e){for(var n=0,i=0,o=r.length;i<o&&!(n=l(t.predicateValues[i],e.predicateValues[i])*r[i].descending);++i);return n}),t=i.map(function(t){return t.value})};function a(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function l(t,e){var n=0;return t.type===e.type?t.value!==e.value&&(n=t.value<e.value?-1:1):n=t.type<e.type?-1:1,n}}function To(t){return mt(t)&&(t={link:t}),t.restrict=t.restrict||"AC",S(t)}$o.$inject=["$parse"];var So=S({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===C.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Mo={};ut(xe,function(t,i){if("multiple"!=t){var o=ln("ng-"+i),e=r;"checked"===t&&(e=function(t,e,n){n.ngModel!==n[o]&&r(t,0,n)}),Mo[o]=function(){return{restrict:"A",priority:100,link:e}}}function r(t,e,n){t.$watch(n[o],function(t){n.$set(i,!!t)})}}),ut(ke,function(t,o){Mo[o]=function(){return{priority:100,link:function(t,e,n){if("ngPattern"===o&&"/"==n.ngPattern.charAt(0)){var i=n.ngPattern.match(r);if(i)return void n.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(n[o],function(t){n.$set(o,t)})}}}}),ut(["src","srcset","href"],function(r){var s=ln("ng-"+r);Mo[s]=function(){return{priority:99,link:function(t,e,n){var i=r,o=r;"href"===r&&"[object SVGAnimatedString]"===C.call(e.prop("href"))&&(o="xlinkHref",n.$attr[o]="xlink:href",i=null),n.$observe(s,function(t){t?(n.$set(o,t),F&&i&&e.prop(i,n[o])):"href"===r&&n.$set(o,null)})}}}});var Do={$addControl:B,$$renameControl:function(t,e){t.$name=e},$removeControl:B,$setValidity:B,$setDirty:B,$setPristine:B,$setSubmitted:B},Lo="ng-submitted";function Eo(t,e,n,i,o){var r=this,s=[];r.$error={},r.$$success={},r.$pending=void 0,r.$name=o(e.name||e.ngForm||"")(n),r.$dirty=!1,r.$pristine=!0,r.$valid=!0,r.$invalid=!1,r.$submitted=!1,r.$$parentForm=Do,r.$rollbackViewValue=function(){ut(s,function(t){t.$rollbackViewValue()})},r.$commitViewValue=function(){ut(s,function(t){t.$commitViewValue()})},r.$addControl=function(t){Lt(t.$name,"input"),s.push(t),t.$name&&(r[t.$name]=t),t.$$parentForm=r},r.$$renameControl=function(t,e){var n=t.$name;r[n]===t&&delete r[n],(r[e]=t).$name=e},r.$removeControl=function(n){n.$name&&r[n.$name]===n&&delete r[n.$name],ut(r.$pending,function(t,e){r.$setValidity(e,null,n)}),ut(r.$error,function(t,e){r.$setValidity(e,null,n)}),ut(r.$$success,function(t,e){r.$setValidity(e,null,n)}),_t(s,n),n.$$parentForm=Do},Ar({ctrl:this,$element:t,set:function(t,e,n){var i=t[e];i?-1===i.indexOf(n)&&i.push(n):t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(_t(i,n),0===i.length&&delete t[e])},$animate:i}),r.$setDirty=function(){i.removeClass(t,wr),i.addClass(t,xr),r.$dirty=!0,r.$pristine=!1,r.$$parentForm.$setDirty()},r.$setPristine=function(){i.setClass(t,wr,xr+" "+Lo),r.$dirty=!1,r.$pristine=!0,r.$submitted=!1,ut(s,function(t){t.$setPristine()})},r.$setUntouched=function(){ut(s,function(t){t.$setUntouched()})},r.$setSubmitted=function(){i.addClass(t,Lo),r.$submitted=!0,r.$$parentForm.$setSubmitted()}}Eo.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Po=function(n){return["$timeout","$parse",function(l,e){return{name:"form",restrict:n?"EAC":"E",require:["form","^^?form"],controller:Eo,compile:function(t,e){t.addClass(wr).addClass(br);var a=e.name?"name":!(!n||!e.ngForm)&&"ngForm";return{pre:function(e,t,n,i){var o=i[0];if(!("action"in n)){var r=function(t){e.$apply(function(){o.$commitViewValue(),o.$setSubmitted()}),t.preventDefault()};jt(t[0],"submit",r),t.on("$destroy",function(){l(function(){qt(t[0],"submit",r)},0,!1)})}(i[1]||o.$$parentForm).$addControl(o);var s=a?u(o.$name):B;a&&(s(e,o),n.$observe(a,function(t){o.$name!==t&&(s(e,void 0),o.$$parentForm.$$renameControl(o,t),(s=u(o.$name))(e,o))})),t.on("$destroy",function(){o.$$parentForm.$removeControl(o),s(e,void 0),ct(o,Do)})}}}};function u(t){return""===t?e('this[""]').assign:e(t).assign||B}}]},Ao=Po(),Oo=Po(!0),Io=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,No=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Ro=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,zo=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Uo=/^(\d{4,})-(\d{2})-(\d{2})$/,Fo=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ho=/^(\d{4,})-W(\d\d)$/,Bo=/^(\d{4,})-(\d\d)$/,jo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,qo="keydown wheel mousedown",Wo=At();ut("date,datetime-local,month,time,week".split(","),function(t){Wo[t]=!0});var Vo={text:function(t,e,n,i,o,r){Go(t,e,n,i,o,r),Zo(i)},date:Ko("date",Uo,Yo(Uo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Ko("datetimelocal",Fo,Yo(Fo,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Ko("time",jo,Yo(jo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Ko("week",Ho,function(t,e){if(k(t))return t;if(pt(t)){Ho.lastIndex=0;var n=Ho.exec(t);if(n){var i=+n[1],o=+n[2],r=0,s=0,a=0,l=0,u=fo(i),c=7*(o-1);return e&&(r=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),l=e.getMilliseconds()),new Date(i,0,u.getDate()+c,r,s,a,l)}}return NaN},"yyyy-Www"),month:Ko("month",Bo,Yo(Bo,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,i,o,r){if(Xo(t,e,n,i),Go(t,e,n,i,o,r),i.$$parserName="number",i.$parsers.push(function(t){return i.$isEmpty(t)?null:zo.test(t)?parseFloat(t):void 0}),i.$formatters.push(function(t){if(!i.$isEmpty(t)){if(!w(t))throw Mr("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}),M(n.min)||n.ngMin){var s;i.$validators.min=function(t){return i.$isEmpty(t)||ht(s)||s<=t},n.$observe("min",function(t){M(t)&&!w(t)&&(t=parseFloat(t,10)),s=w(t)&&!isNaN(t)?t:void 0,i.$validate()})}if(M(n.max)||n.ngMax){var a;i.$validators.max=function(t){return i.$isEmpty(t)||ht(a)||t<=a},n.$observe("max",function(t){M(t)&&!w(t)&&(t=parseFloat(t,10)),a=w(t)&&!isNaN(t)?t:void 0,i.$validate()})}},url:function(t,e,n,i,o,r){Go(t,e,n,i,o,r),Zo(i),i.$$parserName="url",i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||No.test(n)}},email:function(t,e,n,i,o,r){Go(t,e,n,i,o,r),Zo(i),i.$$parserName="email",i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||Ro.test(n)}},radio:function(t,e,n,i){ht(n.name)&&e.attr("name",T());e.on("click",function(t){e[0].checked&&i.$setViewValue(n.value,t&&t.type)}),i.$render=function(){var t=n.value;e[0].checked=t==i.$viewValue},n.$observe("value",i.$render)},checkbox:function(t,e,n,i,o,r,s,a){var l=Jo(a,t,"ngTrueValue",n.ngTrueValue,!0),u=Jo(a,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",function(t){i.$setViewValue(e[0].checked,t&&t.type)}),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return!1===t},i.$formatters.push(function(t){return wt(t,l)}),i.$parsers.push(function(t){return t?l:u})},hidden:B,button:B,submit:B,reset:B,file:B};function Zo(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function Go(t,i,o,r,e,s){var a,l=U(i[0].type);if(!e.android){var u=!1;i.on("compositionstart",function(){u=!0}),i.on("compositionend",function(){u=!1,c()})}var c=function(t){if(a&&(s.defer.cancel(a),a=null),!u){var e=i.val(),n=t&&t.type;"password"===l||o.ngTrim&&"false"===o.ngTrim||(e=yt(e)),(r.$viewValue!==e||""===e&&r.$$hasNativeValidators)&&r.$setViewValue(e,n)}};if(e.hasEvent("input"))i.on("input",c);else{var n=function(t,e,n){a||(a=s.defer(function(){a=null,e&&e.value===n||c(t)}))};i.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||n(t,this,this.value)}),e.hasEvent("paste")&&i.on("paste cut",n)}i.on("change",c),Wo[l]&&r.$$hasNativeValidators&&l===o.type&&i.on(qo,function(t){if(!a){var e=this[h],n=e.badInput,i=e.typeMismatch;a=s.defer(function(){a=null,e.badInput===n&&e.typeMismatch===i||c(t)})}}),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;i.val()!==t&&i.val(t)}}function Yo(o,r){return function(t,e){var n,i;if(k(t))return t;if(pt(t)){if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.substring(1,t.length-1)),Io.test(t))return new Date(t);if(o.lastIndex=0,n=o.exec(t))return n.shift(),i=e?{yyyy:e.getFullYear(),MM:e.getMonth()+1,dd:e.getDate(),HH:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds(),sss:e.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},ut(n,function(t,e){e<r.length&&(i[r[e]]=+t)}),new Date(i.yyyy,i.MM-1,i.dd,i.HH,i.mm,i.ss||0,1e3*i.sss||0)}return NaN}}function Ko(p,f,m,g){return function(t,e,n,i,o,r,s){Xo(t,e,n,i),Go(0,e,n,i,o,r);var a,l,u,c=i&&i.$options&&i.$options.timezone;(i.$$parserName=p,i.$parsers.push(function(t){if(i.$isEmpty(t))return null;if(f.test(t)){var e=m(t,a);return c&&(e=J(e,c)),e}}),i.$formatters.push(function(t){if(t&&!k(t))throw Mr("datefmt","Expected `{0}` to be a date",t);return h(t)?((a=t)&&c&&(a=J(a,c,!0)),s("date")(t,g,c)):(a=null,"")}),M(n.min)||n.ngMin)&&(i.$validators.min=function(t){return!h(t)||ht(l)||m(t)>=l},n.$observe("min",function(t){l=d(t),i.$validate()}));(M(n.max)||n.ngMax)&&(i.$validators.max=function(t){return!h(t)||ht(u)||m(t)<=u},n.$observe("max",function(t){u=d(t),i.$validate()}));function h(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function d(t){return M(t)&&!k(t)?m(t)||void 0:t}}}function Xo(t,n,e,i){var o=n[0];(i.$$hasNativeValidators=dt(o.validity))&&i.$parsers.push(function(t){var e=n.prop(h)||{};return e.badInput||e.typeMismatch?void 0:t})}function Jo(t,e,n,i,o){var r;if(M(i)){if(!(r=t(i)).constant)throw Mr("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return r(e)}return o}var Qo=["$browser","$sniffer","$filter","$parse",function(o,r,s,a){return{restrict:"E",require:["?ngModel"],link:{pre:function(t,e,n,i){i[0]&&(Vo[U(n.type)]||Vo.text)(t,e,n,i[0],r,o,s,a)}}}}],tr=/^(true|false|\d+)$/,er=function(){return{restrict:"A",priority:100,compile:function(t,e){return tr.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},nr=["$compile",function(i){return{restrict:"AC",compile:function(t){return i.$$addBindingClass(t),function(t,e,n){i.$$addBindingInfo(e,n.ngBind),e=e[0],t.$watch(n.ngBind,function(t){e.textContent=ht(t)?"":t})}}}}],ir=["$interpolate","$compile",function(o,r){return{compile:function(t){return r.$$addBindingClass(t),function(t,e,n){var i=o(e.attr(n.$attr.ngBindTemplate));r.$$addBindingInfo(e,i.expressions),e=e[0],n.$observe("ngBindTemplate",function(t){e.textContent=ht(t)?"":t})}}}}],or=["$sce","$parse","$compile",function(r,n,s){return{restrict:"A",compile:function(t,e){var i=n(e.ngBindHtml),o=n(e.ngBindHtml,function(t){return(t||"").toString()});return s.$$addBindingClass(t),function(t,e,n){s.$$addBindingInfo(e,n.ngBindHtml),t.$watch(o,function(){e.html(r.getTrustedHtml(i(t))||"")})}}}}],rr=S({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function sr(s,m){return s="ngClass"+s,["$animate",function(d){return{restrict:"AC",link:function(a,l,r){var u;function c(t){var e=h(t,1);r.$addClass(e)}function h(t,e){var n=l.data("$classCounts")||At(),i=[];return ut(t,function(t){(0<e||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(0<e)&&i.push(t))}),l.data("$classCounts",n),i.join(" ")}function e(t){if(!0===m||a.$index%2===m){var e=f(t||[]);if(u){if(!wt(t,u)){var n=f(u);r=p(o=e,i=n),s=p(i,o),r=h(r,1),s=h(s,-1),r&&r.length&&d.addClass(l,r),s&&s.length&&d.removeClass(l,s)}}else c(e)}var i,o,r,s;u=ft(t)?t.map(function(t){return j(t)}):j(t)}a.$watch(r[s],e,!0),r.$observe("class",function(t){e(a.$eval(r[s]))}),"ngClass"!==s&&a.$watch("$index",function(t,e){var n,i=1&t;if(i!==(1&e)){var o=f(a.$eval(r[s]));i===m?c(o):(n=h(o,-1),r.$removeClass(n))}})}};function p(t,e){var n=[];t:for(var i=0;i<t.length;i++){for(var o=t[i],r=0;r<e.length;r++)if(o==e[r])continue t;n.push(o)}return n}function f(t){var n=[];return ft(t)?(ut(t,function(t){n=n.concat(f(t))}),n):pt(t)?t.split(" "):dt(t)?(ut(t,function(t,e){t&&(n=n.concat(e.split(" ")))}),n):t}}]}var ar=sr("",!0),lr=sr("Odd",0),ur=sr("Even",1),cr=To({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),hr=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],dr={},pr={blur:!0,focus:!0};ut("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(r){var s=ln("ng-"+r);dr[s]=["$parse","$rootScope",function(n,o){return{restrict:"A",compile:function(t,e){var i=n(e[s],null,!0);return function(n,t){t.on(r,function(t){var e=function(){i(n,{$event:t})};pr[r]&&o.$$phase?n.$evalAsync(e):n.$apply(e)})}}}}]});var fr=["$animate","$compile",function(l,u){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(t,n,i,e,o){var r,s,a;t.$watch(i.ngIf,function(t){t?s||o(function(t,e){s=e,t[t.length++]=u.$$createComment("end ngIf",i.ngIf),r={clone:t},l.enter(t,n.parent(),n)}):(a&&(a.remove(),a=null),s&&(s.$destroy(),s=null),r&&(a=Pt(r.clone),l.leave(a).then(function(){a=null}),r=null))})}}}],mr=["$templateRequest","$anchorScroll","$animate",function(g,v,y){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:$.noop,compile:function(t,e){var n=e.ngInclude||e.src,f=e.onload||"",m=e.autoscroll;return function(s,a,t,l,u){var c,e,h,d=0,p=function(){e&&(e.remove(),e=null),c&&(c.$destroy(),c=null),h&&(y.leave(h).then(function(){e=null}),e=h,h=null)};s.$watch(n,function(i){var o=function(){!M(m)||m&&!s.$eval(m)||v()},r=++d;i?(g(i,!0).then(function(t){if(!s.$$destroyed&&r===d){var e=s.$new();l.template=t;var n=u(e,function(t){p(),y.enter(t,null,a).then(o)});h=n,(c=e).$emit("$includeContentLoaded",i),s.$eval(f)}},function(){s.$$destroyed||r===d&&(p(),s.$emit("$includeContentError",i))}),s.$emit("$includeContentRequested",i)):(p(),l.template=null)})}}}}],gr=["$compile",function(o){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(t,e,n,i){if(C.call(e[0]).match(/SVG/))return e.empty(),void o(ie(i.template,R.document).childNodes)(t,function(t){e.append(t)},{futureParentElement:e});e.html(i.template),o(e.contents())(t)}}}],vr=To({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),yr=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,i){var o=e.attr(n.$attr.ngList)||", ",r="false"!==n.ngTrim,s=r?yt(o):o;i.$parsers.push(function(t){if(!ht(t)){var e=[];return t&&ut(t.split(s),function(t){t&&e.push(r?yt(t):t)}),e}}),i.$formatters.push(function(t){if(ft(t))return t.join(o)}),i.$isEmpty=function(t){return!t||!t.length}}}},br="ng-valid",_r="ng-invalid",wr="ng-pristine",xr="ng-dirty",Cr="ng-untouched",kr="ng-touched",$r="ng-pending",Tr="ng-empty",Sr="ng-not-empty",Mr=f("ngModel"),Dr=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(r,e,o,s,a,n,l,u,c,t){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=t(o.name||"",!1)(r),this.$$parentForm=Do;var h,d=a(o.ngModel),p=d.assign,f=d,m=p,g=null,v=this;this.$$setOptions=function(t){if((v.$options=t)&&t.getterSetter){var n=a(o.ngModel+"()"),i=a(o.ngModel+"($$$p)");f=function(t){var e=d(t);return mt(e)&&(e=n(t)),e},m=function(t,e){mt(d(t))?i(t,{$$$p:e}):p(t,e)}}else if(!d.assign)throw Mr("nonassign","Expression '{0}' is non-assignable. Element: {1}",o.ngModel,Ct(s))},this.$render=B,this.$isEmpty=function(t){return ht(t)||""===t||null===t||t!=t},this.$$updateEmptyClasses=function(t){v.$isEmpty(t)?(n.removeClass(s,Sr),n.addClass(s,Tr)):(n.removeClass(s,Tr),n.addClass(s,Sr))};var y=0;Ar({ctrl:this,$element:s,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},$animate:n}),this.$setPristine=function(){v.$dirty=!1,v.$pristine=!0,n.removeClass(s,xr),n.addClass(s,wr)},this.$setDirty=function(){v.$dirty=!0,v.$pristine=!1,n.removeClass(s,wr),n.addClass(s,xr),v.$$parentForm.$setDirty()},this.$setUntouched=function(){v.$touched=!1,v.$untouched=!0,n.setClass(s,Cr,kr)},this.$setTouched=function(){v.$touched=!0,v.$untouched=!1,n.setClass(s,kr,Cr)},this.$rollbackViewValue=function(){l.cancel(g),v.$viewValue=v.$$lastCommittedViewValue,v.$render()},this.$validate=function(){if(!w(v.$modelValue)||!isNaN(v.$modelValue)){var t=v.$$lastCommittedViewValue,e=v.$$rawModelValue,n=v.$valid,i=v.$modelValue,o=v.$options&&v.$options.allowInvalid;v.$$runValidators(e,t,function(t){o||n===t||(v.$modelValue=t?e:void 0,v.$modelValue!==i&&v.$$writeModelToScope())})}},this.$$runValidators=function(i,o,e){var r,s,a,n=++y;(function(){var t=v.$$parserName||"parse";{if(!ht(h))return h||(ut(v.$validators,function(t,e){l(e,null)}),ut(v.$asyncValidators,function(t,e){l(e,null)})),l(t,h),h;l(t,null)}return!0})()?(r=!0,ut(v.$validators,function(t,e){var n=t(i,o);r=r&&n,l(e,n)}),r||(ut(v.$asyncValidators,function(t,e){l(e,null)}),0)?(s=[],a=!0,ut(v.$asyncValidators,function(t,e){var n=t(i,o);if(!E(n))throw Mr("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",n);l(e,void 0),s.push(n.then(function(){l(e,!0)},function(){l(e,a=!1)}))}),s.length?c.all(s).then(function(){t(a)},B):t(!0)):t(!1)):t(!1);function l(t,e){n===y&&v.$setValidity(t,e)}function t(t){n===y&&e(t)}},this.$commitViewValue=function(){var t=v.$viewValue;l.cancel(g),(v.$$lastCommittedViewValue!==t||""===t&&v.$$hasNativeValidators)&&(v.$$updateEmptyClasses(t),v.$$lastCommittedViewValue=t,v.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var e=v.$$lastCommittedViewValue;if(h=!ht(e)||void 0)for(var t=0;t<v.$parsers.length;t++)if(ht(e=v.$parsers[t](e))){h=!1;break}w(v.$modelValue)&&isNaN(v.$modelValue)&&(v.$modelValue=f(r));var n=v.$modelValue,i=v.$options&&v.$options.allowInvalid;function o(){v.$modelValue!==n&&v.$$writeModelToScope()}v.$$rawModelValue=e,i&&(v.$modelValue=e,o()),v.$$runValidators(e,v.$$lastCommittedViewValue,function(t){i||(v.$modelValue=t?e:void 0,o())})},this.$$writeModelToScope=function(){m(r,v.$modelValue),ut(v.$viewChangeListeners,function(t){try{t()}catch(t){e(t)}})},this.$setViewValue=function(t,e){v.$viewValue=t,v.$options&&!v.$options.updateOnDefault||v.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(t){var e,n=0,i=v.$options;i&&M(i.debounce)&&(w(e=i.debounce)?n=e:w(e[t])?n=e[t]:w(e.default)&&(n=e.default)),l.cancel(g),n?g=l(function(){v.$commitViewValue()},n):u.$$phase?v.$commitViewValue():r.$apply(function(){v.$commitViewValue()})},r.$watch(function(){var t=f(r);if(t!==v.$modelValue&&(v.$modelValue==v.$modelValue||t==t)){v.$modelValue=v.$$rawModelValue=t,h=void 0;for(var e=v.$formatters,n=e.length,i=t;n--;)i=e[n](i);v.$viewValue!==i&&(v.$$updateEmptyClasses(i),v.$viewValue=v.$$lastCommittedViewValue=i,v.$render(),v.$$runValidators(t,i,B))}return t})}],Lr=["$rootScope",function(r){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Dr,priority:1,compile:function(t){return t.addClass(wr).addClass(Cr).addClass(br),{pre:function(t,e,n,i){var o=i[0],r=i[1]||o.$$parentForm;o.$$setOptions(i[2]&&i[2].$options),r.$addControl(o),n.$observe("name",function(t){o.$name!==t&&o.$$parentForm.$$renameControl(o,t)}),t.$on("$destroy",function(){o.$$parentForm.$removeControl(o)})},post:function(t,e,n,i){var o=i[0];o.$options&&o.$options.updateOn&&e.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),e.on("blur",function(){o.$touched||(r.$$phase?t.$evalAsync(o.$setTouched):t.$apply(o.$setTouched))})}}}}}],Er=/(\s+|^)default(\s+|$)/,Pr=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var n=this;this.$options=N(t.$eval(e.ngModelOptions)),M(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=yt(this.$options.updateOn.replace(Er,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}};function Ar(t){var o=t.ctrl,n=t.$element,i={},r=t.set,s=t.unset,a=t.$animate;function l(t,e){e&&!i[t]?(a.addClass(n,t),i[t]=!0):!e&&i[t]&&(a.removeClass(n,t),i[t]=!1)}function u(t,e){t=t?"-"+Tt(t,"-"):"",l(br+t,!0===e),l(_r+t,!1===e)}i[_r]=!(i[br]=n.hasClass(br)),o.$setValidity=function(t,e,n){ht(e)?function(t,e,n){o[t]||(o[t]={});r(o[t],e,n)}("$pending",t,n):function(t,e,n){o[t]&&s(o[t],e,n);Or(o[t])&&(o[t]=void 0)}("$pending",t,n);vt(e)?e?(s(o.$error,t,n),r(o.$$success,t,n)):(r(o.$error,t,n),s(o.$$success,t,n)):(s(o.$error,t,n),s(o.$$success,t,n));o.$pending?(l($r,!0),o.$valid=o.$invalid=void 0,u("",null)):(l($r,!1),o.$valid=Or(o.$error),o.$invalid=!o.$valid,u("",o.$valid));var i;i=o.$pending&&o.$pending[t]?void 0:!o.$error[t]&&(!!o.$$success[t]||null);u(t,i),o.$$parentForm.$setValidity(t,i,o)}}function Or(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Ir=To({terminal:!0,priority:1e3}),Nr=f("ngOptions"),Rr=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,zr=["$compile","$document","$parse",function(_,w,k){var x=R.document.createElement("option"),C=R.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,i){i[0].registerOption=B},post:function(t,r,e,n){for(var s,a=n[0],l=n[1],u=e.multiple,i=0,o=r.children(),c=o.length;i<c;i++)if(""===o[i].value){s=o.eq(i);break}var h,d=!!s,p=lt(x.cloneNode(!1));p.val("?");var f=function(t,e,d){var h=t.match(Rr);if(!h)throw Nr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,Ct(e));var n=h[5]||h[7],i=h[6],o=/ as /.test(h[0])&&h[1],p=h[9],r=k(h[2]?h[1]:n),f=o&&k(o)||r,s=p&&k(p),m=p?function(t,e){return s(d,e)}:function(t){return De(t)},g=function(t,e){return m(t,w(t,e))},v=k(h[2]||h[1]),y=k(h[3]||""),b=k(h[4]||""),_=k(h[8]),a={},w=i?function(t,e){return a[i]=e,a[n]=t,a}:function(t){return a[n]=t,a};function x(t,e,n,i,o){this.selectValue=t,this.viewValue=e,this.label=n,this.group=i,this.disabled=o}function C(t){var e;if(!i&&O(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:p,getTrackByValue:g,getWatchables:k(_,function(t){for(var e=[],n=C(t=t||[]),i=n.length,o=0;o<i;o++){var r=t===n?o:n[o],s=t[r],a=w(s,r),l=m(s,a);if(e.push(l),h[2]||h[1]){var u=v(d,a);e.push(u)}if(h[4]){var c=b(d,a);e.push(c)}}return e}),getOptions:function(){for(var t=[],e={},n=_(d)||[],i=C(n),o=i.length,r=0;r<o;r++){var s=n===i?r:i[r],a=n[s],l=w(a,s),u=f(d,l),c=m(u,l),h=new x(c,u,v(d,l),y(d,l),b(d,l));t.push(h),e[c]=h}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[g(t)]},getViewValueFromOption:function(t){return p?$.copy(t.viewValue):t.viewValue}}}}}(e.ngOptions,r,t),m=w[0].createDocumentFragment(),g=function(){d||s.remove()},v=function(){p.remove()};function y(t,e){var n,i,o=x.cloneNode(!1);e.appendChild(o),i=o,((n=t).element=i).disabled=n.disabled,n.label!==i.label&&(i.label=n.label,i.textContent=n.label),n.value!==i.value&&(i.value=n.selectValue)}function b(){var t=h&&a.readValue();if(h)for(var e=h.items.length-1;0<=e;e--){var n=h.items[e];n.group?_e(n.element.parentNode):_e(n.element)}h=f.getOptions();var i={};if(d&&r.prepend(s),h.items.forEach(function(t){var e;M(t.group)?((e=i[t.group])||(e=C.cloneNode(!1),m.appendChild(e),e.label=t.group,i[t.group]=e),y(t,e)):y(t,m)}),r[0].appendChild(m),l.$render(),!l.$isEmpty(t)){var o=a.readValue();(f.trackBy||u?wt(t,o):t===o)||(l.$setViewValue(o),l.$render())}}u?(l.$isEmpty=function(t){return!t||0===t.length},a.writeValue=function(t){h.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){var e=h.getOptionFromViewValue(t);e&&(e.element.selected=!0)})},a.readValue=function(){var t=r.val()||[],n=[];return ut(t,function(t){var e=h.selectValueMap[t];e&&!e.disabled&&n.push(h.getViewValueFromOption(e))}),n},f.trackBy&&t.$watchCollection(function(){if(ft(l.$viewValue))return l.$viewValue.map(function(t){return f.getTrackByValue(t)})},function(){l.$render()})):(a.writeValue=function(t){var e=h.getOptionFromViewValue(t);e?(r[0].value!==e.selectValue&&(v(),g(),r[0].value=e.selectValue,e.element.selected=!0),e.element.setAttribute("selected","selected")):null===t||d?(v(),d||r.prepend(s),r.val(""),s.prop("selected",!0),s.attr("selected",!0)):(g(),r.prepend(p),r.val("?"),p.prop("selected",!0),p.attr("selected",!0))},a.readValue=function(){var t=h.selectValueMap[r.val()];return t&&!t.disabled?(g(),v(),h.getViewValueFromOption(t)):null},f.trackBy&&t.$watch(function(){return f.getTrackByValue(l.$viewValue)},function(){l.$render()})),d?(s.remove(),_(s)(t),s.removeClass("ng-scope")):s=lt(x.cloneNode(!1)),r.empty(),b(),t.$watchCollection(f.getWatchables,b)}}}}],Ur=["$locale","$interpolate","$log",function(f,m,g){var v=/{}/g,y=/^when(Minus)?(.+)$/;return{link:function(o,r,s){var a,t=s.count,l=s.$attr.when&&r.attr(s.$attr.when),u=s.offset||0,c=o.$eval(l)||{},h={},e=m.startSymbol(),n=m.endSymbol(),i=e+t+"-"+u+n,d=$.noop;function p(t){r.text(t||"")}ut(s,function(t,e){var n=y.exec(e);if(n){var i=(n[1]?"-":"")+U(n[2]);c[i]=r.attr(s.$attr[e])}}),ut(c,function(t,e){h[e]=m(t.replace(v,i))}),o.$watch(t,function(t){var e=parseFloat(t),n=isNaN(e);if(n||e in c||(e=f.pluralCat(e-u)),e!==a&&!(n&&w(a)&&isNaN(a))){d();var i=h[e];ht(i)?(null!=t&&g.debug("ngPluralize: no rule defined for '"+e+"' in "+l),d=B,p()):d=o.$watch(i,p),a=e}})}}}],Fr=["$parse","$animate","$compile",function(l,L,u){var E="$$NG_REMOVED",P=f("ngRepeat"),A=function(t,e,n,i,o,r,s){t[n]=i,o&&(t[o]=r),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(t,e){var x=e.ngRepeat,C=u.$$createComment("end ngRepeat",x),n=x.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!n)throw P("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",x);var i=n[1],o=n[2],k=n[3],r=n[4];if(!(n=i.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/)))throw P("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",i);var s,$,T,S,M=n[3]||n[1],D=n[2];if(k&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(k)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(k)))throw P("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",k);var a={$id:De};return r?s=l(r):(T=function(t,e){return De(e)},S=function(t){return t}),function(y,b,t,e,_){s&&($=function(t,e,n){return D&&(a[D]=t),a[M]=e,a.$index=n,s(y,a)});var w=At();y.$watchCollection(o,function(t){var i,e,n,o,r,s,a,l,u,c,h,d,p,f=b[0],m=At();if(k&&(y[k]=t),O(t))u=t,l=$||T;else for(var g in l=$||S,u=[],t)z.call(t,g)&&"$"!==g.charAt(0)&&u.push(g);for(o=u.length,h=new Array(o),i=0;i<o;i++)if(r=t===u?i:u[i],s=t[r],a=l(r,s,i),w[a])c=w[a],delete w[a],m[a]=c,h[i]=c;else{if(m[a])throw ut(h,function(t){t&&t.scope&&(w[t.id]=t)}),P("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",x,a,s);h[i]={id:a,scope:void 0,clone:void 0},m[a]=!0}for(var v in w){if(d=Pt((c=w[v]).clone),L.leave(d),d[0].parentNode)for(i=0,e=d.length;i<e;i++)d[i][E]=!0;c.scope.$destroy()}for(i=0;i<o;i++)if(r=t===u?i:u[i],s=t[r],(c=h[i]).scope){for(n=f;(n=n.nextSibling)&&n[E];);c.clone[0]!=n&&L.move(Pt(c.clone),null,f),f=(p=c).clone[p.clone.length-1],A(c.scope,i,M,s,D,r,o)}else _(function(t,e){c.scope=e;var n=C.cloneNode(!1);t[t.length++]=n,L.enter(t,null,f),f=n,c.clone=t,m[c.id]=c,A(c.scope,i,M,s,D,r,o)});w=m})}}}}],Hr="ng-hide",Br="ng-hide-animate",jr=["$animate",function(i){return{restrict:"A",multiElement:!0,link:function(t,e,n){t.$watch(n.ngShow,function(t){i[t?"removeClass":"addClass"](e,Hr,{tempClasses:Br})})}}}],qr=["$animate",function(i){return{restrict:"A",multiElement:!0,link:function(t,e,n){t.$watch(n.ngHide,function(t){i[t?"addClass":"removeClass"](e,Hr,{tempClasses:Br})})}}}],Wr=To(function(t,n,e){t.$watch(e.ngStyle,function(t,e){e&&t!==e&&ut(e,function(t,e){n.css(e,"")}),t&&n.css(t)},!0)}),Vr=["$animate","$compile",function(c,h){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(t,e,n,o){var i=n.ngSwitch||n.on,r=[],s=[],a=[],l=[],u=function(t,e){return function(){t.splice(e,1)}};t.$watch(i,function(t){var e,n;for(e=0,n=a.length;e<n;++e)c.cancel(a[e]);for(e=a.length=0,n=l.length;e<n;++e){var i=Pt(s[e].clone);l[e].$destroy(),(a[e]=c.leave(i)).then(u(a,e))}s.length=0,l.length=0,(r=o.cases["!"+t]||o.cases["?"])&&ut(r,function(o){o.transclude(function(t,e){l.push(e);var n=o.element;t[t.length++]=h.$$createComment("end ngSwitchWhen");var i={clone:t};s.push(i),c.enter(t,n.parent(),n)})})})}}}],Zr=To({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,o){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:o,element:e})}}),Gr=To({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,o){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:o,element:e})}}),Yr=f("ngTransclude"),Kr=To({restrict:"EAC",link:function(t,e,n,i,o){if(n.ngTransclude===n.$attr.ngTransclude&&(n.ngTransclude=""),!o)throw Yr("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Ct(e));o(function(t){t.length&&(e.empty(),e.append(t))},null,n.ngTransclude||n.ngTranscludeSlot)}}),Xr=["$templateCache",function(o){return{restrict:"E",terminal:!0,compile:function(t,e){if("text/ng-template"==e.type){var n=e.id,i=t[0].text;o.put(n,i)}}}}],Jr={$setViewValue:B,$render:B};var Qr=["$element","$scope",function(n,t){var s=this,o=new Le;s.ngModelCtrl=Jr,s.unknownOption=lt(R.document.createElement("option")),s.renderUnknownOption=function(t){var e="? "+De(t)+" ?";s.unknownOption.val(e),n.prepend(s.unknownOption),n.val(e)},t.$on("$destroy",function(){s.renderUnknownOption=B}),s.removeUnknownOption=function(){s.unknownOption.parent()&&s.unknownOption.remove()},s.readValue=function(){return s.removeUnknownOption(),n.val()},s.writeValue=function(t){s.hasOption(t)?(s.removeUnknownOption(),n.val(t),""===t&&s.emptyOption.prop("selected",!0)):null==t&&s.emptyOption?(s.removeUnknownOption(),n.val("")):s.renderUnknownOption(t)},s.addOption=function(t,e){if(e[0].nodeType!==Nt){Lt(t,'"option value"'),""===t&&(s.emptyOption=e);var n,i=o.get(t)||0;o.put(t,i+1),s.ngModelCtrl.$render(),(n=e)[0].hasAttribute("selected")&&(n[0].selected=!0)}},s.removeOption=function(t){var e=o.get(t);e&&(1===e?(o.remove(t),""===t&&(s.emptyOption=void 0)):o.put(t,e-1))},s.hasOption=function(t){return!!o.get(t)},s.registerOption=function(t,n,i,e,o){var r;e?i.$observe("value",function(t){M(r)&&s.removeOption(r),r=t,s.addOption(t,n)}):o?t.$watch(o,function(t,e){i.$set("value",t),e!==t&&s.removeOption(e),s.addOption(t,n)}):s.addOption(i.value,n);n.on("$destroy",function(){s.removeOption(i.value),s.ngModelCtrl.$render()})}}],ts=function(){return{restrict:"E",require:["select","?ngModel"],controller:Qr,priority:1,link:{pre:function(t,n,e,i){var o=i[1];if(!o)return;var r=i[0];if(r.ngModelCtrl=o,n.on("change",function(){t.$apply(function(){o.$setViewValue(r.readValue())})}),e.multiple){r.readValue=function(){var e=[];return ut(n.find("option"),function(t){t.selected&&e.push(t.value)}),e},r.writeValue=function(t){var e=new Le(t);ut(n.find("option"),function(t){t.selected=M(e.get(t.value))})};var s,a=NaN;t.$watch(function(){a!==o.$viewValue||wt(s,o.$viewValue)||(s=j(o.$viewValue),o.$render()),a=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,i){var o=i[1];if(!o)return;var r=i[0];o.$render=function(){r.writeValue(o.$viewValue)}}}}},es=["$interpolate",function(n){return{restrict:"E",priority:100,compile:function(t,e){if(M(e.value))var s=n(e.value,!0);else{var a=n(t.text(),!0);a||e.$set("value",t.text())}return function(t,e,n){var i="$selectController",o=e.parent(),r=o.data(i)||o.parent().data(i);r&&r.registerOption(t,e,n,s,a)}}}}],ns=S({restrict:"E",terminal:!1}),is=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){i&&(n.required=!0,i.$validators.required=function(t,e){return!n.required||!i.$isEmpty(e)},n.$observe("required",function(){i.$validate()}))}}},os=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var o,r=n.ngPattern||n.pattern;n.$observe("pattern",function(t){if(pt(t)&&0<t.length&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw f("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",r,t,Ct(e));o=t||void 0,i.$validate()}),i.$validators.pattern=function(t,e){return i.$isEmpty(e)||ht(o)||o.test(e)}}}}},rs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var o=-1;n.$observe("maxlength",function(t){var e=y(t);o=isNaN(e)?-1:e,i.$validate()}),i.$validators.maxlength=function(t,e){return o<0||i.$isEmpty(e)||e.length<=o}}}}},ss=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var o=0;n.$observe("minlength",function(t){o=y(t)||0,i.$validate()}),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=o}}}}};R.angular.bootstrap?R.console&&console.log("WARNING: Tried to load angular more than once."):(!function(){var o;if(!St){var t=W();(s=ht(t)?R.jQuery:t?R[t]:void 0)&&s.fn.on?(ct((lt=s).fn,{scope:we.scope,isolateScope:we.isolateScope,controller:we.controller,injector:we.injector,inheritedData:we.inheritedData}),o=s.cleanData,s.cleanData=function(t){for(var e,n,i=0;null!=(n=t[i]);i++)(e=s._data(n,"events"))&&e.$destroy&&s(n).triggerHandler("$destroy");o(t)}):lt=se,$.element=lt,St=!0}}(),ct($,{bootstrap:st,copy:N,extend:ct,merge:i,equals:wt,element:lt,forEach:ut,injector:Ue,noop:B,bind:Z,toJson:G,fromJson:Y,identity:x,isUndefined:ht,isDefined:M,isString:pt,isFunction:mt,isObject:dt,isNumber:w,isElement:I,isArray:ft,version:Ft,isDate:k,lowercase:U,uppercase:c,callbacks:{counter:0},getTestability:kt,$$minErr:f,$$csp:q,reloadWithDebugInfo:at}),(g=function(t){var c=f("$injector"),n=f("ng");function e(t,e,n){return t[e]||(t[e]=n())}var i=e(t,"angular",Object);return i.$$minErr=i.$$minErr||f,e(i,"module",function(){var t={};return function(a,l,u){return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name",e)}(a,"module"),l&&t.hasOwnProperty(a)&&(t[a]=null),e(t,a,function(){if(!l)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",a);var o=[],t=[],e=[],n=i("$injector","invoke","push",t),r={_invokeQueue:o,_configBlocks:t,_runBlocks:e,requires:l,name:a,provider:s("$provide","provider"),factory:s("$provide","factory"),service:s("$provide","service"),value:i("$provide","value"),constant:i("$provide","constant","unshift"),decorator:s("$provide","decorator"),animation:s("$animateProvider","register"),filter:s("$filterProvider","register"),controller:s("$controllerProvider","register"),directive:s("$compileProvider","directive"),component:s("$compileProvider","component"),config:n,run:function(t){return e.push(t),this}};return u&&n(u),r;function i(t,e,n,i){return i||(i=o),function(){return i[n||"push"]([t,e,arguments]),r}}function s(n,i){return function(t,e){return e&&mt(e)&&(e.$$moduleName=a),o.push([n,i,arguments]),r}}})}})}(R))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Ni}),t.provider("$compile",rn).directive({a:So,input:Qo,textarea:Qo,form:Ao,script:Xr,select:ts,style:ns,option:es,ngBind:nr,ngBindHtml:or,ngBindTemplate:ir,ngClass:ar,ngClassEven:ur,ngClassOdd:lr,ngCloak:cr,ngController:hr,ngForm:Oo,ngHide:qr,ngIf:fr,ngInclude:mr,ngInit:vr,ngNonBindable:Ir,ngPluralize:Ur,ngRepeat:Fr,ngShow:jr,ngStyle:Wr,ngSwitch:Vr,ngSwitchWhen:Zr,ngSwitchDefault:Gr,ngOptions:zr,ngTransclude:Kr,ngModel:Lr,ngList:yr,ngChange:rr,pattern:os,ngPattern:os,required:is,ngRequired:is,minlength:ss,ngMinlength:ss,maxlength:rs,ngMaxlength:rs,ngValue:er,ngModelOptions:Pr}).directive({ngInclude:gr}).directive(Mo).directive(dr),t.provider({$anchorScroll:Fe,$animate:Ge,$animateCss:Xe,$$animateJs:Ve,$$animateQueue:Ze,$$AnimateRunner:Ke,$$animateAsyncRun:Ye,$browser:Qe,$cacheFactory:tn,$controller:fn,$document:mn,$exceptionHandler:gn,$filter:to,$$forceReflow:vn,$interpolate:Rn,$interval:zn,$http:An,$httpParamSerializer:Tn,$httpParamSerializerJQLike:Sn,$httpBackend:In,$xhrFactory:On,$location:ti,$log:ei,$parse:Li,$rootScope:Ii,$q:Ei,$$q:Pi,$sce:Hi,$sceDelegate:Fi,$sniffer:Bi,$templateCache:en,$templateRequest:qi,$$testability:Wi,$timeout:Vi,$window:Xi,$$rAF:Oi,$$jqLite:Me,$$HashMap:Ee,$$cookieReader:Qi})}]),$.module("ngLocale",[],["$provide",function(t){var o="one",r="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,e){var n=0|t,i=function(t,e){var n,i,o=e;void 0===o&&(o=Math.min((n=t,-1==(i=(n+="").indexOf("."))?0:n.length-i-1),3));var r=Math.pow(10,o);return{v:o,f:(t*r|0)%r}}(t,e);return 1==n&&0==i.v?o:r}})}]),lt(R.document).ready(function(){rt(R.document,st)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(t,A,O){"use strict";var I,N=A.isDefined,d=A.isFunction,R=A.isString,z=A.isObject,U=A.isArray,F=A.forEach,H=A.extend,B=A.copy,f=A.toJson;function j(t,e){return H(new(H(function(){},{prototype:t})),e)}function w(n){return F(arguments,function(t){t!==n&&F(t,function(t,e){n.hasOwnProperty(e)||(n[e]=t)})}),n}function q(t){if(Object.keys)return Object.keys(t);var n=[];return F(t,function(t,e){n.push(e)}),n}function W(t,e){if(Array.prototype.indexOf)return t.indexOf(e,Number(arguments[2])||0);var n=t.length>>>0,i=Number(arguments[2])||0;for((i=i<0?Math.ceil(i):Math.floor(i))<0&&(i+=n);i<n;i++)if(i in t&&t[i]===e)return i;return-1}function V(t,e,n,i){var o,r=function(t,e){var n=[];for(var i in t.path){if(t.path[i]!==e.path[i])break;n.push(t.path[i])}return n}(n,i),s={},a=[];for(var l in r)if(r[l]&&r[l].params&&(o=q(r[l].params)).length)for(var u in o)0<=W(a,o[u])||(a.push(o[u]),s[o[u]]=t[o[u]]);return H({},s,e)}function p(t,e,n){if(!n)for(var i in n=[],t)n.push(i);for(var o=0;o<n.length;o++){var r=n[o];if(t[r]!=e[r])return!1}return!0}function Z(t,e){var n={};return F(t,function(t){n[t]=e[t]}),n}function G(e){var n={},t=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return F(t,function(t){t in e&&(n[t]=e[t])}),n}function x(t){var e={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var i in t)-1==W(n,i)&&(e[i]=t[i]);return e}function k(t,n){var i=U(t),o=i?[]:{};return F(t,function(t,e){n(t,e)&&(o[i?o.length:e]=t)}),o}function Y(t,n){var i=U(t)?[]:{};return F(t,function(t,e){i[e]=n(t,e)}),i}function e(v,y){var t={},a=[],b=t,_=H(v.when(t),{$$promises:t,$$values:t});this.study=function(o){if(!z(o))throw new Error("'invocables' must be an object");var f=q(o||{}),m=[],r=[],s={};function g(t){return z(t)&&t.then&&t.$$promises}return F(o,function e(t,n){if(2!==s[n]){if(r.push(n),1===s[n])throw r.splice(0,W(r,n)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[n]=1,R(t))m.push(n,[function(){return y.get(t)}],a);else{var i=y.annotate(t);F(i,function(t){t!==n&&o.hasOwnProperty(t)&&e(o[t],t)}),m.push(n,t,i)}r.pop(),s[n]=2}}),o=r=s=null,function(a,t,l){if(g(a)&&l===O&&(l=t,t=a,a=null),a){if(!z(a))throw new Error("'locals' must be an object")}else a=b;if(t){if(!g(t))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else t=_;var e=v.defer(),u=e.promise,c=u.$$promises={},h=H({},a),n=1+m.length/3,i=!1;function d(){--n||(i||w(h,t.$$values),u.$$values=h,u.$$promises=u.$$promises||!0,delete u.$$inheritedValues,e.resolve(h))}function p(t){u.$$failure=t,e.reject(t)}if(N(t.$$failure))return p(t.$$failure),u;t.$$inheritedValues&&w(h,x(t.$$inheritedValues,f)),H(c,t.$$promises),t.$$values?(i=w(h,x(t.$$values,f)),u.$$inheritedValues=x(t.$$values,f),d()):(t.$$inheritedValues&&(u.$$inheritedValues=x(t.$$inheritedValues,f)),t.then(d,p));for(var o=0,r=m.length;o<r;o+=3)a.hasOwnProperty(m[o])?d():s(m[o],m[o+1],m[o+2]);function s(e,t,n){var i=v.defer(),o=0;function r(t){i.reject(t),p(t)}function s(){if(!N(u.$$failure))try{i.resolve(y.invoke(t,l,h)),i.promise.then(function(t){h[e]=t,d()},r)}catch(t){r(t)}}F(n,function(e){c.hasOwnProperty(e)&&!a.hasOwnProperty(e)&&(o++,c[e].then(function(t){h[e]=t,--o||s()},r))}),o||s(),c[e]=i.promise}return u}},this.resolve=function(t,e,n,i){return this.study(t)(e,n,i)}}function n(n,i,o){this.fromConfig=function(t,e,n){return N(t.template)?this.fromString(t.template,e):N(t.templateUrl)?this.fromUrl(t.templateUrl,e):N(t.templateProvider)?this.fromProvider(t.templateProvider,e,n):null},this.fromString=function(t,e){return d(t)?t(e):t},this.fromUrl=function(t,e){return d(t)&&(t=t(e)),null==t?null:n.get(t,{cache:i,headers:{Accept:"text/html"}}).then(function(t){return t.data})},this.fromProvider=function(t,e,n){return o.invoke(t,null,n||{params:e})}}function u(a,l,t){l=H({params:{}},z(l)?l:{});var e,n,i,o,r=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,s=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,u="^",c=0,h=this.segments=[],d=t?t.params:{},p=this.params=t?t.params.$$new():new I.ParamSet,f=[];function m(t,e,n,i){if(f.push(t),d[t])return d[t];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+a+"'");if(p[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+a+"'");return p[t]=new I.Param(t,e,n,i),p[t]}function g(t,e,n,i){var o=["",""],r=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return r;switch(n){case!1:o=["(",")"+(i?"?":"")];break;case!0:r=r.replace(/\/$/,""),o=["(?:/(",")|/)?"];break;default:o=["("+n+"|",")?"]}return r+o[0]+e+o[1]}function v(t,e){var n,i,o,r,s;return n=t[2]||t[3],s=l.params[n],o=a.substring(c,t.index),(i=e?t[4]:t[4]||("*"==t[1]?".*":null))&&(r=I.type(i)||j(I.type("string"),{pattern:new RegExp(i,l.caseInsensitive?"i":O)})),{id:n,regexp:i,segment:o,type:r,cfg:s}}for(this.source=a;(e=r.exec(a))&&!(0<=(n=v(e,!1)).segment.indexOf("?"));)i=m(n.id,n.type,n.cfg,"path"),u+=g(n.segment,i.type.pattern.source,i.squash,i.isOptional),h.push(n.segment),c=r.lastIndex;var y=(o=a.substring(c)).indexOf("?");if(0<=y){var b=this.sourceSearch=o.substring(y);if(o=o.substring(0,y),this.sourcePath=a.substring(0,c+y),0<b.length)for(c=0;e=s.exec(b);)i=m((n=v(e,!0)).id,n.type,n.cfg,"search"),c=r.lastIndex}else this.sourcePath=a,this.sourceSearch="";u+=g(o)+(!1===l.strict?"/?":"")+"$",h.push(o),this.regexp=new RegExp(u,l.caseInsensitive?"i":O),this.prefix=h[0],this.$$paramNames=f}function $(t){H(this,t)}function i(p,a){var l,u=[],f=null,m=!1;function c(t,e,n){if(!n)return!1;var i=t.invoke(e,e,{$match:n});return!N(i)||i}function t(c,t,o,e,h){var r,d=e.baseHref(),n=c.url();function i(t){if(!t||!t.defaultPrevented){r&&c.url();r=O;var e,n=u.length;for(e=0;e<n;e++)if(i(u[e]))return;f&&i(f)}function i(t){var e=t(o,c);return!!e&&(R(e)&&c.replace().url(e),!0)}}function s(){return l=l||t.$on("$locationChangeSuccess",i)}return m||s(),{sync:function(){i()},listen:function(){return s()},update:function(t){t?n=c.url():c.url()!==n&&(c.url(n),c.replace())},push:function(t,e,n){var i=t.format(e||{});null!==i&&e&&e["#"]&&(i+="#"+e["#"]),c.url(i),r=n&&n.$$avoidResync?c.url():O,n&&n.replace&&c.replace()},href:function(t,e,n){if(!t.validates(e))return null;var i=p.html5Mode();A.isObject(i)&&(i=i.enabled),i=i&&h.history;var o,r,s,a=t.format(e);if(n=n||{},i||null===a||(a="#"+p.hashPrefix()+a),null!==a&&e&&e["#"]&&(a+="#"+e["#"]),o=a,r=i,s=n.absolute,a="/"===d?o:r?d.slice(0,-1)+o:s?d.slice(1)+o:o,!n.absolute||!a)return a;var l=!i&&a?"/":"",u=c.port();return u=80===u||443===u?"":":"+u,[c.protocol(),"://",c.host(),u,l,a].join("")}}}this.rule=function(t){if(!d(t))throw new Error("'rule' must be a function");return u.push(t),this},this.otherwise=function(t){if(R(t)){var e=t;t=function(){return e}}else if(!d(t))throw new Error("'rule' must be a function");return f=t,this},this.when=function(t,e){var o,r=R(e);if(R(t)&&(t=a.compile(t)),!r&&!d(e)&&!U(e))throw new Error("invalid 'handler' in when()");var n={matcher:function(n,i){return r&&(o=a.compile(i),i=["$match",function(t){return o.format(t)}]),H(function(t,e){return c(t,i,n.exec(e.path(),e.search()))},{prefix:R(n.prefix)?n.prefix:""})},regex:function(n,i){if(n.global||n.sticky)throw new Error("when() RegExp must not be global or sticky");return r&&(o=i,i=["$match",function(t){return n=t,o.replace(/\$(\$|\d{1,2})/,function(t,e){return n["$"===e?0:Number(e)]});var n}]),H(function(t,e){return c(t,i,n.exec(e.path()))},{prefix:(t=n,e=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(t.source),null!=e?e[1].replace(/\\(.)/g,"$1"):"")});var t,e}},i={matcher:a.isMatcher(t),regex:t instanceof RegExp};for(var s in i)if(i[s])return this.rule(n[s](t,e));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(t){t===O&&(t=!0),m=t},(this.$get=t).$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function o(s,i){var D,L,h={},a={},E="abstract",l={parent:function(t){if(N(t.parent)&&t.parent)return P(t.parent);var e=/^(.+)\.[^.]+$/.exec(t.name);return e?P(e[1]):D},data:function(t){return t.parent&&t.parent.data&&(t.data=t.self.data=j(t.parent.data,t.data)),t.data},url:function(t){var e=t.url,n={params:t.params||{}};if(R(e))return"^"==e.charAt(0)?i.compile(e.substring(1),n):(t.parent.navigable||D).url.concat(e,n);if(!e||i.isMatcher(e))return e;throw new Error("Invalid url '"+e+"' in state '"+t+"'")},navigable:function(t){return t.url?t:t.parent?t.parent.navigable:null},ownParams:function(t){var n=t.url&&t.url.params||new I.ParamSet;return F(t.params||{},function(t,e){n[e]||(n[e]=new I.Param(e,null,t,"config"))}),n},params:function(t){var e=G(t.ownParams,t.ownParams.$$keys());return t.parent&&t.parent.params?H(t.parent.params.$$new(),e):new I.ParamSet},views:function(n){var i={};return F(N(n.views)?n.views:{"":n},function(t,e){e.indexOf("@")<0&&(e+="@"+n.parent.name),i[e]=t}),i},path:function(t){return t.parent?t.parent.path.concat(t):[]},includes:function(t){var e=t.parent?H({},t.parent.includes):{};return e[t.name]=!0,e},$delegates:{}};function P(t,e){if(!t)return O;var n,i=R(t),o=i?t:t.name;if(0===(n=o).indexOf(".")||0===n.indexOf("^")){if(!e)throw new Error("No reference point given for path '"+o+"'");e=P(e);for(var r=o.split("."),s=0,a=r.length,l=e;s<a;s++)if(""!==r[s]||0!==s){if("^"!==r[s])break;if(!l.parent)throw new Error("Path '"+o+"' not valid for state '"+e.name+"'");l=l.parent}else l=e;r=r.slice(s).join("."),o=l.name+(l.name&&r?".":"")+r}var u=h[o];return!u||!i&&(i||u!==t&&u.self!==t)?O:u}function u(n){var t=(n=j(n,{self:n,resolve:n.resolve||{},toString:function(){return this.name}})).name;if(!R(t)||0<=t.indexOf("@"))throw new Error("State must have a valid name");if(h.hasOwnProperty(t))throw new Error("State '"+t+"' is already defined");var e,i,o=-1!==t.indexOf(".")?t.substring(0,t.lastIndexOf(".")):R(n.parent)?n.parent:z(n.parent)&&R(n.parent.name)?n.parent.name:"";if(o&&!h[o])return e=o,i=n.self,a[e]||(a[e]=[]),void a[e].push(i);for(var r in l)d(l[r])&&(n[r]=l[r](n,l.$delegates[r]));return!(h[t]=n)[E]&&n.url&&s.when(n.url,["$match","$stateParams",function(t,e){L.$current.navigable==n&&p(t,e)||L.transitionTo(n,t,{inherit:!0,location:!1})}]),function(t){for(var e=a[t]||[];e.length;)u(e.shift())}(t),n}function t(b,_,u,w,c,x,C,t,e){var k=_.reject(new Error("transition superseded")),$=_.reject(new Error("transition prevented")),T=_.reject(new Error("transition aborted")),S=_.reject(new Error("transition failed"));function M(r,t,e,n,s,a){var l=e?t:Z(r.params.$$keys(),t),i={$stateParams:l};s.resolve=c.resolve(r.resolve,i,s.resolve,r);var o=[s.resolve.then(function(t){s.globals=t})];return n&&o.push(n),_.all(o).then(function(){var t=[];return F(r.views,function(n,i){var o=n.resolve&&n.resolve!==r.resolve?n.resolve:{};o.$template=[function(){return u.load(i,{view:n,locals:s.globals,params:l,notify:a.notify})||""}],t.push(c.resolve(o,s.globals,s.resolve,r).then(function(t){if(d(n.controllerProvider)||U(n.controllerProvider)){var e=A.extend({},o,s.globals);t.$$controller=w.invoke(n.controllerProvider,null,e)}else t.$$controller=n.controller;t.$$state=r,t.$$controllerAs=n.controllerAs,s[i]=t}))}),_.all(t).then(function(){return s.globals})}).then(function(t){return s})}return D.locals={resolve:null,globals:{$stateParams:{}}},(L={params:{},current:D.self,$current:D,transition:null,reload:function(t){return L.transitionTo(L.current,x,{reload:t||!0,inherit:!1,notify:!0})},go:function(t,e,n){return L.transitionTo(t,e,H({inherit:!0,relative:L.$current},n))}}).transitionTo=function(i,o,r){o=o||{},r=H({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},r||{});var s=L.$current,a=L.params,l=s.path,t=P(i,r.relative),e=o["#"];if(!N(t)){var n={to:i,toParams:o,options:r},u=function(t,e,n,i){var o=b.$broadcast("$stateNotFound",t,e,n);if(o.defaultPrevented)return C.update(),T;if(!o.retry)return null;if(i.$retry)return C.update(),S;var r=L.transition=_.when(o.retry);return r.then(function(){return r!==L.transition?k:(t.options.$retry=!0,L.transitionTo(t.to,t.toParams,t.options))},function(){return T}),C.update(),r}(n,s.self,a,r);if(u)return u;if(o=n.toParams,t=P(i=n.to,(r=n.options).relative),!N(t)){if(!r.relative)throw new Error("No such state '"+i+"'");throw new Error("Could not resolve '"+i+"' from state '"+r.relative+"'")}}if(t[E])throw new Error("Cannot transition to abstract state '"+i+"'");if(r.inherit&&(o=V(x,o||{},L.$current,t)),!t.params.$$validates(o))return S;o=t.params.$$values(o);var c=(i=t).path,h=0,d=c[h],p=D.locals,f=[];if(r.reload){if(R(r.reload)||z(r.reload)){if(z(r.reload)&&!r.reload.name)throw new Error("Invalid reload state object");var m=!0===r.reload?l[0]:P(r.reload);if(r.reload&&!m)throw new Error("No such reload state '"+(R(r.reload)?r.reload:r.reload.name)+"'");for(;d&&d===l[h]&&d!==m;)p=f[h]=d.locals,d=c[++h]}}else for(;d&&d===l[h]&&d.ownParams.$$equals(o,a);)p=f[h]=d.locals,d=c[++h];if(function(t,e,n,i,o,r){if(!r.reload&&t===n&&(o===n.locals||!1===t.self.reloadOnSearch&&function(e,t,n){function i(t){return"search"!=e.params[t].location}var o=e.params.$$keys().filter(i),r=G.apply({},[e.params].concat(o));return new I.ParamSet(r).$$equals(t,n)}(n,i,e)))return!0}(i,o,s,a,p,r))return e&&(o["#"]=e),L.params=o,B(L.params,x),B(Z(i.params.$$keys(),x),i.locals.globals.$stateParams),r.location&&i.navigable&&i.navigable.url&&(C.push(i.navigable.url,o,{$$avoidResync:!0,replace:"replace"===r.location}),C.update(!0)),L.transition=null,_.when(L.current);if(o=Z(i.params.$$keys(),o||{}),e&&(o["#"]=e),r.notify&&b.$broadcast("$stateChangeStart",i.self,o,s.self,a,r).defaultPrevented)return b.$broadcast("$stateChangeCancel",i.self,o,s.self,a),null==L.transition&&C.update(),$;for(var g=_.when(p),v=h;v<c.length;d=c[++v])p=f[v]=j(p),g=M(d,o,d===i,g,p,r);var y=L.transition=g.then(function(){var t,e,n;if(L.transition!==y)return k;for(t=l.length-1;h<=t;t--)(n=l[t]).self.onExit&&w.invoke(n.self.onExit,n.self,n.locals.globals),n.locals=null;for(t=h;t<c.length;t++)(e=c[t]).locals=f[t],e.self.onEnter&&w.invoke(e.self.onEnter,e.self,e.locals.globals);return L.transition!==y?k:(L.$current=i,L.current=i.self,L.params=o,B(L.params,x),L.transition=null,r.location&&i.navigable&&C.push(i.navigable.url,i.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===r.location}),r.notify&&b.$broadcast("$stateChangeSuccess",i.self,o,s.self,a),C.update(!0),L.current)},function(t){return L.transition!==y?k:(L.transition=null,b.$broadcast("$stateChangeError",i.self,o,s.self,a,t).defaultPrevented||C.update(),_.reject(t))});return y},L.is=function(t,e,n){var i=P(t,(n=H({relative:L.$current},n||{})).relative);return N(i)?L.$current===i&&(!e||p(i.params.$$values(e),x)):O},L.includes=function(t,e,n){if(n=H({relative:L.$current},n||{}),R(t)&&-1<t.indexOf("*")){if(!function(t){for(var e=t.split("."),n=L.$current.name.split("."),i=0,o=e.length;i<o;i++)"*"===e[i]&&(n[i]="*");return"**"===e[0]&&(n=n.slice(W(n,e[1]))).unshift("**"),"**"===e[e.length-1]&&(n.splice(W(n,e[e.length-2])+1,Number.MAX_VALUE),n.push("**")),e.length==n.length&&n.join("")===e.join("")}(t))return!1;t=L.$current.name}var i=P(t,n.relative);return N(i)?!!N(L.$current.includes[i.name])&&(!e||p(i.params.$$values(e),x,q(e))):O},L.href=function(t,e,n){var i=P(t,(n=H({lossy:!0,inherit:!0,absolute:!1,relative:L.$current},n||{})).relative);if(!N(i))return null;n.inherit&&(e=V(x,e||{},L.$current,i));var o=i&&n.lossy?i.navigable:i;return o&&o.url!==O&&null!==o.url?C.href(o.url,Z(i.params.$$keys().concat("#"),e||{}),{absolute:n.absolute}):null},L.get=function(t,e){if(0===arguments.length)return Y(q(h),function(t){return h[t].self});var n=P(t,e||L.$current);return n&&n.self?n.self:null},L}(D=u({name:"",url:"^",views:null,abstract:!0})).navigable=null,this.decorator=function(t,e){if(R(t)&&!N(e))return l[t];if(!d(e)||!R(t))return this;l[t]&&!l.$delegates[t]&&(l.$delegates[t]=l[t]);return l[t]=e,this},this.state=function(t,e){z(t)?e=t:e.name=t;return u(e),this},(this.$get=t).$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function r(){function t(t,i){return{load:function(t,e){var n;return(e=H({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},e)).view&&(n=i.fromConfig(e.view,e.params,e.locals)),n}}}(this.$get=t).$inject=["$rootScope","$templateFactory"]}A.module("ui.router.util",["ng"]),A.module("ui.router.router",["ui.router.util"]),A.module("ui.router.state",["ui.router.router","ui.router.util"]),A.module("ui.router",["ui.router.state"]),A.module("ui.router.compat",["ui.router"]),e.$inject=["$q","$injector"],A.module("ui.router.util").service("$resolve",e),n.$inject=["$http","$templateCache","$injector"],A.module("ui.router.util").service("$templateFactory",n),u.prototype.concat=function(t,e){var n={caseInsensitive:I.caseInsensitive(),strict:I.strictMode(),squash:I.defaultSquashPolicy()};return new u(this.sourcePath+t+this.sourceSearch,H(n,e),this)},u.prototype.toString=function(){return this.source},u.prototype.exec=function(t,e){var n=this.regexp.exec(t);if(!n)return null;e=e||{};var i,o,r,s,a,l=this.parameters(),u=l.length,c=this.segments.length-1,h={};if(c!==n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");function d(t){function e(t){return t.split("").reverse().join("")}return Y(Y(e(t).split(/-(?!\\)/),e),function(t){return t.replace(/\\-/g,"-")}).reverse()}for(i=0;i<c;i++){for(r=l[i],s=this.params[r],a=n[i+1],o=0;o<s.replace.length;o++)s.replace[o].from===a&&(a=s.replace[o].to);a&&!0===s.array&&(a=d(a)),N(a)&&(a=s.type.decode(a)),h[r]=s.value(a)}for(;i<u;i++){for(h[r=l[i]]=this.params[r].value(e[r]),s=this.params[r],a=e[r],o=0;o<s.replace.length;o++)s.replace[o].from===a&&(a=s.replace[o].to);N(a)&&(a=s.type.decode(a)),h[r]=s.value(a)}return h},u.prototype.parameters=function(t){return N(t)?this.params[t]||null:this.$$paramNames},u.prototype.validates=function(t){return this.params.$$validates(t)},u.prototype.format=function(t){t=t||{};var e=this.segments,n=this.parameters(),i=this.params;if(!this.validates(t))return null;var o,r=!1,s=e.length-1,a=n.length,l=e[0];function u(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})}for(o=0;o<a;o++){var c=o<s,h=n[o],d=i[h],p=d.value(t[h]),f=d.isOptional&&d.type.equals(d.value(),p),m=!!f&&d.squash,g=d.type.encode(p);if(c){var v=e[o+1],y=o+1===s;if(!1===m)null!=g&&(U(g)?l+=Y(g,u).join("-"):l+=encodeURIComponent(g)),l+=v;else if(!0===m){var b=l.match(/\/$/)?/\/?(.*)/:/(.*)/;l+=v.match(b)[1]}else R(m)&&(l+=m+v);y&&!0===d.squash&&"/"===l.slice(-1)&&(l=l.slice(0,-1))}else{if(null==g||f&&!1!==m)continue;if(U(g)||(g=[g]),0===g.length)continue;l+=(r?"&":"?")+h+"="+(g=Y(g,encodeURIComponent).join("&"+h+"=")),r=!0}}return l},$.prototype.is=function(t,e){return!0},$.prototype.encode=function(t,e){return t},$.prototype.decode=function(t,e){return t},$.prototype.equals=function(t,e){return t==e},$.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},$.prototype.pattern=/.*/,$.prototype.toString=function(){return"{Type:"+this.name+"}"},$.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},$.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new function(t,o){function e(t,e){return function(){return t[e].apply(t,arguments)}}function r(t){return U(t)?t:N(t)?[t]:[]}function s(t){return!t}function n(n,i){return function(t){if(U(t)&&0===t.length)return t;var e=Y(t=r(t),n);return!0===i?0===k(e,s).length:function(t){switch(t.length){case 0:return O;case 1:return"auto"===o?t[0]:t;default:return t}}(e)}}var a;this.encode=n(e(t,"encode")),this.decode=n(e(t,"decode")),this.is=n(e(t,"is"),!0),this.equals=(a=e(t,"equals"),function(t,e){var n=r(t),i=r(e);if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++)if(!a(n[o],i[o]))return!1;return!0}),this.pattern=t.pattern,this.$normalize=n(e(t,"$normalize")),this.name=t.name,this.$arrayMode=o}(this,t)},A.module("ui.router.util").provider("$urlMatcherFactory",function t(){I=this;var n=!1,i=!0,_=!1;function e(t){return null!=t?t.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):t}var w,x={},o=!0,r=[],s={string:{encode:e,decode:function(t){return null!=t?t.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):t},is:function(t){return null==t||!N(t)||"string"==typeof t},pattern:/[^/]*/},int:{encode:e,decode:function(t){return parseInt(t,10)},is:function(t){return N(t)&&this.decode(t.toString())===t},pattern:/\d+/},bool:{encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:function(t){return!0===t||!1===t},pattern:/0|1/},date:{encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):O},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):O},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return this.is(t)&&this.is(e)&&t.toISOString()===e.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:A.toJson,decode:A.fromJson,is:A.isObject,equals:A.equals,pattern:/[^/]*/},any:{encode:A.identity,decode:A.identity,equals:A.equals,pattern:/.*/}};function C(t){return d(t)||U(t)&&d(t[t.length-1])}function a(){for(;r.length;){var t=r.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");A.extend(x[t.name],w.invoke(t.def))}}function l(t){H(this,t||{})}t.$$getDefaultValue=function(t){if(!C(t.value))return t.value;if(!w)throw new Error("Injectable functions cannot be called at configuration time");return w.invoke(t.value)},this.caseInsensitive=function(t){return N(t)&&(n=t),n},this.strictMode=function(t){return N(t)&&(i=t),i},this.defaultSquashPolicy=function(t){if(!N(t))return _;if(!0!==t&&!1!==t&&!R(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return _=t},this.compile=function(t,e){return new u(t,H({strict:i,caseInsensitive:n},e))},this.isMatcher=function(n){if(!z(n))return!1;var i=!0;return F(u.prototype,function(t,e){d(t)&&(i=i&&N(n[e])&&d(n[e]))}),i},this.type=function(t,e,n){if(!N(e))return x[t];if(x.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return x[t]=new $(H({name:t},e)),n&&(r.push({name:t,def:n}),o||a()),this},F(s,function(t,e){x[e]=new $(H({name:e},t))}),x=j(x,{}),this.$get=["$injector",function(t){return w=t,o=!1,a(),F(s,function(t,e){x[e]||(x[e]=new $(t))}),this}],this.Param=function(i,t,o,e){var n,r,s=this;-1===W(r=z(n=o)?q(n):[],"value")&&-1===W(r,"type")&&-1===W(r,"squash")&&-1===W(r,"array")&&(n={value:n}),n.$$fn=C(n.value)?n.value:function(){return n.value},t=function(t,e,n){if(t.type&&e)throw new Error("Param '"+i+"' has two type configurations.");return e||(t.type?A.isString(t.type)?x[t.type]:t.type instanceof $?t.type:new $(t.type):"config"===n?x.any:x.string)}(o=n,t,e);var a,l,u=(a={array:"search"===e&&"auto"},l=i.match(/\[\]$/)?{array:!0}:{},H(a,l,o).array);"string"!==(t=u?t.$asArray(u,"search"===e):t).name||u||"path"!==e||o.value!==O||(o.value="");var c,h,d,p,f,m,g,v=o.value!==O,y=function(t,e){var n=t.squash;if(!e||!1===n)return!1;if(!N(n)||null==n)return _;if(!0===n||R(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}(o,v),b=(h=u,p=y,g=[{from:"",to:(d=v)||h?O:""},{from:null,to:d||h?O:""}],f=U((c=o).replace)?c.replace:[],R(p)&&f.push({from:p,to:O}),m=Y(f,function(t){return t.from}),k(g,function(t){return-1===W(m,t.from)}).concat(f));H(this,{id:i,type:t,location:e,array:u,squash:y,replace:b,isOptional:v,value:function(t){var e,n,i;return e=t,t=(i=Y(k(s.replace,(n=e,function(t){return t.from===n})),function(t){return t.to})).length?i[0]:e,N(t)?s.type.$normalize(t):function(){if(!w)throw new Error("Injectable functions cannot be called at configuration time");var t=w.invoke(o.$$fn);if(null!==t&&t!==O&&!s.type.is(t))throw new Error("Default value ("+t+") for parameter '"+s.id+"' is not an instance of Type ("+s.type.name+")");return t}()},dynamic:O,config:o,toString:function(){return"{Param:"+i+" "+t+" squash: '"+y+"' optional: "+v+"}"}})},l.prototype={$$new:function(){return j(this,H(new l,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,i=q(l.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),F(t,function(t){F(q(t),function(t){-1===W(e,t)&&-1===W(i,t)&&e.push(t)})}),e},$$values:function(e){var n={},i=this;return F(i.$$keys(),function(t){n[t]=i[t].value(e&&e[t])}),n},$$equals:function(i,o){var r=!0,s=this;return F(s.$$keys(),function(t){var e=i&&i[t],n=o&&o[t];s[t].type.equals(e,n)||(r=!1)}),r},$$validates:function(t){var e,n,i,o,r,s=this.$$keys();for(e=0;e<s.length&&(n=this[s[e]],(i=t[s[e]])!==O&&null!==i||!n.isOptional);e++){if(o=n.type.$normalize(i),!n.type.is(o))return!1;if(r=n.type.encode(o),A.isString(r)&&!n.type.pattern.exec(r))return!1}return!0},$$parent:O},this.ParamSet=l}),A.module("ui.router.util").run(["$urlMatcherFactory",function(t){}]),i.$inject=["$locationProvider","$urlMatcherFactoryProvider"],A.module("ui.router.router").provider("$urlRouter",i),o.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],A.module("ui.router.state").factory("$stateParams",function(){return{}}).provider("$state",o),r.$inject=[],A.module("ui.router.state").provider("$view",r),A.module("ui.router.state").provider("$uiViewScroll",function(){var n=!1;this.useAnchorScroll=function(){n=!0},this.$get=["$anchorScroll","$timeout",function(t,e){return n?t:function(t){return e(function(){t[0].scrollIntoView()},0,!1)}}]});var b=A.version.major,_=A.version.minor;function s(m,e,g,v){var t=e.has?function(t){return e.has(t)?e.get(t):null}:function(t){try{return e.get(t)}catch(t){return null}},n=t("$animator"),y=t("$animate");return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(t,e,f){return function(o,r,s){var a,l,u,c,h=s.onload||"",d=s.autoscroll,p=function(t,e){var i={enter:function(t,e,n){e.after(t),n()},leave:function(t,e){t.remove(),e()}};if(t.noanimation)return i;function o(t){return 1===b&&4<=_?!!y.enabled(t):1===b&&2<=_?!!y.enabled():!!n}if(y)return{enter:function(t,e,n){o(t)?2<A.version.minor?y.enter(t,null,e).then(n):y.enter(t,null,e,n):i.enter(t,e,n)},leave:function(t,e){o(t)?2<A.version.minor?y.leave(t).then(e):y.leave(t,e):i.leave(t,e)}};if(n){var r=n&&n(e,t);return{enter:function(t,e,n){r.enter(t,null,e),n()},leave:function(t,e){r.leave(t),e()}}}return i}(s,o);function t(t){var e,n=C(o,s,r,v),i=n&&m.$current&&m.$current.locals[n];!t&&i===c||o._willBeDestroyed||(e=o.$new(),c=m.$current.locals[n],e.$emit("$viewContentLoading",n),l=f(e,function(t){p.enter(t,r,function(){u&&u.$emit("$viewContentAnimationEnded"),(A.isDefined(d)&&!d||o.$eval(d))&&g(t)}),function(){var t=a,e=u;function n(){t&&t.remove(),e&&e.$destroy()}e&&(e._willBeDestroyed=!0),a=l?(p.leave(l,function(){n(),a=null}),l):(n(),null),u=l=null}()}),(u=e).$emit("$viewContentLoaded",n),u.$eval(h))}o.$on("$stateChangeSuccess",function(){t(!1)}),t(!0)}}}}function a(u,c,h,d){return{restrict:"ECA",priority:-400,compile:function(t){var l=t.html();return function(t,e,n){var i=h.$current,o=C(t,n,e,d),r=i&&i.locals[o];if(r){e.data("$uiView",{name:o,state:r.$$state}),e.html(r.$template?r.$template:l);var s=u(e.contents());if(r.$$controller){r.$scope=t,r.$element=e;var a=c(r.$$controller,r);r.$$controllerAs&&(t[r.$$controllerAs]=a),e.data("$ngControllerController",a),e.children().data("$ngControllerController",a)}s(t)}}}}}function C(t,e,n,i){var o=i(e.uiView||e.name||"")(t),r=n.inheritedData("$uiView");return 0<=o.indexOf("@")?o:o+"@"+(r?r.state.name:"")}function m(t,e){var n,i=t.match(/^\s*({[^}]*})\s*$/);if(i&&(t=e+"("+i[1]+")"),!(n=t.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/))||4!==n.length)throw new Error("Invalid state ref '"+t+"'");return{state:n[1],paramExpr:n[3]||null}}function g(t){var e=t.parent().inheritedData("$uiView");if(e&&e.state&&e.state.name)return e.state}function v(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),n="FORM"===t[0].nodeName;return{attr:n?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!n}}function y(r,s,a,l,u){return function(t){var e=t.which||t.button,n=u();if(!(1<e||t.ctrlKey||t.metaKey||t.shiftKey||r.attr("target"))){var i=a(function(){s.go(n.state,n.params,n.options)});t.preventDefault();var o=l.isAnchor&&!n.href?1:0;t.preventDefault=function(){o--<=0&&a.cancel(i)}}}}function l(c,h){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(t,e,n,i){var o,r=m(n.uiSref,c.current.name),s={state:r.state,href:null,params:null},a=v(e),l=i[1]||i[0];s.options=H((o=c,{relative:g(e)||o.$current,inherit:!0}),n.uiSrefOpts?t.$eval(n.uiSrefOpts):{});var u=function(t){t&&(s.params=A.copy(t)),s.href=c.href(r.state,s.params,s.options),l&&l.$$addStateInfo(r.state,s.params),null!==s.href&&n.$set(a.attr,s.href)};r.paramExpr&&(t.$watch(r.paramExpr,function(t){t!==s.params&&u(t)},!0),s.params=A.copy(t.$eval(r.paramExpr))),u(),a.clickable&&e.bind("click",y(e,c,h,a,function(){return s}))}}}function c(u,c){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(t,e,n,i){var o=v(e),r=i[1]||i[0],s="["+[n.uiState,n.uiStateParams||null,n.uiStateOpts||null].map(function(t){return t||"null"}).join(", ")+"]",a={state:null,params:null,options:null,href:null};function l(t){a.state=t[0],a.params=t[1],a.options=t[2],a.href=u.href(a.state,a.params,a.options),r&&r.$$addStateInfo(a.state,a.params),a.href&&n.$set(o.attr,a.href)}t.$watch(s,l,!0),l(t.$eval(s)),o.clickable&&e.bind("click",y(e,u,c,o,function(){return a}))}}}function h(p,t,e){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(r,s,t,n){var a,i,l=[],u={};a=e(t.uiSrefActiveEq||"",!1)(r);try{i=r.$eval(t.uiSrefActive)}catch(t){}function o(t,e,n){var i=p.get(t,g(s)),o=function(t,e){if(!R(t))throw new Error("state should be a string");if(z(e))return t+f(e);if(e=r.$eval(e),z(e))return t+f(e);return t}(t,e);l.push({state:i||{name:t},params:e,hash:o}),u[o]=n}function c(){for(var t=0;t<l.length;t++)i=l[t].state,o=l[t].params,p.includes(i.name,o)?h(s,u[l[t].hash]):d(s,u[l[t].hash]),e=l[t].state,n=l[t].params,p.is(e.name,n)?h(s,a):d(s,a);var e,n,i,o}function h(t,e){n(function(){t.addClass(e)})}function d(t,e){t.removeClass(e)}i=i||e(t.uiSrefActive||"",!1)(r),z(i)&&F(i,function(t,e){if(R(t)){var n=m(t,p.current.name);o(n.state,r.$eval(n.paramExpr),e)}}),this.$$addStateInfo=function(t,e){z(i)&&0<l.length||(o(t,e,i),c())},r.$on("$stateChangeSuccess",c),c()}]}}function T(n){var t=function(t,e){return n.is(t,e)};return t.$stateful=!0,t}function S(i){var t=function(t,e,n){return i.includes(t,e,n)};return t.$stateful=!0,t}s.$inject=["$state","$injector","$uiViewScroll","$interpolate"],a.$inject=["$compile","$controller","$state","$interpolate"],A.module("ui.router.state").directive("uiView",s),A.module("ui.router.state").directive("uiView",a),l.$inject=["$state","$timeout"],c.$inject=["$state","$timeout"],h.$inject=["$state","$stateParams","$interpolate"],A.module("ui.router.state").directive("uiSref",l).directive("uiSrefActive",h).directive("uiSrefActiveEq",h).directive("uiState",c),T.$inject=["$state"],S.$inject=["$state"],A.module("ui.router.state").filter("isState",T).filter("includedByState",S)}(window,window.angular),function(a,m){"use strict";var r=m.$$minErr("$sanitize");var s,e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,n=/([^\#-~ |!])/g,i=b("area,br,col,hr,img,wbr"),t=b("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),o=b("rp,rt"),l=m.extend({},o,t),u=m.extend({},t,b("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),c=m.extend({},o,b("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),h=b("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),d=b("script,style"),p=m.extend({},i,u,c,l),f=b("background,cite,href,longdesc,src,xlink:href"),g=b("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),v=b("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),y=m.extend({},f,v,g);function b(t,e){var n,i={},o=t.split(",");for(n=0;n<o.length;n++)i[e?m.lowercase(o[n]):o[n]]=!0;return i}function _(t){for(var e={},n=0,i=t.length;n<i;n++){var o=t[n];e[o.name]=o.value}return e}function w(t){return t.replace(/&/g,"&amp;").replace(e,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(n,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function x(t,r){var e=!1,s=m.bind(t,t.push);return{start:function(o,t){o=m.lowercase(o),!e&&d[o]&&(e=o),e||!0!==p[o]||(s("<"),s(o),m.forEach(t,function(t,e){var n=m.lowercase(e),i="img"===o&&"src"===n||"background"===n;!0!==y[n]||!0===f[n]&&!r(t,i)||(s(" "),s(e),s('="'),s(w(t)),s('"'))}),s(">"))},end:function(t){t=m.lowercase(t),e||!0!==p[t]||!0===i[t]||(s("</"),s(t),s(">")),t==e&&(e=!1)},chars:function(t){e||s(w(t))}}}function C(t){if(t.nodeType===a.Node.ELEMENT_NODE)for(var e=t.attributes,n=0,i=e.length;n<i;n++){var o=e[n],r=o.name.toLowerCase();"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||(t.removeAttributeNode(o),n--,i--)}var s=t.firstChild;s&&C(s),(s=t.nextSibling)&&C(s)}!function(t){var e;if(!t.document||!t.document.implementation)throw r("noinert","Can't create an inert html document");var n=((e=t.document.implementation.createHTMLDocument("inert")).documentElement||e.getDocumentElement()).getElementsByTagName("body");if(1===n.length)s=n[0];else{var i=e.createElement("html");s=e.createElement("body"),i.appendChild(s),e.appendChild(i)}}(a),m.module("ngSanitize",[]).provider("$sanitize",function(){var e=!1;this.$get=["$$sanitizeUri",function(n){return e&&m.extend(p,h),function(t){var e=[];return function(t,e){null==t?t="":"string"!=typeof t&&(t=""+t),s.innerHTML=t;var n=5;do{if(0===n)throw r("uinput","Failed to sanitize html because the input is unstable");n--,a.document.documentMode&&C(s),t=s.innerHTML,s.innerHTML=t}while(t!==s.innerHTML);for(var i=s.firstChild;i;){switch(i.nodeType){case 1:e.start(i.nodeName.toLowerCase(),_(i.attributes));break;case 3:e.chars(i.textContent)}var o;if(!((o=i.firstChild)||(1==i.nodeType&&e.end(i.nodeName.toLowerCase()),o=i.nextSibling)))for(;null==o&&(i=i.parentNode)!==s;)o=i.nextSibling,1==i.nodeType&&e.end(i.nodeName.toLowerCase());i=o}for(;i=s.firstChild;)s.removeChild(i)}(t,x(e,function(t,e){return!/^unsafe:/.test(n(t,e))})),e.join("")}}],this.enableSvg=function(t){return m.isDefined(t)?(e=t,this):e}}),m.module("ngSanitize").filter("linky",["$sanitize",function(c){var h=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,d=/^mailto:/i,p=m.$$minErr("linky"),f=m.isString;return function(t,i,o){if(null==t||""===t)return t;if(!f(t))throw p("notstring","Expected string but received: {0}",t);for(var e,n,r,s=t,a=[];e=s.match(h);)n=e[0],e[2]||e[4]||(n=(e[3]?"http://":"mailto:")+n),r=e.index,l(s.substr(0,r)),u(n,e[0].replace(d,"")),s=s.substring(r+e[0].length);return l(s),c(a.join(""));function l(t){var e,n;t&&a.push((e=t,x(n=[],m.noop).chars(e),n.join("")))}function u(t,e){var n;if(a.push("<a "),m.isFunction(o)&&(o=o(t)),m.isObject(o))for(n in o)a.push(n+'="'+o[n]+'" ');else o={};!m.isDefined(i)||"target"in o||a.push('target="',i,'" '),a.push('href="',t.replace(/"/g,"&quot;"),'">'),l(e),a.push("</a>")}}}])}(window,window.angular),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");function uiCodemirrorDirective(s,a){return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror needs CodeMirror to work... (o rly?)");return t}};function t(t,e,n,i){var o=angular.extend({value:e.text()},a.codemirror||{},t.$eval(n.uiCodemirror),t.$eval(n.uiCodemirrorOpts)),r=function(e,t){var n;n="TEXTAREA"===e[0].tagName?window.CodeMirror.fromTextArea(e[0],t):(e.html(""),new window.CodeMirror(function(t){e.append(t)},t));return n}(e,o);!function(i,t,e){if(!t)return;var o=Object.keys(window.CodeMirror.defaults);e.$watch(t,function(e,n){if(!angular.isObject(e))return;o.forEach(function(t){if(e.hasOwnProperty(t)){if(n&&e[t]===n[t])return;i.setOption(t,e[t])}})},!0)}(r,n.uiCodemirror||n.uiCodemirrorOpts,t),function(e,n,i){if(!n)return;n.$formatters.push(function(t){if(angular.isUndefined(t)||null===t)return"";if(angular.isObject(t)||angular.isArray(t))throw new Error("ui-codemirror cannot use an object or an array as a model");return t}),n.$render=function(){var t=n.$viewValue||"";e.setValue(t)},e.on("change",function(t){var e=t.getValue();e!==n.$viewValue&&i.$evalAsync(function(){n.$setViewValue(e)})})}(r,i,t),function(n,t,e){if(!t)return;e.$watch(t,function(t,e){t!==e&&s(function(){n.refresh()})})}(r,n.uiRefresh,t),t.$on("CodeMirror",function(t,e){if(!angular.isFunction(e))throw new Error("the CodeMirror event requires a callback function");e(r)}),angular.isFunction(o.onLoad)&&o.onLoad(r)}}!function(t){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(),function(i){"use strict";i.fn.emulateTransitionEnd=function(t){var e=!1,n=this;i(this).one("bsTransitionEnd",function(){e=!0});return setTimeout(function(){e||i(n).trigger(i.support.transition.end)},t),this},i(function(){i.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}(),i.support.transition&&(i.event.special.bsTransitionEnd={bindType:i.support.transition.end,delegateType:i.support.transition.end,handle:function(t){if(i(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(r){"use strict";var e='[data-dismiss="alert"]',s=function(t){r(t).on("click",e,this.close)};s.VERSION="3.3.4",s.TRANSITION_DURATION=150,s.prototype.close=function(t){var e=r(this),n=e.attr("data-target");n||(n=(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,""));var i=r(n);function o(){i.detach().trigger("closed.bs.alert").remove()}t&&t.preventDefault(),i.length||(i=e.closest(".alert")),i.trigger(t=r.Event("close.bs.alert")),t.isDefaultPrevented()||(i.removeClass("in"),r.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",o).emulateTransitionEnd(s.TRANSITION_DURATION):o())};var t=r.fn.alert;r.fn.alert=function(n){return this.each(function(){var t=r(this),e=t.data("bs.alert");e||t.data("bs.alert",e=new s(this)),"string"==typeof n&&e[n].call(t)})},r.fn.alert.Constructor=s,r.fn.alert.noConflict=function(){return r.fn.alert=t,this},r(document).on("click.bs.alert.data-api",e,s.prototype.close)}(jQuery),function(r){"use strict";var o=function(t,e){this.$element=r(t),this.options=r.extend({},o.DEFAULTS,e),this.isLoading=!1};function n(i){return this.each(function(){var t=r(this),e=t.data("bs.button"),n="object"==typeof i&&i;e||t.data("bs.button",e=new o(this,n)),"toggle"==i?e.toggle():i&&e.setState(i)})}o.VERSION="3.3.4",o.DEFAULTS={loadingText:"loading..."},o.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.is("input")?"val":"html",o=n.data();t+="Text",null==o.resetText&&n.data("resetText",n[i]()),setTimeout(r.proxy(function(){n[i](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(e).attr(e,e)):this.isLoading&&(this.isLoading=!1,n.removeClass(e).removeAttr(e))},this),0)},o.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var t=r.fn.button;r.fn.button=n,r.fn.button.Constructor=o,r.fn.button.noConflict=function(){return r.fn.button=t,this},r(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var e=r(t.target);e.hasClass("btn")||(e=e.closest(".btn")),n.call(e,"toggle"),t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){r(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(h){"use strict";var d=function(t,e){this.$element=h(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",h.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",h.proxy(this.pause,this)).on("mouseleave.bs.carousel",h.proxy(this.cycle,this))};function s(o){return this.each(function(){var t=h(this),e=t.data("bs.carousel"),n=h.extend({},d.DEFAULTS,t.data(),"object"==typeof o&&o),i="string"==typeof o?o:n.slide;e||t.data("bs.carousel",e=new d(this,n)),"number"==typeof o?e.to(o):i?e[i]():n.interval&&e.pause().cycle()})}d.VERSION="3.3.4",d.TRANSITION_DURATION=600,d.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},d.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},d.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(h.proxy(this.next,this),this.options.interval)),this},d.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},d.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);if(("prev"==t&&0===n||"next"==t&&n==this.$items.length-1)&&!this.options.wrap)return e;var i=(n+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(i)},d.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(n<t?"next":"prev",this.$items.eq(t))},d.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&h.support.transition&&(this.$element.trigger(h.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},d.prototype.next=function(){if(!this.sliding)return this.slide("next")},d.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},d.prototype.slide=function(t,e){var n=this.$element.find(".item.active"),i=e||this.getItemForDirection(t,n),o=this.interval,r="next"==t?"left":"right",s=this;if(i.hasClass("active"))return this.sliding=!1;var a=i[0],l=h.Event("slide.bs.carousel",{relatedTarget:a,direction:r});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=h(this.$indicators.children()[this.getItemIndex(i)]);u&&u.addClass("active")}var c=h.Event("slid.bs.carousel",{relatedTarget:a,direction:r});return h.support.transition&&this.$element.hasClass("slide")?(i.addClass(t),i[0].offsetWidth,n.addClass(r),i.addClass(r),n.one("bsTransitionEnd",function(){i.removeClass([t,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),s.sliding=!1,setTimeout(function(){s.$element.trigger(c)},0)}).emulateTransitionEnd(d.TRANSITION_DURATION)):(n.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger(c)),o&&this.cycle(),this}};var t=h.fn.carousel;h.fn.carousel=s,h.fn.carousel.Constructor=d,h.fn.carousel.noConflict=function(){return h.fn.carousel=t,this};var e=function(t){var e,n=h(this),i=h(n.attr("data-target")||(e=n.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(i.hasClass("carousel")){var o=h.extend({},i.data(),n.data()),r=n.attr("data-slide-to");r&&(o.interval=!1),s.call(i,o),r&&i.data("bs.carousel").to(r),t.preventDefault()}};h(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),h(window).on("load",function(){h('[data-ride="carousel"]').each(function(){var t=h(this);s.call(t,t.data())})})}(jQuery),function(s){"use strict";var a=function(t,e){this.$element=s(t),this.options=s.extend({},a.DEFAULTS,e),this.$trigger=s('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function o(t){var e,n=t.attr("data-target")||(e=t.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return s(n)}function l(i){return this.each(function(){var t=s(this),e=t.data("bs.collapse"),n=s.extend({},a.DEFAULTS,t.data(),"object"==typeof i&&i);!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||t.data("bs.collapse",e=new a(this,n)),"string"==typeof i&&e[i]()})}a.VERSION="3.3.4",a.TRANSITION_DURATION=350,a.DEFAULTS={toggle:!0},a.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},a.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(t=e.data("bs.collapse"))&&t.transitioning)){var n=s.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){e&&e.length&&(l.call(e,"hide"),t||e.data("bs.collapse",null));var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!s.support.transition)return o.call(this);var r=s.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",s.proxy(o,this)).emulateTransitionEnd(a.TRANSITION_DURATION)[i](this.$element[0][r])}}}},a.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=s.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension();this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!s.support.transition)return n.call(this);this.$element[e](0).one("bsTransitionEnd",s.proxy(n,this)).emulateTransitionEnd(a.TRANSITION_DURATION)}}},a.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},a.prototype.getParent=function(){return s(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(s.proxy(function(t,e){var n=s(e);this.addAriaAndCollapsedClass(o(n),n)},this)).end()},a.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var t=s.fn.collapse;s.fn.collapse=l,s.fn.collapse.Constructor=a,s.fn.collapse.noConflict=function(){return s.fn.collapse=t,this},s(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=s(this);e.attr("data-target")||t.preventDefault();var n=o(e),i=n.data("bs.collapse")?"toggle":e.data();l.call(n,i)})}(jQuery),function(a){"use strict";var l='[data-toggle="dropdown"]',i=function(t){a(t).on("click.bs.dropdown",this.toggle)};function r(i){i&&3===i.which||(a(".dropdown-backdrop").remove(),a(l).each(function(){var t=a(this),e=u(t),n={relatedTarget:this};e.hasClass("open")&&(e.trigger(i=a.Event("hide.bs.dropdown",n)),i.isDefaultPrevented()||(t.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",n)))}))}function u(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var n=e&&a(e);return n&&n.length?n:t.parent()}i.VERSION="3.3.4",i.prototype.toggle=function(t){var e=a(this);if(!e.is(".disabled, :disabled")){var n=u(e),i=n.hasClass("open");if(r(),!i){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",r);var o={relatedTarget:this};if(n.trigger(t=a.Event("show.bs.dropdown",o)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger("shown.bs.dropdown",o)}return!1}},i.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=a(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=u(e),i=n.hasClass("open");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&n.find(l).trigger("focus"),e.trigger("click");var o=" li:not(.disabled):visible a",r=n.find('[role="menu"]'+o+', [role="listbox"]'+o);if(r.length){var s=r.index(t.target);38==t.which&&0<s&&s--,40==t.which&&s<r.length-1&&s++,~s||(s=0),r.eq(s).trigger("focus")}}}};var t=a.fn.dropdown;a.fn.dropdown=function(n){return this.each(function(){var t=a(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new i(this)),"string"==typeof n&&e[n].call(t)})},a.fn.dropdown.Constructor=i,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=t,this},a(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",l,i.prototype.toggle).on("keydown.bs.dropdown.data-api",l,i.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',i.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',i.prototype.keydown)}(jQuery),function(r){"use strict";var s=function(t,e){this.options=e,this.$body=r(document.body),this.$element=r(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,r.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function a(i,o){return this.each(function(){var t=r(this),e=t.data("bs.modal"),n=r.extend({},s.DEFAULTS,t.data(),"object"==typeof i&&i);e||t.data("bs.modal",e=new s(this,n)),"string"==typeof i?e[i](o):n.show&&e.show(o)})}s.VERSION="3.3.4",s.TRANSITION_DURATION=300,s.BACKDROP_TRANSITION_DURATION=150,s.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},s.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},s.prototype.show=function(n){var i=this,t=r.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',r.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){r(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var t=r.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),t&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var e=r.Event("shown.bs.modal",{relatedTarget:n});t?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(s.TRANSITION_DURATION):i.$element.trigger("focus").trigger(e)}))},s.prototype.hide=function(t){t&&t.preventDefault(),t=r.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),r(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),r.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",r.proxy(this.hideModal,this)).emulateTransitionEnd(s.TRANSITION_DURATION):this.hideModal())},s.prototype.enforceFocus=function(){r(document).off("focusin.bs.modal").on("focusin.bs.modal",r.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},s.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",r.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},s.prototype.resize=function(){this.isShown?r(window).on("resize.bs.modal",r.proxy(this.handleUpdate,this)):r(window).off("resize.bs.modal")},s.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},s.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},s.prototype.backdrop=function(t){var e=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=r.support.transition&&n;if(this.$backdrop=r('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",r.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){e.removeBackdrop(),t&&t()};r.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},s.prototype.handleUpdate=function(){this.adjustDialog()},s.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},s.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},s.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},s.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},s.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},s.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var t=r.fn.modal;r.fn.modal=a,r.fn.modal.Constructor=s,r.fn.modal.noConflict=function(){return r.fn.modal=t,this},r(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=r(this),n=e.attr("href"),i=r(e.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),o=i.data("bs.modal")?"toggle":r.extend({remote:!/#/.test(n)&&n},i.data(),e.data());e.is("a")&&t.preventDefault(),i.one("show.bs.modal",function(t){t.isDefaultPrevented()||i.one("hidden.bs.modal",function(){e.is(":visible")&&e.trigger("focus")})}),a.call(i,o,this)})}(jQuery),function(g){"use strict";var v=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};v.VERSION="3.3.4",v.TRANSITION_DURATION=150,v.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},v.prototype.init=function(t,e,n){if(this.enabled=!0,this.type=t,this.$element=g(e),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&g(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var r=i[o];if("click"==r)this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",a="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,g.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},v.prototype.getDefaults=function(){return v.DEFAULTS},v.prototype.getOptions=function(t){return(t=g.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},v.prototype.getDelegateOptions=function(){var n={},i=this.getDefaults();return this._options&&g.each(this._options,function(t,e){i[t]!=e&&(n[t]=e)}),n},v.prototype.enter=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e&&e.$tip&&e.$tip.is(":visible"))e.hoverState="in";else{if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)}},v.prototype.leave=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)},v.prototype.show=function(){var t=g.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var e=g.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!e)return;var n=this,i=this.tip(),o=this.getUID(this.type);this.setContent(),i.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&i.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,a=s.test(r);a&&(r=r.replace(s,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var l=this.getPosition(),u=i[0].offsetWidth,c=i[0].offsetHeight;if(a){var h=r,d=this.options.container?g(this.options.container):this.$element.parent(),p=this.getPosition(d);r="bottom"==r&&l.bottom+c>p.bottom?"top":"top"==r&&l.top-c<p.top?"bottom":"right"==r&&l.right+u>p.width?"left":"left"==r&&l.left-u<p.left?"right":r,i.removeClass(h).addClass(r)}var f=this.getCalculatedOffset(r,l,u,c);this.applyPlacement(f,r);var m=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};g.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",m).emulateTransitionEnd(v.TRANSITION_DURATION):m()}},v.prototype.applyPlacement=function(t,e){var n=this.tip(),i=n[0].offsetWidth,o=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),t.top=t.top+r,t.left=t.left+s,g.offset.setOffset(n[0],g.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),n.addClass("in");var a=n[0].offsetWidth,l=n[0].offsetHeight;"top"==e&&l!=o&&(t.top=t.top+o-l);var u=this.getViewportAdjustedDelta(e,t,a,l);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(e),h=c?2*u.left-i+a:2*u.top-o+l,d=c?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(h,n[0][d],c)},v.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},v.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},v.prototype.hide=function(t){var e=this,n=g(this.$tip),i=g.Event("hide.bs."+this.type);function o(){"in"!=e.hoverState&&n.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),t&&t()}if(this.$element.trigger(i),!i.isDefaultPrevented())return n.removeClass("in"),g.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",o).emulateTransitionEnd(v.TRANSITION_DURATION):o(),this.hoverState=null,this},v.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},v.prototype.hasContent=function(){return this.getTitle()},v.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],n="BODY"==e.tagName,i=e.getBoundingClientRect();null==i.width&&(i=g.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=n?{top:0,left:0}:t.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=n?{width:g(window).width(),height:g(window).height()}:null;return g.extend({},i,r,s,o)},v.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},v.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-s.scroll,l=e.top+r-s.scroll+i;a<s.top?o.top=s.top-a:l>s.top+s.height&&(o.top=s.top+s.height-l)}else{var u=e.left-r,c=e.left+r+n;u<s.left?o.left=s.left-u:c>s.width&&(o.left=s.left+s.width-c)}return o},v.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},v.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},v.prototype.tip=function(){return this.$tip=this.$tip||g(this.options.template)},v.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},v.prototype.enable=function(){this.enabled=!0},v.prototype.disable=function(){this.enabled=!1},v.prototype.toggleEnabled=function(){this.enabled=!this.enabled},v.prototype.toggle=function(t){var e=this;t&&((e=g(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e))),e.tip().hasClass("in")?e.leave(e):e.enter(e)},v.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var t=g.fn.tooltip;g.fn.tooltip=function(i){return this.each(function(){var t=g(this),e=t.data("bs.tooltip"),n="object"==typeof i&&i;!e&&/destroy|hide/.test(i)||(e||t.data("bs.tooltip",e=new v(this,n)),"string"==typeof i&&e[i]())})},g.fn.tooltip.Constructor=v,g.fn.tooltip.noConflict=function(){return g.fn.tooltip=t,this}}(jQuery),function(o){"use strict";var r=function(t,e){this.init("popover",t,e)};if(!o.fn.tooltip)throw new Error("Popover requires tooltip.js");r.VERSION="3.3.4",r.DEFAULTS=o.extend({},o.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((r.prototype=o.extend({},o.fn.tooltip.Constructor.prototype)).constructor=r).prototype.getDefaults=function(){return r.DEFAULTS},r.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},r.prototype.hasContent=function(){return this.getTitle()||this.getContent()},r.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},r.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var t=o.fn.popover;o.fn.popover=function(i){return this.each(function(){var t=o(this),e=t.data("bs.popover"),n="object"==typeof i&&i;!e&&/destroy|hide/.test(i)||(e||t.data("bs.popover",e=new r(this,n)),"string"==typeof i&&e[i]())})},o.fn.popover.Constructor=r,o.fn.popover.noConflict=function(){return o.fn.popover=t,this}}(jQuery),function(r){"use strict";function o(t,e){this.$body=r(document.body),this.$scrollElement=r(t).is(document.body)?r(window):r(t),this.options=r.extend({},o.DEFAULTS,e),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",r.proxy(this.process,this)),this.refresh(),this.process()}function e(i){return this.each(function(){var t=r(this),e=t.data("bs.scrollspy"),n="object"==typeof i&&i;e||t.data("bs.scrollspy",e=new o(this,n)),"string"==typeof i&&e[i]()})}o.VERSION="3.3.4",o.DEFAULTS={offset:10},o.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},o.prototype.refresh=function(){var t=this,i="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),r.isWindow(this.$scrollElement[0])||(i="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=r(this),e=t.data("target")||t.attr("href"),n=/^#./.test(e)&&r(e);return n&&n.length&&n.is(":visible")&&[[n[i]().top+o,e]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},o.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),i<=e)return s!=(t=r[r.length-1])&&this.activate(t);if(s&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)s!=r[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(r[t])},o.prototype.activate=function(t){this.activeTarget=t,this.clear();var e=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=r(e).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},o.prototype.clear=function(){r(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var t=r.fn.scrollspy;r.fn.scrollspy=e,r.fn.scrollspy.Constructor=o,r.fn.scrollspy.noConflict=function(){return r.fn.scrollspy=t,this},r(window).on("load.bs.scrollspy.data-api",function(){r('[data-spy="scroll"]').each(function(){var t=r(this);e.call(t,t.data())})})}(jQuery),function(a){"use strict";var s=function(t){this.element=a(t)};function e(n){return this.each(function(){var t=a(this),e=t.data("bs.tab");e||t.data("bs.tab",e=new s(this)),"string"==typeof n&&e[n]()})}s.VERSION="3.3.4",s.TRANSITION_DURATION=150,s.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=e.find(".active:last a"),o=a.Event("hide.bs.tab",{relatedTarget:t[0]}),r=a.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),t.trigger(r),!r.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=a(n);this.activate(t.closest("li"),e),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},s.prototype.activate=function(t,e,n){var i=e.find("> .active"),o=n&&a.support.transition&&(i.length&&i.hasClass("fade")||!!e.find("> .fade").length);function r(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}i.length&&o?i.one("bsTransitionEnd",r).emulateTransitionEnd(s.TRANSITION_DURATION):r(),i.removeClass("in")};var t=a.fn.tab;a.fn.tab=e,a.fn.tab.Constructor=s,a.fn.tab.noConflict=function(){return a.fn.tab=t,this};var n=function(t){t.preventDefault(),e.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)}(jQuery),function(l){"use strict";var u=function(t,e){this.options=l.extend({},u.DEFAULTS,e),this.$target=l(this.options.target).on("scroll.bs.affix.data-api",l.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",l.proxy(this.checkPositionWithEventLoop,this)),this.$element=l(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function n(i){return this.each(function(){var t=l(this),e=t.data("bs.affix"),n="object"==typeof i&&i;e||t.data("bs.affix",e=new u(this,n)),"string"==typeof i&&e[i]()})}u.VERSION="3.3.4",u.RESET="affix affix-top affix-bottom",u.DEFAULTS={offset:0,target:window},u.prototype.getState=function(t,e,n,i){var o=this.$target.scrollTop(),r=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return o<n&&"top";if("bottom"==this.affixed)return null!=n?!(o+this.unpin<=r.top)&&"bottom":!(o+s<=t-i)&&"bottom";var a=null==this.affixed,l=a?o:r.top;return null!=n&&o<=n?"top":null!=i&&t-i<=l+(a?s:e)&&"bottom"},u.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(u.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},u.prototype.checkPositionWithEventLoop=function(){setTimeout(l.proxy(this.checkPosition,this),1)},u.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),e=this.options.offset,n=e.top,i=e.bottom,o=l(document.body).height();"object"!=typeof e&&(i=n=e),"function"==typeof n&&(n=e.top(this.$element)),"function"==typeof i&&(i=e.bottom(this.$element));var r=this.getState(o,t,n,i);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var s="affix"+(r?"-"+r:""),a=l.Event(s+".bs.affix");if(this.$element.trigger(a),a.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(u.RESET).addClass(s).trigger(s.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:o-t-i})}};var t=l.fn.affix;l.fn.affix=n,l.fn.affix.Constructor=u,l.fn.affix.noConflict=function(){return l.fn.affix=t,this},l(window).on("load",function(){l('[data-spy="affix"]').each(function(){var t=l(this),e=t.data();e.offset=e.offset||{},null!=e.offsetBottom&&(e.offset.bottom=e.offsetBottom),null!=e.offsetTop&&(e.offset.top=e.offsetTop),n.call(t,e)})})}(jQuery),function(){var O={version:"3.5.17"},r=[].slice,d=function(t){return r.call(t)},b=this.document;function a(t){return t&&(t.ownerDocument||t.document||t).documentElement}function I(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(b)try{d(b.documentElement.childNodes)[0].nodeType}catch(t){d=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),b)try{b.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var e=this.Element.prototype,n=e.setAttribute,i=e.setAttributeNS,o=this.CSSStyleDeclaration.prototype,s=o.setProperty;e.setAttribute=function(t,e){n.call(this,t,e+"")},e.setAttributeNS=function(t,e,n){i.call(this,t,e,n+"")},o.setProperty=function(t,e,n){s.call(this,t,e+"",n)}}function l(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function u(t){return null===t?NaN:+t}function c(t){return!isNaN(t)}function t(r){return{left:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var o=n+i>>>1;r(t[o],e)<0?n=o+1:i=o}return n},right:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var o=n+i>>>1;0<r(t[o],e)?i=o:n=o+1}return n}}}O.ascending=l,O.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},O.min=function(t,e){var n,i,o=-1,r=t.length;if(1===arguments.length){for(;++o<r;)if(null!=(i=t[o])&&i<=i){n=i;break}for(;++o<r;)null!=(i=t[o])&&i<n&&(n=i)}else{for(;++o<r;)if(null!=(i=e.call(t,t[o],o))&&i<=i){n=i;break}for(;++o<r;)null!=(i=e.call(t,t[o],o))&&i<n&&(n=i)}return n},O.max=function(t,e){var n,i,o=-1,r=t.length;if(1===arguments.length){for(;++o<r;)if(null!=(i=t[o])&&i<=i){n=i;break}for(;++o<r;)null!=(i=t[o])&&n<i&&(n=i)}else{for(;++o<r;)if(null!=(i=e.call(t,t[o],o))&&i<=i){n=i;break}for(;++o<r;)null!=(i=e.call(t,t[o],o))&&n<i&&(n=i)}return n},O.extent=function(t,e){var n,i,o,r=-1,s=t.length;if(1===arguments.length){for(;++r<s;)if(null!=(i=t[r])&&i<=i){n=o=i;break}for(;++r<s;)null!=(i=t[r])&&(i<n&&(n=i),o<i&&(o=i))}else{for(;++r<s;)if(null!=(i=e.call(t,t[r],r))&&i<=i){n=o=i;break}for(;++r<s;)null!=(i=e.call(t,t[r],r))&&(i<n&&(n=i),o<i&&(o=i))}return[n,o]},O.sum=function(t,e){var n,i=0,o=t.length,r=-1;if(1===arguments.length)for(;++r<o;)c(n=+t[r])&&(i+=n);else for(;++r<o;)c(n=+e.call(t,t[r],r))&&(i+=n);return i},O.mean=function(t,e){var n,i=0,o=t.length,r=-1,s=o;if(1===arguments.length)for(;++r<o;)c(n=u(t[r]))?i+=n:--s;else for(;++r<o;)c(n=u(e.call(t,t[r],r)))?i+=n:--s;if(s)return i/s},O.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),o=+t[i-1],r=n-i;return r?o+r*(t[i]-o):o},O.median=function(t,e){var n,i=[],o=t.length,r=-1;if(1===arguments.length)for(;++r<o;)c(n=u(t[r]))&&i.push(n);else for(;++r<o;)c(n=u(e.call(t,t[r],r)))&&i.push(n);if(i.length)return O.quantile(i.sort(l),.5)},O.variance=function(t,e){var n,i,o=t.length,r=0,s=0,a=-1,l=0;if(1===arguments.length)for(;++a<o;)c(n=u(t[a]))&&(s+=(i=n-r)*(n-(r+=i/++l)));else for(;++a<o;)c(n=u(e.call(t,t[a],a)))&&(s+=(i=n-r)*(n-(r+=i/++l)));if(1<l)return s/(l-1)},O.deviation=function(){var t=O.variance.apply(this,arguments);return t?Math.sqrt(t):t};var h=t(l);function p(t){return t.length}O.bisectLeft=h.left,O.bisect=O.bisectRight=h.right,O.bisector=function(n){return t(1===n.length?function(t,e){return l(n(t),e)}:n)},O.shuffle=function(t,e,n){(r=arguments.length)<3&&(n=t.length,r<2&&(e=0));for(var i,o,r=n-e;r;)o=Math.random()*r--|0,i=t[r+e],t[r+e]=t[o+e],t[o+e]=i;return t},O.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},O.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],o=new Array(n<0?0:n);e<n;)o[e]=[i,i=t[++e]];return o},O.transpose=function(t){if(!(o=t.length))return[];for(var e=-1,n=O.min(t,p),i=new Array(n);++e<n;)for(var o,r=-1,s=i[e]=new Array(o);++r<o;)s[r]=t[r][e];return i},O.zip=function(){return O.transpose(arguments)},O.keys=function(t){var e=[];for(var n in t)e.push(n);return e},O.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},O.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},O.merge=function(t){for(var e,n,i,o=t.length,r=-1,s=0;++r<o;)s+=t[r].length;for(n=new Array(s);0<=--o;)for(e=(i=t[o]).length;0<=--e;)n[--s]=i[e];return n};var A=Math.abs;function f(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function y(){this._=Object.create(null)}O.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var i,o=[],r=function(t){var e=1;for(;t*e%1;)e*=10;return e}(A(n)),s=-1;if(t*=r,e*=r,(n*=r)<0)for(;(i=t+n*++s)>e;)o.push(i/r);else for(;(i=t+n*++s)<e;)o.push(i/r);return o},O.map=function(t,e){var n=new y;if(t instanceof y)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,o=-1,r=t.length;if(1===arguments.length)for(;++o<r;)n.set(o,t[o]);else for(;++o<r;)n.set(e.call(t,i=t[o],o),i)}else for(var s in t)n.set(s,t[s]);return n};var m="__proto__",g="\0";function v(t){return(t+="")===m||t[0]===g?g+t:t}function _(t){return(t+="")[0]===g?t.slice(1):t}function w(t){return v(t)in this._}function x(t){return(t=v(t))in this._&&delete this._[t]}function C(){var t=[];for(var e in this._)t.push(_(e));return t}function k(){var t=0;for(var e in this._)++t;return t}function $(){for(var t in this._)return!1;return!0}function T(){this._=Object.create(null)}function N(t){return t}function S(e,n,i){return function(){var t=i.apply(n,arguments);return t===n?e:t}}function M(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=D.length;n<i;++n){var o=D[n]+e;if(o in t)return o}}f(y,{has:w,get:function(t){return this._[v(t)]},set:function(t,e){return this._[v(t)]=e},remove:x,keys:C,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:_(e),value:this._[e]});return t},size:k,empty:$,forEach:function(t){for(var e in this._)t.call(this,_(e),this._[e])}}),O.nest=function(){var h,d,p={},f=[],e=[];function m(n,t,i){if(i>=f.length)return d?d.call(p,t):h?t.sort(h):t;for(var e,o,r,s,a=-1,l=t.length,u=f[i++],c=new y;++a<l;)(s=c.get(e=u(o=t[a])))?s.push(o):c.set(e,[o]);return r=n?(o=n(),function(t,e){o.set(t,m(n,e,i))}):(o={},function(t,e){o[t]=m(n,e,i)}),c.forEach(r),o}return p.map=function(t,e){return m(e,t,0)},p.entries=function(t){return function n(t,i){if(i>=f.length)return t;var o=[],r=e[i++];return t.forEach(function(t,e){o.push({key:t,values:n(e,i)})}),r?o.sort(function(t,e){return r(t.key,e.key)}):o}(m(O.map,t,0),0)},p.key=function(t){return f.push(t),p},p.sortKeys=function(t){return e[f.length-1]=t,p},p.sortValues=function(t){return h=t,p},p.rollup=function(t){return d=t,p},p},O.set=function(t){var e=new T;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},f(T,{has:w,add:function(t){return this._[v(t+="")]=!0,t},remove:x,values:C,size:k,empty:$,forEach:function(t){for(var e in this._)t.call(this,_(e))}}),O.behavior={},O.rebind=function(t,e){for(var n,i=1,o=arguments.length;++i<o;)t[n=arguments[i]]=S(t,e,e[n]);return t};var D=["webkit","ms","moz","Moz","o","O"];function L(){}function E(){}function P(o){var r=[],s=new y;function t(){for(var t,e=r,n=-1,i=e.length;++n<i;)(t=e[n].on)&&t.apply(this,arguments);return o}return t.on=function(t,e){var n,i=s.get(t);return arguments.length<2?i&&i.on:(i&&(i.on=null,r=r.slice(0,n=r.indexOf(i)).concat(r.slice(n+1)),s.remove(t)),e&&r.push(s.set(t,{on:e})),o)},t}function R(){O.event.preventDefault()}function z(){for(var t,e=O.event;t=e.sourceEvent;)e=t;return e}function U(o){for(var r=new E,t=0,e=arguments.length;++t<e;)r[arguments[t]]=P(r);return r.of=function(n,i){return function(t){try{var e=t.sourceEvent=O.event;t.target=o,O.event=t,r[t.type].apply(n,i)}finally{O.event=e}}},r}O.dispatch=function(){for(var t=new E,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=P(t);return t},E.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(0<=n&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},O.event=null,O.requote=function(t){return t.replace(F,"\\$&")};var F=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,H={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function B(t){return H(t,V),t}var j=function(t,e){return e.querySelector(t)},q=function(t,e){return e.querySelectorAll(t)},W=function(t,e){var n=t.matches||t[M(t,"matchesSelector")];return(W=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(j=function(t,e){return Sizzle(t,e)[0]||null},q=Sizzle,W=Sizzle.matchesSelector),O.selection=function(){return O.select(b.documentElement)};var V=O.selection.prototype=[];function Z(t){return"function"==typeof t?t:function(){return j(t,this)}}function G(t){return"function"==typeof t?t:function(){return q(t,this)}}V.select=function(t){var e,n,i,o,r=[];t=Z(t);for(var s=-1,a=this.length;++s<a;){r.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var l=-1,u=i.length;++l<u;)(o=i[l])?(e.push(n=t.call(o,o.__data__,l,s)),n&&"__data__"in o&&(n.__data__=o.__data__)):e.push(null)}return B(r)},V.selectAll=function(t){var e,n,i=[];t=G(t);for(var o=-1,r=this.length;++o<r;)for(var s=this[o],a=-1,l=s.length;++a<l;)(n=s[a])&&(i.push(e=d(t.call(n,n.__data__,a,o))),e.parentNode=n);return B(i)};var Y="http://www.w3.org/1999/xhtml",K={svg:"http://www.w3.org/2000/svg",xhtml:Y,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function X(e,n){return e=O.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function J(t){return t.trim().replace(/\s+/g," ")}function Q(t){return new RegExp("(?:^|\\s+)"+O.requote(t)+"(?:\\s+|$)","g")}function tt(t){return(t+"").trim().split(/^|\s+/)}function et(n,i){var o=(n=tt(n).map(nt)).length;return"function"==typeof i?function(){for(var t=-1,e=i.apply(this,arguments);++t<o;)n[t](this,e)}:function(){for(var t=-1;++t<o;)n[t](this,i)}}function nt(i){var o=Q(i);return function(t,e){if(n=t.classList)return e?n.add(i):n.remove(i);var n=t.getAttribute("class")||"";e?(o.lastIndex=0,o.test(n)||t.setAttribute("class",J(n+" "+i))):t.setAttribute("class",J(n.replace(o," ")))}}function it(e,n,i){return null==n?function(){this.style.removeProperty(e)}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}:function(){this.style.setProperty(e,n,i)}}function ot(e,n){return null==n?function(){delete this[e]}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}:function(){this[e]=n}}function rt(n){return"function"==typeof n?n:(n=O.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Y&&t.documentElement.namespaceURI===Y?t.createElement(n):t.createElementNS(e,n)}}function st(){var t=this.parentNode;t&&t.removeChild(this)}function at(t){return{__data__:t}}function lt(t){return function(){return W(this,t)}}function ut(t,e){for(var n=0,i=t.length;n<i;n++)for(var o,r=t[n],s=0,a=r.length;s<a;s++)(o=r[s])&&e(o,s,n);return t}function ct(t){return H(t,ht),t}O.ns={prefix:K,qualify:function(t){var e=t.indexOf(":"),n=t;return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),K.hasOwnProperty(n)?{space:K[n],local:t}:t}},V.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=O.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(X(e,t[e]));return this}return this.each(X(t,e))},V.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=tt(t)).length,o=-1;if(e=n.classList){for(;++o<i;)if(!e.contains(t[o]))return!1}else for(e=n.getAttribute("class");++o<i;)if(!Q(t[o]).test(e))return!1;return!0}for(e in t)this.each(et(e,t[e]));return this}return this.each(et(t,e))},V.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(it(n,t[n],e));return this}if(i<2){var o=this.node();return I(o).getComputedStyle(o,null).getPropertyValue(t)}n=""}return this.each(it(t,e,n))},V.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(ot(e,t[e]));return this}return this.each(ot(t,e))},V.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},V.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},V.append=function(t){return t=rt(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},V.insert=function(t,e){return t=rt(t),e=Z(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},V.remove=function(){return this.each(st)},V.data=function(t,f){var e,n,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(e=this[0]).length);++i<o;)(n=e[i])&&(t[i]=n.__data__);return t}function r(t,e){var n,i,o,r=t.length,s=e.length,a=Math.min(r,s),l=new Array(s),u=new Array(s),c=new Array(r);if(f){var h,d=new y,p=new Array(r);for(n=-1;++n<r;)(i=t[n])&&(d.has(h=f.call(i,i.__data__,n))?c[n]=i:d.set(h,i),p[n]=h);for(n=-1;++n<s;)(i=d.get(h=f.call(e,o=e[n],n)))?!0!==i&&((l[n]=i).__data__=o):u[n]=at(o),d.set(h,!0);for(n=-1;++n<r;)n in p&&!0!==d.get(p[n])&&(c[n]=t[n])}else{for(n=-1;++n<a;)i=t[n],o=e[n],i?(i.__data__=o,l[n]=i):u[n]=at(o);for(;n<s;++n)u[n]=at(e[n]);for(;n<r;++n)c[n]=t[n]}u.update=l,u.parentNode=l.parentNode=c.parentNode=t.parentNode,m.push(u),g.push(l),v.push(c)}var m=ct([]),g=B([]),v=B([]);if("function"==typeof t)for(;++i<o;)r(e=this[i],t.call(e,e.parentNode.__data__,i));else for(;++i<o;)r(e=this[i],t);return g.enter=function(){return m},g.exit=function(){return v},g},V.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},V.filter=function(t){var e,n,i,o=[];"function"!=typeof t&&(t=lt(t));for(var r=0,s=this.length;r<s;r++){o.push(e=[]),e.parentNode=(n=this[r]).parentNode;for(var a=0,l=n.length;a<l;a++)(i=n[a])&&t.call(i,i.__data__,a,r)&&e.push(i)}return B(o)},V.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],o=i.length-1,r=i[o];0<=--o;)(n=i[o])&&(r&&r!==n.nextSibling&&r.parentNode.insertBefore(n,r),r=n);return this},V.sort=function(t){t=function(n){arguments.length||(n=l);return function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},V.each=function(i){return ut(this,function(t,e,n){i.call(t,t.__data__,e,n)})},V.call=function(t){var e=d(arguments);return t.apply(e[0]=this,e),this},V.empty=function(){return!this.node()},V.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,o=n.length;i<o;i++){var r=n[i];if(r)return r}return null},V.size=function(){var t=0;return ut(this,function(){++t}),t};var ht=[];function dt(o,e,n){var i="__on"+o,t=o.indexOf("."),r=ft;0<t&&(o=o.slice(0,t));var s=pt.get(o);function a(){var t=this[i];t&&(this.removeEventListener(o,t,t.$),delete this[i])}return s&&(o=s,r=mt),t?e?function(){var t=r(e,d(arguments));a.call(this),this.addEventListener(o,this[i]=t,t.$=n),t._=e}:a:e?L:function(){var t,e=new RegExp("^__on([^.]+)"+O.requote(o)+"$");for(var n in this)if(t=n.match(e)){var i=this[n];this.removeEventListener(t[1],i,i.$),delete this[n]}}}O.selection.enter=ct,(O.selection.enter.prototype=ht).append=V.append,ht.empty=V.empty,ht.node=V.node,ht.call=V.call,ht.size=V.size,ht.select=function(t){for(var e,n,i,o,r,s=[],a=-1,l=this.length;++a<l;){i=(o=this[a]).update,s.push(e=[]),e.parentNode=o.parentNode;for(var u=-1,c=o.length;++u<c;)(r=o[u])?(e.push(i[u]=n=t.call(o.parentNode,r.__data__,u,a)),n.__data__=r.__data__):e.push(null)}return B(s)},ht.insert=function(t,e){var s,a,l;return arguments.length<2&&(s=this,e=function(t,e,n){var i,o=s[n].update,r=o.length;for(n!=l&&(l=n,a=0),a<=e&&(a=e+1);!(i=o[a])&&++a<r;);return i}),V.insert.call(this,t,e)},O.select=function(t){var e;return"string"==typeof t?(e=[j(t,b)]).parentNode=b.documentElement:(e=[t]).parentNode=a(t),B([e])},O.selectAll=function(t){var e;return"string"==typeof t?(e=d(q(t,b))).parentNode=b.documentElement:(e=d(t)).parentNode=null,B([e])},V.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(dt(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(dt(t,e,n))};var pt=O.map({mouseenter:"mouseover",mouseleave:"mouseout"});function ft(n,i){return function(t){var e=O.event;O.event=t,i[0]=this.__data__;try{n.apply(this,i)}finally{O.event=e}}}function mt(t,e){var n=ft(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}b&&pt.forEach(function(t){"on"+t in b&&pt.remove(t)});var gt,vt=0;function yt(t){var n=".dragsuppress-"+ ++vt,i="click"+n,o=O.select(I(t)).on("touchmove"+n,R).on("dragstart"+n,R).on("selectstart"+n,R);if(null==gt&&(gt=!("onselectstart"in t)&&M(t.style,"userSelect")),gt){var r=a(t).style,s=r[gt];r[gt]="none"}return function(t){if(o.on(n,null),gt&&(r[gt]=s),t){var e=function(){o.on(i,null)};o.on(i,function(){R(),e()},!0),setTimeout(e,0)}}}O.mouse=function(t){return _t(t,z())};var bt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function _t(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(bt<0){var o=I(t);if(o.scrollX||o.scrollY){var r=(n=O.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();bt=!(r.f||r.e),n.remove()}}return i.y=bt?(i.x=e.pageX,e.pageY):(i.x=e.clientX,e.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function wt(){return O.event.changedTouches[0].identifier}O.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=z().changedTouches),e)for(var i,o=0,r=e.length;o<r;++o)if((i=e[o]).identifier===n)return _t(t,i)},O.behavior.drag=function(){var m=U(n,"drag","dragstart","dragend"),g=null,t=i(L,O.mouse,I,"mousemove","mouseup"),e=i(wt,O.touch,N,"touchmove","touchend");function n(){this.on("mousedown.drag",t).on("touchstart.drag",e)}function i(c,h,d,p,f){return function(){var i,t=O.event.target.correspondingElement||O.event.target,o=this.parentNode,r=m.of(this,arguments),s=0,a=c(),e=".drag"+(null==a?"":"-"+a),n=O.select(d(t)).on(p+e,function(){var t,e,n=h(o,a);if(!n)return;t=n[0]-u[0],e=n[1]-u[1],s|=t|e,r({type:"drag",x:(u=n)[0]+i[0],y:n[1]+i[1],dx:t,dy:e})}).on(f+e,function(){if(!h(o,a))return;n.on(p+e,null).on(f+e,null),l(s),r({type:"dragend"})}),l=yt(t),u=h(o,a);i=g?[(i=g.apply(this,arguments)).x-u[0],i.y-u[1]]:[0,0],r({type:"dragstart"})}}return n.origin=function(t){return arguments.length?(g=t,n):g},O.rebind(n,m,"on")},O.touches=function(n,t){return arguments.length<2&&(t=z().touches),t?d(t).map(function(t){var e=_t(n,t);return e.identifier=t.identifier,e}):[]};var xt=1e-6,Ct=xt*xt,kt=Math.PI,$t=2*kt,Tt=$t-xt,St=kt/2,Mt=kt/180,Dt=180/kt;function Lt(t){return 0<t?1:t<0?-1:0}function Et(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Pt(t){return 1<t?0:t<-1?kt:Math.acos(t)}function At(t){return 1<t?St:t<-1?-St:Math.asin(t)}function Ot(t){return((t=Math.exp(t))+1/t)/2}function It(t){return(t=Math.sin(t/2))*t}var Nt=Math.SQRT2;O.interpolateZoom=function(t,e){var n,s,a=t[0],l=t[1],u=t[2],i=e[0],o=e[1],r=e[2],c=i-a,h=o-l,d=c*c+h*h;if(d<Ct)s=Math.log(r/u)/Nt,n=function(t){return[a+t*c,l+t*h,u*Math.exp(Nt*t*s)]};else{var p=Math.sqrt(d),f=(r*r-u*u+4*d)/(2*u*2*p),m=(r*r-u*u-4*d)/(2*r*2*p),g=Math.log(Math.sqrt(f*f+1)-f),v=Math.log(Math.sqrt(m*m+1)-m);s=(v-g)/Nt,n=function(t){var e,n,i=t*s,o=Ot(g),r=u/(2*p)*(o*(n=Nt*i+g,((n=Math.exp(2*n))-1)/(n+1))-(e=g,((e=Math.exp(e))-1/e)/2));return[a+r*c,l+r*h,u*o/Ot(Nt*i+g)]}}return n.duration=1e3*s,n},O.behavior.zoom=function(){var e,l,n,i,_,o,r,s,a,w={x:0,y:0,k:1},u=[960,500],c=Ut,h=250,d=0,x="mousedown.zoom",p="mousemove.zoom",f="mouseup.zoom",C="touchstart.zoom",k=U(m,"zoomstart","zoom","zoomend");function m(t){t.on(x,P).on(zt+".zoom",v).on("dblclick.zoom",y).on(C,A)}function $(t){return[(t[0]-w.x)/w.k,(t[1]-w.y)/w.k]}function T(t){w.k=Math.max(c[0],Math.min(c[1],t))}function S(t,e){var n;e=[(n=e)[0]*w.k+w.x,n[1]*w.k+w.y],w.x+=t[0]-e[0],w.y+=t[1]-e[1]}function M(t,e,n,i){t.__chart__={x:w.x,y:w.y,k:w.k},T(Math.pow(2,i)),S(l=e,n),t=O.select(t),0<h&&(t=t.transition().duration(h)),t.call(m.event)}function g(){r&&r.domain(o.range().map(function(t){return(t-w.x)/w.k}).map(o.invert)),a&&a.domain(s.range().map(function(t){return(t-w.y)/w.k}).map(s.invert))}function D(t){d++||t({type:"zoomstart"})}function L(t){g(),t({type:"zoom",scale:w.k,translate:[w.x,w.y]})}function E(t){--d||(t({type:"zoomend"}),l=null)}function P(){var t=this,e=k.of(t,arguments),n=0,i=O.select(I(t)).on(p,function(){n=1,S(O.mouse(t),o),L(e)}).on(f,function(){i.on(p,null).on(f,null),r(n),E(e)}),o=$(O.mouse(t)),r=yt(t);ua.call(t),D(e)}function A(){var u,c=this,h=k.of(c,arguments),d={},p=0,o=".zoom-"+O.event.changedTouches[0].identifier,f="touchmove"+o,m="touchend"+o,g=[],r=O.select(c),s=yt(c);function v(){var t=O.touches(c);return u=w.k,t.forEach(function(t){t.identifier in d&&(d[t.identifier]=$(t))}),t}function t(){var t=O.event.target;O.select(t).on(f,y).on(m,b),g.push(t);for(var e=O.event.changedTouches,n=0,i=e.length;n<i;++n)d[e[n].identifier]=null;var o=v(),r=Date.now();if(1===o.length){if(r-_<500){var s=o[0];M(c,s,d[s.identifier],Math.floor(Math.log(w.k)/Math.LN2)+1),R()}_=r}else if(1<o.length){s=o[0];var a=o[1],l=s[0]-a[0],u=s[1]-a[1];p=l*l+u*u}}function y(){var t,e,n,i,o=O.touches(c);ua.call(c);for(var r=0,s=o.length;r<s;++r,i=null)if(n=o[r],i=d[n.identifier]){if(e)break;t=n,e=i}if(i){var a=(a=n[0]-t[0])*a+(a=n[1]-t[1])*a,l=p&&Math.sqrt(a/p);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],T(l*u)}_=null,S(t,e),L(h)}function b(){if(O.event.touches.length){for(var t=O.event.changedTouches,e=0,n=t.length;e<n;++e)delete d[t[e].identifier];for(var i in d)return void v()}O.selectAll(g).on(o,null),r.on(x,P).on(C,A),s(),E(h)}t(),D(h),r.on(x,null).on(C,t)}function v(){var t=k.of(this,arguments);i?clearTimeout(i):(ua.call(this),e=$(l=n||O.mouse(this)),D(t)),i=setTimeout(function(){i=null,E(t)},50),R(),T(Math.pow(2,.002*Rt())*w.k),S(l,e),L(t)}function y(){var t=O.mouse(this),e=Math.log(w.k)/Math.LN2;M(this,t,$(t),O.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return zt||(zt="onwheel"in b?(Rt=function(){return-O.event.deltaY*(O.event.deltaMode?120:1)},"wheel"):"onmousewheel"in b?(Rt=function(){return O.event.wheelDelta},"mousewheel"):(Rt=function(){return-O.event.detail},"MozMousePixelScroll")),m.event=function(t){t.each(function(){var a=k.of(this,arguments),e=w;da?O.select(this).transition().each("start.zoom",function(){w=this.__chart__||{x:0,y:0,k:1},D(a)}).tween("zoom:zoom",function(){var i=u[0],t=u[1],o=l?l[0]:i/2,r=l?l[1]:t/2,s=O.interpolateZoom([(o-w.x)/w.k,(r-w.y)/w.k,i/w.k],[(o-e.x)/e.k,(r-e.y)/e.k,i/e.k]);return function(t){var e=s(t),n=i/e[2];this.__chart__=w={x:o-e[0]*n,y:r-e[1]*n,k:n},L(a)}}).each("interrupt.zoom",function(){E(a)}).each("end.zoom",function(){E(a)}):(this.__chart__=w,D(a),L(a),E(a))})},m.translate=function(t){return arguments.length?(w={x:+t[0],y:+t[1],k:w.k},g(),m):[w.x,w.y]},m.scale=function(t){return arguments.length?(w={x:w.x,y:w.y,k:null},T(+t),g(),m):w.k},m.scaleExtent=function(t){return arguments.length?(c=null==t?Ut:[+t[0],+t[1]],m):c},m.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],m):n},m.size=function(t){return arguments.length?(u=t&&[+t[0],+t[1]],m):u},m.duration=function(t){return arguments.length?(h=+t,m):h},m.x=function(t){return arguments.length?(o=(r=t).copy(),w={x:0,y:0,k:1},m):r},m.y=function(t){return arguments.length?(s=(a=t).copy(),w={x:0,y:0,k:1},m):a},O.rebind(m,k,"on")};var Rt,zt,Ut=[0,1/0];function Ft(){}function Ht(t,e,n){return this instanceof Ht?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Ht?new Ht(t.h,t.s,t.l):ue(""+t,ce,Ht):new Ht(t,e,n)}(O.color=Ft).prototype.toString=function(){return this.rgb()+""};var Bt=(O.hsl=Ht).prototype=new Ft;function jt(t,e,n){var i,o;function r(t){return Math.round(255*(360<(e=t)?e-=360:e<0&&(e+=360),e<60?i+(o-i)*e/60:e<180?o:e<240?i+(o-i)*(240-e)/60:i));var e}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:1<e?1:e,i=2*(n=n<0?0:1<n?1:n)-(o=n<=.5?n*(1+e):n+e-n*e),new oe(r(t+120),r(t),r(t-120))}function qt(t,e,n){return this instanceof qt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof qt?new qt(t.h,t.c,t.l):te(t instanceof Zt?t.l:(t=he((t=O.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new qt(t,e,n)}Bt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ht(this.h,this.s,this.l/t)},Bt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ht(this.h,this.s,t*this.l)},Bt.rgb=function(){return jt(this.h,this.s,this.l)};var Wt=(O.hcl=qt).prototype=new Ft;function Vt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Zt(n,Math.cos(t*=Mt)*e,Math.sin(t)*e)}function Zt(t,e,n){return this instanceof Zt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Zt?new Zt(t.l,t.a,t.b):t instanceof qt?Vt(t.h,t.c,t.l):he((t=oe(t)).r,t.g,t.b):new Zt(t,e,n)}Wt.brighter=function(t){return new qt(this.h,this.c,Math.min(100,this.l+Gt*(arguments.length?t:1)))},Wt.darker=function(t){return new qt(this.h,this.c,Math.max(0,this.l-Gt*(arguments.length?t:1)))},Wt.rgb=function(){return Vt(this.h,this.c,this.l).rgb()},O.lab=Zt;var Gt=18,Yt=.95047,Kt=1,Xt=1.08883,Jt=Zt.prototype=new Ft;function Qt(t,e,n){var i=(t+16)/116,o=i+e/500,r=i-n/200;return new oe(ie(3.2404542*(o=ee(o)*Yt)-1.5371385*(i=ee(i)*Kt)-.4985314*(r=ee(r)*Xt)),ie(-.969266*o+1.8760108*i+.041556*r),ie(.0556434*o-.2040259*i+1.0572252*r))}function te(t,e,n){return 0<t?new qt(Math.atan2(n,e)*Dt,Math.sqrt(e*e+n*n),t):new qt(NaN,NaN,t)}function ee(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function ne(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function ie(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function oe(t,e,n){return this instanceof oe?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof oe?new oe(t.r,t.g,t.b):ue(""+t,oe,jt):new oe(t,e,n)}function re(t){return new oe(t>>16,t>>8&255,255&t)}function se(t){return re(t)+""}Jt.brighter=function(t){return new Zt(Math.min(100,this.l+Gt*(arguments.length?t:1)),this.a,this.b)},Jt.darker=function(t){return new Zt(Math.max(0,this.l-Gt*(arguments.length?t:1)),this.a,this.b)},Jt.rgb=function(){return Qt(this.l,this.a,this.b)};var ae=(O.rgb=oe).prototype=new Ft;function le(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ue(t,e,n){var i,o,r,s=0,a=0,l=0;if(i=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(o=i[2].split(","),i[1]){case"hsl":return n(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return e(pe(o[0]),pe(o[1]),pe(o[2]))}return(r=fe.get(t))?e(r.r,r.g,r.b):(null==t||"#"!==t.charAt(0)||isNaN(r=parseInt(t.slice(1),16))||(4===t.length?(s=(3840&r)>>4,s|=s>>4,a=240&r,a|=a>>4,l=15&r,l|=l<<4):7===t.length&&(s=(16711680&r)>>16,a=(65280&r)>>8,l=255&r)),e(s,a,l))}function ce(t,e,n){var i,o,r=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-r,l=(s+r)/2;return a?(o=l<.5?a/(s+r):a/(2-s-r),i=t==s?(e-n)/a+(e<n?6:0):e==s?(n-t)/a+2:(t-e)/a+4,i*=60):(i=NaN,o=0<l&&l<1?0:i),new Ht(i,o,l)}function he(t,e,n){var i=ne((.4124564*(t=de(t))+.3575761*(e=de(e))+.1804375*(n=de(n)))/Yt),o=ne((.2126729*t+.7151522*e+.072175*n)/Kt);return Zt(116*o-16,500*(i-o),200*(o-ne((.0193339*t+.119192*e+.9503041*n)/Xt)))}function de(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function pe(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}ae.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b;return e||n||i?(e&&e<30&&(e=30),n&&n<30&&(n=30),i&&i<30&&(i=30),new oe(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new oe(30,30,30)},ae.darker=function(t){return new oe((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},ae.hsl=function(){return ce(this.r,this.g,this.b)},ae.toString=function(){return"#"+le(this.r)+le(this.g)+le(this.b)};var fe=O.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function me(t){return"function"==typeof t?t:function(){return t}}function ge(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=null),ve(t,e,i,n)}}function ve(o,r,s,t){var n,a={},l=O.dispatch("beforesend","progress","load","error"),u={},c=new XMLHttpRequest,h=null;function e(){var t,e,n,i=c.status;if(!i&&((n=(e=c).responseType)&&"text"!==n?e.response:e.responseText)||200<=i&&i<300||304===i){try{t=s.call(a,c)}catch(t){return void l.error.call(a,t)}l.load.call(a,t)}else l.error.call(a,c)}return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(o)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=e:c.onreadystatechange=function(){3<c.readyState&&e()},c.onprogress=function(t){var e=O.event;O.event=t;try{l.progress.call(a,c)}finally{O.event=e}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==e?delete u[t]:u[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(r=null==t?null:t+"",a):r},a.responseType=function(t){return arguments.length?(h=t,a):h},a.response=function(t){return s=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(d(arguments)))}}),a.send=function(t,e,n){if(2===arguments.length&&"function"==typeof e&&(n=e,e=null),c.open(t,o,!0),null==r||"accept"in u||(u.accept=r+",*/*"),c.setRequestHeader)for(var i in u)c.setRequestHeader(i,u[i]);return null!=r&&c.overrideMimeType&&c.overrideMimeType(r),null!=h&&(c.responseType=h),null!=n&&a.on("error",n).on("load",function(t){n(null,t)}),l.beforesend.call(a,c),c.send(null==e?null:e),a},a.abort=function(){return c.abort(),a},O.rebind(a,l,"on"),null==t?a:a.get(1===(n=t).length?function(t,e){n(null==t?e:null)}:n)}fe.forEach(function(t,e){fe.set(t,re(e))}),O.functor=me,O.xhr=ge(N),O.dsv=function(o,r){var e=new RegExp('["'+o+"\n]"),d=o.charCodeAt(0);function s(t,e,n){arguments.length<3&&(n=e,e=null);var i=ve(t,r,null==e?a:l(e),n);return i.row=function(t){return arguments.length?i.response(null==(e=t)?a:l(t)):e},i}function a(t){return s.parse(t.responseText)}function l(e){return function(t){return s.parse(t.responseText,e)}}function n(t){return t.map(u).join(o)}function u(t){return e.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return s.parse=function(t,i){var o;return s.parseRows(t,function(t,e){if(o)return o(t,e-1);var n=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");o=i?function(t,e){return i(n(t),e)}:n})},s.parseRows=function(o,t){var e,r,s={},a={},n=[],l=o.length,u=0,i=0;function c(){if(l<=u)return a;if(r)return r=!1,s;var t=u;if(34===o.charCodeAt(t)){for(var e=t;e++<l;)if(34===o.charCodeAt(e)){if(34!==o.charCodeAt(e+1))break;++e}return u=e+2,13===(n=o.charCodeAt(e+1))?(r=!0,10===o.charCodeAt(e+2)&&++u):10===n&&(r=!0),o.slice(t+1,e).replace(/""/g,'"')}for(;u<l;){var n,i=1;if(10===(n=o.charCodeAt(u++)))r=!0;else if(13===n)r=!0,10===o.charCodeAt(u)&&(++u,++i);else if(n!==d)continue;return o.slice(t,u-i)}return o.slice(t)}for(;(e=c())!==a;){for(var h=[];e!==s&&e!==a;)h.push(e),e=c();t&&null==(h=t(h,i++))||n.push(h)}return n},s.format=function(t){if(Array.isArray(t[0]))return s.formatRows(t);var n=new T,i=[];return t.forEach(function(t){for(var e in t)n.has(e)||i.push(n.add(e))}),[i.map(u).join(o)].concat(t.map(function(e){return i.map(function(t){return u(e[t])}).join(o)})).join("\n")},s.formatRows=function(t){return t.map(n).join("\n")},s},O.csv=O.dsv(",","text/csv"),O.tsv=O.dsv("\t","text/tab-separated-values");var ye,be,_e,we,xe=this[M(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Ce(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var o={c:t,t:n+e,n:null};return be?be.n=o:ye=o,be=o,_e||(we=clearTimeout(we),_e=1,xe(ke)),o}function ke(){var t=$e(),e=Te()-t;24<e?(isFinite(e)&&(clearTimeout(we),we=setTimeout(ke,e)),_e=0):(_e=1,xe(ke))}function $e(){for(var t=Date.now(),e=ye;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Te(){for(var t,e=ye,n=1/0;e;)e=e.c?(e.t<n&&(n=e.t),(t=e).n):t?t.n=e.n:ye=e.n;return be=t,n}function Se(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}O.timer=function(){Ce.apply(this,arguments)},O.timer.flush=function(){$e(),Te()},O.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Me=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*A(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}});O.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=O.round(t,Se(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Me[8+n/3]};var De=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Le=O.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=O.round(t,Se(t,e))).toFixed(Math.max(0,Math.min(20,Se(t*(1+1e-15),e))))}});function Ee(t){return t+""}var Pe=O.time={},Ae=Date;function Oe(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}Oe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ie.setUTCDate.apply(this._,arguments)},setDay:function(){Ie.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ie.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ie.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ie.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ie.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ie.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ie.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ie.setTime.apply(this._,arguments)}};var Ie=Date.prototype;function Ne(i,r,s){function t(t){var e=i(t),n=o(e,1);return t-e<n-t?e:n}function a(t){return r(t=i(new Ae(t-1)),1),t}function o(t,e){return r(t=new Ae(+t),e),t}function l(t,e,n){var i=a(t),o=[];if(1<n)for(;i<e;)s(i)%n||o.push(new Date(+i)),r(i,1);else for(;i<e;)o.push(new Date(+i)),r(i,1);return o}(i.floor=i).round=t,i.ceil=a,i.offset=o,i.range=l;var e=i.utc=Re(i);return(e.floor=e).round=Re(t),e.ceil=Re(a),e.offset=Re(o),e.range=function(t,e,n){try{var i=new(Ae=Oe);return i._=t,l(i,e,n)}finally{Ae=Date}},i}function Re(i){return function(t,e){try{var n=new(Ae=Oe);return n._=t,i(n,e)._}finally{Ae=Date}}}Pe.year=Ne(function(t){return(t=Pe.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Pe.years=Pe.year.range,Pe.years.utc=Pe.year.utc.range,Pe.day=Ne(function(t){var e=new Ae(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Pe.days=Pe.day.range,Pe.days.utc=Pe.day.utc.range,Pe.dayOfYear=function(t){var e=Pe.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=Pe[t]=Ne(function(t){return(t=Pe.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var e=Pe.year(t).getDay();return Math.floor((Pe.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});Pe[t+"s"]=e.range,Pe[t+"s"].utc=e.utc.range,Pe[t+"OfYear"]=function(t){var e=Pe.year(t).getDay();return Math.floor((Pe.dayOfYear(t)+(e+n)%7)/7)}}),Pe.week=Pe.sunday,Pe.weeks=Pe.sunday.range,Pe.weeks.utc=Pe.sunday.utc.range,Pe.weekOfYear=Pe.sundayOfYear;var ze={"-":"",_:" ",0:"0"},Ue=/^\s*\d+/,Fe=/^%/;function He(t,e,n){var i=t<0?"-":"",o=(i?-t:t)+"",r=o.length;return i+(r<n?new Array(n-r+1).join(e)+o:o)}function Be(t){return new RegExp("^(?:"+t.map(O.requote).join("|")+")","i")}function je(t){for(var e=new y,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function qe(t,e,n){Ue.lastIndex=0;var i=Ue.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function We(t,e,n){Ue.lastIndex=0;var i=Ue.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Ve(t,e,n){Ue.lastIndex=0;var i=Ue.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Ze(t,e,n){Ue.lastIndex=0;var i=Ue.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Ge(t,e,n){Ue.lastIndex=0;var i,o=Ue.exec(e.slice(n,n+2));return o?(t.y=(i=+o[0])+(68<i?1900:2e3),n+o[0].length):-1}function Ye(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Ke(t,e,n){Ue.lastIndex=0;var i=Ue.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Xe(t,e,n){Ue.lastIndex=0;var i=Ue.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Je(t,e,n){Ue.lastIndex=0;var i=Ue.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function Qe(t,e,n){Ue.lastIndex=0;var i=Ue.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function tn(t,e,n){Ue.lastIndex=0;var i=Ue.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function en(t,e,n){Ue.lastIndex=0;var i=Ue.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function nn(t,e,n){Ue.lastIndex=0;var i=Ue.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function on(t){var e=t.getTimezoneOffset(),n=0<e?"-":"+",i=A(e)/60|0,o=A(e)%60;return n+He(i,"0",2)+He(o,"0",2)}function rn(t,e,n){Fe.lastIndex=0;var i=Fe.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function sn(i){for(var t=i.length,e=-1;++e<t;)i[e][0]=this(i[e][0]);return function(t){for(var e=0,n=i[e];!n[1](t);)n=i[++e];return n[0](t)}}O.locale=function(t){return{numberFormat:(e=t,k=e.decimal,a=e.thousands,l=e.grouping,i=e.currency,$=l&&a?function(t,e){for(var n=t.length,i=[],o=0,r=l[0],s=0;0<n&&0<r&&(e<s+r+1&&(r=Math.max(1,e-s)),i.push(t.substring(n-=r,n+r)),!((s+=r+1)>e));)r=l[o=(o+1)%l.length];return i.reverse().join(a)}:N,function(t){var e=De.exec(t),c=e[1]||" ",h=e[2]||">",d=e[3]||"-",n=e[4]||"",p=e[5],f=+e[6],m=e[7],g=e[8],v=e[9],y=1,b="",_="",w=!1,x=!0;switch(g&&(g=+g.substring(1)),(p||"0"===c&&"="===h)&&(p=c="0",h="="),v){case"n":m=!0,v="g";break;case"%":y=100,_="%",v="f";break;case"p":y=100,_="%",v="r";break;case"b":case"o":case"x":case"X":"#"===n&&(b="0"+v.toLowerCase());case"c":x=!1;case"d":w=!0,g=0;break;case"s":y=-1,v="r"}"$"===n&&(b=i[0],_=i[1]),"r"!=v||g||(v="g"),null!=g&&("g"==v?g=Math.max(1,Math.min(21,g)):"e"!=v&&"f"!=v||(g=Math.max(0,Math.min(20,g)))),v=Le.get(v)||Ee;var C=p&&m;return function(t){var e=_;if(w&&t%1)return"";var n=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===d?"":d;if(y<0){var i=O.formatPrefix(t,g);t=i.scale(t),e=i.symbol+_}else t*=y;var o,r,s=(t=v(t,g)).lastIndexOf(".");if(s<0){var a=x?t.lastIndexOf("e"):-1;r=a<0?(o=t,""):(o=t.substring(0,a),t.substring(a))}else o=t.substring(0,s),r=k+t.substring(s+1);!p&&m&&(o=$(o,1/0));var l=b.length+o.length+r.length+(C?0:n.length),u=l<f?new Array(l=f-l+1).join(c):"";return C&&(o=$(u+o,u.length?f-r.length:1/0)),n+=b,t=o+r,("<"===h?n+t+u:">"===h?u+n+t:"^"===h?u.substring(0,l>>=1)+n+t+u.substring(l):n+(C?t:u+t))+e}}),timeFormat:function(t){var e=t.dateTime,n=t.date,i=t.time,o=t.periods,r=t.days,s=t.shortDays,a=t.months,l=t.shortMonths;function u(a){var l=a.length;function t(t){for(var e,n,i,o=[],r=-1,s=0;++r<l;)37===a.charCodeAt(r)&&(o.push(a.slice(s,r)),null!=(n=ze[e=a.charAt(++r)])&&(e=a.charAt(++r)),(i=_[e])&&(e=i(t,null==n?"e"===e?" ":"0":n)),o.push(e),s=r+1);return o.push(a.slice(s,r)),o.join("")}return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(e,a,t,0)!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var n=null!=e.Z&&Ae!==Oe,i=new(n?Oe:Ae);return"j"in e?i.setFullYear(e.y,0,e.j):"W"in e||"U"in e?("w"in e||(e.w="W"in e?1:0),i.setFullYear(e.y,0,1),i.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(i.getDay()+5)%7:e.w+7*e.U-(i.getDay()+6)%7)):i.setFullYear(e.y,e.m,e.d),i.setHours(e.H+(e.Z/100|0),e.M+e.Z%100,e.S,e.L),n?i._:i},t.toString=function(){return a},t}function c(t,e,n,i){for(var o,r,s,a=0,l=e.length,u=n.length;a<l;){if(u<=i)return-1;if(37===(o=e.charCodeAt(a++))){if(s=e.charAt(a++),!(r=w[s in ze?e.charAt(a++):s])||(i=r(t,n,i))<0)return-1}else if(o!=n.charCodeAt(i++))return-1}return i}u.multi=(u.utc=function(t){var n=u(t);function e(t){try{var e=new(Ae=Oe);return e._=t,n(e)}finally{Ae=Date}}return e.parse=function(t){try{Ae=Oe;var e=n.parse(t);return e&&e._}finally{Ae=Date}},e.toString=n.toString,e}).multi=sn;var h=O.map(),d=Be(r),p=je(r),f=Be(s),m=je(s),g=Be(a),v=je(a),y=Be(l),b=je(l);o.forEach(function(t,e){h.set(t.toLowerCase(),e)});var _={a:function(t){return s[t.getDay()]},A:function(t){return r[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:u(e),d:function(t,e){return He(t.getDate(),e,2)},e:function(t,e){return He(t.getDate(),e,2)},H:function(t,e){return He(t.getHours(),e,2)},I:function(t,e){return He(t.getHours()%12||12,e,2)},j:function(t,e){return He(1+Pe.dayOfYear(t),e,3)},L:function(t,e){return He(t.getMilliseconds(),e,3)},m:function(t,e){return He(t.getMonth()+1,e,2)},M:function(t,e){return He(t.getMinutes(),e,2)},p:function(t){return o[+(12<=t.getHours())]},S:function(t,e){return He(t.getSeconds(),e,2)},U:function(t,e){return He(Pe.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return He(Pe.mondayOfYear(t),e,2)},x:u(n),X:u(i),y:function(t,e){return He(t.getFullYear()%100,e,2)},Y:function(t,e){return He(t.getFullYear()%1e4,e,4)},Z:on,"%":function(){return"%"}},w={a:function(t,e,n){f.lastIndex=0;var i=f.exec(e.slice(n));return i?(t.w=m.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){d.lastIndex=0;var i=d.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){y.lastIndex=0;var i=y.exec(e.slice(n));return i?(t.m=b.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){g.lastIndex=0;var i=g.exec(e.slice(n));return i?(t.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,e,n){return c(t,_.c.toString(),e,n)},d:Xe,e:Xe,H:Qe,I:Qe,j:Je,L:nn,m:Ke,M:tn,p:function(t,e,n){var i=h.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)},S:en,U:We,w:qe,W:Ve,x:function(t,e,n){return c(t,_.x.toString(),e,n)},X:function(t,e,n){return c(t,_.X.toString(),e,n)},y:Ge,Y:Ze,Z:Ye,"%":rn};return u}(t)};var e,k,a,l,i,$};var an=O.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ln(){}O.format=an.numberFormat,O.geo={},ln.prototype={s:0,t:0,add:function(t){cn(t,this.t,un),cn(un.s,this.s,this),this.s?this.t+=un.t:this.s=un.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var un=new ln;function cn(t,e,n){var i=n.s=t+e,o=i-t,r=i-o;n.t=t-r+(e-o)}function hn(t,e){t&&pn.hasOwnProperty(t.type)&&pn[t.type](t,e)}O.geo.stream=function(t,e){t&&dn.hasOwnProperty(t.type)?dn[t.type](t,e):hn(t,e)};var dn={Feature:function(t,e){hn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,o=n.length;++i<o;)hn(n[i].geometry,e)}},pn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){fn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)fn(n[i],e,0)},Polygon:function(t,e){mn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)mn(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,o=n.length;++i<o;)hn(n[i],e)}};function fn(t,e,n){var i,o=-1,r=t.length-n;for(e.lineStart();++o<r;)i=t[o],e.point(i[0],i[1],i[2]);e.lineEnd()}function mn(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)fn(t[n],e,1);e.polygonEnd()}O.geo.area=function(t){return gn=0,O.geo.stream(t,Dn),gn};var gn,vn,yn,bn,_n,wn,xn,Cn,kn,$n,Tn,Sn,Mn=new ln,Dn={sphere:function(){gn+=4*kt},point:L,lineStart:L,lineEnd:L,polygonStart:function(){Mn.reset(),Dn.lineStart=Ln},polygonEnd:function(){var t=2*Mn;gn+=t<0?4*kt+t:t,Dn.lineStart=Dn.lineEnd=Dn.point=L}};function Ln(){var n,i,c,h,d;function o(t,e){e=e*Mt/2+kt/4;var n=(t*=Mt)-c,i=0<=n?1:-1,o=i*n,r=Math.cos(e),s=Math.sin(e),a=d*s,l=h*r+a*Math.cos(o),u=a*i*Math.sin(o);Mn.add(Math.atan2(u,l)),c=t,h=r,d=s}Dn.point=function(t,e){Dn.point=o,c=(n=t)*Mt,h=Math.cos(e=(i=e)*Mt/2+kt/4),d=Math.sin(e)},Dn.lineEnd=function(){o(n,i)}}function En(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Pn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function An(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function On(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function In(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Nn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Rn(t){return[Math.atan2(t[1],t[0]),At(t[2])]}function zn(t,e){return A(t[0]-e[0])<xt&&A(t[1]-e[1])<xt}O.geo.bounds=function(){var c,h,d,p,f,i,o,m,r,l,u,g={point:v,lineStart:t,lineEnd:e,polygonStart:function(){g.point=n,g.lineStart=a,g.lineEnd=y,r=0,Dn.polygonStart()},polygonEnd:function(){Dn.polygonEnd(),g.point=v,g.lineStart=t,g.lineEnd=e,Mn<0?(c=-(d=180),h=-(p=90)):xt<r?p=90:r<-xt&&(h=-90),u[0]=c,u[1]=d}};function v(t,e){l.push(u=[c=t,d=t]),e<h&&(h=e),p<e&&(p=e)}function s(t,e){var n=En([t*Mt,e*Mt]);if(m){var i=An(m,n),o=An([i[1],-i[0],0],i);Nn(o),o=Rn(o);var r=t-f,s=0<r?1:-1,a=o[0]*Dt*s,l=180<A(r);if(l^(s*f<a&&a<s*t)){var u=o[1]*Dt;p<u&&(p=u)}else if(l^(s*f<(a=(a+360)%360-180)&&a<s*t)){(u=-o[1]*Dt)<h&&(h=u)}else e<h&&(h=e),p<e&&(p=e);l?t<f?b(c,t)>b(c,d)&&(d=t):b(t,d)>b(c,d)&&(c=t):c<=d?(t<c&&(c=t),d<t&&(d=t)):f<t?b(c,t)>b(c,d)&&(d=t):b(t,d)>b(c,d)&&(c=t)}else v(t,e);m=n,f=t}function t(){g.point=s}function e(){u[0]=c,u[1]=d,g.point=v,m=null}function n(t,e){if(m){var n=t-f;r+=180<A(n)?n+(0<n?360:-360):n}else i=t,o=e;Dn.point(t,e),s(t,e)}function a(){Dn.lineStart()}function y(){n(i,o),Dn.lineEnd(),A(r)>xt&&(c=-(d=180)),u[0]=c,u[1]=d,m=null}function b(t,e){return(e-=t)<0?e+360:e}function _(t,e){return t[0]-e[0]}function w(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(t){if(p=d=-(c=h=1/0),l=[],O.geo.stream(t,g),o=l.length){l.sort(_);for(var e=1,n=[a=l[0]];e<o;++e)w((r=l[e])[0],a)||w(r[1],a)?(b(a[0],r[1])>b(a[0],a[1])&&(a[1]=r[1]),b(r[0],a[1])>b(a[0],a[1])&&(a[0]=r[0])):n.push(a=r);for(var i,o,r,s=-1/0,a=(e=0,n[o=n.length-1]);e<=o;a=r,++e)r=n[e],(i=b(a[1],r[0]))>s&&(s=i,c=r[0],d=a[1])}return l=u=null,c===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,h],[d,p]]}}(),O.geo.centroid=function(t){vn=yn=bn=_n=wn=xn=Cn=kn=$n=Tn=Sn=0,O.geo.stream(t,Un);var e=$n,n=Tn,i=Sn,o=e*e+n*n+i*i;return o<Ct&&(e=xn,n=Cn,i=kn,yn<xt&&(e=bn,n=_n,i=wn),(o=e*e+n*n+i*i)<Ct)?[NaN,NaN]:[Math.atan2(n,e)*Dt,At(i/Math.sqrt(o))*Dt]};var Un={sphere:L,point:Fn,lineStart:Bn,lineEnd:jn,polygonStart:function(){Un.lineStart=qn},polygonEnd:function(){Un.lineStart=Bn}};function Fn(t,e){t*=Mt;var n=Math.cos(e*=Mt);Hn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Hn(t,e,n){bn+=(t-bn)/++vn,_n+=(e-_n)/vn,wn+=(n-wn)/vn}function Bn(){var a,l,u;function i(t,e){t*=Mt;var n=Math.cos(e*=Mt),i=n*Math.cos(t),o=n*Math.sin(t),r=Math.sin(e),s=Math.atan2(Math.sqrt((s=l*r-u*o)*s+(s=u*i-a*r)*s+(s=a*o-l*i)*s),a*i+l*o+u*r);yn+=s,xn+=s*(a+(a=i)),Cn+=s*(l+(l=o)),kn+=s*(u+(u=r)),Hn(a,l,u)}Un.point=function(t,e){t*=Mt;var n=Math.cos(e*=Mt);a=n*Math.cos(t),l=n*Math.sin(t),u=Math.sin(e),Un.point=i,Hn(a,l,u)}}function jn(){Un.point=Fn}function qn(){var i,o,p,f,m;function r(t,e){t*=Mt;var n=Math.cos(e*=Mt),i=n*Math.cos(t),o=n*Math.sin(t),r=Math.sin(e),s=f*r-m*o,a=m*i-p*r,l=p*o-f*i,u=Math.sqrt(s*s+a*a+l*l),c=p*i+f*o+m*r,h=u&&-Pt(c)/u,d=Math.atan2(u,c);$n+=h*s,Tn+=h*a,Sn+=h*l,yn+=d,xn+=d*(p+(p=i)),Cn+=d*(f+(f=o)),kn+=d*(m+(m=r)),Hn(p,f,m)}Un.point=function(t,e){i=t,o=e,Un.point=r,t*=Mt;var n=Math.cos(e*=Mt);p=n*Math.cos(t),f=n*Math.sin(t),m=Math.sin(e),Hn(p,f,m)},Un.lineEnd=function(){r(i,o),Un.lineEnd=jn,Un.point=Fn}}function Wn(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t}function Vn(){return!0}function Zn(t,e,n,i,a){var l=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(zn(n,i)){a.lineStart();for(var o=0;o<e;++o)a.point((n=t[o])[0],n[1]);a.lineEnd()}else{var r=new Yn(n,t,null,!0),s=new Yn(n,null,r,!1);r.o=s,l.push(r),u.push(s),s=new Yn(i,null,r=new Yn(i,t,null,!1),!0),r.o=s,l.push(r),u.push(s)}}}),u.sort(e),Gn(l),Gn(u),l.length){for(var o=0,r=n,s=u.length;o<s;++o)u[o].e=r=!r;for(var c,h,d=l[0];;){for(var p=d,f=!0;p.v;)if((p=p.n)===d)return;c=p.z,a.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,s=c.length;o<s;++o)a.point((h=c[o])[0],h[1]);else i(p.x,p.n.x,1,a);p=p.n}else{if(f)for(o=(c=p.p.z).length-1;0<=o;--o)a.point((h=c[o])[0],h[1]);else i(p.x,p.p.x,-1,a);p=p.p}c=(p=p.o).z,f=!f}while(!p.v);a.lineEnd()}}}function Gn(t){if(e=t.length){for(var e,n,i=0,o=t[0];++i<e;)o.n=n=t[i],n.p=o,o=n;o.n=n=t[0],n.p=o}}function Yn(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Kn(y,b,_,w){return function(i,s){var a,o=b(s),e=i.invert(w[0],w[1]),n={point:r,lineStart:l,lineEnd:u,polygonStart:function(){n.point=m,n.lineStart=g,n.lineEnd=v,a=[],c=[]},polygonEnd:function(){n.point=r,n.lineStart=l,n.lineEnd=u,a=O.merge(a);var t=function(t,e){var n=t[0],i=t[1],o=[Math.sin(n),-Math.cos(n),0],r=0,s=0;Mn.reset();for(var a=0,l=e.length;a<l;++a){var u=e[a],c=u.length;if(c)for(var h=u[0],d=h[0],p=h[1]/2+kt/4,f=Math.sin(p),m=Math.cos(p),g=1;;){g===c&&(g=0);var v=(t=u[g])[0],y=t[1]/2+kt/4,b=Math.sin(y),_=Math.cos(y),w=v-d,x=0<=w?1:-1,C=x*w,k=kt<C,$=f*b;if(Mn.add(Math.atan2($*x*Math.sin(C),m*_+$*Math.cos(C))),r+=k?w+x*$t:w,k^n<=d^n<=v){var T=An(En(h),En(t));Nn(T);var S=An(o,T);Nn(S);var M=(k^0<=w?-1:1)*At(S[2]);(M<i||i===M&&(T[0]||T[1]))&&(s+=k^0<=w?1:-1)}if(!g++)break;d=v,f=b,m=_,h=t}}return(r<-xt||r<xt&&Mn<-xt)^1&s}(e,c);a.length?(f||(s.polygonStart(),f=!0),Zn(a,Qn,t,_,s)):t&&(f||(s.polygonStart(),f=!0),s.lineStart(),_(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),a=c=null},sphere:function(){s.polygonStart(),s.lineStart(),_(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function r(t,e){var n=i(t,e);y(t=n[0],e=n[1])&&s.point(t,e)}function t(t,e){var n=i(t,e);o.point(n[0],n[1])}function l(){n.point=t,o.lineStart()}function u(){n.point=r,o.lineEnd()}var c,h,d=Jn(),p=b(d),f=!1;function m(t,e){h.push([t,e]);var n=i(t,e);p.point(n[0],n[1])}function g(){p.lineStart(),h=[]}function v(){m(h[0][0],h[0][1]),p.lineEnd();var t,e=p.clean(),n=d.buffer(),i=n.length;if(h.pop(),c.push(h),h=null,i)if(1&e){var o,r=-1;if(0<(i=(t=n[0]).length-1)){for(f||(s.polygonStart(),f=!0),s.lineStart();++r<i;)s.point((o=t[r])[0],o[1]);s.lineEnd()}}else 1<i&&2&e&&n.push(n.pop().concat(n.shift())),a.push(n.filter(Xn))}return n}}function Xn(t){return 1<t.length}function Jn(){var n,e=[];return{lineStart:function(){e.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:L,buffer:function(){var t=e;return e=[],n=null,t},rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))}}}function Qn(t,e){return((t=t.x)[0]<0?t[1]-St-xt:St-t[1])-((e=e.x)[0]<0?e[1]-St-xt:St-e[1])}var ti=Kn(Vn,function(h){var d,p=NaN,f=NaN,m=NaN;return{lineStart:function(){h.lineStart(),d=1},point:function(t,e){var n,i,o,r,s,a,l,u=0<t?kt:-kt,c=A(t-p);A(c-kt)<xt?(h.point(p,f=0<(f+e)/2?St:-St),h.point(m,f),h.lineEnd(),h.lineStart(),h.point(u,f),h.point(t,f),d=0):m!==u&&kt<=c&&(A(p-m)<xt&&(p-=m*xt),A(t-u)<xt&&(t-=u*xt),n=p,i=f,o=t,r=e,l=Math.sin(n-o),f=A(l)>xt?Math.atan((Math.sin(i)*(a=Math.cos(r))*Math.sin(o)-Math.sin(r)*(s=Math.cos(i))*Math.sin(n))/(s*a*l)):(i+r)/2,h.point(m,f),h.lineEnd(),h.lineStart(),h.point(u,f),d=0),h.point(p=t,f=e),m=u},lineEnd:function(){h.lineEnd(),p=f=NaN},clean:function(){return 2-d}}},function(t,e,n,i){var o;if(null==t)o=n*St,i.point(-kt,o),i.point(0,o),i.point(kt,o),i.point(kt,0),i.point(kt,-o),i.point(0,-o),i.point(-kt,-o),i.point(-kt,0),i.point(-kt,o);else if(A(t[0]-e[0])>xt){var r=t[0]<e[0]?kt:-kt;o=n*r/2,i.point(-r,o),i.point(0,o),i.point(r,o)}else i.point(e[0],e[1])},[-kt,-kt/2]);function ei(c,h,d,p){return function(t){var e,n=t.a,i=t.b,o=n.x,r=n.y,s=0,a=1,l=i.x-o,u=i.y-r;if(e=c-o,l||!(0<e)){if(e/=l,l<0){if(e<s)return;e<a&&(a=e)}else if(0<l){if(a<e)return;s<e&&(s=e)}if(e=d-o,l||!(e<0)){if(e/=l,l<0){if(a<e)return;s<e&&(s=e)}else if(0<l){if(e<s)return;e<a&&(a=e)}if(e=h-r,u||!(0<e)){if(e/=u,u<0){if(e<s)return;e<a&&(a=e)}else if(0<u){if(a<e)return;s<e&&(s=e)}if(e=p-r,u||!(e<0)){if(e/=u,u<0){if(a<e)return;s<e&&(s=e)}else if(0<u){if(e<s)return;e<a&&(a=e)}return 0<s&&(t.a={x:o+s*l,y:r+s*u}),a<1&&(t.b={x:o+a*l,y:r+a*u}),t}}}}}}var ni=1e9;function ii(_,w,x,C){return function(o){var i,c,r,s,a,l,u,h,d,p,f,m=o,t=Jn(),g=ei(_,w,x,C),e={point:n,lineStart:function(){e.point=b,c&&c.push(r=[]);p=!0,d=!1,u=h=NaN},lineEnd:function(){i&&(b(s,a),l&&d&&t.rejoin(),i.push(t.buffer()));e.point=n,d&&o.lineEnd()},polygonStart:function(){o=t,i=[],c=[],f=!0},polygonEnd:function(){o=m,i=O.merge(i);var t=function(t){for(var e=0,n=c.length,i=t[1],o=0;o<n;++o)for(var r,s=1,a=c[o],l=a.length,u=a[0];s<l;++s)r=a[s],u[1]<=i?r[1]>i&&0<Et(u,r,t)&&++e:r[1]<=i&&Et(u,r,t)<0&&--e,u=r;return 0!==e}([_,C]),e=f&&t,n=i.length;(e||n)&&(o.polygonStart(),e&&(o.lineStart(),v(null,null,1,o),o.lineEnd()),n&&Zn(i,$,t,v,o),o.polygonEnd()),i=c=r=null}};function v(t,e,n,i){var o=0,r=0;if(null==t||(o=k(t,n))!==(r=k(e,n))||T(t,e)<0^0<n)for(;i.point(0===o||3===o?_:x,1<o?C:w),(o=(o+n+4)%4)!==r;);else i.point(e[0],e[1])}function y(t,e){return _<=t&&t<=x&&w<=e&&e<=C}function n(t,e){y(t,e)&&o.point(t,e)}function b(t,e){var n=y(t=Math.max(-ni,Math.min(ni,t)),e=Math.max(-ni,Math.min(ni,e)));if(c&&r.push([t,e]),p)s=t,a=e,p=!1,(l=n)&&(o.lineStart(),o.point(t,e));else if(n&&d)o.point(t,e);else{var i={a:{x:u,y:h},b:{x:t,y:e}};g(i)?(d||(o.lineStart(),o.point(i.a.x,i.a.y)),o.point(i.b.x,i.b.y),n||o.lineEnd(),f=!1):n&&(o.lineStart(),o.point(t,e),f=!1)}u=t,h=e,d=n}return e};function k(t,e){return A(t[0]-_)<xt?0<e?0:3:A(t[0]-x)<xt?0<e?2:1:A(t[1]-w)<xt?0<e?1:0:0<e?3:2}function $(t,e){return T(t.x,e.x)}function T(t,e){var n=k(t,1),i=k(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function oi(t){var e=0,n=kt/3,i=Mi(t),o=i(e,n);return o.parallels=function(t){return arguments.length?i(e=t[0]*kt/180,n=t[1]*kt/180):[e/kt*180,n/kt*180]},o}function ri(t,e){var n=Math.sin(t),i=(n+Math.sin(e))/2,o=1+n*(2*i-n),r=Math.sqrt(o)/i;function s(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),r-n*Math.cos(t)]}return s.invert=function(t,e){var n=r-e;return[Math.atan2(t,n)/i,At((o-(t*t+n*n)*i*i)/(2*i))]},s}O.geo.clipExtent=function(){var e,n,i,o,r,s,a={stream:function(t){return r&&(r.valid=!1),(r=s(t)).valid=!0,r},extent:function(t){return arguments.length?(s=ii(e=+t[0][0],n=+t[0][1],i=+t[1][0],o=+t[1][1]),r&&(r.valid=!1,r=null),a):[[e,n],[i,o]]}};return a.extent([[0,0],[960,500]])},(O.geo.conicEqualArea=function(){return oi(ri)}).raw=ri,O.geo.albers=function(){return O.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},O.geo.albersUsa=function(){var i,o,r,s,a=O.geo.albers(),l=O.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=O.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){i=[t,e]}};function h(t){var e=t[0],n=t[1];return i=null,o(e,n),i||(r(e,n),i)||s(e,n),i}return h.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(.12<=o&&o<.234&&-.425<=i&&i<-.214?l:.166<=o&&o<.234&&-.214<=i&&i<-.115?u:a).invert(t)},h.stream=function(t){var n=a.stream(t),i=l.stream(t),o=u.stream(t);return{point:function(t,e){n.point(t,e),i.point(t,e),o.point(t,e)},sphere:function(){n.sphere(),i.sphere(),o.sphere()},lineStart:function(){n.lineStart(),i.lineStart(),o.lineStart()},lineEnd:function(){n.lineEnd(),i.lineEnd(),o.lineEnd()},polygonStart:function(){n.polygonStart(),i.polygonStart(),o.polygonStart()},polygonEnd:function(){n.polygonEnd(),i.polygonEnd(),o.polygonEnd()}}},h.precision=function(t){return arguments.length?(a.precision(t),l.precision(t),u.precision(t),h):a.precision()},h.scale=function(t){return arguments.length?(a.scale(t),l.scale(.35*t),u.scale(t),h.translate(a.translate())):a.scale()},h.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),n=+t[0],i=+t[1];return o=a.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(c).point,r=l.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+xt,i+.12*e+xt],[n-.214*e-xt,i+.234*e-xt]]).stream(c).point,s=u.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+xt,i+.166*e+xt],[n-.115*e-xt,i+.234*e-xt]]).stream(c).point,h},h.scale(1070)};var si,ai,li,ui,ci,hi,di={point:L,lineStart:L,lineEnd:L,polygonStart:function(){ai=0,di.lineStart=pi},polygonEnd:function(){di.lineStart=di.lineEnd=di.point=L,si+=A(ai/2)}};function pi(){var n,i,o,r;function s(t,e){ai+=r*t-o*e,o=t,r=e}di.point=function(t,e){di.point=s,n=o=t,i=r=e},di.lineEnd=function(){s(n,i)}}var fi={point:function(t,e){t<li&&(li=t);ci<t&&(ci=t);e<ui&&(ui=e);hi<e&&(hi=e)},lineStart:L,lineEnd:L,polygonStart:L,polygonEnd:L};function mi(){var n=gi(4.5),i=[],o={point:t,lineStart:function(){o.point=e},lineEnd:s,polygonStart:function(){o.lineEnd=a},polygonEnd:function(){o.lineEnd=s,o.point=t},pointRadius:function(t){return n=gi(t),o},result:function(){if(i.length){var t=i.join("");return i=[],t}}};function t(t,e){i.push("M",t,",",e,n)}function e(t,e){i.push("M",t,",",e),o.point=r}function r(t,e){i.push("L",t,",",e)}function s(){o.point=t}function a(){i.push("Z")}return o}function gi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var vi,yi={point:bi,lineStart:_i,lineEnd:wi,polygonStart:function(){yi.lineStart=xi},polygonEnd:function(){yi.point=bi,yi.lineStart=_i,yi.lineEnd=wi}};function bi(t,e){bn+=t,_n+=e,++wn}function _i(){var r,s;function n(t,e){var n=t-r,i=e-s,o=Math.sqrt(n*n+i*i);xn+=o*(r+t)/2,Cn+=o*(s+e)/2,kn+=o,bi(r=t,s=e)}yi.point=function(t,e){yi.point=n,bi(r=t,s=e)}}function wi(){yi.point=bi}function xi(){var n,i,r,s;function o(t,e){var n=t-r,i=e-s,o=Math.sqrt(n*n+i*i);xn+=o*(r+t)/2,Cn+=o*(s+e)/2,kn+=o,$n+=(o=s*t-r*e)*(r+t),Tn+=o*(s+e),Sn+=3*o,bi(r=t,s=e)}yi.point=function(t,e){yi.point=o,bi(n=r=t,i=s=e)},yi.lineEnd=function(){o(n,i)}}function Ci(n){var i=4.5,o={point:t,lineStart:function(){o.point=e},lineEnd:s,polygonStart:function(){o.lineEnd=a},polygonEnd:function(){o.lineEnd=s,o.point=t},pointRadius:function(t){return i=t,o},result:L};function t(t,e){n.moveTo(t+i,e),n.arc(t,e,i,0,$t)}function e(t,e){n.moveTo(t,e),o.point=r}function r(t,e){n.lineTo(t,e)}function s(){o.point=t}function a(){n.closePath()}return o}function ki(D){var L=.5,E=Math.cos(30*Mt),w=16;function e(t){return(w?function(o){var n,i,r,s,a,l,u,c,h,d,p,f,m={point:t,lineStart:e,lineEnd:v,polygonStart:function(){o.polygonStart(),m.lineStart=y},polygonEnd:function(){o.polygonEnd(),m.lineStart=e}};function t(t,e){t=D(t,e),o.point(t[0],t[1])}function e(){c=NaN,m.point=g,o.lineStart()}function g(t,e){var n=En([t,e]),i=D(t,e);P(c,h,u,d,p,f,c=i[0],h=i[1],u=t,d=n[0],p=n[1],f=n[2],w,o),o.point(c,h)}function v(){m.point=t,o.lineEnd()}function y(){e(),m.point=b,m.lineEnd=_}function b(t,e){g(n=t,e),i=c,r=h,s=d,a=p,l=f,m.point=g}function _(){P(c,h,u,d,p,f,i,r,n,s,a,l,w,o),(m.lineEnd=v)()}return m}:function(n){return Ti(n,function(t,e){t=D(t,e),n.point(t[0],t[1])})})(t)}function P(t,e,n,i,o,r,s,a,l,u,c,h,d,p){var f=s-t,m=a-e,g=f*f+m*m;if(4*L<g&&d--){var v=i+u,y=o+c,b=r+h,_=Math.sqrt(v*v+y*y+b*b),w=Math.asin(b/=_),x=A(A(b)-1)<xt||A(n-l)<xt?(n+l)/2:Math.atan2(y,v),C=D(x,w),k=C[0],$=C[1],T=k-t,S=$-e,M=m*T-f*S;(L<M*M/g||.3<A((f*T+m*S)/g-.5)||i*u+o*c+r*h<E)&&(P(t,e,n,i,o,r,k,$,x,v/=_,y/=_,b,d,p),p.point(k,$),P(k,$,x,v,y,b,s,a,l,u,c,h,d,p))}}return e.precision=function(t){return arguments.length?(w=0<(L=t*t)&&16,e):Math.sqrt(L)},e}function $i(t){this.stream=t}function Ti(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Si(t){return Mi(function(){return t})()}function Mi(t){var n,e,i,o,r,s,a=ki(function(t,e){return[(t=n(t,e))[0]*l+o,r-t[1]*l]}),l=150,u=480,c=250,h=0,d=0,p=0,f=0,m=0,g=ti,v=N,y=null,b=null;function _(t){return[(t=i(t[0]*Mt,t[1]*Mt))[0]*l+o,r-t[1]*l]}function w(t){return(t=i.invert((t[0]-o)/l,(r-t[1])/l))&&[t[0]*Dt,t[1]*Dt]}function x(){i=Wn(e=Pi(p,f,m),n);var t=n(h,d);return o=u-t[0]*l,r=c+t[1]*l,C()}function C(){return s&&(s.valid=!1,s=null),_}return _.stream=function(t){return s&&(s.valid=!1),(s=Di(g(e,a(v(t))))).valid=!0,s},_.clipAngle=function(t){return arguments.length?(g=null==t?(y=t,ti):function(o){var T=Math.cos(o),p=0<T,f=A(T)>xt;return Kn(m,function(a){var l,u,c,h,d;return{lineStart:function(){h=c=!1,d=1},point:function(t,e){var n,i=[t,e],o=m(t,e),r=p?o?0:v(t,e):o?v(t+(t<0?kt:-kt),e):0;if(!l&&(h=c=o)&&a.lineStart(),o!==c&&(n=g(l,i),(zn(l,n)||zn(i,n))&&(i[0]+=xt,i[1]+=xt,o=m(i[0],i[1]))),o!==c)d=0,o?(a.lineStart(),n=g(i,l),a.point(n[0],n[1])):(n=g(l,i),a.point(n[0],n[1]),a.lineEnd()),l=n;else if(f&&l&&p^o){var s;r&u||!(s=g(i,l,!0))||(d=0,p?(a.lineStart(),a.point(s[0][0],s[0][1]),a.point(s[1][0],s[1][1]),a.lineEnd()):(a.point(s[1][0],s[1][1]),a.lineEnd(),a.lineStart(),a.point(s[0][0],s[0][1])))}!o||l&&zn(l,i)||a.point(i[0],i[1]),l=i,c=o,u=r},lineEnd:function(){c&&a.lineEnd(),l=null},clean:function(){return d|(h&&c)<<1}}},Ni(o,6*Mt),p?[0,-o]:[-kt,o-kt]);function m(t,e){return Math.cos(t)*Math.cos(e)>T}function g(t,e,n){var i=[1,0,0],o=An(En(t),En(e)),r=Pn(o,o),s=o[0],a=r-s*s;if(!a)return!n&&t;var l=T*r/a,u=-T*s/a,c=An(i,o),h=In(i,l);On(h,In(o,u));var d=c,p=Pn(h,d),f=Pn(d,d),m=p*p-f*(Pn(h,h)-1);if(!(m<0)){var g=Math.sqrt(m),v=In(d,(-p-g)/f);if(On(v,h),v=Rn(v),!n)return v;var y,b=t[0],_=e[0],w=t[1],x=e[1];_<b&&(y=b,b=_,_=y);var C=_-b,k=A(C-kt)<xt;if(!k&&x<w&&(y=w,w=x,x=y),k||C<xt?k?0<w+x^v[1]<(A(v[0]-b)<xt?w:x):w<=v[1]&&v[1]<=x:kt<C^(b<=v[0]&&v[0]<=_)){var $=In(d,(-p+g)/f);return On($,h),[v,Rn($)]}}}function v(t,e){var n=p?o:kt-o,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}}((y=+t)*Mt),C()):y},_.clipExtent=function(t){return arguments.length?(v=(b=t)?ii(t[0][0],t[0][1],t[1][0],t[1][1]):N,C()):b},_.scale=function(t){return arguments.length?(l=+t,x()):l},_.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],x()):[u,c]},_.center=function(t){return arguments.length?(h=t[0]%360*Mt,d=t[1]%360*Mt,x()):[h*Dt,d*Dt]},_.rotate=function(t){return arguments.length?(p=t[0]%360*Mt,f=t[1]%360*Mt,m=2<t.length?t[2]%360*Mt:0,x()):[p*Dt,f*Dt,m*Dt]},O.rebind(_,a,"precision"),function(){return n=t.apply(this,arguments),_.invert=n.invert&&w,x()}}function Di(n){return Ti(n,function(t,e){n.point(t*Mt,e*Mt)})}function Li(t,e){return[t,e]}function Ei(t,e){return[kt<t?t-$t:t<-kt?t+$t:t,e]}function Pi(t,e,n){return t?e||n?Wn(Oi(t),Ii(e,n)):Oi(t):e||n?Ii(e,n):Ei}function Ai(n){return function(t,e){return[kt<(t+=n)?t-$t:t<-kt?t+$t:t,e]}}function Oi(t){var e=Ai(t);return e.invert=Ai(-t),e}function Ii(t,e){var a=Math.cos(t),l=Math.sin(t),u=Math.cos(e),c=Math.sin(e);function n(t,e){var n=Math.cos(e),i=Math.cos(t)*n,o=Math.sin(t)*n,r=Math.sin(e),s=r*a+i*l;return[Math.atan2(o*u-s*c,i*a-r*l),At(s*u+o*c)]}return n.invert=function(t,e){var n=Math.cos(e),i=Math.cos(t)*n,o=Math.sin(t)*n,r=Math.sin(e),s=r*u-o*c;return[Math.atan2(o*u+r*c,i*a+s*l),At(s*a-i*l)]},n}function Ni(a,l){var u=Math.cos(a),c=Math.sin(a);return function(t,e,n,i){var o=n*l;null!=t?(t=Ri(u,t),e=Ri(u,e),(0<n?t<e:e<t)&&(t+=n*$t)):(t=a+n*$t,e=a-.5*o);for(var r,s=t;0<n?e<s:s<e;s-=o)i.point((r=Rn([u,-c*Math.cos(s),-c*Math.sin(s)]))[0],r[1])}}function Ri(t,e){var n=En(e);n[0]-=t,Nn(n);var i=Pt(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-xt)%(2*Math.PI)}function zi(t,e,n){var i=O.range(t,e-xt,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function Ui(t,e,n){var i=O.range(t,e-xt,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function Fi(t){return t.source}function Hi(t){return t.target}O.geo.path=function(){var i,e,o,n,r,s=4.5;function a(t){return t&&("function"==typeof s&&n.pointRadius(+s.apply(this,arguments)),r&&r.valid||(r=o(n)),O.geo.stream(t,r)),n.result()}function l(){return r=null,a}return a.area=function(t){return si=0,O.geo.stream(t,o(di)),si},a.centroid=function(t){return bn=_n=wn=xn=Cn=kn=$n=Tn=Sn=0,O.geo.stream(t,o(yi)),Sn?[$n/Sn,Tn/Sn]:kn?[xn/kn,Cn/kn]:wn?[bn/wn,_n/wn]:[NaN,NaN]},a.bounds=function(t){return ci=hi=-(li=ui=1/0),O.geo.stream(t,o(fi)),[[li,ui],[ci,hi]]},a.projection=function(t){return arguments.length?(o=(i=t)?t.stream||(n=t,e=ki(function(t,e){return n([t*Dt,e*Dt])}),function(t){return Di(e(t))}):N,l()):i;var n,e},a.context=function(t){return arguments.length?(n=null==(e=t)?new mi:new Ci(t),"function"!=typeof s&&n.pointRadius(s),l()):e},a.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(n.pointRadius(+t),+t),a):s},a.projection(O.geo.albersUsa()).context(null)},O.geo.transform=function(i){return{stream:function(t){var e=new $i(t);for(var n in i)e[n]=i[n];return e}}},$i.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},O.geo.projection=Si,O.geo.projectionMutator=Mi,(O.geo.equirectangular=function(){return Si(Li)}).raw=Li.invert=Li,O.geo.rotation=function(e){function t(t){return(t=e(t[0]*Mt,t[1]*Mt))[0]*=Dt,t[1]*=Dt,t}return e=Pi(e[0]%360*Mt,e[1]*Mt,2<e.length?e[2]*Mt:0),t.invert=function(t){return(t=e.invert(t[0]*Mt,t[1]*Mt))[0]*=Dt,t[1]*=Dt,t},t},Ei.invert=Li,O.geo.circle=function(){var e,o,r=[0,0],n=6;function i(){var t="function"==typeof r?r.apply(this,arguments):r,n=Pi(-t[0]*Mt,-t[1]*Mt,0).invert,i=[];return o(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=Dt,t[1]*=Dt}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(r=t,i):r},i.angle=function(t){return arguments.length?(o=Ni((e=+t)*Mt,n*Mt),i):e},i.precision=function(t){return arguments.length?(o=Ni(e*Mt,(n=+t)*Mt),i):n},i.angle(90)},O.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Mt,o=t[1]*Mt,r=e[1]*Mt,s=Math.sin(i),a=Math.cos(i),l=Math.sin(o),u=Math.cos(o),c=Math.sin(r),h=Math.cos(r);return Math.atan2(Math.sqrt((n=h*s)*n+(n=u*c-l*h*a)*n),l*c+u*h*a)},O.geo.graticule=function(){var e,n,i,o,r,s,a,l,u,c,h,d,p=10,f=p,m=90,g=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:t()}}function t(){return O.range(Math.ceil(o/m)*m,i,m).map(h).concat(O.range(Math.ceil(l/g)*g,a,g).map(d)).concat(O.range(Math.ceil(n/p)*p,e,p).filter(function(t){return A(t%m)>xt}).map(u)).concat(O.range(Math.ceil(s/f)*f,r,f).filter(function(t){return A(t%g)>xt}).map(c))}return y.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(d(a).slice(1),h(i).reverse().slice(1),d(l).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.majorExtent(t).minorExtent(t):y.minorExtent()},y.majorExtent=function(t){return arguments.length?(o=+t[0][0],i=+t[1][0],l=+t[0][1],a=+t[1][1],i<o&&(t=o,o=i,i=t),a<l&&(t=l,l=a,a=t),y.precision(v)):[[o,l],[i,a]]},y.minorExtent=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],s=+t[0][1],r=+t[1][1],e<n&&(t=n,n=e,e=t),r<s&&(t=s,s=r,r=t),y.precision(v)):[[n,s],[e,r]]},y.step=function(t){return arguments.length?y.majorStep(t).minorStep(t):y.minorStep()},y.majorStep=function(t){return arguments.length?(m=+t[0],g=+t[1],y):[m,g]},y.minorStep=function(t){return arguments.length?(p=+t[0],f=+t[1],y):[p,f]},y.precision=function(t){return arguments.length?(v=+t,u=zi(s,r,90),c=Ui(n,e,v),h=zi(l,a,90),d=Ui(o,i,v),y):v},y.majorExtent([[-180,-90+xt],[180,90-xt]]).minorExtent([[-180,-80-xt],[180,80+xt]])},O.geo.greatArc=function(){var e,n,i=Fi,o=Hi;function r(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||o.apply(this,arguments)]}}return r.distance=function(){return O.geo.distance(e||i.apply(this,arguments),n||o.apply(this,arguments))},r.source=function(t){return arguments.length?(e="function"==typeof(i=t)?null:t,r):i},r.target=function(t){return arguments.length?(n="function"==typeof(o=t)?null:t,r):o},r.precision=function(){return arguments.length?r:0},r},O.geo.interpolate=function(t,e){return n=t[0]*Mt,i=t[1]*Mt,o=e[0]*Mt,r=e[1]*Mt,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),c=s*Math.cos(n),h=s*Math.sin(n),d=l*Math.cos(o),p=l*Math.sin(o),f=2*Math.asin(Math.sqrt(It(r-i)+s*l*It(o-n))),m=1/Math.sin(f),(g=f?function(t){var e=Math.sin(t*=f)*m,n=Math.sin(f-t)*m,i=n*c+e*d,o=n*h+e*p,r=n*a+e*u;return[Math.atan2(o,i)*Dt,Math.atan2(r,Math.sqrt(i*i+o*o))*Dt]}:function(){return[n*Dt,i*Dt]}).distance=f,g;var n,i,o,r,s,a,l,u,c,h,d,p,f,m,g},O.geo.length=function(t){return vi=0,O.geo.stream(t,Bi),vi};var Bi={sphere:L,point:L,lineStart:function(){var s,a,l;function n(t,e){var n=Math.sin(e*=Mt),i=Math.cos(e),o=A((t*=Mt)-s),r=Math.cos(o);vi+=Math.atan2(Math.sqrt((o=i*Math.sin(o))*o+(o=l*n-a*i*r)*o),a*n+l*i*r),s=t,a=n,l=i}Bi.point=function(t,e){s=t*Mt,a=Math.sin(e*=Mt),l=Math.cos(e),Bi.point=n},Bi.lineEnd=function(){Bi.point=Bi.lineEnd=L}},lineEnd:L,polygonStart:L,polygonEnd:L};function ji(r,s){function t(t,e){var n=Math.cos(t),i=Math.cos(e),o=r(n*i);return[o*i*Math.sin(t),o*Math.sin(e)]}return t.invert=function(t,e){var n=Math.sqrt(t*t+e*e),i=s(n),o=Math.sin(i),r=Math.cos(i);return[Math.atan2(t*o,n*r),Math.asin(n&&e*o/n)]},t}var qi=ji(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(O.geo.azimuthalEqualArea=function(){return Si(qi)}).raw=qi;var Wi=ji(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},N);function Vi(t,e){var n=Math.cos(t),i=function(t){return Math.tan(kt/4+t/2)},o=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(i(e)/i(t)),r=n*Math.pow(i(t),o)/o;if(!o)return Yi;function s(t,e){0<r?e<-St+xt&&(e=-St+xt):St-xt<e&&(e=St-xt);var n=r/Math.pow(i(e),o);return[n*Math.sin(o*t),r-n*Math.cos(o*t)]}return s.invert=function(t,e){var n=r-e,i=Lt(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(r/i,1/o))-St]},s}function Zi(t,e){var n=Math.cos(t),i=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),o=n/i+t;if(A(i)<xt)return Li;function r(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}return r.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-Lt(i)*Math.sqrt(t*t+n*n)]},r}(O.geo.azimuthalEquidistant=function(){return Si(Wi)}).raw=Wi,(O.geo.conicConformal=function(){return oi(Vi)}).raw=Vi,(O.geo.conicEquidistant=function(){return oi(Zi)}).raw=Zi;var Gi=ji(function(t){return 1/t},Math.atan);function Yi(t,e){return[t,Math.log(Math.tan(kt/4+e/2))]}function Ki(t){var o,r=Si(t),s=r.scale,a=r.translate,l=r.clipExtent;return r.scale=function(){var t=s.apply(r,arguments);return t===r?o?r.clipExtent(null):r:t},r.translate=function(){var t=a.apply(r,arguments);return t===r?o?r.clipExtent(null):r:t},r.clipExtent=function(t){var e=l.apply(r,arguments);if(e===r){if(o=null==t){var n=kt*s(),i=a();l([[i[0]-n,i[1]-n],[i[0]+n,i[1]+n]])}}else o&&(e=null);return e},r.clipExtent(null)}(O.geo.gnomonic=function(){return Si(Gi)}).raw=Gi,Yi.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-St]},(O.geo.mercator=function(){return Ki(Yi)}).raw=Yi;var Xi=ji(function(){return 1},Math.asin);(O.geo.orthographic=function(){return Si(Xi)}).raw=Xi;var Ji=ji(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function Qi(t,e){return[Math.log(Math.tan(kt/4+e/2)),-t]}function to(t){return t[0]}function eo(t){return t[1]}function no(t){for(var e=t.length,n=[0,1],i=2,o=2;o<e;o++){for(;1<i&&Et(t[n[i-2]],t[n[i-1]],t[o])<=0;)--i;n[i++]=o}return n.slice(0,i)}function io(t,e){return t[0]-e[0]||t[1]-e[1]}(O.geo.stereographic=function(){return Si(Ji)}).raw=Ji,Qi.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-St]},(O.geo.transverseMercator=function(){var t=Ki(Qi),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=Qi,O.geom={},O.geom.hull=function(t){var d=to,p=eo;if(arguments.length)return e(t);function e(t){if(t.length<3)return[];var e,n=me(d),i=me(p),o=t.length,r=[],s=[];for(e=0;e<o;e++)r.push([+n.call(this,t[e],e),+i.call(this,t[e],e),e]);for(r.sort(io),e=0;e<o;e++)s.push([r[e][0],-r[e][1]]);var a=no(r),l=no(s),u=l[0]===a[0],c=l[l.length-1]===a[a.length-1],h=[];for(e=a.length-1;0<=e;--e)h.push(t[r[a[e]][2]]);for(e=+u;e<l.length-c;++e)h.push(t[r[l[e]][2]]);return h}return e.x=function(t){return arguments.length?(d=t,e):d},e.y=function(t){return arguments.length?(p=t,e):p},e},O.geom.polygon=function(t){return H(t,oo),t};var oo=O.geom.polygon.prototype=[];function ro(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function so(t,e,n,i){var o=t[0],r=n[0],s=e[0]-o,a=i[0]-r,l=t[1],u=n[1],c=e[1]-l,h=i[1]-u,d=(a*(l-u)-h*(o-r))/(h*s-a*c);return[o+d*s,l+d*c]}function ao(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}oo.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],o=0;++e<n;)t=i,i=this[e],o+=t[1]*i[0]-t[0]*i[1];return.5*o},oo.centroid=function(t){var e,n,i=-1,o=this.length,r=0,s=0,a=this[o-1];for(arguments.length||(t=-1/(6*this.area()));++i<o;)e=a,a=this[i],n=e[0]*a[1]-a[0]*e[1],r+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return[r*t,s*t]},oo.clip=function(t){for(var e,n,i,o,r,s,a=ao(t),l=-1,u=this.length-ao(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,o=this[l],r=e[(i=e.length-a)-1],n=-1;++n<i;)ro(s=e[n],c,o)?(ro(r,c,o)||t.push(so(r,s,c,o)),t.push(s)):ro(r,c,o)&&t.push(so(r,s,c,o)),r=s;a&&t.push(t[0]),c=o}return t};var lo,uo,co,ho,po,fo=[],mo=[];function go(){Oo(this),this.edge=this.site=this.circle=null}function vo(t){var e=fo.pop()||new go;return e.site=t,e}function yo(t){So(t),co.remove(t),fo.push(t),Oo(t)}function bo(t){var e=t.circle,n=e.x,i=e.cy,o={x:n,y:i},r=t.P,s=t.N,a=[t];yo(t);for(var l=r;l.circle&&A(n-l.circle.x)<xt&&A(i-l.circle.cy)<xt;)r=l.P,a.unshift(l),yo(l),l=r;a.unshift(l),So(l);for(var u=s;u.circle&&A(n-u.circle.x)<xt&&A(i-u.circle.cy)<xt;)s=u.N,a.push(u),yo(u),u=s;a.push(u),So(u);var c,h=a.length;for(c=1;c<h;++c)u=a[c],l=a[c-1],Eo(u.edge,l.site,u.site,o);l=a[0],(u=a[h-1]).edge=Lo(l.site,u.site,null,o),To(l),To(u)}function _o(t){for(var e,n,i,o,r=t.x,s=t.y,a=co._;a;)if(i=wo(a,s)-r,xt<i)a=a.L;else{if(o=r-xo(a,s),!(xt<o)){-xt<i?(e=a.P,n=a):-xt<o?n=(e=a).N:e=n=a;break}if(!a.R){e=a;break}a=a.R}var l=vo(t);if(co.insert(e,l),e||n){if(e===n)return So(e),n=vo(e.site),co.insert(l,n),l.edge=n.edge=Lo(e.site,l.site),To(e),void To(n);if(n){So(e),So(n);var u=e.site,c=u.x,h=u.y,d=t.x-c,p=t.y-h,f=n.site,m=f.x-c,g=f.y-h,v=2*(d*g-p*m),y=d*d+p*p,b=m*m+g*g,_={x:(g*y-p*b)/v+c,y:(d*b-m*y)/v+h};Eo(n.edge,u,f,_),l.edge=Lo(u,t,null,_),n.edge=Lo(t,f,null,_),To(e),To(n)}else l.edge=Lo(e.site,l.site)}}function wo(t,e){var n=t.site,i=n.x,o=n.y,r=o-e;if(!r)return i;var s=t.P;if(!s)return-1/0;var a=(n=s.site).x,l=n.y,u=l-e;if(!u)return a;var c=a-i,h=1/r-1/u,d=c/u;return h?(-d+Math.sqrt(d*d-2*h*(c*c/(-2*u)-l+u/2+o-r/2)))/h+i:(i+a)/2}function xo(t,e){var n=t.N;if(n)return wo(n,e);var i=t.site;return i.y===e?i.x:1/0}function Co(t){this.site=t,this.edges=[]}function ko(t,e){return e.angle-t.angle}function $o(){Oo(this),this.x=this.y=this.arc=this.site=this.cy=null}function To(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,o=t.site,r=n.site;if(i!==r){var s=o.x,a=o.y,l=i.x-s,u=i.y-a,c=r.x-s,h=2*(l*(g=r.y-a)-u*c);if(!(-Ct<=h)){var d=l*l+u*u,p=c*c+g*g,f=(g*d-u*p)/h,m=(l*p-c*d)/h,g=m+a,v=mo.pop()||new $o;v.arc=t,v.site=o,v.x=f+s,v.y=g+Math.sqrt(f*f+m*m),v.cy=g,t.circle=v;for(var y=null,b=po._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}po.insert(y,v),y||(ho=v)}}}}function So(t){var e=t.circle;e&&(e.P||(ho=e.N),po.remove(e),mo.push(e),Oo(e),t.circle=null)}function Mo(t,e){var n=t.b;if(n)return!0;var i,o,r=t.a,s=e[0][0],a=e[1][0],l=e[0][1],u=e[1][1],c=t.l,h=t.r,d=c.x,p=c.y,f=h.x,m=h.y,g=(d+f)/2,v=(p+m)/2;if(m===p){if(g<s||a<=g)return;if(f<d){if(r){if(r.y>=u)return}else r={x:g,y:l};n={x:g,y:u}}else{if(r){if(r.y<l)return}else r={x:g,y:u};n={x:g,y:l}}}else if(o=v-(i=(d-f)/(m-p))*g,i<-1||1<i)if(f<d){if(r){if(r.y>=u)return}else r={x:(l-o)/i,y:l};n={x:(u-o)/i,y:u}}else{if(r){if(r.y<l)return}else r={x:(u-o)/i,y:u};n={x:(l-o)/i,y:l}}else if(p<m){if(r){if(r.x>=a)return}else r={x:s,y:i*s+o};n={x:a,y:i*a+o}}else{if(r){if(r.x<s)return}else r={x:a,y:i*a+o};n={x:s,y:i*s+o}}return t.a=r,t.b=n,!0}function Do(t,e){this.l=t,this.r=e,this.a=this.b=null}function Lo(t,e,n,i){var o=new Do(t,e);return lo.push(o),n&&Eo(o,t,e,n),i&&Eo(o,e,t,i),uo[t.i].edges.push(new Po(o,t,e)),uo[e.i].edges.push(new Po(o,e,t)),o}function Eo(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Po(t,e,n){var i=t.a,o=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(o.x-i.x,i.y-o.y):Math.atan2(i.x-o.x,o.y-i.y)}function Ao(){this._=null}function Oo(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Io(t,e){var n=e,i=e.R,o=n.U;o?o.L===n?o.L=i:o.R=i:t._=i,i.U=o,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function No(t,e){var n=e,i=e.L,o=n.U;o?o.L===n?o.L=i:o.R=i:t._=i,i.U=o,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Ro(t){for(;t.L;)t=t.L;return t}function zo(t,e){var n,i,o,r=t.sort(Uo).pop();for(lo=[],uo=new Array(t.length),co=new Ao,po=new Ao;;)if(o=ho,r&&(!o||r.y<o.y||r.y===o.y&&r.x<o.x))r.x===n&&r.y===i||(uo[r.i]=new Co(r),_o(r),n=r.x,i=r.y),r=t.pop();else{if(!o)break;bo(o.arc)}e&&(function(t){for(var e,n=lo,i=ei(t[0][0],t[0][1],t[1][0],t[1][1]),o=n.length;o--;)(!Mo(e=n[o],t)||!i(e)||A(e.a.x-e.b.x)<xt&&A(e.a.y-e.b.y)<xt)&&(e.a=e.b=null,n.splice(o,1))}(e),function(t){for(var e,n,i,o,r,s,a,l,u,c,h=t[0][0],d=t[1][0],p=t[0][1],f=t[1][1],m=uo,g=m.length;g--;)if((r=m[g])&&r.prepare())for(l=(a=r.edges).length,s=0;s<l;)i=(c=a[s].end()).x,o=c.y,e=(u=a[++s%l].start()).x,n=u.y,(A(i-e)>xt||A(o-n)>xt)&&(a.splice(s,0,new Po((v=r.site,y=c,b=A(i-h)<xt&&xt<f-o?{x:h,y:A(e-h)<xt?n:f}:A(o-f)<xt&&xt<d-i?{x:A(n-f)<xt?e:d,y:f}:A(i-d)<xt&&xt<o-p?{x:d,y:A(e-d)<xt?n:p}:A(o-p)<xt&&xt<i-h?{x:A(n-p)<xt?e:h,y:p}:null,_=void 0,_=new Do(v,null),_.a=y,_.b=b,lo.push(_),_),r.site,null)),++l);var v,y,b,_}(e));var s={cells:uo,edges:lo};return co=po=lo=uo=null,s}function Uo(t,e){return e.y-t.y||e.x-t.x}Co.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(ko),e.length},Po.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ao.prototype={insert:function(t,e){var n,i,o;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=Ro(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(o=i.R)&&o.C?(n.C=o.C=!1,i.C=!0,t=i):(t===n.R&&(Io(this,n),n=(t=n).U),n.C=!1,i.C=!0,No(this,i)):(o=i.L)&&o.C?(n.C=o.C=!1,i.C=!0,t=i):(t===n.L&&(No(this,n),n=(t=n).U),n.C=!1,i.C=!0,Io(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,o=t.U,r=t.L,s=t.R;if(n=r?s?Ro(s):r:s,o?o.L===t?o.L=n:o.R=n:this._=n,r&&s?(i=n.C,n.C=t.C,((n.L=r).U=n)!==s?(o=n.U,n.U=t.U,t=n.R,o.L=t,(n.R=s).U=n):(n.U=o,t=(o=n).R)):(i=t.C,t=n),t&&(t.U=o),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===o.L){if((e=o.R).C&&(e.C=!1,o.C=!0,Io(this,o),e=o.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,No(this,e),e=o.R),e.C=o.C,o.C=e.R.C=!1,Io(this,o),t=this._;break}}else if((e=o.L).C&&(e.C=!1,o.C=!0,No(this,o),e=o.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Io(this,e),e=o.L),e.C=o.C,o.C=e.L.C=!1,No(this,o),t=this._;break}e.C=!0,o=(t=o).U}while(!t.C);t&&(t.C=!1)}}},O.geom.voronoi=function(t){var e=to,n=eo,i=e,o=n,c=Fo;if(t)return r(t);function r(o){var r=new Array(o.length),s=c[0][0],a=c[0][1],l=c[1][0],u=c[1][1];return zo(h(o),c).cells.forEach(function(t,e){var n=t.edges,i=t.site;(r[e]=n.length?n.map(function(t){var e=t.start();return[e.x,e.y]}):i.x>=s&&i.x<=l&&i.y>=a&&i.y<=u?[[s,u],[l,u],[l,a],[s,a]]:[]).point=o[e]}),r}function h(t){return t.map(function(t,e){return{x:Math.round(i(t,e)/xt)*xt,y:Math.round(o(t,e)/xt)*xt,i:e}})}return r.links=function(e){return zo(h(e)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},r.triangles=function(d){var p=[];return zo(h(d)).cells.forEach(function(t,e){for(var n,i,o,r,s=t.site,a=t.edges.sort(ko),l=-1,u=a.length,c=a[u-1].edge,h=c.l===s?c.r:c.l;++l<u;)c,n=h,h=(c=a[l].edge).l===s?c.r:c.l,e<n.i&&e<h.i&&(o=n,r=h,((i=s).x-r.x)*(o.y-i.y)-(i.x-o.x)*(r.y-i.y)<0)&&p.push([d[e],d[n.i],d[h.i]])}),p},r.x=function(t){return arguments.length?(i=me(e=t),r):e},r.y=function(t){return arguments.length?(o=me(n=t),r):n},r.clipExtent=function(t){return arguments.length?(c=null==t?Fo:t,r):c===Fo?null:c},r.size=function(t){return arguments.length?r.clipExtent(t&&[[0,0],t]):c===Fo?null:c&&c[1]},r};var Fo=[[-1e6,-1e6],[1e6,1e6]];function Ho(t){return t.x}function Bo(t){return t.y}function jo(t,e){t=O.rgb(t),e=O.rgb(e);var n=t.r,i=t.g,o=t.b,r=e.r-n,s=e.g-i,a=e.b-o;return function(t){return"#"+le(Math.round(n+r*t))+le(Math.round(i+s*t))+le(Math.round(o+a*t))}}function qo(t,e){var n,i={},o={};for(n in t)n in e?i[n]=Yo(t[n],e[n]):o[n]=t[n];for(n in e)n in t||(o[n]=e[n]);return function(t){for(n in i)o[n]=i[n](t);return o}}function Wo(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function Vo(t,i){var e,n,o,r=Zo.lastIndex=Go.lastIndex=0,s=-1,a=[],l=[];for(t+="",i+="";(e=Zo.exec(t))&&(n=Go.exec(i));)(o=n.index)>r&&(o=i.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(e=e[0])===(n=n[0])?a[s]?a[s]+=n:a[++s]=n:(a[++s]=null,l.push({i:s,x:Wo(e,n)})),r=Go.lastIndex;return r<i.length&&(o=i.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?(i=l[0].x,function(t){return i(t)+""}):function(){return i}:(i=l.length,function(t){for(var e,n=0;n<i;++n)a[(e=l[n]).i]=e.x(t);return a.join("")})}O.geom.delaunay=function(t){return O.geom.voronoi().triangles(t)},O.geom.quadtree=function(t,y,b,_,w){var x,C=to,$=eo;if(x=arguments.length)return C=Ho,$=Bo,3===x&&(w=b,_=y,b=y=0),e(t);function e(t){var e,n,i,o,r,s,a,l,u,c=me(C),h=me($);if(null!=y)s=y,a=b,l=_,u=w;else if(l=u=-(s=a=1/0),n=[],i=[],r=t.length,x)for(o=0;o<r;++o)(e=t[o]).x<s&&(s=e.x),e.y<a&&(a=e.y),e.x>l&&(l=e.x),e.y>u&&(u=e.y),n.push(e.x),i.push(e.y);else for(o=0;o<r;++o){var d=+c(e=t[o],o),p=+h(e,o);d<s&&(s=d),p<a&&(a=p),l<d&&(l=d),u<p&&(u=p),n.push(d),i.push(p)}var f=l-s,m=u-a;function g(t,e,n,i,o,r,s,a){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(A(l-n)+A(u-i)<.01)v(t,e,n,i,o,r,s,a);else{var c=t.point;t.x=t.y=t.point=null,v(t,c,l,u,o,r,s,a),v(t,e,n,i,o,r,s,a)}else t.x=n,t.y=i,t.point=e}else v(t,e,n,i,o,r,s,a)}function v(t,e,n,i,o,r,s,a){var l=.5*(o+s),u=.5*(r+a),c=l<=n,h=u<=i,d=h<<1|c;t.leaf=!1,c?o=l:s=l,h?r=u:a=u,g(t=t.nodes[d]||(t.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,i,o,r,s,a)}m<f?u=a+f:l=s+m;var k={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){g(k,t,+c(t,++o),+h(t,o),s,a,l,u)}};if(k.visit=function(t){!function t(e,n,i,o,r,s){if(!e(n,i,o,r,s)){var a=.5*(i+r),l=.5*(o+s),u=n.nodes;u[0]&&t(e,u[0],i,o,a,l),u[1]&&t(e,u[1],a,o,r,l),u[2]&&t(e,u[2],i,l,a,s),u[3]&&t(e,u[3],a,l,r,s)}}(t,k,s,a,l,u)},k.find=function(t){return e=k,g=t[0],v=t[1],C=1/0,function t(e,n,i,o,r){if(!(_<n||w<i||o<y||r<b)){if(s=e.point){var s,a=g-e.x,l=v-e.y,u=a*a+l*l;if(u<C){var c=Math.sqrt(C=u);y=g-c,b=v-c,_=g+c,w=v+c,x=s}}for(var h=e.nodes,d=.5*(n+o),p=.5*(i+r),f=(p<=v)<<1|d<=g,m=f+4;f<m;++f)if(e=h[3&f])switch(3&f){case 0:t(e,n,i,d,p);break;case 1:t(e,d,i,o,p);break;case 2:t(e,n,p,d,r);break;case 3:t(e,d,p,o,r)}}}(e,y=s,b=a,_=l,w=u),x;var e,g,v,y,b,_,w,x,C},o=-1,null==y){for(;++o<r;)g(k,t[o],n[o],i[o],s,a,l,u);--o}else t.forEach(k.add);return n=i=t=e=null,k}return e.x=function(t){return arguments.length?(C=t,e):C},e.y=function(t){return arguments.length?($=t,e):$},e.extent=function(t){return arguments.length?(null==t?y=b=_=w=null:(y=+t[0][0],b=+t[0][1],_=+t[1][0],w=+t[1][1]),e):null==y?null:[[y,b],[_,w]]},e.size=function(t){return arguments.length?(null==t?y=b=_=w=null:(y=b=0,_=+t[0],w=+t[1]),e):null==y?null:[_-y,w-b]},e},O.interpolateRgb=jo,O.interpolateObject=qo,O.interpolateNumber=Wo,O.interpolateString=Vo;var Zo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Go=new RegExp(Zo.source,"g");function Yo(t,e){for(var n,i=O.interpolators.length;0<=--i&&!(n=O.interpolators[i](t,e)););return n}function Ko(t,e){var n,i=[],o=[],r=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;n<a;++n)i.push(Yo(t[n],e[n]));for(;n<r;++n)o[n]=t[n];for(;n<s;++n)o[n]=e[n];return function(t){for(n=0;n<a;++n)o[n]=i[n](t);return o}}O.interpolate=Yo,O.interpolators=[function(t,e){var n=typeof e;return("string"===n?fe.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?jo:Vo:e instanceof Ft?jo:Array.isArray(e)?Ko:"object"===n&&isNaN(e)?qo:Wo)(t,e)}],O.interpolateArray=Ko;var Xo=function(){return N},Jo=O.map({linear:Xo,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return nr},cubic:function(){return ir},sin:function(){return rr},exp:function(){return sr},circle:function(){return ar},elastic:function(e,n){var i;arguments.length<2&&(n=.45);i=arguments.length?n/$t*Math.asin(1/e):(e=1,n/4);return function(t){return 1+e*Math.pow(2,-10*t)*Math.sin((t-i)*$t/n)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return lr}}),Qo=O.map({in:N,out:tr,"in-out":er,"out-in":function(t){return er(tr(t))}});function tr(e){return function(t){return 1-e(1-t)}}function er(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function nr(t){return t*t}function ir(t){return t*t*t}function or(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function rr(t){return 1-Math.cos(t*St)}function sr(t){return Math.pow(2,10*(t-1))}function ar(t){return 1-Math.sqrt(1-t*t)}function lr(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function ur(e,n){return n-=e,function(t){return Math.round(e+n*t)}}function cr(t){var e,n,i,o=[t.a,t.b],r=[t.c,t.d],s=dr(o),a=hr(o,r),l=dr(((e=r)[0]+=(i=-a)*(n=o)[0],e[1]+=i*n[1],e))||0;o[0]*r[1]<r[0]*o[1]&&(o[0]*=-1,o[1]*=-1,s*=-1,a*=-1),this.rotate=(s?Math.atan2(o[1],o[0]):Math.atan2(-r[0],r[1]))*Dt,this.translate=[t.e,t.f],this.scale=[s,l],this.skew=l?Math.atan2(a,l)*Dt:0}function hr(t,e){return t[0]*e[0]+t[1]*e[1]}function dr(t){var e=Math.sqrt(hr(t,t));return e&&(t[0]/=e,t[1]/=e),e}O.ease=function(t){var e,n=t.indexOf("-"),i=0<=n?t.slice(0,n):t,o=0<=n?t.slice(n+1):"in";return i=Jo.get(i)||Xo,o=Qo.get(o)||N,e=o(i.apply(null,r.call(arguments,1))),function(t){return t<=0?0:1<=t?1:e(t)}},O.interpolateHcl=function(t,e){t=O.hcl(t),e=O.hcl(e);var n=t.h,i=t.c,o=t.l,r=e.h-n,s=e.c-i,a=e.l-o;isNaN(s)&&(s=0,i=isNaN(i)?e.c:i);isNaN(r)?(r=0,n=isNaN(n)?e.h:n):180<r?r-=360:r<-180&&(r+=360);return function(t){return Vt(n+r*t,i+s*t,o+a*t)+""}},O.interpolateHsl=function(t,e){t=O.hsl(t),e=O.hsl(e);var n=t.h,i=t.s,o=t.l,r=e.h-n,s=e.s-i,a=e.l-o;isNaN(s)&&(s=0,i=isNaN(i)?e.s:i);isNaN(r)?(r=0,n=isNaN(n)?e.h:n):180<r?r-=360:r<-180&&(r+=360);return function(t){return jt(n+r*t,i+s*t,o+a*t)+""}},O.interpolateLab=function(t,e){t=O.lab(t),e=O.lab(e);var n=t.l,i=t.a,o=t.b,r=e.l-n,s=e.a-i,a=e.b-o;return function(t){return Qt(n+r*t,i+s*t,o+a*t)+""}},O.interpolateRound=ur,O.transform=function(t){var n=b.createElementNS(O.ns.prefix.svg,"g");return(O.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new cr(e?e.matrix:pr)})(t)},cr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var pr={a:1,b:0,c:0,d:1,e:0,f:0};function fr(t){return t.length?t.pop()+",":""}function mr(t,e){var n,i,o,r,s,a,l,u,c=[],h=[];return t=O.transform(t),e=O.transform(e),function(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var o=n.push("translate(",null,",",null,")");i.push({i:o-4,x:Wo(t[0],e[0])},{i:o-2,x:Wo(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,c,h),n=t.rotate,i=e.rotate,o=c,r=h,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),r.push({i:o.push(fr(o)+"rotate(",null,")")-2,x:Wo(n,i)})):i&&o.push(fr(o)+"rotate("+i+")"),s=t.skew,a=e.skew,l=c,u=h,s!==a?u.push({i:l.push(fr(l)+"skewX(",null,")")-2,x:Wo(s,a)}):a&&l.push(fr(l)+"skewX("+a+")"),function(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var o=n.push(fr(n)+"scale(",null,",",null,")");i.push({i:o-4,x:Wo(t[0],e[0])},{i:o-2,x:Wo(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(fr(n)+"scale("+e+")")}(t.scale,e.scale,c,h),t=e=null,function(t){for(var e,n=-1,i=h.length;++n<i;)c[(e=h[n]).i]=e.x(t);return c.join("")}}function gr(e,n){return n=(n-=e=+e)||1/n,function(t){return(t-e)/n}}function vr(e,n){return n=(n-=e=+e)||1/n,function(t){return Math.max(0,Math.min(1,(t-e)/n))}}function yr(t){for(var e=t.source,n=t.target,i=function(t,e){if(t===e)return t;var n=br(t),i=br(e),o=n.pop(),r=i.pop(),s=null;for(;o===r;)s=o,o=n.pop(),r=i.pop();return s}(e,n),o=[e];e!==i;)e=e.parent,o.push(e);for(var r=o.length;n!==i;)o.splice(r,0,n),n=n.parent;return o}function br(t){for(var e=[],n=t.parent;null!=n;)e.push(t),n=(t=n).parent;return e.push(t),e}function _r(t){t.fixed|=2}function wr(t){t.fixed&=-7}function xr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Cr(t){t.fixed&=-5}O.interpolateTransform=mr,O.layout={},O.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(yr(t[n]));return e}},O.layout.chord=function(){var g,v,y,b,_,w,x,e={},C=0;function t(){var t,e,n,i,o,r={},s=[],a=O.range(b),l=[];for(g=[],v=[],t=0,i=-1;++i<b;){for(e=0,o=-1;++o<b;)e+=y[i][o];s.push(e),l.push(O.range(b)),t+=e}for(_&&a.sort(function(t,e){return _(s[t],s[e])}),w&&l.forEach(function(t,n){t.sort(function(t,e){return w(y[n][t],y[n][e])})}),t=($t-C*b)/t,e=0,i=-1;++i<b;){for(n=e,o=-1;++o<b;){var u=a[i],c=l[u][o],h=y[u][c],d=e,p=e+=h*t;r[u+"-"+c]={index:u,subindex:c,startAngle:d,endAngle:p,value:h}}v[u]={index:u,startAngle:n,endAngle:e,value:s[u]},e+=C}for(i=-1;++i<b;)for(o=i-1;++o<b;){var f=r[i+"-"+o],m=r[o+"-"+i];(f.value||m.value)&&g.push(f.value<m.value?{source:m,target:f}:{source:f,target:m})}x&&k()}function k(){g.sort(function(t,e){return x((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return e.matrix=function(t){return arguments.length?(b=(y=t)&&y.length,g=v=null,e):y},e.padding=function(t){return arguments.length?(C=t,g=v=null,e):C},e.sortGroups=function(t){return arguments.length?(_=t,g=v=null,e):_},e.sortSubgroups=function(t){return arguments.length?(w=t,g=null,e):w},e.sortChords=function(t){return arguments.length?(x=t,g&&k(),e):x},e.chords=function(){return g||t(),g},e.groups=function(){return v||t(),v},e},O.layout.force=function(){var h,t,d,p,f,m,o={},g=O.dispatch("start","tick","end"),v=[1,1],y=.9,r=kr,s=$r,b=-30,c=Tr,_=.1,w=.64,x=[],C=[];function k(u){return function(t,e,n,i){if(t.point!==u){var o=t.cx-u.x,r=t.cy-u.y,s=i-e,a=o*o+r*r;if(s*s/w<a){if(a<c){var l=t.charge/a;u.px-=o*l,u.py-=r*l}return!0}if(t.point&&a&&a<c){l=t.pointCharge/a;u.px-=o*l,u.py-=r*l}}return!t.charge}}function e(t){t.px=O.event.x,t.py=O.event.y,o.resume()}return o.tick=function(){if((d*=.99)<.005)return h=null,g.end({type:"end",alpha:d=0}),!0;var t,e,n,i,o,r,s,a,l,u=x.length,c=C.length;for(e=0;e<c;++e)i=(n=C[e]).source,(r=(a=(o=n.target).x-i.x)*a+(l=o.y-i.y)*l)&&(a*=r=d*f[e]*((r=Math.sqrt(r))-p[e])/r,l*=r,o.x-=a*(s=i.weight+o.weight?i.weight/(i.weight+o.weight):.5),o.y-=l*s,i.x+=a*(s=1-s),i.y+=l*s);if((s=d*_)&&(a=v[0]/2,l=v[1]/2,e=-1,s))for(;++e<u;)(n=x[e]).x+=(a-n.x)*s,n.y+=(l-n.y)*s;if(b)for(!function t(e,n,i){var o=0,r=0;e.charge=0;if(!e.leaf)for(var s,a=e.nodes,l=a.length,u=-1;++u<l;)null!=(s=a[u])&&(t(s,n,i),e.charge+=s.charge,o+=s.charge*s.cx,r+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*i[e.point.index];e.charge+=e.pointCharge=c,o+=c*e.point.x,r+=c*e.point.y}e.cx=o/e.charge;e.cy=r/e.charge}(t=O.geom.quadtree(x),d,m),e=-1;++e<u;)(n=x[e]).fixed||t.visit(k(n));for(e=-1;++e<u;)(n=x[e]).fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*y,n.y-=(n.py-(n.py=n.y))*y);g.tick({type:"tick",alpha:d})},o.nodes=function(t){return arguments.length?(x=t,o):x},o.links=function(t){return arguments.length?(C=t,o):C},o.size=function(t){return arguments.length?(v=t,o):v},o.linkDistance=function(t){return arguments.length?(r="function"==typeof t?t:+t,o):r},o.distance=o.linkDistance,o.linkStrength=function(t){return arguments.length?(s="function"==typeof t?t:+t,o):s},o.friction=function(t){return arguments.length?(y=+t,o):y},o.charge=function(t){return arguments.length?(b="function"==typeof t?t:+t,o):b},o.chargeDistance=function(t){return arguments.length?(c=t*t,o):Math.sqrt(c)},o.gravity=function(t){return arguments.length?(_=+t,o):_},o.theta=function(t){return arguments.length?(w=t*t,o):Math.sqrt(w)},o.alpha=function(t){return arguments.length?(t=+t,d?0<t?d=t:(h.c=null,h.t=NaN,h=null,g.end({type:"end",alpha:d=0})):0<t&&(g.start({type:"start",alpha:d=t}),h=Ce(o.tick)),o):d},o.start=function(){var a,l,t,u=x.length,c=C.length,e=v[0],n=v[1];for(a=0;a<u;++a)(t=x[a]).index=a,t.weight=0;for(a=0;a<c;++a)"number"==typeof(t=C[a]).source&&(t.source=x[t.source]),"number"==typeof t.target&&(t.target=x[t.target]),++t.source.weight,++t.target.weight;for(a=0;a<u;++a)t=x[a],isNaN(t.x)&&(t.x=i("x",e)),isNaN(t.y)&&(t.y=i("y",n)),isNaN(t.px)&&(t.px=t.x),isNaN(t.py)&&(t.py=t.y);if(p=[],"function"==typeof r)for(a=0;a<c;++a)p[a]=+r.call(this,C[a],a);else for(a=0;a<c;++a)p[a]=r;if(f=[],"function"==typeof s)for(a=0;a<c;++a)f[a]=+s.call(this,C[a],a);else for(a=0;a<c;++a)f[a]=s;if(m=[],"function"==typeof b)for(a=0;a<u;++a)m[a]=+b.call(this,x[a],a);else for(a=0;a<u;++a)m[a]=b;function i(t,e){if(!l){for(l=new Array(u),r=0;r<u;++r)l[r]=[];for(r=0;r<c;++r){var n=C[r];l[n.source.index].push(n.target),l[n.target.index].push(n.source)}}for(var i,o=l[a],r=-1,s=o.length;++r<s;)if(!isNaN(i=o[r][t]))return i;return Math.random()*e}return o.resume()},o.resume=function(){return o.alpha(.1)},o.stop=function(){return o.alpha(0)},o.drag=function(){if(t||(t=O.behavior.drag().origin(N).on("dragstart.force",_r).on("drag.force",e).on("dragend.force",wr)),!arguments.length)return t;this.on("mouseover.force",xr).on("mouseout.force",Cr).call(t)},O.rebind(o,g,"on")};var kr=20,$r=1,Tr=1/0;function Sr(t,e){return O.rebind(t,e,"sort","children","value"),(t.nodes=t).links=Ar,t}function Mr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(o=t.children)&&(i=o.length))for(var i,o;0<=--i;)n.push(o[i])}function Dr(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(r=t.children)&&(o=r.length))for(var o,r,s=-1;++s<o;)n.push(r[s]);for(;null!=(t=i.pop());)e(t)}function Lr(t){return t.children}function Er(t){return t.value}function Pr(t,e){return e.value-t.value}function Ar(t){return O.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}O.layout.hierarchy=function(){var a=Pr,l=Lr,u=Er;function c(t){var e,n=[t],i=[];for(t.depth=0;null!=(e=n.pop());)if(i.push(e),(r=l.call(c,e,e.depth))&&(o=r.length)){for(var o,r,s;0<=--o;)n.push(s=r[o]),s.parent=e,s.depth=e.depth+1;u&&(e.value=0),e.children=r}else u&&(e.value=+u.call(c,e,e.depth)||0),delete e.children;return Dr(t,function(t){var e,n;a&&(e=t.children)&&e.sort(a),u&&(n=t.parent)&&(n.value+=t.value)}),i}return c.sort=function(t){return arguments.length?(a=t,c):a},c.children=function(t){return arguments.length?(l=t,c):l},c.value=function(t){return arguments.length?(u=t,c):u},c.revalue=function(t){return u&&(Mr(t,function(t){t.children&&(t.value=0)}),Dr(t,function(t){var e;t.children||(t.value=+u.call(c,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},c},O.layout.partition=function(){var i=O.layout.hierarchy(),o=[1,1];function e(t,e){var n=i.call(this,t,e);return function t(e,n,i,o){var r=e.children;if(e.x=n,e.y=e.depth*o,e.dx=i,e.dy=o,r&&(s=r.length)){var s,a,l,u=-1;for(i=e.value?i/e.value:0;++u<s;)t(a=r[u],n,l=a.value*i,o),n+=l}}(n[0],0,o[0],o[1]/function t(e){var n=e.children,i=0;if(n&&(o=n.length))for(var o,r=-1;++r<o;)i=Math.max(i,t(n[r]));return 1+i}(n[0])),n}return e.size=function(t){return arguments.length?(o=t,e):o},Sr(e,i)},O.layout.pie=function(){var d=Number,p=Or,f=0,m=$t,g=0;function v(n){var e,t=n.length,i=n.map(function(t,e){return+d.call(v,t,e)}),o=+("function"==typeof f?f.apply(this,arguments):f),r=("function"==typeof m?m.apply(this,arguments):m)-o,s=Math.min(Math.abs(r)/t,+("function"==typeof g?g.apply(this,arguments):g)),a=s*(r<0?-1:1),l=O.sum(i),u=l?(r-t*a)/l:0,c=O.range(t),h=[];return null!=p&&c.sort(p===Or?function(t,e){return i[e]-i[t]}:function(t,e){return p(n[t],n[e])}),c.forEach(function(t){h[t]={data:n[t],value:e=i[t],startAngle:o,endAngle:o+=e*u+a,padAngle:s}}),h}return v.value=function(t){return arguments.length?(d=t,v):d},v.sort=function(t){return arguments.length?(p=t,v):p},v.startAngle=function(t){return arguments.length?(f=t,v):f},v.endAngle=function(t){return arguments.length?(m=t,v):m},v.padAngle=function(t){return arguments.length?(g=t,v):g},v};var Or={};function Ir(t){return t.x}function Nr(t){return t.y}function Rr(t,e,n){t.y0=e,t.y=n}O.layout.stack=function(){var h=N,d=Fr,p=Hr,f=Rr,m=Ir,g=Nr;function v(t,e){if(!(r=t.length))return t;var n=t.map(function(t,e){return h.call(v,t,e)}),i=n.map(function(t){return t.map(function(t,e){return[m.call(v,t,e),g.call(v,t,e)]})}),o=d.call(v,i,e);n=O.permute(n,o),i=O.permute(i,o);var r,s,a,l,u=p.call(v,i,e),c=n[0].length;for(a=0;a<c;++a)for(f.call(v,n[0][a],l=u[a],i[0][a][1]),s=1;s<r;++s)f.call(v,n[s][a],l+=i[s-1][a][1],i[s][a][1]);return t}return v.values=function(t){return arguments.length?(h=t,v):h},v.order=function(t){return arguments.length?(d="function"==typeof t?t:zr.get(t)||Fr,v):d},v.offset=function(t){return arguments.length?(p="function"==typeof t?t:Ur.get(t)||Hr,v):p},v.x=function(t){return arguments.length?(m=t,v):m},v.y=function(t){return arguments.length?(g=t,v):g},v.out=function(t){return arguments.length?(f=t,v):f},v};var zr=O.map({"inside-out":function(t){var e,n,i=t.length,o=t.map(Br),r=t.map(jr),s=O.range(i).sort(function(t,e){return o[t]-o[e]}),a=0,l=0,u=[],c=[];for(e=0;e<i;++e)n=s[e],a<l?(a+=r[n],u.push(n)):(l+=r[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return O.range(t.length).reverse()},default:Fr}),Ur=O.map({silhouette:function(t){var e,n,i,o=t.length,r=t[0].length,s=[],a=0,l=[];for(n=0;n<r;++n){for(i=e=0;e<o;e++)i+=t[e][n][1];a<i&&(a=i),s.push(i)}for(n=0;n<r;++n)l[n]=(a-s[n])/2;return l},wiggle:function(t){var e,n,i,o,r,s,a,l,u,c=t.length,h=t[0],d=h.length,p=[];for(p[0]=l=u=0,n=1;n<d;++n){for(o=e=0;e<c;++e)o+=t[e][n][1];for(r=e=0,a=h[n][0]-h[n-1][0];e<c;++e){for(i=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);i<e;++i)s+=(t[i][n][1]-t[i][n-1][1])/a;r+=s*t[e][n][1]}p[n]=l-=o?r/o*a:0,l<u&&(u=l)}for(n=0;n<d;++n)p[n]-=u;return p},expand:function(t){var e,n,i,o=t.length,r=t[0].length,s=1/o,a=[];for(n=0;n<r;++n){for(i=e=0;e<o;e++)i+=t[e][n][1];if(i)for(e=0;e<o;e++)t[e][n][1]/=i;else for(e=0;e<o;e++)t[e][n][1]=s}for(n=0;n<r;++n)a[n]=0;return a},zero:Hr});function Fr(t){return O.range(t.length)}function Hr(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function Br(t){for(var e,n=1,i=0,o=t[0][1],r=t.length;n<r;++n)(e=t[n][1])>o&&(i=n,o=e);return i}function jr(t){return t.reduce(qr,0)}function qr(t,e){return t+e[1]}function Wr(t,e){return Vr(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Vr(t,e){for(var n=-1,i=+t[0],o=(t[1]-i)/e,r=[];++n<=e;)r[n]=o*n+i;return r}function Zr(t){return[O.min(t),O.max(t)]}function Gr(t,e){return t.value-e.value}function Yr(t,e){var n=t._pack_next;(t._pack_next=e)._pack_prev=t,(e._pack_next=n)._pack_prev=e}function Kr(t,e){(t._pack_next=e)._pack_prev=t}function Xr(t,e){var n=e.x-t.x,i=e.y-t.y,o=t.r+e.r;return n*n+i*i<.999*o*o}function Jr(t){if((e=t.children)&&(l=e.length)){var e,n,i,o,r,s,a,l,u=1/0,c=-1/0,h=1/0,d=-1/0;if(e.forEach(Qr),(n=e[0]).x=-n.r,n.y=0,b(n),1<l&&((i=e[1]).x=i.r,i.y=0,b(i),2<l))for(es(n,i,o=e[2]),b(o),Yr(n,o),Yr(n._pack_prev=o,i),i=n._pack_next,r=3;r<l;r++){es(n,i,o=e[r]);var p=0,f=1,m=1;for(s=i._pack_next;s!==i;s=s._pack_next,f++)if(Xr(s,o)){p=1;break}if(1==p)for(a=n._pack_prev;a!==s._pack_prev&&!Xr(a,o);a=a._pack_prev,m++);p?(f<m||f==m&&i.r<n.r?Kr(n,i=s):Kr(n=a,i),r--):(Yr(n,o),b(i=o))}var g=(u+c)/2,v=(h+d)/2,y=0;for(r=0;r<l;r++)(o=e[r]).x-=g,o.y-=v,y=Math.max(y,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=y,e.forEach(ts)}function b(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),h=Math.min(t.y-t.r,h),d=Math.max(t.y+t.r,d)}}function Qr(t){t._pack_next=t._pack_prev=t}function ts(t){delete t._pack_next,delete t._pack_prev}function es(t,e,n){var i=t.r+n.r,o=e.x-t.x,r=e.y-t.y;if(i&&(o||r)){var s=e.r+n.r,a=o*o+r*r,l=.5+((i*=i)-(s*=s))/(2*a),u=Math.sqrt(Math.max(0,2*s*(i+a)-(i-=a)*i-s*s))/(2*a);n.x=t.x+l*o+u*r,n.y=t.y+l*r-u*o}else n.x=t.x+i,n.y=t.y}function ns(t,e){return t.parent==e.parent?1:2}function is(t){var e=t.children;return e.length?e[0]:t.t}function os(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function rs(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function ss(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function as(t,e){var n=t.x+e[3],i=t.y+e[0],o=t.dx-e[1]-e[3],r=t.dy-e[0]-e[2];return o<0&&(n+=o/2,o=0),r<0&&(i+=r/2,r=0),{x:n,y:i,dx:o,dy:r}}function ls(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function us(t){return t.rangeExtent?t.rangeExtent():ls(t.range())}function cs(t,e,n,i){var o=n(t[0],t[1]),r=i(e[0],e[1]);return function(t){return r(o(t))}}function hs(t,e){var n,i=0,o=t.length-1,r=t[i],s=t[o];return s<r&&(n=i,i=o,o=n,n=r,r=s,s=n),t[i]=e.floor(r),t[o]=e.ceil(s),t}function ds(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:ps}O.layout.histogram=function(){var h=!0,d=Number,p=Zr,f=Wr;function n(t,e){for(var n,i,o=[],r=t.map(d,this),s=p.call(this,r,e),a=f.call(this,s,r,e),l=(e=-1,r.length),u=a.length-1,c=h?1:1/l;++e<u;)(n=o[e]=[]).dx=a[e+1]-(n.x=a[e]),n.y=0;if(0<u)for(e=-1;++e<l;)(i=r[e])>=s[0]&&i<=s[1]&&((n=o[O.bisect(a,i,1,u)-1]).y+=c,n.push(t[e]));return o}return n.value=function(t){return arguments.length?(d=t,n):d},n.range=function(t){return arguments.length?(p=me(t),n):p},n.bins=function(e){return arguments.length?(f="number"==typeof e?function(t){return Vr(t,e)}:me(e),n):f},n.frequency=function(t){return arguments.length?(h=!!t,n):h},n},O.layout.pack=function(){var l,u=O.layout.hierarchy().sort(Gr),c=0,h=[1,1];function e(t,e){var n=u.call(this,t,e),i=n[0],o=h[0],r=h[1],s=null==l?Math.sqrt:"function"==typeof l?l:function(){return l};if(i.x=i.y=0,Dr(i,function(t){t.r=+s(t.value)}),Dr(i,Jr),c){var a=c*(l?1:Math.max(2*i.r/o,2*i.r/r))/2;Dr(i,function(t){t.r+=a}),Dr(i,Jr),Dr(i,function(t){t.r-=a})}return function t(e,n,i,o){var r=e.children;e.x=n+=o*e.x;e.y=i+=o*e.y;e.r*=o;if(r)for(var s=-1,a=r.length;++s<a;)t(r[s],n,i,o)}(i,o/2,r/2,l?1:1/Math.max(2*i.r/o,2*i.r/r)),n}return e.size=function(t){return arguments.length?(h=t,e):h},e.radius=function(t){return arguments.length?(l=null==t||"function"==typeof t?t:+t,e):l},e.padding=function(t){return arguments.length?(c=+t,e):c},Sr(e,u)},O.layout.tree=function(){var h=O.layout.hierarchy().sort(null).value(null),m=ns,d=[1,1],p=null;function e(t,e){var n=h.call(this,t,e),i=n[0],o=function(t){var e,n={A:null,children:[t]},i=[n];for(;null!=(e=i.pop());)for(var o,r=e.children,s=0,a=r.length;s<a;++s)i.push((r[s]=o={_:r[s],parent:e,children:(o=r[s].children)&&o.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=o);return n.children[0]}(i);if(Dr(o,f),o.parent.m=-o.z,Mr(o,g),p)Mr(i,v);else{var r=i,s=i,a=i;Mr(i,function(t){t.x<r.x&&(r=t),t.x>s.x&&(s=t),t.depth>a.depth&&(a=t)});var l=m(r,s)/2-r.x,u=d[0]/(s.x+m(s,r)/2+l),c=d[1]/(a.depth||1);Mr(i,function(t){t.x=(t.x+l)*u,t.y=t.depth*c})}return n}function f(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){!function(t){var e,n=0,i=0,o=t.children,r=o.length;for(;0<=--r;)(e=o[r]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+m(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+m(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,o=t,r=t,s=e,a=o.parent.children[0],l=o.m,u=r.m,c=s.m,h=a.m;s=os(s),o=is(o),s&&o;)a=is(a),(r=os(r)).a=t,0<(i=s.z+c-o.z-l+m(s._,o._))&&(rs((p=t,f=n,(d=s).a.parent===p.parent?d.a:f),t,i),l+=i,u+=i),c+=s.m,l+=o.m,h+=a.m,u+=r.m;s&&!os(r)&&(r.t=s,r.m+=c-u),o&&!is(a)&&(a.t=o,a.m+=l-h,n=t)}var d,p,f;return n}(t,i,t.parent.A||n[0])}function g(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function v(t){t.x*=d[0],t.y=t.depth*d[1]}return e.separation=function(t){return arguments.length?(m=t,e):m},e.size=function(t){return arguments.length?(p=null==(d=t)?v:null,e):p?null:d},e.nodeSize=function(t){return arguments.length?(p=null==(d=t)?null:v,e):p?d:null},Sr(e,h)},O.layout.cluster=function(){var c=O.layout.hierarchy().sort(null).value(null),h=ns,d=[1,1],p=!1;function e(t,e){var o,n=c.call(this,t,e),i=n[0],r=0;Dr(i,function(t){var e,n,i=t.children;i&&i.length?(t.x=(n=i).reduce(function(t,e){return t+e.x},0)/n.length,t.y=(e=i,1+O.max(e,function(t){return t.y}))):(t.x=o?r+=h(t,o):0,t.y=0,o=t)});var s=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(i),a=function t(e){var n,i=e.children;return i&&(n=i.length)?t(i[n-1]):e}(i),l=s.x-h(s,a)/2,u=a.x+h(a,s)/2;return Dr(i,p?function(t){t.x=(t.x-i.x)*d[0],t.y=(i.y-t.y)*d[1]}:function(t){t.x=(t.x-l)/(u-l)*d[0],t.y=(1-(i.y?t.y/i.y:1))*d[1]}),n}return e.separation=function(t){return arguments.length?(h=t,e):h},e.size=function(t){return arguments.length?(p=null==(d=t),e):p?null:d},e.nodeSize=function(t){return arguments.length?(p=null!=(d=t),e):p?d:null},Sr(e,c)},O.layout.treemap=function(){var i,o=O.layout.hierarchy(),c=Math.round,r=[1,1],s=null,h=ss,a=!1,d="squarify",l=.5*(1+Math.sqrt(5));function p(t,e){for(var n,i,o=-1,r=t.length;++o<r;)i=(n=t[o]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function f(t){var e=t.children;if(e&&e.length){var n,i,o,r=h(t),s=[],a=e.slice(),l=1/0,u="slice"===d?r.dx:"dice"===d?r.dy:"slice-dice"===d?1&t.depth?r.dy:r.dx:Math.min(r.dx,r.dy);for(p(a,r.dx*r.dy/t.value),s.area=0;0<(o=a.length);)s.push(n=a[o-1]),s.area+=n.area,l="squarify"!==d||(i=m(s,u))<=l?(a.pop(),i):(s.area-=s.pop().area,g(s,u,r,!1),u=Math.min(r.dx,r.dy),s.length=s.area=0,1/0);s.length&&(g(s,u,r,!0),s.length=s.area=0),e.forEach(f)}}function u(t){var e=t.children;if(e&&e.length){var n,i=h(t),o=e.slice(),r=[];for(p(o,i.dx*i.dy/t.value),r.area=0;n=o.pop();)r.push(n),r.area+=n.area,null!=n.z&&(g(r,n.z?i.dx:i.dy,i,!o.length),r.length=r.area=0);e.forEach(u)}}function m(t,e){for(var n,i=t.area,o=0,r=1/0,s=-1,a=t.length;++s<a;)(n=t[s].area)&&(n<r&&(r=n),o<n&&(o=n));return e*=e,(i*=i)?Math.max(e*o*l/i,i/(e*r*l)):1/0}function g(t,e,n,i){var o,r=-1,s=t.length,a=n.x,l=n.y,u=e?c(t.area/e):0;if(e==n.dx){for((i||u>n.dy)&&(u=n.dy);++r<s;)(o=t[r]).x=a,o.y=l,o.dy=u,a+=o.dx=Math.min(n.x+n.dx-a,u?c(o.area/u):0);o.z=!0,o.dx+=n.x+n.dx-a,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++r<s;)(o=t[r]).x=a,o.y=l,o.dx=u,l+=o.dy=Math.min(n.y+n.dy-l,u?c(o.area/u):0);o.z=!1,o.dy+=n.y+n.dy-l,n.x+=u,n.dx-=u}}function v(t){var e=i||o(t),n=e[0];return n.x=n.y=0,n.value?(n.dx=r[0],n.dy=r[1]):n.dx=n.dy=0,i&&o.revalue(n),p([n],n.dx*n.dy/n.value),(i?u:f)(n),a&&(i=e),e}return v.size=function(t){return arguments.length?(r=t,v):r},v.padding=function(n){if(!arguments.length)return s;function t(t){return as(t,n)}var e;return h=null==(s=n)?ss:"function"==(e=typeof n)?function(t){var e=n.call(v,t,t.depth);return null==e?ss(t):as(t,"number"==typeof e?[e,e,e,e]:e)}:("number"===e&&(n=[n,n,n,n]),t),v},v.round=function(t){return arguments.length?(c=t?Math.round:Number,v):c!=Number},v.sticky=function(t){return arguments.length?(a=t,i=null,v):a},v.ratio=function(t){return arguments.length?(l=t,v):l},v.mode=function(t){return arguments.length?(d=t+"",v):d},Sr(v,o)},O.random={normal:function(i,o){var t=arguments.length;return t<2&&(o=1),t<1&&(i=0),function(){for(var t,e,n;!(n=(t=2*Math.random()-1)*t+(e=2*Math.random()-1)*e)||1<n;);return i+o*t*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var t=O.random.normal.apply(O,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=O.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},O.scale={};var ps={floor:N,ceil:N};function fs(n,t,e,i){var o=[],r=[],s=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++s<=a;)o.push(e(n[s-1],n[s])),r.push(i(t[s-1],t[s]));return function(t){var e=O.bisect(n,t,1,a)-1;return r[e](o[e](t))}}function ms(t,e){return O.rebind(t,e,"range","rangeRound","interpolate","clamp")}function gs(t,e){return hs(t,ds(vs(t,e)[2])),hs(t,ds(vs(t,e)[2])),t}function vs(t,e){null==e&&(e=10);var n=ls(t),i=n[1]-n[0],o=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),r=e/i*o;return r<=.15?o*=10:r<=.35?o*=5:r<=.75&&(o*=2),n[0]=Math.ceil(n[0]/o)*o,n[1]=Math.floor(n[1]/o)*o+.5*o,n[2]=o,n}function ys(t,e){return O.range.apply(O,vs(t,e))}function bs(t,e,n){var i,o,r,s=vs(t,e);if(n){var a=De.exec(n);if(a.shift(),"s"===a[8]){var l=O.formatPrefix(Math.max(A(s[0]),A(s[1])));return a[7]||(a[7]="."+ws(l.scale(s[2]))),a[8]="f",n=O.format(a.join("")),function(t){return n(l.scale(t))+l.symbol}}a[7]||(a[7]="."+(i=a[8],r=ws((o=s)[2]),i in _s?Math.abs(r-ws(Math.max(A(o[0]),A(o[1]))))+ +("e"!==i):r-2*("%"===i))),n=a.join("")}else n=",."+ws(s[2])+"f";return O.format(n)}O.scale.linear=function(){return function t(n,i,o,r){var s,a;function e(){var t=2<Math.min(n.length,i.length)?fs:cs,e=r?vr:gr;return s=t(n,i,e,o),a=t(i,n,e,Yo),l}function l(t){return s(t)}l.invert=function(t){return a(t)};l.domain=function(t){return arguments.length?(n=t.map(Number),e()):n};l.range=function(t){return arguments.length?(i=t,e()):i};l.rangeRound=function(t){return l.range(t).interpolate(ur)};l.clamp=function(t){return arguments.length?(r=t,e()):r};l.interpolate=function(t){return arguments.length?(o=t,e()):o};l.ticks=function(t){return ys(n,t)};l.tickFormat=function(t,e){return bs(n,t,e)};l.nice=function(t){return gs(n,t),e()};l.copy=function(){return t(n,i,o,r)};return e()}([0,1],[0,1],Yo,!1)};var _s={s:1,g:1,p:1,r:1,e:1};function ws(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}O.scale.log=function(){return function t(e,l,u,c){function h(t){return(u?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(l)}function d(t){return u?Math.pow(l,t):-Math.pow(l,-t)}function o(t){return e(h(t))}o.invert=function(t){return d(e.invert(t))};o.domain=function(t){return arguments.length?(u=0<=t[0],e.domain((c=t.map(Number)).map(h)),o):c};o.base=function(t){return arguments.length?(l=+t,e.domain(c.map(h)),o):l};o.nice=function(){var t=hs(c.map(h),u?Math:Cs);return e.domain(t),c=t.map(d),o};o.ticks=function(){var t=ls(c),e=[],n=t[0],i=t[1],o=Math.floor(h(n)),r=Math.ceil(h(i)),s=l%1?2:l;if(isFinite(r-o)){if(u){for(;o<r;o++)for(var a=1;a<s;a++)e.push(d(o)*a);e.push(d(o))}else for(e.push(d(o));o++<r;)for(var a=s-1;0<a;a--)e.push(d(o)*a);for(o=0;e[o]<n;o++);for(r=e.length;e[r-1]>i;r--);e=e.slice(o,r)}return e};o.tickFormat=function(t,n){if(!arguments.length)return xs;arguments.length<2?n=xs:"function"!=typeof n&&(n=O.format(n));var i=Math.max(1,l*t/o.ticks().length);return function(t){var e=t/d(Math.round(h(t)));return e*l<l-.5&&(e*=l),e<=i?n(t):""}};o.copy=function(){return t(e.copy(),l,u,c)};return ms(o,e)}(O.scale.linear().domain([0,1]),10,!0,[1,10])};var xs=O.format(".0e"),Cs={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function ks(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}O.scale.pow=function(){return function t(e,n,i){var o=ks(n),r=ks(1/n);function s(t){return e(o(t))}s.invert=function(t){return r(e.invert(t))};s.domain=function(t){return arguments.length?(e.domain((i=t.map(Number)).map(o)),s):i};s.ticks=function(t){return ys(i,t)};s.tickFormat=function(t,e){return bs(i,t,e)};s.nice=function(t){return s.domain(gs(i,t))};s.exponent=function(t){return arguments.length?(o=ks(n=t),r=ks(1/n),e.domain(i.map(o)),s):n};s.copy=function(){return t(e.copy(),n,i)};return ms(s,e)}(O.scale.linear(),1,[0,1])},O.scale.sqrt=function(){return O.scale.pow().exponent(.5)},O.scale.ordinal=function(){return function t(a,l){var o,u,c;function h(t){return u[((o.get(t)||("range"===l.t?o.set(t,a.push(t)):NaN))-1)%u.length]}function d(e,n){return O.range(a.length).map(function(t){return e+n*t})}h.domain=function(t){if(!arguments.length)return a;a=[],o=new y;for(var e,n=-1,i=t.length;++n<i;)o.has(e=t[n])||o.set(e,a.push(e));return h[l.t].apply(h,l.a)};h.range=function(t){return arguments.length?(u=t,c=0,l={t:"range",a:arguments},h):u};h.rangePoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],o=a.length<2?(n=(n+i)/2,0):(i-n)/(a.length-1+e);return u=d(n+o*e/2,o),c=0,l={t:"rangePoints",a:arguments},h};h.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],o=a.length<2?(n=i=Math.round((n+i)/2),0):(i-n)/(a.length-1+e)|0;return u=d(n+Math.round(o*e/2+(i-n-(a.length-1+e)*o)/2),o),c=0,l={t:"rangeRoundPoints",a:arguments},h};h.rangeBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],o=t[i-0],r=t[1-i],s=(r-o)/(a.length-e+2*n);return u=d(o+s*n,s),i&&u.reverse(),c=s*(1-e),l={t:"rangeBands",a:arguments},h};h.rangeRoundBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],o=t[i-0],r=t[1-i],s=Math.floor((r-o)/(a.length-e+2*n));return u=d(o+Math.round((r-o-(a.length-e)*s)/2),s),i&&u.reverse(),c=Math.round(s*(1-e)),l={t:"rangeRoundBands",a:arguments},h};h.rangeBand=function(){return c};h.rangeExtent=function(){return ls(l.a[0])};h.copy=function(){return t(a,l)};return h.domain(a)}([],{t:"range",a:[[]]})},O.scale.category10=function(){return O.scale.ordinal().range($s)},O.scale.category20=function(){return O.scale.ordinal().range(Ts)},O.scale.category20b=function(){return O.scale.ordinal().range(Ss)},O.scale.category20c=function(){return O.scale.ordinal().range(Ms)};var $s=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(se),Ts=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(se),Ss=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(se),Ms=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(se);function Ds(){return 0}O.scale.quantile=function(){return function t(n,i){var o;function e(){var t=0,e=i.length;for(o=[];++t<e;)o[t-1]=O.quantile(n,t/e);return r}function r(t){if(!isNaN(t=+t))return i[O.bisect(o,t)]}r.domain=function(t){return arguments.length?(n=t.map(u).filter(c).sort(l),e()):n};r.range=function(t){return arguments.length?(i=t,e()):i};r.quantiles=function(){return o};r.invertExtent=function(t){return(t=i.indexOf(t))<0?[NaN,NaN]:[0<t?o[t-1]:n[0],t<o.length?o[t]:n[n.length-1]]};r.copy=function(){return t(n,i)};return e()}([],[])},O.scale.quantize=function(){return function t(e,n,i){var o,r;function s(t){return i[Math.max(0,Math.min(r,Math.floor(o*(t-e))))]}function a(){return o=i.length/(n-e),r=i.length-1,s}s.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],a()):[e,n]};s.range=function(t){return arguments.length?(i=t,a()):i};s.invertExtent=function(t){return[t=(t=i.indexOf(t))<0?NaN:t/o+e,t+1/o]};s.copy=function(){return t(e,n,i)};return a()}(0,1,[0,1])},O.scale.threshold=function(){return function t(e,n){function i(t){if(t<=t)return n[O.bisect(e,t)]}i.domain=function(t){return arguments.length?(e=t,i):e};i.range=function(t){return arguments.length?(n=t,i):n};i.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]};i.copy=function(){return t(e,n)};return i}([.5],[0,1])},O.scale.identity=function(){return function t(n){function e(t){return+t}e.invert=e;e.domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n};e.ticks=function(t){return ys(n,t)};e.tickFormat=function(t,e){return bs(n,t,e)};e.copy=function(){return t(n)};return e}([0,1])},O.svg={},O.svg.arc=function(){var z=Es,U=Ps,F=Ds,H=Ls,B=As,j=Os,q=Is;function e(){var t=Math.max(0,+z.apply(this,arguments)),e=Math.max(0,+U.apply(this,arguments)),n=B.apply(this,arguments)-St,i=j.apply(this,arguments)-St,o=Math.abs(i-n),r=i<n?0:1;if(e<t&&(s=e,e=t,t=s),Tt<=o)return W(e,r)+(t?W(t,1-r):"")+"Z";var s,a,l,u,c,h,d,p,f,m,g,v,y=0,b=0,_=[];if((u=(+q.apply(this,arguments)||0)/2)&&(l=H===Ls?Math.sqrt(t*t+e*e):+H.apply(this,arguments),r||(b*=-1),e&&(b=At(l/e*Math.sin(u))),t&&(y=At(l/t*Math.sin(u)))),e){c=e*Math.cos(n+b),h=e*Math.sin(n+b),d=e*Math.cos(i-b),p=e*Math.sin(i-b);var w=Math.abs(i-n-2*b)<=kt?0:1;if(b&&Ns(c,h,d,p)===r^w){var x=(n+i)/2;c=e*Math.cos(x),h=e*Math.sin(x),d=p=null}}else c=h=0;if(t){f=t*Math.cos(i-y),m=t*Math.sin(i-y),g=t*Math.cos(n+y),v=t*Math.sin(n+y);var C=Math.abs(n-i+2*y)<=kt?0:1;if(y&&Ns(f,m,g,v)===1-r^C){var k=(n+i)/2;f=t*Math.cos(k),m=t*Math.sin(k),g=v=null}}else f=m=0;if(xt<o&&.001<(s=Math.min(Math.abs(e-t)/2,+F.apply(this,arguments)))){a=t<e^r?0:1;var $=s,T=s;if(o<kt){var S=null==g?[f,m]:null==d?[c,h]:so([c,h],[g,v],[d,p],[f,m]),M=c-S[0],D=h-S[1],L=d-S[0],E=p-S[1],P=1/Math.sin(Math.acos((M*L+D*E)/(Math.sqrt(M*M+D*D)*Math.sqrt(L*L+E*E)))/2),A=Math.sqrt(S[0]*S[0]+S[1]*S[1]);T=Math.min(s,(t-A)/(P-1)),$=Math.min(s,(e-A)/(P+1))}if(null!=d){var O=Rs(null==g?[f,m]:[g,v],[c,h],e,$,r),I=Rs([d,p],[f,m],e,$,r);s===$?_.push("M",O[0],"A",$,",",$," 0 0,",a," ",O[1],"A",e,",",e," 0 ",1-r^Ns(O[1][0],O[1][1],I[1][0],I[1][1]),",",r," ",I[1],"A",$,",",$," 0 0,",a," ",I[0]):_.push("M",O[0],"A",$,",",$," 0 1,",a," ",I[0])}else _.push("M",c,",",h);if(null!=g){var N=Rs([c,h],[g,v],t,-T,r),R=Rs([f,m],null==d?[c,h]:[d,p],t,-T,r);s===T?_.push("L",R[0],"A",T,",",T," 0 0,",a," ",R[1],"A",t,",",t," 0 ",r^Ns(R[1][0],R[1][1],N[1][0],N[1][1]),",",1-r," ",N[1],"A",T,",",T," 0 0,",a," ",N[0]):_.push("L",R[0],"A",T,",",T," 0 0,",a," ",N[0])}else _.push("L",f,",",m)}else _.push("M",c,",",h),null!=d&&_.push("A",e,",",e," 0 ",w,",",r," ",d,",",p),_.push("L",f,",",m),null!=g&&_.push("A",t,",",t," 0 ",C,",",1-r," ",g,",",v);return _.push("Z"),_.join("")}function W(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return e.innerRadius=function(t){return arguments.length?(z=me(t),e):z},e.outerRadius=function(t){return arguments.length?(U=me(t),e):U},e.cornerRadius=function(t){return arguments.length?(F=me(t),e):F},e.padRadius=function(t){return arguments.length?(H=t==Ls?Ls:me(t),e):H},e.startAngle=function(t){return arguments.length?(B=me(t),e):B},e.endAngle=function(t){return arguments.length?(j=me(t),e):j},e.padAngle=function(t){return arguments.length?(q=me(t),e):q},e.centroid=function(){var t=(+z.apply(this,arguments)+ +U.apply(this,arguments))/2,e=(+B.apply(this,arguments)+ +j.apply(this,arguments))/2-St;return[Math.cos(e)*t,Math.sin(e)*t]},e};var Ls="auto";function Es(t){return t.innerRadius}function Ps(t){return t.outerRadius}function As(t){return t.startAngle}function Os(t){return t.endAngle}function Is(t){return t&&t.padAngle}function Ns(t,e,n,i){return 0<(t-n)*e-(e-i)*t?0:1}function Rs(t,e,n,i,o){var r=t[0]-e[0],s=t[1]-e[1],a=(o?i:-i)/Math.sqrt(r*r+s*s),l=a*s,u=-a*r,c=t[0]+l,h=t[1]+u,d=e[0]+l,p=e[1]+u,f=(c+d)/2,m=(h+p)/2,g=d-c,v=p-h,y=g*g+v*v,b=n-i,_=c*p-d*h,w=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-_*_)),x=(_*v-g*w)/y,C=(-_*g-v*w)/y,k=(_*v+g*w)/y,$=(-_*g+v*w)/y,T=x-f,S=C-m,M=k-f,D=$-m;return M*M+D*D<T*T+S*S&&(x=k,C=$),[[x-l,C-u],[x*n/b,C*n/b]]}function zs(u){var c=to,h=eo,d=Vn,p=Fs,e=p.key,f=.7;function n(t){var e,n=[],i=[],o=-1,r=t.length,s=me(c),a=me(h);function l(){n.push("M",p(u(i),f))}for(;++o<r;)d.call(this,e=t[o],o)?i.push([+s.call(this,e,o),+a.call(this,e,o)]):i.length&&(l(),i=[]);return i.length&&l(),n.length?n.join(""):null}return n.x=function(t){return arguments.length?(c=t,n):c},n.y=function(t){return arguments.length?(h=t,n):h},n.defined=function(t){return arguments.length?(d=t,n):d},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?p=t:(p=Us.get(t)||Fs).key,n):e},n.tension=function(t){return arguments.length?(f=t,n):f},n}O.svg.line=function(){return zs(N)};var Us=O.map({linear:Fs,"linear-closed":Hs,step:function(t){var e=0,n=t.length,i=t[0],o=[i[0],",",i[1]];for(;++e<n;)o.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);1<n&&o.push("H",i[0]);return o.join("")},"step-before":Bs,"step-after":js,basis:Vs,"basis-open":function(t){if(t.length<4)return Fs(t);var e,n=[],i=-1,o=t.length,r=[0],s=[0];for(;++i<3;)e=t[i],r.push(e[0]),s.push(e[1]);n.push(Zs(Ks,r)+","+Zs(Ks,s)),--i;for(;++i<o;)e=t[i],r.shift(),r.push(e[0]),s.shift(),s.push(e[1]),Xs(n,r,s);return n.join("")},"basis-closed":function(t){var e,n,i=-1,o=t.length,r=o+4,s=[],a=[];for(;++i<4;)n=t[i%o],s.push(n[0]),a.push(n[1]);e=[Zs(Ks,s),",",Zs(Ks,a)],--i;for(;++i<r;)n=t[i%o],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),Xs(e,s,a);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,o,r=t[0][0],s=t[0][1],a=t[n][0]-r,l=t[n][1]-s,u=-1;++u<=n;)i=t[u],o=u/n,i[0]=e*i[0]+(1-e)*(r+o*a),i[1]=e*i[1]+(1-e)*(s+o*l);return Vs(t)},cardinal:function(t,e){return t.length<3?Fs(t):t[0]+qs(t,Ws(t,e))},"cardinal-open":function(t,e){return t.length<4?Fs(t):t[1]+qs(t.slice(1,-1),Ws(t,e))},"cardinal-closed":function(t,e){return t.length<3?Hs(t):t[0]+qs((t.push(t[0]),t),Ws([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Fs(t):t[0]+qs(t,function(t){var e,n,i,o,r=[],s=function(t){var e=0,n=t.length-1,i=[],o=t[0],r=t[1],s=i[0]=Js(o,r);for(;++e<n;)i[e]=(s+(s=Js(o=r,r=t[e+1])))/2;return i[e]=s,i}(t),a=-1,l=t.length-1;for(;++a<l;)e=Js(t[a],t[a+1]),A(e)<xt?s[a]=s[a+1]=0:(n=s[a]/e,i=s[a+1]/e,9<(o=n*n+i*i)&&(o=3*e/Math.sqrt(o),s[a]=o*n,s[a+1]=o*i));a=-1;for(;++a<=l;)o=(t[Math.min(l,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),r.push([o||0,s[a]*o||0]);return r}(t))}});function Fs(t){return 1<t.length?t.join("L"):t+"Z"}function Hs(t){return t.join("L")+"Z"}function Bs(t){for(var e=0,n=t.length,i=t[0],o=[i[0],",",i[1]];++e<n;)o.push("V",(i=t[e])[1],"H",i[0]);return o.join("")}function js(t){for(var e=0,n=t.length,i=t[0],o=[i[0],",",i[1]];++e<n;)o.push("H",(i=t[e])[0],"V",i[1]);return o.join("")}function qs(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Fs(t);var n=t.length!=e.length,i="",o=t[0],r=t[1],s=e[0],a=s,l=1;if(n&&(i+="Q"+(r[0]-2*s[0]/3)+","+(r[1]-2*s[1]/3)+","+r[0]+","+r[1],o=t[1],l=2),1<e.length){a=e[1],r=t[l],l++,i+="C"+(o[0]+s[0])+","+(o[1]+s[1])+","+(r[0]-a[0])+","+(r[1]-a[1])+","+r[0]+","+r[1];for(var u=2;u<e.length;u++,l++)r=t[l],a=e[u],i+="S"+(r[0]-a[0])+","+(r[1]-a[1])+","+r[0]+","+r[1]}if(n){var c=t[l];i+="Q"+(r[0]+2*a[0]/3)+","+(r[1]+2*a[1]/3)+","+c[0]+","+c[1]}return i}function Ws(t,e){for(var n,i=[],o=(1-e)/2,r=t[0],s=t[1],a=1,l=t.length;++a<l;)n=r,r=s,s=t[a],i.push([o*(s[0]-n[0]),o*(s[1]-n[1])]);return i}function Vs(t){if(t.length<3)return Fs(t);var e=1,n=t.length,i=t[0],o=i[0],r=i[1],s=[o,o,o,(i=t[1])[0]],a=[r,r,r,i[1]],l=[o,",",r,"L",Zs(Ks,s),",",Zs(Ks,a)];for(t.push(t[n-1]);++e<=n;)i=t[e],s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),Xs(l,s,a);return t.pop(),l.push("L",i),l.join("")}function Zs(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Us.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Gs=[0,2/3,1/3,0],Ys=[0,1/3,2/3,0],Ks=[0,1/6,2/3,1/6];function Xs(t,e,n){t.push("C",Zs(Gs,e),",",Zs(Gs,n),",",Zs(Ys,e),",",Zs(Ys,n),",",Zs(Ks,e),",",Zs(Ks,n))}function Js(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Qs(t){for(var e,n,i,o=-1,r=t.length;++o<r;)n=(e=t[o])[0],i=e[1]-St,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function ta(f){var m=to,g=to,v=0,y=eo,b=Vn,_=Fs,e=_.key,w=_,x="L",C=.7;function n(t){var e,n,i,o=[],r=[],s=[],a=-1,l=t.length,u=me(m),c=me(v),h=m===g?function(){return n}:me(g),d=v===y?function(){return i}:me(y);function p(){o.push("M",_(f(s),C),x,w(f(r.reverse()),C),"Z")}for(;++a<l;)b.call(this,e=t[a],a)?(r.push([n=+u.call(this,e,a),i=+c.call(this,e,a)]),s.push([+h.call(this,e,a),+d.call(this,e,a)])):r.length&&(p(),r=[],s=[]);return r.length&&p(),o.length?o.join(""):null}return n.x=function(t){return arguments.length?(m=g=t,n):g},n.x0=function(t){return arguments.length?(m=t,n):m},n.x1=function(t){return arguments.length?(g=t,n):g},n.y=function(t){return arguments.length?(v=y=t,n):y},n.y0=function(t){return arguments.length?(v=t,n):v},n.y1=function(t){return arguments.length?(y=t,n):y},n.defined=function(t){return arguments.length?(b=t,n):b},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?_=t:(_=Us.get(t)||Fs).key,w=_.reverse||_,x=_.closed?"M":"L",n):e},n.tension=function(t){return arguments.length?(C=t,n):C},n}function ea(t){return t.radius}function na(t){return[t.x,t.y]}function ia(){return 64}function oa(){return"circle"}function ra(t){var e=Math.sqrt(t/kt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}O.svg.line.radial=function(){var t=zs(Qs);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(Bs.reverse=js).reverse=Bs,O.svg.area=function(){return ta(N)},O.svg.area.radial=function(){var t=ta(Qs);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},O.svg.chord=function(){var s=Fi,a=Hi,l=ea,u=As,c=Os;function e(t,e){var n,i,o=h(this,s,t,e),r=h(this,a,t,e);return"M"+o.p0+d(o.r,o.p1,o.a1-o.a0)+(i=r,(n=o).a0==i.a0&&n.a1==i.a1?p(o.r,o.p1,o.r,o.p0):p(o.r,o.p1,r.r,r.p0)+d(r.r,r.p1,r.a1-r.a0)+p(r.r,r.p1,o.r,o.p0))+"Z"}function h(t,e,n,i){var o=e.call(t,n,i),r=l.call(t,o,i),s=u.call(t,o,i)-St,a=c.call(t,o,i)-St;return{r:r,a0:s,a1:a,p0:[r*Math.cos(s),r*Math.sin(s)],p1:[r*Math.cos(a),r*Math.sin(a)]}}function d(t,e,n){return"A"+t+","+t+" 0 "+ +(kt<n)+",1 "+e}function p(t,e,n,i){return"Q 0,0 "+i}return e.radius=function(t){return arguments.length?(l=me(t),e):l},e.source=function(t){return arguments.length?(s=me(t),e):s},e.target=function(t){return arguments.length?(a=me(t),e):a},e.startAngle=function(t){return arguments.length?(u=me(t),e):u},e.endAngle=function(t){return arguments.length?(c=me(t),e):c},e},O.svg.diagonal=function(){var s=Fi,a=Hi,l=na;function e(t,e){var n=s.call(this,t,e),i=a.call(this,t,e),o=(n.y+i.y)/2,r=[n,{x:n.x,y:o},{x:i.x,y:o},i];return"M"+(r=r.map(l))[0]+"C"+r[1]+" "+r[2]+" "+r[3]}return e.source=function(t){return arguments.length?(s=me(t),e):s},e.target=function(t){return arguments.length?(a=me(t),e):a},e.projection=function(t){return arguments.length?(l=t,e):l},e},O.svg.diagonal.radial=function(){var t=O.svg.diagonal(),e=na,n=t.projection;return t.projection=function(t){return arguments.length?n((i=e=t,function(){var t=i.apply(this,arguments),e=t[0],n=t[1]-St;return[e*Math.cos(n),e*Math.sin(n)]})):e;var i},t},O.svg.symbol=function(){var n=oa,i=ia;function e(t,e){return(sa.get(n.call(this,t,e))||ra)(i.call(this,t,e))}return e.type=function(t){return arguments.length?(n=me(t),e):n},e.size=function(t){return arguments.length?(i=me(t),e):i},e};var sa=O.map({circle:ra,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*la)),n=e*la;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/aa),n=e*aa/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/aa),n=e*aa/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});O.svg.symbolTypes=sa.keys();var aa=Math.sqrt(3),la=Math.tan(30*Mt);V.transition=function(t){for(var e,n,i=da||++ma,o=ya(t),r=[],s=pa||{time:Date.now(),ease:or,delay:0,duration:250},a=-1,l=this.length;++a<l;){r.push(e=[]);for(var u=this[a],c=-1,h=u.length;++c<h;)(n=u[c])&&ba(n,c,o,i,s),e.push(n)}return ha(r,o,i)},V.interrupt=function(t){return this.each(null==t?ua:ca(ya(t)))};var ua=ca(ya());function ca(i){return function(){var t,e,n;(t=this[i])&&(n=t[e=t.active])&&(n.timer.c=null,n.timer.t=NaN,--t.count?delete t[e]:delete this[i],t.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function ha(t,e,n){return H(t,fa),t.namespace=e,t.id=n,t}var da,pa,fa=[],ma=0;function ga(t,i,o,r){var s=t.id,a=t.namespace;return ut(t,"function"==typeof o?function(t,e,n){t[a][s].tween.set(i,r(o.call(t,t.__data__,e,n)))}:(o=r(o),function(t){t[a][s].tween.set(i,o)}))}function va(t){return null==t&&(t=""),function(){this.textContent=t}}function ya(t){return null==t?"__transition__":"__transition_"+t+"__"}function ba(r,s,o,a,t){var l,u,c,h,d,p=r[o]||(r[o]={active:0,count:0}),f=p[a];function n(t){var e=p.active,n=p[e];for(var i in n&&(n.timer.c=null,n.timer.t=NaN,--p.count,delete p[e],n.event&&n.event.interrupt.call(r,r.__data__,n.index)),p)if(+i<a){var o=p[i];o.timer.c=null,o.timer.t=NaN,--p.count,delete p[i]}u.c=m,Ce(function(){return u.c&&m(t||1)&&(u.c=null,u.t=NaN),1},0,l),p.active=a,f.event&&f.event.start.call(r,r.__data__,s),d=[],f.tween.forEach(function(t,e){(e=e.call(r,r.__data__,s))&&d.push(e)}),h=f.ease,c=f.duration}function m(t){for(var e=t/c,n=h(e),i=d.length;0<i;)d[--i].call(r,n);if(1<=e)return f.event&&f.event.end.call(r,r.__data__,s),--p.count?delete p[a]:delete r[o],1}f||(l=t.time,u=Ce(function(t){var e=f.delay;if(u.t=e+l,e<=t)return n(t-e);u.c=n},0,l),f=p[a]={tween:new y,time:l,timer:u,delay:t.delay,duration:t.duration,ease:t.ease,index:s},t=null,++p.count)}fa.call=V.call,fa.empty=V.empty,fa.node=V.node,fa.size=V.size,O.transition=function(t,e){return t&&t.transition?da?t.transition(e):t:O.selection().transition(t)},(O.transition.prototype=fa).select=function(t){var e,n,i,o=this.id,r=this.namespace,s=[];t=Z(t);for(var a=-1,l=this.length;++a<l;){s.push(e=[]);for(var u=this[a],c=-1,h=u.length;++c<h;)(i=u[c])&&(n=t.call(i,i.__data__,c,a))?("__data__"in i&&(n.__data__=i.__data__),ba(n,c,r,o,i[r][o]),e.push(n)):e.push(null)}return ha(s,r,o)},fa.selectAll=function(t){var e,n,i,o,r,s=this.id,a=this.namespace,l=[];t=G(t);for(var u=-1,c=this.length;++u<c;)for(var h=this[u],d=-1,p=h.length;++d<p;)if(i=h[d]){r=i[a][s],n=t.call(i,i.__data__,d,u),l.push(e=[]);for(var f=-1,m=n.length;++f<m;)(o=n[f])&&ba(o,f,a,s,r),e.push(o)}return ha(l,a,s)},fa.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=lt(t));for(var o=0,r=this.length;o<r;o++){i.push(e=[]);for(var s,a=0,l=(s=this[o]).length;a<l;a++)(n=s[a])&&t.call(n,n.__data__,a,o)&&e.push(n)}return ha(i,this.namespace,this.id)},fa.tween=function(e,n){var i=this.id,o=this.namespace;return arguments.length<2?this.node()[o][i].tween.get(e):ut(this,null==n?function(t){t[o][i].tween.remove(e)}:function(t){t[o][i].tween.set(e,n)})},fa.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var i="transform"==t?mr:Yo,o=O.ns.qualify(t);function r(){this.removeAttribute(o)}function s(){this.removeAttributeNS(o.space,o.local)}return ga(this,"attr."+t,e,o.local?function(n){return null==n?s:(n+="",function(){var e,t=this.getAttributeNS(o.space,o.local);return t!==n&&(e=i(t,n),function(t){this.setAttributeNS(o.space,o.local,e(t))})})}:function(n){return null==n?r:(n+="",function(){var e,t=this.getAttribute(o);return t!==n&&(e=i(t,n),function(t){this.setAttribute(o,e(t))})})})},fa.attrTween=function(t,i){var o=O.ns.qualify(t);return this.tween("attr."+t,o.local?function(t,e){var n=i.call(this,t,e,this.getAttributeNS(o.space,o.local));return n&&function(t){this.setAttributeNS(o.space,o.local,n(t))}}:function(t,e){var n=i.call(this,t,e,this.getAttribute(o));return n&&function(t){this.setAttribute(o,n(t))}})},fa.style=function(i,t,o){var e=arguments.length;if(e<3){if("string"!=typeof i){for(o in e<2&&(t=""),i)this.style(o,i[o],t);return this}o=""}function r(){this.style.removeProperty(i)}return ga(this,"style."+i,t,function(n){return null==n?r:(n+="",function(){var e,t=I(this).getComputedStyle(this,null).getPropertyValue(i);return t!==n&&(e=Yo(t,n),function(t){this.style.setProperty(i,e(t),o)})})})},fa.styleTween=function(i,o,r){return arguments.length<3&&(r=""),this.tween("style."+i,function(t,e){var n=o.call(this,t,e,I(this).getComputedStyle(this,null).getPropertyValue(i));return n&&function(t){this.style.setProperty(i,n(t),r)}})},fa.text=function(t){return ga(this,"text",t,va)},fa.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},fa.ease=function(e){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].ease:("function"!=typeof e&&(e=O.ease.apply(O,arguments)),ut(this,function(t){t[i][n].ease=e}))},fa.delay=function(i){var o=this.id,r=this.namespace;return arguments.length<1?this.node()[r][o].delay:ut(this,"function"==typeof i?function(t,e,n){t[r][o].delay=+i.call(t,t.__data__,e,n)}:(i=+i,function(t){t[r][o].delay=i}))},fa.duration=function(i){var o=this.id,r=this.namespace;return arguments.length<1?this.node()[r][o].duration:ut(this,"function"==typeof i?function(t,e,n){t[r][o].duration=Math.max(1,i.call(t,t.__data__,e,n))}:(i=Math.max(1,i),function(t){t[r][o].duration=i}))},fa.each=function(i,n){var o=this.id,r=this.namespace;if(arguments.length<2){var t=pa,e=da;try{da=o,ut(this,function(t,e,n){pa=t[r][o],i.call(t,t.__data__,e,n)})}finally{pa=t,da=e}}else ut(this,function(t){var e=t[r][o];(e.event||(e.event=O.dispatch("start","end","interrupt"))).on(i,n)});return this},fa.transition=function(){for(var t,e,n,i=this.id,o=++ma,r=this.namespace,s=[],a=0,l=this.length;a<l;a++){s.push(t=[]);for(var u,c=0,h=(u=this[a]).length;c<h;c++)(e=u[c])&&ba(e,c,r,o,{time:(n=e[r][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return ha(s,r,o)},O.svg.axis=function(){var T,S=O.scale.linear(),M=_a,D=6,L=6,E=3,P=[10],A=null;function n(t){t.each(function(){var t,e=O.select(this),n=this.__chart__||S,i=this.__chart__=S.copy(),o=null==A?i.ticks?i.ticks.apply(i,P):i.domain():A,r=null==T?i.tickFormat?i.tickFormat.apply(i,P):N:T,s=e.selectAll(".tick").data(o,i),a=s.enter().insert("g",".domain").attr("class","tick").style("opacity",xt),l=O.transition(s.exit()).style("opacity",xt).remove(),u=O.transition(s.order()).style("opacity",1),c=Math.max(D,0)+E,h=us(i),d=e.selectAll(".domain").data([0]),p=(d.enter().append("path").attr("class","domain"),O.transition(d));a.append("line"),a.append("text");var f,m,g,v,y=a.select("line"),b=u.select("line"),_=s.select("text").text(r),w=a.select("text"),x=u.select("text"),C="top"===M||"left"===M?-1:1;if("bottom"===M||"top"===M?(t=xa,f="x",g="y",m="x2",v="y2",_.attr("dy",C<0?"0em":".71em").style("text-anchor","middle"),p.attr("d","M"+h[0]+","+C*L+"V0H"+h[1]+"V"+C*L)):(t=Ca,f="y",g="x",m="y2",v="x2",_.attr("dy",".32em").style("text-anchor",C<0?"end":"start"),p.attr("d","M"+C*L+","+h[0]+"H0V"+h[1]+"H"+C*L)),y.attr(v,C*D),w.attr(g,C*c),b.attr(m,0).attr(v,C*D),x.attr(f,0).attr(g,C*c),i.rangeBand){var k=i,$=k.rangeBand()/2;n=i=function(t){return k(t)+$}}else n.rangeBand?n=i:l.call(t,i,n);a.call(t,n,i),u.call(t,i,i)})}return n.scale=function(t){return arguments.length?(S=t,n):S},n.orient=function(t){return arguments.length?(M=t in wa?t+"":_a,n):M},n.ticks=function(){return arguments.length?(P=d(arguments),n):P},n.tickValues=function(t){return arguments.length?(A=t,n):A},n.tickFormat=function(t){return arguments.length?(T=t,n):T},n.tickSize=function(t){var e=arguments.length;return e?(D=+t,L=+arguments[e-1],n):D},n.innerTickSize=function(t){return arguments.length?(D=+t,n):D},n.outerTickSize=function(t){return arguments.length?(L=+t,n):L},n.tickPadding=function(t){return arguments.length?(E=+t,n):E},n.tickSubdivide=function(){return arguments.length&&n},n};var _a="bottom",wa={top:1,right:1,bottom:1,left:1};function xa(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate("+(isFinite(e)?e:i(t))+",0)"})}function Ca(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate(0,"+(isFinite(e)?e:i(t))+")"})}O.svg.brush=function(){var y,b,_=U(S,"brushstart","brush","brushend"),w=null,x=null,C=[0,0],k=[0,0],$=!0,T=!0,s=$a[0];function S(t){t.each(function(){var t=O.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(s,N);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return ka[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",S.empty()?"none":null);var i,o=O.transition(t),r=O.transition(e);w&&(i=us(w),r.attr("x",i[0]).attr("width",i[1]-i[0]),D(o)),x&&(i=us(x),r.attr("y",i[0]).attr("height",i[1]-i[0]),L(o)),M(o)})}function M(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+C[+/e$/.test(t)]+","+k[+/^s/.test(t)]+")"})}function D(t){t.select(".extent").attr("x",C[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",C[1]-C[0])}function L(t){t.select(".extent").attr("y",k[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",k[1]-k[0])}function a(){var h,n,i=this,t=O.select(O.event.target),o=_.of(i,arguments),r=O.select(i),e=t.datum(),s=!/^(n|s)$/.test(e)&&w,a=!/^(e|w)$/.test(e)&&x,d=t.classed("extent"),l=yt(i),p=O.mouse(i),u=O.select(I(i)).on("keydown.brush",function(){32==O.event.keyCode&&(d||(h=null,p[0]-=C[1],p[1]-=k[1],d=2),R())}).on("keyup.brush",function(){32==O.event.keyCode&&2==d&&(p[0]+=C[1],p[1]+=k[1],d=0,R())});if(O.event.changedTouches?u.on("touchmove.brush",m).on("touchend.brush",v):u.on("mousemove.brush",m).on("mouseup.brush",v),r.interrupt().selectAll("*").interrupt(),d)p[0]=C[0]-p[0],p[1]=k[0]-p[1];else if(e){var c=+/w$/.test(e),f=+/^n/.test(e);n=[C[1-c]-p[0],k[1-f]-p[1]],p[0]=C[c],p[1]=k[f]}else O.event.altKey&&(h=p.slice());function m(){var t=O.mouse(i),e=!1;n&&(t[0]+=n[0],t[1]+=n[1]),d||(O.event.altKey?(h||(h=[(C[0]+C[1])/2,(k[0]+k[1])/2]),p[0]=C[+(t[0]<h[0])],p[1]=k[+(t[1]<h[1])]):h=null),s&&g(t,w,0)&&(D(r),e=!0),a&&g(t,x,1)&&(L(r),e=!0),e&&(M(r),o({type:"brush",mode:d?"move":"resize"}))}function g(t,e,n){var i,o,r=us(e),s=r[0],a=r[1],l=p[n],u=n?k:C,c=u[1]-u[0];if(d&&(s-=l,a-=c+l),i=(n?T:$)?Math.max(s,Math.min(a,t[n])):t[n],d?o=(i+=l)+c:(h&&(l=Math.max(s,Math.min(a,2*h[n]-i))),l<i?(o=i,i=l):o=l),u[0]!=i||u[1]!=o)return n?b=null:y=null,u[0]=i,u[1]=o,!0}function v(){m(),r.style("pointer-events","all").selectAll(".resize").style("display",S.empty()?"none":null),O.select("body").style("cursor",null),u.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),l(),o({type:"brushend"})}r.style("pointer-events","none").selectAll(".resize").style("display",null),O.select("body").style("cursor",t.style("cursor")),o({type:"brushstart"}),m()}return S.event=function(t){t.each(function(){var i=_.of(this,arguments),o={x:C,y:k,i:y,j:b},t=this.__chart__||o;this.__chart__=o,da?O.select(this).transition().each("start.brush",function(){y=t.i,b=t.j,C=t.x,k=t.y,i({type:"brushstart"})}).tween("brush:brush",function(){var e=Ko(C,o.x),n=Ko(k,o.y);return y=b=null,function(t){C=o.x=e(t),k=o.y=n(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=o.i,b=o.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},S.x=function(t){return arguments.length?(s=$a[!(w=t)<<1|!x],S):w},S.y=function(t){return arguments.length?(s=$a[!w<<1|!(x=t)],S):x},S.clamp=function(t){return arguments.length?(w&&x?($=!!t[0],T=!!t[1]):w?$=!!t:x&&(T=!!t),S):w&&x?[$,T]:w?$:x?T:null},S.extent=function(t){var e,n,i,o,r;return arguments.length?(w&&(e=t[0],n=t[1],x&&(e=e[0],n=n[0]),y=[e,n],w.invert&&(e=w(e),n=w(n)),n<e&&(r=e,e=n,n=r),e==C[0]&&n==C[1]||(C=[e,n])),x&&(i=t[0],o=t[1],w&&(i=i[1],o=o[1]),b=[i,o],x.invert&&(i=x(i),o=x(o)),o<i&&(r=i,i=o,o=r),i==k[0]&&o==k[1]||(k=[i,o])),S):(w&&(y?(e=y[0],n=y[1]):(e=C[0],n=C[1],w.invert&&(e=w.invert(e),n=w.invert(n)),n<e&&(r=e,e=n,n=r))),x&&(b?(i=b[0],o=b[1]):(i=k[0],o=k[1],x.invert&&(i=x.invert(i),o=x.invert(o)),o<i&&(r=i,i=o,o=r))),w&&x?[[e,i],[n,o]]:w?[e,n]:x&&[i,o])},S.clear=function(){return S.empty()||(C=[0,0],k=[0,0],y=b=null),S},S.empty=function(){return!!w&&C[0]==C[1]||!!x&&k[0]==k[1]},O.rebind(S,_,"on")};var ka={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},$a=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ta=Pe.format=an.timeFormat,Sa=Ta.utc,Ma=Sa("%Y-%m-%dT%H:%M:%S.%LZ");function Da(t){return t.toISOString()}function La(e,o,t){function s(t){return e(t)}function a(t,e){var n=(t[1]-t[0])/e,i=O.bisect(Pa,n);return i==Pa.length?[o.year,vs(t.map(function(t){return t/31536e6}),e)[2]]:i?o[n/Pa[i-1]<Pa[i]/n?i-1:i]:[Ia,vs(t,e)[2]]}return s.invert=function(t){return Ea(e.invert(t))},s.domain=function(t){return arguments.length?(e.domain(t),s):e.domain().map(Ea)},s.nice=function(e,n){var t=s.domain(),i=ls(t),o=null==e?a(i,10):"number"==typeof e&&a(i,e);function r(t){return!isNaN(t)&&!e.range(t,Ea(+t+1),n).length}return o&&(e=o[0],n=o[1]),s.domain(hs(t,1<n?{floor:function(t){for(;r(t=e.floor(t));)t=Ea(t-1);return t},ceil:function(t){for(;r(t=e.ceil(t));)t=Ea(+t+1);return t}}:e))},s.ticks=function(t,e){var n=ls(s.domain()),i=null==t?a(n,10):"number"==typeof t?a(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],Ea(+n[1]+1),e<1?1:e)},s.tickFormat=function(){return t},s.copy=function(){return La(e.copy(),o,t)},ms(s,e)}function Ea(t){return new Date(t)}Ta.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Da:Ma,Da.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Da.toString=Ma.toString,Pe.second=Ne(function(t){return new Ae(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Pe.seconds=Pe.second.range,Pe.seconds.utc=Pe.second.utc.range,Pe.minute=Ne(function(t){return new Ae(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Pe.minutes=Pe.minute.range,Pe.minutes.utc=Pe.minute.utc.range,Pe.hour=Ne(function(t){var e=t.getTimezoneOffset()/60;return new Ae(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Pe.hours=Pe.hour.range,Pe.hours.utc=Pe.hour.utc.range,Pe.month=Ne(function(t){return(t=Pe.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Pe.months=Pe.month.range,Pe.months.utc=Pe.month.utc.range;var Pa=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Aa=[[Pe.second,1],[Pe.second,5],[Pe.second,15],[Pe.second,30],[Pe.minute,1],[Pe.minute,5],[Pe.minute,15],[Pe.minute,30],[Pe.hour,1],[Pe.hour,3],[Pe.hour,6],[Pe.hour,12],[Pe.day,1],[Pe.day,2],[Pe.week,1],[Pe.month,1],[Pe.month,3],[Pe.year,1]],Oa=Ta.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Vn]]),Ia={range:function(t,e,n){return O.range(Math.ceil(t/n)*n,+e,n).map(Ea)},floor:N,ceil:N};Aa.year=Pe.year,Pe.scale=function(){return La(O.scale.linear(),Aa,Oa)};var Na=Aa.map(function(t){return[t[0].utc,t[1]]}),Ra=Sa.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Vn]]);function za(t){return JSON.parse(t.responseText)}function Ua(t){var e=b.createRange();return e.selectNode(b.body),e.createContextualFragment(t.responseText)}Na.year=Pe.year.utc,Pe.scale.utc=function(){return La(O.scale.linear(),Na,Ra)},O.text=ge(function(t){return t.responseText}),O.json=function(t,e){return ve(t,"application/json",za,e)},O.html=function(t,e){return ve(t,"text/html",Ua,e)},O.xml=ge(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=O,define(O)):"object"==typeof module&&module.exports?module.exports=O:this.d3=O}(),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/backdrop.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(u,c,h,t){var d=t.has("$animateCss")?t.get("$animateCss"):null;return{link:function(e,n,t){var i=h(t.expanding),o=h(t.expanded),r=h(t.collapsing),s=h(t.collapsed);function a(){n.removeClass("collapsing").addClass("collapse").css({height:"auto"}),o(e)}function l(){n.css({height:"0"}),n.removeClass("collapsing").addClass("collapse"),s(e)}e.$eval(t.uibCollapse)||n.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css({height:"auto"}),e.$watch(t.uibCollapse,function(t){t?function(){if(!n.hasClass("collapse")&&!n.hasClass("in"))return l();c.resolve(r(e)).then(function(){n.css({height:n[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),d?d(n,{removeClass:"in",to:{height:"0"}}).start().finally(l):u.removeClass(n,"in",{to:{height:"0"}}).then(l)})}():n.hasClass("collapse")&&n.hasClass("in")||c.resolve(i(e)).then(function(){n.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),d?d(n,{addClass:"in",easing:"ease",to:{height:n[0].scrollHeight+"px"}}).start().finally(a):u.addClass(n,"in",{to:{height:n[0].scrollHeight+"px"}}).then(a)})})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(t,n,i){this.groups=[],this.closeOthers=function(e){(angular.isDefined(n.closeOthers)?t.$eval(n.closeOthers):i.closeOthers)&&angular.forEach(this.groups,function(t){t!==e&&(t.isOpen=!1)})},this.addGroup=function(e){var n=this;this.groups.push(e),e.$on("$destroy",function(t){n.removeGroup(e)})},this.removeGroup=function(t){var e=this.groups.indexOf(t);-1!==e&&this.groups.splice(e,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(t){this.heading=t}},link:function(e,n,t,i){i.addGroup(e),e.openClass=t.openClass||"panel-open",e.panelClass=t.panelClass||"panel-default",e.$watch("isOpen",function(t){n.toggleClass(e.openClass,!!t),t&&i.closeOthers(e)}),e.toggleOpen=function(t){e.isDisabled||t&&32!==t.which||(e.isOpen=!e.isOpen)};var o="accordiongroup-"+e.$id+"-"+Math.floor(1e4*Math.random());e.headingId=o+"-tab",e.panelId=o+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(t,e,n,i,o){i.setHeading(o(t,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(t,n,e,i){t.$watch(function(){return i[e.uibAccordionTransclude]},function(t){if(t){var e=angular.element(n[0].querySelector("[uib-accordion-header]"));e.html(""),e.append(t)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function(t,e,n,i){t.closeable=!!e.close;var o=angular.isDefined(e.dismissOnTimeout)?n(e.dismissOnTimeout)(t.$parent):null;o&&i(function(){t.close()},parseInt(o,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function(t,e){return e.templateUrl||"uib/template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(t){this.activeClass=t.activeClass||"active",this.toggleEvent=t.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(a){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(e,n,i,t){var o=t[0],r=t[1],s=a(i.uibUncheckable);n.find("input").css({display:"none"}),r.$render=function(){n.toggleClass(o.activeClass,angular.equals(r.$modelValue,e.$eval(i.uibBtnRadio)))},n.on(o.toggleEvent,function(){if(!i.disabled){var t=n.hasClass(o.activeClass);t&&!angular.isDefined(i.uncheckable)||e.$apply(function(){r.$setViewValue(t?null:e.$eval(i.uibBtnRadio)),r.$render()})}}),i.uibUncheckable&&e.$watch(s,function(t){i.$set("uncheckable",t?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(n,t,e,i){var o=i[0],r=i[1];function s(){return a(e.btnCheckboxTrue,!0)}function a(t,e){return angular.isDefined(t)?n.$eval(t):e}t.find("input").css({display:"none"}),r.$render=function(){t.toggleClass(o.activeClass,angular.equals(r.$modelValue,s()))},t.on(o.toggleEvent,function(){e.disabled||n.$apply(function(){r.$setViewValue(t.hasClass(o.activeClass)?a(e.btnCheckboxFalse,!1):s()),r.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(s,o,e,t,a){var n,i,l=this,u=l.slides=s.slides=[],c="uib-slideDirection",h=s.active,d=[],p=!1;function f(){for(;d.length;)d.shift()}function m(t){for(var e=0;e<u.length;e++)u[e].slide.active=e===t}function r(t){for(var e=0;e<u.length;e++)if(u[e].slide===t)return e}function g(){n&&(e.cancel(n),n=null)}function v(){g();var t=+s.interval;!isNaN(t)&&0<t&&(n=e(y,t))}function y(){var t=+s.interval;i&&!isNaN(t)&&0<t&&u.length?s.next():s.pause()}l.addSlide=function(t,e){u.push({slide:t,element:e}),u.sort(function(t,e){return+t.slide.index-+e.slide.index}),(t.index===s.active||1===u.length&&!angular.isNumber(s.active))&&(s.$currentTransition&&(s.$currentTransition=null),h=t.index,s.active=t.index,m(h),l.select(u[r(t)]),1===u.length&&s.play())},l.getCurrentIndex=function(){for(var t=0;t<u.length;t++)if(u[t].slide.index===h)return t},l.next=s.next=function(){var t=(l.getCurrentIndex()+1)%u.length;if(0!==t||!s.noWrap())return l.select(u[t],"next");s.pause()},l.prev=s.prev=function(){var t=l.getCurrentIndex()-1<0?u.length-1:l.getCurrentIndex()-1;if(!s.noWrap()||t!==u.length-1)return l.select(u[t],"prev");s.pause()},l.removeSlide=function(t){var e=r(t),n=d.indexOf(u[e]);-1!==n&&d.splice(n,1),u.splice(e,1),0<u.length&&h===e?e>=u.length?(h=u.length-1,m(s.active=h),l.select(u[u.length-1])):(h=e,m(s.active=h),l.select(u[e])):e<h&&(h--,s.active=h),0===u.length&&(h=null,s.active=null,f())},l.select=s.select=function(t,e){var n=r(t.slide);void 0===e&&(e=n>l.getCurrentIndex()?"next":"prev"),t.slide.index===h||s.$currentTransition?t&&t.slide.index!==h&&s.$currentTransition&&d.push(u[n]):function r(t,e,n){if(p)return;angular.extend(t,{direction:n});angular.extend(u[h].slide||{},{direction:n});if(a.enabled(o)&&!s.$currentTransition&&u[e].element&&1<l.slides.length){u[e].element.data(c,t.direction);var i=l.getCurrentIndex();angular.isNumber(i)&&u[i].element&&u[i].element.data(c,t.direction),s.$currentTransition=!0,a.on("addClass",u[e].element,function(t,e){if("close"===e&&(s.$currentTransition=null,a.off("addClass",t),d.length)){var n=d.pop().slide,i=n.index,o=i>l.getCurrentIndex()?"next":"prev";f(),r(n,i,o)}})}s.active=t.index;h=t.index;m(e);v()}(t.slide,n,e)},s.indexOfSlide=function(t){return+t.slide.index},s.isActive=function(t){return s.active===t.slide.index},s.isPrevDisabled=function(){return 0===s.active&&s.noWrap()},s.isNextDisabled=function(){return s.active===u.length-1&&s.noWrap()},s.pause=function(){s.noPause||(i=!1,g())},s.play=function(){i||(i=!0,v())},s.$on("$destroy",function(){p=!0,g()}),s.$watch("noTransition",function(t){a.enabled(o,!t)}),s.$watch("interval",v),s.$watchCollection("slides",function(t){t.length||(s.$currentTransition=null,f())}),s.$watch("active",function(t){if(angular.isNumber(t)&&h!==t){for(var e=0;e<u.length;e++)if(u[e].slide.index===t){t=e;break}u[t]&&(m(t),l.select(u[t]),h=t)}})}]).directive("uibCarousel",function(){return{transclude:!0,replace:!0,controller:"UibCarouselController",controllerAs:"carousel",templateUrl:function(t,e){return e.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",function(){return{require:"^uibCarousel",transclude:!0,replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(t,e,n,i){i.addSlide(t,e),t.$on("$destroy",function(){i.removeSlide(t)})}}}).animation(".item",["$animateCss",function(s){var a="uib-slideDirection";function l(t,e,n){t.removeClass(e),n&&n()}return{beforeAddClass:function(t,e,n){if("active"===e){var i=t.data(a),o="next"===i?"left":"right",r=l.bind(this,t,o+" "+i,n);return t.addClass(i),s(t,{addClass:o}).start().done(r),function(){!0}}n()},beforeRemoveClass:function(t,e,n){if("active"===e){var i="next"===t.data(a)?"left":"right",o=l.bind(this,t,i,n);return s(t,{addClass:i}).start().done(o),function(){!0}}n()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter",function(m,g,n,i){var v,l,y=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function b(o,r){var s=[],a=o.split(""),t=o.indexOf("'");if(-1<t){var e=!1;o=o.split("");for(var n=t;n<o.length;n++)e?("'"===o[n]&&(n+1<o.length&&"'"===o[n+1]?(o[n+1]="$",a[n+1]=""):(a[n]="",e=!1)),o[n]="$"):"'"===o[n]&&(o[n]="$",e=!(a[n]=""));o=o.join("")}return angular.forEach(l,function(t){var e=o.indexOf(t.key);if(-1<e){o=o.split(""),a[e]="("+t.regex+")",o[e]="$";for(var n=e+1,i=e+t.key.length;n<i;n++)a[n]="",o[n]="$";o=o.join(""),s.push({index:e,key:t.key,apply:t[r],matcher:t.regex})}}),{regex:new RegExp("^"+a.join("")+"$"),map:i(s,"index")}}function r(t){return parseInt(t,10)}function o(t,e){var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function s(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function a(t,e,n){return s(t,(n=n?-1:1)*(o(e,t.getTimezoneOffset())-t.getTimezoneOffset()))}this.init=function(){v=g.id,this.parsers={},this.formatters={},l=[{key:"yyyy",regex:"\\d{4}",apply:function(t){this.year=+t},formatter:function(t){var e=new Date;return e.setFullYear(Math.abs(t.getFullYear())),n(e,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(t){t=+t,this.year=t<69?t+2e3:t+1900},formatter:function(t){var e=new Date;return e.setFullYear(Math.abs(t.getFullYear())),n(e,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(t){this.year=+t},formatter:function(t){var e=new Date;return e.setFullYear(Math.abs(t.getFullYear())),n(e,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(t){this.month=t-1},formatter:function(t){var e=t.getMonth();return/^[0-9]$/.test(e)?n(t,"MM"):n(t,"M")}},{key:"MMMM",regex:g.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=g.DATETIME_FORMATS.MONTH.indexOf(t)},formatter:function(t){return n(t,"MMMM")}},{key:"MMM",regex:g.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=g.DATETIME_FORMATS.SHORTMONTH.indexOf(t)},formatter:function(t){return n(t,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(t){this.month=t-1},formatter:function(t){return n(t,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(t){this.month=t-1},formatter:function(t){return n(t,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(t){this.date=+t},formatter:function(t){var e=t.getDate();return/^[1-9]$/.test(e)?n(t,"dd"):n(t,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(t){this.date=+t},formatter:function(t){return n(t,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(t){this.date=+t},formatter:function(t){return n(t,"d")}},{key:"EEEE",regex:g.DATETIME_FORMATS.DAY.join("|"),formatter:function(t){return n(t,"EEEE")}},{key:"EEE",regex:g.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(t){return n(t,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(t){this.hours=+t},formatter:function(t){return n(t,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(t){this.hours=+t},formatter:function(t){return n(t,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(t){this.hours=+t},formatter:function(t){return n(t,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(t){this.hours=+t},formatter:function(t){return n(t,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(t){this.minutes=+t},formatter:function(t){return n(t,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(t){this.minutes=+t},formatter:function(t){return n(t,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(t){this.milliseconds=+t},formatter:function(t){return n(t,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(t){this.seconds=+t},formatter:function(t){return n(t,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(t){this.seconds=+t},formatter:function(t){return n(t,"s")}},{key:"a",regex:g.DATETIME_FORMATS.AMPMS.join("|"),apply:function(t){12===this.hours&&(this.hours=0),"PM"===t&&(this.hours+=12)},formatter:function(t){return n(t,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(t){var e=t.match(/([+-])(\d{2})(\d{2})/),n=e[1],i=e[2],o=e[3];this.hours+=r(n+i),this.minutes+=r(n+o)},formatter:function(t){return n(t,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(t){return n(t,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(t){return n(t,"w")}},{key:"GGGG",regex:g.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(t){return n(t,"GGGG")}},{key:"GGG",regex:g.DATETIME_FORMATS.ERAS.join("|"),formatter:function(t){return n(t,"GGG")}},{key:"GG",regex:g.DATETIME_FORMATS.ERAS.join("|"),formatter:function(t){return n(t,"GG")}},{key:"G",regex:g.DATETIME_FORMATS.ERAS.join("|"),formatter:function(t){return n(t,"G")}}]},this.init(),this.filter=function(r,t){if(!angular.isDate(r)||isNaN(r)||!t)return"";t=g.DATETIME_FORMATS[t]||t,g.id!==v&&this.init(),this.formatters[t]||(this.formatters[t]=b(t,"formatter"));var s=this.formatters[t].map,a=t;return s.reduce(function(t,e,n){var i=a.match(new RegExp("(.*)"+e.key));i&&angular.isString(i[1])&&(t+=i[1],a=a.replace(i[1]+e.key,""));var o=n===s.length-1?a:"";return e.apply?t+e.apply.call(null,r)+o:t+o},"")},this.parse=function(t,e,n){if(!angular.isString(t)||!e)return t;e=(e=g.DATETIME_FORMATS[e]||e).replace(y,"\\$&"),g.id!==v&&this.init(),this.parsers[e]||(this.parsers[e]=b(e,"apply"));var i=this.parsers[e],o=i.regex,r=i.map,s=t.match(o),a=!1;if(s&&s.length){var l,u;l=angular.isDate(n)&&!isNaN(n.getTime())?{year:n.getFullYear(),month:n.getMonth(),date:n.getDate(),hours:n.getHours(),minutes:n.getMinutes(),seconds:n.getSeconds(),milliseconds:n.getMilliseconds()}:(n&&m.warn("dateparser:","baseDate is not a valid date"),{year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var c=1,h=s.length;c<h;c++){var d=r[c-1];"Z"===d.matcher&&(a=!0),d.apply&&d.apply.call(l,s[c])}var p=a?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,f=a?Date.prototype.setUTCHours:Date.prototype.setHours;return function(t,e,n){if(n<1)return!1;if(1===e&&28<n)return 29===n&&(t%4==0&&t%100!=0||t%400==0);return 3!==e&&5!==e&&8!==e&&10!==e||n<31}(l.year,l.month,l.date)&&(!angular.isDate(n)||isNaN(n.getTime())||a?(u=new Date(0),p.call(u,l.year,l.month,l.date),f.call(u,l.hours||0,l.minutes||0,l.seconds||0,l.milliseconds||0)):(u=new Date(n),p.call(u,l.year,l.month,l.date),f.call(u,l.hours,l.minutes,l.seconds,l.milliseconds))),u}},this.toTimezone=function(t,e){return t&&e?a(t,e):t},this.fromTimezone=function(t,e){return t&&e?a(t,e,!0):t},this.timezoneToOffset=o,this.addDateMinutes=s,this.convertTimezoneToLocal=a}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(c){var s=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,h=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(t,e){var o=[],a=[],l={},n=e.uibIsClass.match(s),u=n[2],i=n[1].split(",");return function(n,t,e){o.push(n),a.push({scope:n,element:t}),i.forEach(function(t,e){!function(t,e){var n=t.match(h),o=e.$eval(n[1]),i=n[2],r=l[t];if(!r){var s=function(n){var i=null;a.some(function(t){var e=t.scope.$eval(u);if(e===n)return i=t,!0}),r.lastActivated!==i&&(r.lastActivated&&c.removeClass(r.lastActivated.element,o),i&&c.addClass(i.element,o),r.lastActivated=i)};l[t]=r={lastActivated:null,scope:e,watchFn:s,compareWithExp:i,watcher:e.$watch(i,s)}}r.watchFn(e.$eval(i))}(t,n)}),n.$on("$destroy",r)};function r(t){var e=t.targetScope,n=o.indexOf(e);if(o.splice(n,1),a.splice(n,1),o.length){var i=o[0];angular.forEach(l,function(t){t.scope===e&&(t.watcher=i.$watch(t.compareWithExp,t.watchFn),t.scope=i)})}else l={}}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(s,t,e,n,i,o,r,a,l,u,c){var h=this,d={$setViewValue:angular.noop},p={},f=[];t.datepickerOptions;s.datepickerOptions||(s.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(e){switch(e){case"customClass":case"dateDisabled":s[e]=s.datepickerOptions[e]||angular.noop;break;case"datepickerMode":s.datepickerMode=angular.isDefined(s.datepickerOptions.datepickerMode)?s.datepickerOptions.datepickerMode:a.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":h[e]=angular.isDefined(s.datepickerOptions[e])?n(s.datepickerOptions[e])(s.$parent):a[e];break;case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":h[e]=angular.isDefined(s.datepickerOptions[e])?s.datepickerOptions[e]:a[e];break;case"startingDay":angular.isDefined(s.datepickerOptions.startingDay)?h.startingDay=s.datepickerOptions.startingDay:angular.isNumber(a.startingDay)?h.startingDay=a.startingDay:h.startingDay=(i.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":s.$watch("datepickerOptions."+e,function(t){t?angular.isDate(t)?h[e]=c.fromTimezone(new Date(t),p.timezone):(l&&o.warn("Literal date support has been deprecated, please switch to date object usage"),h[e]=new Date(r(t,"medium"))):h[e]=a[e]?c.fromTimezone(new Date(a[e]),p.timezone):null,h.refreshView()});break;case"maxMode":case"minMode":s.datepickerOptions[e]?s.$watch(function(){return s.datepickerOptions[e]},function(t){h[e]=s[e]=angular.isDefined(t)?t:datepickerOptions[e],("minMode"===e&&h.modes.indexOf(s.datepickerOptions.datepickerMode)<h.modes.indexOf(h[e])||"maxMode"===e&&h.modes.indexOf(s.datepickerOptions.datepickerMode)>h.modes.indexOf(h[e]))&&(s.datepickerMode=h[e],s.datepickerOptions.datepickerMode=h[e])}):h[e]=s[e]=a[e]||null}}),s.uniqueId="datepicker-"+s.$id+"-"+Math.floor(1e4*Math.random()),s.disabled=angular.isDefined(t.disabled)||!1,angular.isDefined(t.ngDisabled)&&f.push(s.$parent.$watch(t.ngDisabled,function(t){s.disabled=t,h.refreshView()})),s.isActive=function(t){return 0===h.compare(t.date,h.activeDate)&&(s.activeDateId=t.uid,!0)},this.init=function(t){p=(d=t).$options||a.ngModelOptions,s.datepickerOptions.initDate?(h.activeDate=c.fromTimezone(s.datepickerOptions.initDate,p.timezone)||new Date,s.$watch("datepickerOptions.initDate",function(t){t&&(d.$isEmpty(d.$modelValue)||d.$invalid)&&(h.activeDate=c.fromTimezone(t,p.timezone),h.refreshView())})):h.activeDate=new Date,this.activeDate=d.$modelValue?c.fromTimezone(new Date(d.$modelValue),p.timezone):c.fromTimezone(new Date,p.timezone),d.$render=function(){h.render()}},this.render=function(){if(d.$viewValue){var t=new Date(d.$viewValue);!isNaN(t)?this.activeDate=c.fromTimezone(t,p.timezone):u||o.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){s.selectedDt=null,this._refreshView(),s.activeDt&&(s.activeDateId=s.activeDt.uid);var t=d.$viewValue?new Date(d.$viewValue):null;t=c.fromTimezone(t,p.timezone),d.$setValidity("dateDisabled",!t||this.element&&!this.isDisabled(t))}},this.createDateObject=function(t,e){var n=d.$viewValue?new Date(d.$viewValue):null;n=c.fromTimezone(n,p.timezone);var i=new Date;i=c.fromTimezone(i,p.timezone);var o=this.compare(t,i),r={date:t,label:c.filter(t,e),selected:n&&0===this.compare(t,n),disabled:this.isDisabled(t),past:o<0,current:0===o,future:0<o,customClass:this.customClass(t)||null};return n&&0===this.compare(t,n)&&(s.selectedDt=r),h.activeDate&&0===this.compare(r.date,h.activeDate)&&(s.activeDt=r),r},this.isDisabled=function(t){return s.disabled||this.minDate&&this.compare(t,this.minDate)<0||this.maxDate&&0<this.compare(t,this.maxDate)||s.dateDisabled&&s.dateDisabled({date:t,mode:s.datepickerMode})},this.customClass=function(t){return s.customClass({date:t,mode:s.datepickerMode})},this.split=function(t,e){for(var n=[];0<t.length;)n.push(t.splice(0,e));return n},s.select=function(t){if(s.datepickerMode===h.minMode){var e=d.$viewValue?c.fromTimezone(new Date(d.$viewValue),p.timezone):new Date(0,0,0,0,0,0,0);e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e=c.toTimezone(e,p.timezone),d.$setViewValue(e),d.$render()}else h.activeDate=t,m(h.modes[h.modes.indexOf(s.datepickerMode)-1]),s.$emit("uib:datepicker.mode");s.$broadcast("uib:datepicker.focus")},s.move=function(t){var e=h.activeDate.getFullYear()+t*(h.step.years||0),n=h.activeDate.getMonth()+t*(h.step.months||0);h.activeDate.setFullYear(e,n,1),h.refreshView()},s.toggleMode=function(t){t=t||1,s.datepickerMode===h.maxMode&&1===t||s.datepickerMode===h.minMode&&-1===t||(m(h.modes[h.modes.indexOf(s.datepickerMode)+t]),s.$emit("uib:datepicker.mode"))},s.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};function m(t){s.datepickerMode=t,s.datepickerOptions.datepickerMode=t}s.$on("uib:datepicker.focus",function(){h.element[0].focus()}),s.keydown=function(t){var e=s.keys[t.which];if(e&&!t.shiftKey&&!t.altKey&&!s.disabled)if(t.preventDefault(),h.shortcutPropagation||t.stopPropagation(),"enter"===e||"space"===e){if(h.isDisabled(h.activeDate))return;s.select(h.activeDate)}else!t.ctrlKey||"up"!==e&&"down"!==e?(h.handleKeyDown(e,t),h.refreshView()):s.toggleMode("up"===e?1:-1)},s.$on("$destroy",function(){for(;f.length;)f.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(d,t,p){var n=[31,28,31,30,31,30,31,31,30,31,30,31];function o(t,e){return 1!==e||t%4!=0||t%100==0&&t%400!=0?n[e]:29}function f(t){var e=new Date(t);e.setDate(e.getDate()+4-(e.getDay()||7));var n=e.getTime();return e.setMonth(0),e.setDate(1),Math.floor(Math.round((n-e)/864e5)/7)+1}this.step={months:1},this.element=t,this.init=function(t){angular.extend(t,this),d.showWeeks=t.showWeeks,t.refreshView()},this.getDates=function(t,e){for(var n,i=new Array(e),o=new Date(t),r=0;r<e;)n=new Date(o),i[r++]=n,o.setDate(o.getDate()+1);return i},this._refreshView=function(){var t=this.activeDate.getFullYear(),e=this.activeDate.getMonth(),n=new Date(this.activeDate);n.setFullYear(t,e,1);var i=this.startingDay-n.getDay(),o=0<i?7-i:-i,r=new Date(n);0<o&&r.setDate(1-o);for(var s=this.getDates(r,42),a=0;a<42;a++)s[a]=angular.extend(this.createDateObject(s[a],this.formatDay),{secondary:s[a].getMonth()!==e,uid:d.uniqueId+"-"+a});d.labels=new Array(7);for(var l=0;l<7;l++)d.labels[l]={abbr:p(s[l].date,this.formatDayHeader),full:p(s[l].date,"EEEE")};if(d.title=p(this.activeDate,this.formatDayTitle),d.rows=this.split(s,7),d.showWeeks){d.weekNumbers=[];for(var u=(11-this.startingDay)%7,c=d.rows.length,h=0;h<c;h++)d.weekNumbers.push(f(d.rows[h][u].date))}},this.compare=function(t,e){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate());return n.setFullYear(t.getFullYear()),i.setFullYear(e.getFullYear()),n-i},this.handleKeyDown=function(t,e){var n=this.activeDate.getDate();if("left"===t)n-=1;else if("up"===t)n-=7;else if("right"===t)n+=1;else if("down"===t)n+=7;else if("pageup"===t||"pagedown"===t){var i=this.activeDate.getMonth()+("pageup"===t?-1:1);this.activeDate.setMonth(i,1),n=Math.min(o(this.activeDate.getFullYear(),this.activeDate.getMonth()),n)}else"home"===t?n=1:"end"===t&&(n=o(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(n)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(o,t,r){this.step={years:1},this.element=t,this.init=function(t){angular.extend(t,this),t.refreshView()},this._refreshView=function(){for(var t,e=new Array(12),n=this.activeDate.getFullYear(),i=0;i<12;i++)(t=new Date(this.activeDate)).setFullYear(n,i,1),e[i]=angular.extend(this.createDateObject(t,this.formatMonth),{uid:o.uniqueId+"-"+i});o.title=r(this.activeDate,this.formatMonthTitle),o.rows=this.split(e,3)},this.compare=function(t,e){var n=new Date(t.getFullYear(),t.getMonth()),i=new Date(e.getFullYear(),e.getMonth());return n.setFullYear(t.getFullYear()),i.setFullYear(e.getFullYear()),n-i},this.handleKeyDown=function(t,e){var n=this.activeDate.getMonth();if("left"===t)n-=1;else if("up"===t)n-=3;else if("right"===t)n+=1;else if("down"===t)n+=3;else if("pageup"===t||"pagedown"===t){var i=this.activeDate.getFullYear()+("pageup"===t?-1:1);this.activeDate.setFullYear(i)}else"home"===t?n=0:"end"===t&&(n=11);this.activeDate.setMonth(n)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(o,t,e){var r,s;function a(t){return parseInt((t-1)/s,10)*s+1}this.element=t,this.yearpickerInit=function(){r=this.yearColumns,s=this.yearRows*r,this.step={years:s}},this._refreshView=function(){for(var t,e=new Array(s),n=0,i=a(this.activeDate.getFullYear());n<s;n++)(t=new Date(this.activeDate)).setFullYear(i+n,0,1),e[n]=angular.extend(this.createDateObject(t,this.formatYear),{uid:o.uniqueId+"-"+n});o.title=[e[0].label,e[s-1].label].join(" - "),o.rows=this.split(e,r),o.columns=r},this.compare=function(t,e){return t.getFullYear()-e.getFullYear()},this.handleKeyDown=function(t,e){var n=this.activeDate.getFullYear();"left"===t?n-=1:"up"===t?n-=r:"right"===t?n+=1:"down"===t?n+=r:"pageup"===t||"pagedown"===t?n+=("pageup"===t?-1:1)*s:"home"===t?n=a(this.activeDate.getFullYear()):"end"===t&&(n=a(this.activeDate.getFullYear())+s-1),this.activeDate.setFullYear(n)}}]).directive("uibDatepicker",function(){return{replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function(t,e,n,i){var o=i[0],r=i[1];o.init(r)}}}).directive("uibDaypicker",function(){return{replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],controller:"UibDaypickerController",link:function(t,e,n,i){var o=i[0];i[1].init(o)}}}).directive("uibMonthpicker",function(){return{replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],controller:"UibMonthpickerController",link:function(t,e,n,i){var o=i[0];i[1].init(o)}}}).directive("uibYearpicker",function(){return{replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],controller:"UibYearpickerController",link:function(t,e,n,i){var o=i[0];angular.extend(o,i[1]),o.yearpickerInit(),o.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(u,f){var i,o,c={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},m={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},s=/(HTML|BODY)/;return{getRawNode:function(t){return t.nodeName?t:t[0]||t},parseStyle:function(t){return t=parseFloat(t),isFinite(t)?t:0},offsetParent:function(t){var e,n=(t=this.getRawNode(t)).offsetParent||u[0].documentElement;for(;n&&n!==u[0].documentElement&&(e=n,"static"===(f.getComputedStyle(e).position||"static"));)n=n.offsetParent;return n||u[0].documentElement},scrollbarWidth:function(t){if(t){if(angular.isUndefined(o)){var e=u.find("body");e.addClass("uib-position-body-scrollbar-measure"),o=f.innerWidth-e[0].clientWidth,o=isFinite(o)?o:0,e.removeClass("uib-position-body-scrollbar-measure")}return o}if(angular.isUndefined(i)){var n=angular.element('<div class="uib-position-scrollbar-measure"></div>');u.find("body").append(n),i=n[0].offsetWidth-n[0].clientWidth,i=isFinite(i)?i:0,n.remove()}return i},scrollbarPadding:function(t){t=this.getRawNode(t);var e=f.getComputedStyle(t),n=this.parseStyle(e.paddingRight),i=this.parseStyle(e.paddingBottom),o=this.scrollParent(t,!1,!0),r=this.scrollbarWidth(o,s.test(o.tagName));return{scrollbarWidth:r,widthOverflow:o.scrollWidth>o.clientWidth,right:n+r,originalRight:n,heightOverflow:o.scrollHeight>o.clientHeight,bottom:i+r,originalBottom:i}},isScrollable:function(t,e){t=this.getRawNode(t);var n=e?c.hidden:c.normal,i=f.getComputedStyle(t);return n.test(i.overflow+i.overflowY+i.overflowX)},scrollParent:function(t,e,n){t=this.getRawNode(t);var i=e?c.hidden:c.normal,o=u[0].documentElement,r=f.getComputedStyle(t);if(n&&i.test(r.overflow+r.overflowY+r.overflowX))return t;var s="absolute"===r.position,a=t.parentElement||o;if(a===o||"fixed"===r.position)return o;for(;a.parentElement&&a!==o;){var l=f.getComputedStyle(a);if(s&&"static"!==l.position&&(s=!1),!s&&i.test(l.overflow+l.overflowY+l.overflowX))break;a=a.parentElement}return a},position:function(t,e){t=this.getRawNode(t);var n=this.offset(t);if(e){var i=f.getComputedStyle(t);n.top-=this.parseStyle(i.marginTop),n.left-=this.parseStyle(i.marginLeft)}var o=this.offsetParent(t),r={top:0,left:0};return o!==u[0].documentElement&&((r=this.offset(o)).top+=o.clientTop-o.scrollTop,r.left+=o.clientLeft-o.scrollLeft),{width:Math.round(angular.isNumber(n.width)?n.width:t.offsetWidth),height:Math.round(angular.isNumber(n.height)?n.height:t.offsetHeight),top:Math.round(n.top-r.top),left:Math.round(n.left-r.left)}},offset:function(t){var e=(t=this.getRawNode(t)).getBoundingClientRect();return{width:Math.round(angular.isNumber(e.width)?e.width:t.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:t.offsetHeight),top:Math.round(e.top+(f.pageYOffset||u[0].documentElement.scrollTop)),left:Math.round(e.left+(f.pageXOffset||u[0].documentElement.scrollLeft))}},viewportOffset:function(t,e,n){n=!1!==n;var i=(t=this.getRawNode(t)).getBoundingClientRect(),o={top:0,left:0,bottom:0,right:0},r=e?u[0].documentElement:this.scrollParent(t),s=r.getBoundingClientRect();if(o.top=s.top+r.clientTop,o.left=s.left+r.clientLeft,r===u[0].documentElement&&(o.top+=f.pageYOffset,o.left+=f.pageXOffset),o.bottom=o.top+r.clientHeight,o.right=o.left+r.clientWidth,n){var a=f.getComputedStyle(r);o.top+=this.parseStyle(a.paddingTop),o.bottom-=this.parseStyle(a.paddingBottom),o.left+=this.parseStyle(a.paddingLeft),o.right-=this.parseStyle(a.paddingRight)}return{top:Math.round(i.top-o.top),bottom:Math.round(o.bottom-i.bottom),left:Math.round(i.left-o.left),right:Math.round(o.right-i.right)}},parsePlacement:function(t){var e=m.auto.test(t);return e&&(t=t.replace(m.auto,"")),(t=t.split("-"))[0]=t[0]||"top",m.primary.test(t[0])||(t[0]="top"),t[1]=t[1]||"center",m.secondary.test(t[1])||(t[1]="center"),t[2]=!!e,t},positionElements:function(t,e,n,i){t=this.getRawNode(t),e=this.getRawNode(e);var o=angular.isDefined(e.offsetWidth)?e.offsetWidth:e.prop("offsetWidth"),r=angular.isDefined(e.offsetHeight)?e.offsetHeight:e.prop("offsetHeight");n=this.parsePlacement(n);var s=i?this.offset(t):this.position(t),a={top:0,left:0,placement:""};if(n[2]){var l=this.viewportOffset(t,i),u=f.getComputedStyle(e),c=o+Math.round(Math.abs(this.parseStyle(u.marginLeft)+this.parseStyle(u.marginRight))),h=r+Math.round(Math.abs(this.parseStyle(u.marginTop)+this.parseStyle(u.marginBottom)));if(n[0]="top"===n[0]&&h>l.top&&h<=l.bottom?"bottom":"bottom"===n[0]&&h>l.bottom&&h<=l.top?"top":"left"===n[0]&&c>l.left&&c<=l.right?"right":"right"===n[0]&&c>l.right&&c<=l.left?"left":n[0],n[1]="top"===n[1]&&h-s.height>l.bottom&&h-s.height<=l.top?"bottom":"bottom"===n[1]&&h-s.height>l.top&&h-s.height<=l.bottom?"top":"left"===n[1]&&c-s.width>l.right&&c-s.width<=l.left?"right":"right"===n[1]&&c-s.width>l.left&&c-s.width<=l.right?"left":n[1],"center"===n[1])if(m.vertical.test(n[0])){var d=s.width/2-o/2;l.left+d<0&&c-s.width<=l.right?n[1]="left":l.right+d<0&&c-s.width<=l.left&&(n[1]="right")}else{var p=s.height/2-h/2;l.top+p<0&&h-s.height<=l.bottom?n[1]="top":l.bottom+p<0&&h-s.height<=l.top&&(n[1]="bottom")}}switch(n[0]){case"top":a.top=s.top-r;break;case"bottom":a.top=s.top+s.height;break;case"left":a.left=s.left-o;break;case"right":a.left=s.left+s.width}switch(n[1]){case"top":a.top=s.top;break;case"bottom":a.top=s.top+s.height-r;break;case"left":a.left=s.left;break;case"right":a.left=s.left+s.width-o;break;case"center":m.vertical.test(n[0])?a.left=s.left+s.width/2-o/2:a.top=s.top+s.height/2-r/2}return a.top=Math.round(a.top),a.left=Math.round(a.left),a.placement="center"===n[1]?n[0]:n[0]+"-"+n[1],a},positionArrow:function(t,e){var n=(t=this.getRawNode(t)).querySelector(".tooltip-inner, .popover-inner");if(n){var i=angular.element(n).hasClass("tooltip-inner"),o=i?t.querySelector(".tooltip-arrow"):t.querySelector(".arrow");if(o){var r={top:"",bottom:"",left:"",right:""};if("center"!==(e=this.parsePlacement(e))[1]){var s="border-"+e[0]+"-width",a=f.getComputedStyle(o)[s],l="border-";m.vertical.test(e[0])?l+=e[0]+"-"+e[1]:l+=e[1]+"-"+e[0],l+="-radius";var u=f.getComputedStyle(i?n:t)[l];switch(e[0]){case"top":r.bottom=i?"0":"-"+a;break;case"bottom":r.top=i?"0":"-"+a;break;case"left":r.right=i?"0":"-"+a;break;case"right":r.left=i?"0":"-"+a}r[e[1]]=u,angular.element(o).css(r)}else angular.element(o).css(r)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(o,r,i,e,n,t,s,a,l,u,c,h,d,p,f,m){var g,v,y,b,_,w,x,C,k,$,T,S,M,D,L=!1,E=[];function P(t){var e=h.parse(t,g,o.date);if(isNaN(e))for(var n=0;n<M.length;n++)if(e=h.parse(t,M[n],o.date),!isNaN(e))return e;return e}function A(t){if(angular.isNumber(t)&&(t=new Date(t)),!t)return null;if(angular.isDate(t)&&!isNaN(t))return t;if(angular.isString(t)){var e=P(t);if(!isNaN(e))return h.toTimezone(e,D)}return $.$options&&$.$options.allowInvalid?t:void 0}function O(t,e){var n=t||e;return!i.ngRequired&&!n||(angular.isNumber(n)&&(n=new Date(n)),!n||(!(!angular.isDate(n)||isNaN(n))||!!angular.isString(n)&&!isNaN(P(e))))}function I(t){if(o.isOpen||!o.disabled){var e=S[0],n=r[0].contains(t.target),i=void 0!==e.contains&&e.contains(t.target);!o.isOpen||n||i||o.$apply(function(){o.isOpen=!1})}}function N(t){27===t.which&&o.isOpen?(t.preventDefault(),t.stopPropagation(),o.$apply(function(){o.isOpen=!1}),r[0].focus()):40!==t.which||o.isOpen||(t.preventDefault(),t.stopPropagation(),o.$apply(function(){o.isOpen=!0}))}function R(){if(o.isOpen){var t=angular.element(S[0].querySelector(".uib-datepicker-popup")),e=i.popupPlacement?i.popupPlacement:d.placement,n=u.positionElements(r,t,e,y);t.css({top:n.top+"px",left:n.left+"px"}),t.hasClass("uib-position-measure")&&t.removeClass("uib-position-measure")}}this.init=function(t){if(T=($=t).$options,v=angular.isDefined(i.closeOnDateSelection)?o.$parent.$eval(i.closeOnDateSelection):d.closeOnDateSelection,y=angular.isDefined(i.datepickerAppendToBody)?o.$parent.$eval(i.datepickerAppendToBody):d.appendToBody,b=angular.isDefined(i.onOpenFocus)?o.$parent.$eval(i.onOpenFocus):d.onOpenFocus,_=angular.isDefined(i.datepickerPopupTemplateUrl)?i.datepickerPopupTemplateUrl:d.datepickerPopupTemplateUrl,w=angular.isDefined(i.datepickerTemplateUrl)?i.datepickerTemplateUrl:d.datepickerTemplateUrl,M=angular.isDefined(i.altInputFormats)?o.$parent.$eval(i.altInputFormats):d.altInputFormats,o.showButtonBar=angular.isDefined(i.showButtonBar)?o.$parent.$eval(i.showButtonBar):d.showButtonBar,d.html5Types[i.type]?(g=d.html5Types[i.type],L=!0):(g=i.uibDatepickerPopup||d.datepickerPopup,i.$observe("uibDatepickerPopup",function(t,e){var n=t||d.datepickerPopup;if(n!==g&&(g=n,$.$modelValue=null,!g))throw new Error("uibDatepickerPopup must have a date format specified.")})),!g)throw new Error("uibDatepickerPopup must have a date format specified.");if(L&&i.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");x=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),T?(D=T.timezone,o.ngModelOptions=angular.copy(T),!(o.ngModelOptions.timezone=null)===o.ngModelOptions.updateOnDefault&&(o.ngModelOptions.updateOn=o.ngModelOptions.updateOn?o.ngModelOptions.updateOn+" default":"default"),x.attr("ng-model-options","ngModelOptions")):D=null,x.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":_}),(C=angular.element(x.children()[0])).attr("template-url",w),o.datepickerOptions||(o.datepickerOptions={}),L&&"month"===i.type&&(o.datepickerOptions.datepickerMode="month",o.datepickerOptions.minMode="month"),C.attr("datepicker-options","datepickerOptions"),L?$.$formatters.push(function(t){return o.date=h.fromTimezone(t,D),t}):($.$$parserName="date",$.$validators.date=O,$.$parsers.unshift(A),$.$formatters.push(function(t){return $.$isEmpty(t)?o.date=t:(o.date=h.fromTimezone(t,D),angular.isNumber(o.date)&&(o.date=new Date(o.date)),h.filter(o.date,g))})),$.$viewChangeListeners.push(function(){o.date=P($.$viewValue)}),r.on("keydown",N),S=e(x)(o),x.remove(),y?a.find("body").append(S):r.after(S),o.$on("$destroy",function(){for(!0===o.isOpen&&(l.$$phase||o.$apply(function(){o.isOpen=!1})),S.remove(),r.off("keydown",N),a.off("click",I),k&&k.off("scroll",R),angular.element(s).off("resize",R);E.length;)E.shift()()})},o.getText=function(t){return o[t+"Text"]||d[t+"Text"]},o.isDisabled=function(t){"today"===t&&(t=h.fromTimezone(new Date,D));var e={};return angular.forEach(["minDate","maxDate"],function(t){o.datepickerOptions[t]?angular.isDate(o.datepickerOptions[t])?e[t]=h.fromTimezone(new Date(o.datepickerOptions[t]),D):(m&&n.warn("Literal date support has been deprecated, please switch to date object usage"),e[t]=new Date(c(o.datepickerOptions[t],"medium"))):e[t]=null}),o.datepickerOptions&&e.minDate&&o.compare(t,e.minDate)<0||e.maxDate&&0<o.compare(t,e.maxDate)},o.compare=function(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate())-new Date(e.getFullYear(),e.getMonth(),e.getDate())},o.dateSelection=function(t){angular.isDefined(t)&&(o.date=t);var e=o.date?h.filter(o.date,g):null;r.val(e),$.$setViewValue(e),v&&(o.isOpen=!1,r[0].focus())},o.keydown=function(t){27===t.which&&(t.stopPropagation(),o.isOpen=!1,r[0].focus())},o.select=function(t,e){if(e.stopPropagation(),"today"===t){var n=new Date;angular.isDate(o.date)?(t=new Date(o.date)).setFullYear(n.getFullYear(),n.getMonth(),n.getDate()):t=new Date(n.setHours(0,0,0,0))}o.dateSelection(t)},o.close=function(t){t.stopPropagation(),o.isOpen=!1,r[0].focus()},o.disabled=angular.isDefined(i.disabled)||!1,i.ngDisabled&&E.push(o.$parent.$watch(t(i.ngDisabled),function(t){o.disabled=t})),o.$watch("isOpen",function(t){t?o.disabled?o.isOpen=!1:p(function(){R(),b&&o.$broadcast("uib:datepicker.focus"),a.on("click",I);var t=i.popupPlacement?i.popupPlacement:d.placement;y||u.parsePlacement(t)[2]?(k=k||angular.element(u.scrollParent(r)))&&k.on("scroll",R):k=null,angular.element(s).on("resize",R)},0,!1):(a.off("click",I),k&&k.off("scroll",R),angular.element(s).off("resize",R))}),o.$on("uib:datepicker.mode",function(){p(R,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(t,e,n,i){var o=i[0];i[1].init(o)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(r){return function(n,i){var o;return function(){var t=this,e=Array.prototype.slice.call(arguments);o&&r.cancel(o),o=r(function(){n.apply(t,e)},i)}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(n,i){var o=null;this.open=function(t,e){o||(n.on("click",r),e.on("keydown",s)),o&&o!==t&&(o.isOpen=!1),o=t},this.close=function(t,e){o===t&&(o=null,n.off("click",r),e.off("keydown",s))};var r=function(t){if(o&&!(t&&"disabled"===o.getAutoClose()||t&&3===t.which)){var e=o.getToggleElement();if(!(t&&e&&e[0].contains(t.target))){var n=o.getDropdownElement();t&&"outsideClick"===o.getAutoClose()&&n&&n[0].contains(t.target)||(o.isOpen=!1,i.$$phase||o.$apply())}}},s=function(t){27===t.which?(t.stopPropagation(),o.focusToggleElement(),r()):o.isKeynavEnabled()&&-1!==[38,40].indexOf(t.which)&&o.isOpen&&(t.preventDefault(),t.stopPropagation(),o.focusDropdownEntry(t.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(l,u,e,n,t,c,h,d,i,p,f){var m,o,g=this,v=l.$new(),y=t.appendToOpenClass,b=t.openClass,_=angular.noop,w=e.onToggle?n(e.onToggle):angular.noop,x=!1,C=null,r=!1,s=i.find("body");u.addClass("dropdown"),this.init=function(){if(e.isOpen&&(o=n(e.isOpen),_=o.assign,l.$watch(o,function(t){v.isOpen=!!t})),angular.isDefined(e.dropdownAppendTo)){var t=n(e.dropdownAppendTo)(v);t&&(C=angular.element(t))}x=angular.isDefined(e.dropdownAppendToBody),r=angular.isDefined(e.keyboardNav),x&&!C&&(C=s),C&&g.dropdownMenu&&(C.append(g.dropdownMenu),u.on("$destroy",function(){g.dropdownMenu.remove()}))},this.toggle=function(t){return v.isOpen=arguments.length?!!t:!v.isOpen,angular.isFunction(_)&&_(v,v.isOpen),v.isOpen},this.isOpen=function(){return v.isOpen},v.getToggleElement=function(){return g.toggleElement},v.getAutoClose=function(){return e.autoClose||"always"},v.getElement=function(){return u},v.isKeynavEnabled=function(){return r},v.focusDropdownEntry=function(t){var e=g.dropdownMenu?angular.element(g.dropdownMenu).find("a"):u.find("ul").eq(0).find("a");switch(t){case 40:angular.isNumber(g.selectedOption)?g.selectedOption=g.selectedOption===e.length-1?g.selectedOption:g.selectedOption+1:g.selectedOption=0;break;case 38:angular.isNumber(g.selectedOption)?g.selectedOption=0===g.selectedOption?0:g.selectedOption-1:g.selectedOption=e.length-1}e[g.selectedOption].focus()},v.getDropdownElement=function(){return g.dropdownMenu},v.focusToggleElement=function(){g.toggleElement&&g.toggleElement[0].focus()},v.$watch("isOpen",function(t,e){if(C&&g.dropdownMenu){var n,i,o=d.positionElements(u,g.dropdownMenu,"bottom-left",!0);if(n={top:o.top+"px",display:t?"block":"none"},i=g.dropdownMenu.hasClass("dropdown-menu-right"),n.right=i?(n.left="auto",window.innerWidth-(o.left+u.prop("offsetWidth"))+"px"):(n.left=o.left+"px","auto"),!x){var r=d.offset(C);n.top=o.top-r.top+"px",i?n.right=window.innerWidth-(o.left-r.left+u.prop("offsetWidth"))+"px":n.left=o.left-r.left+"px"}g.dropdownMenu.css(n)}var s=C||u;if(s.hasClass(C?y:b)===!t&&h[t?"addClass":"removeClass"](s,C?y:b).then(function(){angular.isDefined(t)&&t!==e&&w(l,{open:!!t})}),t)g.dropdownMenuTemplateUrl&&f(g.dropdownMenuTemplateUrl).then(function(t){m=v.$new(),p(t.trim())(m,function(t){var e=t;g.dropdownMenu.replaceWith(e),g.dropdownMenu=e})}),v.focusToggleElement(),c.open(v,u);else{if(g.dropdownMenuTemplateUrl){m&&m.$destroy();var a=angular.element('<ul class="dropdown-menu"></ul>');g.dropdownMenu.replaceWith(a),g.dropdownMenu=a}c.close(v,u),g.selectedOption=null}angular.isFunction(_)&&_(l,t)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(t,e,n,i){i.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(t,e,n,i){if(i&&!angular.isDefined(n.dropdownNested)){e.addClass("dropdown-menu");var o=n.templateUrl;o&&(i.dropdownMenuTemplateUrl=o),i.dropdownMenu||(i.dropdownMenu=e)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(e,n,i,o){if(o){n.addClass("dropdown-toggle"),o.toggleElement=n;var t=function(t){t.preventDefault(),n.hasClass("disabled")||i.disabled||e.$apply(function(){o.toggle()})};n.bind("click",t),n.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(o.isOpen,function(t){n.attr("aria-expanded",!!t)}),e.$on("$destroy",function(){n.unbind("click",t)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var i=[];return{add:function(t,e){i.push({key:t,value:e})},get:function(t){for(var e=0;e<i.length;e++)if(t===i[e].key)return i[e]},keys:function(){for(var t=[],e=0;e<i.length;e++)t.push(i[e].key);return t},top:function(){return i[i.length-1]},remove:function(t){for(var e=-1,n=0;n<i.length;n++)if(t===i[n].key){e=n;break}return i.splice(e,1)[0]},removeTop:function(){return i.splice(i.length-1,1)[0]},length:function(){return i.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap","ui.bootstrap.position"]).factory("$$multiMap",function(){return{createNew:function(){var o={};return{entries:function(){return Object.keys(o).map(function(t){return{key:t,value:o[t]}})},get:function(t){return o[t]},hasKey:function(t){return!!o[t]},keys:function(){return Object.keys(o)},put:function(t,e){o[t]||(o[t]=[]),o[t].push(e)},remove:function(t,e){var n=o[t];if(n){var i=n.indexOf(e);-1!==i&&n.splice(i,1),n.length||delete o[t]}}}}}}).provider("$uibResolve",function(){var t=this;this.resolver=null,this.setResolver=function(t){this.resolver=t},this.$get=["$injector","$q",function(r,s){var a=t.resolver?r.get(t.resolver):null;return{resolve:function(t,e,n,i){if(a)return a.resolve(t,e,n,i);var o=[];return angular.forEach(t,function(t){angular.isFunction(t)||angular.isArray(t)?o.push(s.resolve(r.invoke(t))):angular.isString(t)?o.push(s.resolve(r.get(t))):o.push(s.resolve(t))}),s.all(o).then(function(n){var i={},o=0;return angular.forEach(t,function(t,e){i[e]=n[o++]}),i})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(s,t,e){return{replace:!0,templateUrl:"uib/template/modal/backdrop.html",compile:function(t,e){return t.addClass(e.backdropClass),n}};function n(i,o,r){r.modalInClass&&(s.addClass(o,r.modalInClass),i.$on(e.NOW_CLOSING_EVENT,function(t,e){var n=e();i.modalOptions.animation?s.removeClass(o,r.modalInClass).then(n):n()}))}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(r,s,a,l){return{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/modal/window.html"},link:function(e,i,o){i.addClass(o.windowClass||""),i.addClass(o.windowTopClass||""),e.size=o.size,e.close=function(t){var e=r.getTop();e&&e.value.backdrop&&"static"!==e.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),r.dismiss(e.key,"backdrop click"))},i.on("click",e.close),e.$isRendered=!0;var n=s.defer();o.$observe("modalRender",function(t){"true"===t&&n.resolve()}),n.promise.then(function(){var t=null;o.modalInClass&&(t=a(i,{addClass:o.modalInClass}).start(),e.$on(r.NOW_CLOSING_EVENT,function(t,e){var n=e();a(i,{removeClass:o.modalInClass}).start().then(n)})),s.when(t).then(function(){var t=r.getTop();if(t&&r.modalRendered(t.key),!l[0].activeElement||!i[0].contains(l[0].activeElement)){var e=i[0].querySelector("[autofocus]");e?e.focus():i[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(t,e){e.modalAnimation&&t.addClass(e.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function(t,e,n,i,o){o(t.$parent,function(t){e.empty(),e.append(t)})}}}).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(a,t,l,u,c,s,e,n,h){var d,p,f,m="modal-open",g=n.createNew(),v=e.createNew(),y={NOW_CLOSING_EVENT:"modal.stack.now-closing"},b=0,_=null;function w(){for(var t=-1,e=g.keys(),n=0;n<e.length;n++)g.get(e[n]).value.backdrop&&(t=n);return-1<t&&t<b&&(t=b),t}function i(n,t){var i=g.get(n).value,o=i.appendTo;g.remove(n),(_=g.top())&&(b=parseInt(_.value.modalDomEl.attr("index"),10)),r(i.modalDomEl,i.modalScope,function(){var t=i.openedClass||m;v.remove(t,n);var e=v.hasKey(t);o.toggleClass(t,e),!e&&f&&f.heightOverflow&&f.scrollbarWidth&&(f.originalRight?o.css({paddingRight:f.originalRight+"px"}):o.css({paddingRight:""}),f=null),x(!0)},i.closedDeferred),function(){if(d&&-1===w()){r(d,p,function(){null}),p=d=void 0}}(),t&&t.focus?t.focus():o.focus&&o.focus()}function x(t){var e;0<g.length()&&(e=g.top().value).modalDomEl.toggleClass(e.windowTopClass||"",t)}function r(e,n,i,o){var t,r=null;return n.$broadcast(y.NOW_CLOSING_EVENT,function(){return t||(t=s.defer(),r=t.promise),function(){t.resolve()}}),s.when(r).then(function t(){if(t.done)return;t.done=!0;a.leave(e).then(function(){e.remove(),o&&o.resolve()});n.$destroy();i&&i()})}function o(t){if(t.isDefaultPrevented())return t;var e=g.top();if(e)switch(t.which){case 27:e.value.keyboard&&(t.preventDefault(),c.$apply(function(){y.dismiss(e.key,"escape key press")}));break;case 9:var n=y.loadFocusElementList(e),i=!1;t.shiftKey?(y.isFocusInFirstItem(t,n)||y.isModalFocused(t,e))&&(i=y.focusLastFocusableElement(n)):y.isFocusInLastItem(t,n)&&(i=y.focusFirstFocusableElement(n)),i&&(t.preventDefault(),t.stopPropagation())}}function C(t,e,n){return!t.value.modalScope.$broadcast("modal.closing",e,n).defaultPrevented}return c.$watch(w,function(t){p&&(p.index=t)}),l.on("keydown",o),c.$on("$destroy",function(){l.off("keydown",o)}),y.open=function(t,e){var n=l[0].activeElement,i=e.openedClass||m;x(!1),_=g.top(),g.add(t,{deferred:e.deferred,renderDeferred:e.renderDeferred,closedDeferred:e.closedDeferred,modalScope:e.scope,backdrop:e.backdrop,keyboard:e.keyboard,openedClass:e.openedClass,windowTopClass:e.windowTopClass,animation:e.animation,appendTo:e.appendTo}),v.put(i,t);var o=e.appendTo,r=w();if(!o.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");0<=r&&!d&&((p=c.$new(!0)).modalOptions=e,p.index=r,(d=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>')).attr("backdrop-class",e.backdropClass),e.animation&&d.attr("modal-animation","true"),u(d)(p),a.enter(d,o),(f=h.scrollbarPadding(o)).heightOverflow&&f.scrollbarWidth&&o.css({paddingRight:f.right+"px"})),b=_?parseInt(_.value.modalDomEl.attr("index"),10)+1:0;var s=angular.element('<div uib-modal-window="modal-window"></div>');s.attr({"template-url":e.windowTemplateUrl,"window-class":e.windowClass,"window-top-class":e.windowTopClass,size:e.size,index:b,animate:"animate"}).html(e.content),e.animation&&s.attr("modal-animation","true"),o.addClass(i),a.enter(u(s)(e.scope),o),g.top().value.modalDomEl=s,g.top().value.modalOpener=n},y.close=function(t,e){var n=g.get(t);return n&&C(n,e,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(e),i(t,n.value.modalOpener),!0):!n},y.dismiss=function(t,e){var n=g.get(t);return n&&C(n,e,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(e),i(t,n.value.modalOpener),!0):!n},y.dismissAll=function(t){for(var e=this.getTop();e&&this.dismiss(e.key,t);)e=this.getTop()},y.getTop=function(){return g.top()},y.modalRendered=function(t){var e=g.get(t);e&&e.value.renderDeferred.resolve()},y.focusFirstFocusableElement=function(t){return 0<t.length&&(t[0].focus(),!0)},y.focusLastFocusableElement=function(t){return 0<t.length&&(t[t.length-1].focus(),!0)},y.isModalFocused=function(t,e){if(t&&e){var n=e.value.modalDomEl;if(n&&n.length)return(t.target||t.srcElement)===n[0]}return!1},y.isFocusInFirstItem=function(t,e){return 0<e.length&&(t.target||t.srcElement)===e[0]},y.isFocusInLastItem=function(t,e){return 0<e.length&&(t.target||t.srcElement)===e[e.length-1]},y.loadFocusElementList=function(t){if(t){var e=t.value.modalDomEl;if(e&&e.length){var n=e[0].querySelectorAll("a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]");return n?Array.prototype.filter.call(n,function(t){return!!((e=t).offsetWidth||e.offsetHeight||e.getClientRects().length);var e}):n}}},y}]).provider("$uibModal",function(){var y={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(d,o,r,p,f,m,g){var t={};var v=null;return t.getPromiseChain=function(){return v},t.open=function(s){var a=o.defer(),l=o.defer(),u=o.defer(),c=o.defer(),h={result:a.promise,opened:l.promise,closed:u.promise,rendered:c.promise,close:function(t){return g.close(h,t)},dismiss:function(t){return g.dismiss(h,t)}};if((s=angular.extend({},y.options,s)).resolve=s.resolve||{},s.appendTo=s.appendTo||r.find("body").eq(0),!s.template&&!s.templateUrl)throw new Error("One of template or templateUrl options is required.");var t,e,n=o.all([(t=s,t.template?o.when(t.template):p(angular.isFunction(t.templateUrl)?t.templateUrl():t.templateUrl)),m.resolve(s.resolve,{},null,null)]);function i(){return n}return e=v=o.all([v]).then(i,i).then(function(t){var e=s.scope||d,n=e.$new();n.$close=h.close,n.$dismiss=h.dismiss,n.$on("$destroy",function(){n.$$uibDestructionScheduled||n.$dismiss("$uibUnscheduledDestruction")});var i,o,r={};s.controller&&(r.$scope=n,r.$uibModalInstance=h,angular.forEach(t[1],function(t,e){r[e]=t}),o=f(s.controller,r,!0),s.controllerAs?(i=o.instance,s.bindToController&&(i.$close=n.$close,i.$dismiss=n.$dismiss,angular.extend(i,e)),i=o(),n[s.controllerAs]=i):i=o(),angular.isFunction(i.$onInit)&&i.$onInit()),g.open(h,{scope:n,deferred:a,renderDeferred:c,closedDeferred:u,content:t[0],animation:s.animation,backdrop:s.backdrop,keyboard:s.keyboard,backdropClass:s.backdropClass,windowTopClass:s.windowTopClass,windowClass:s.windowClass,windowTemplateUrl:s.windowTemplateUrl,size:s.size,openedClass:s.openedClass,appendTo:s.appendTo}),l.resolve(!0)},function(t){l.reject(t),a.reject(t)}).finally(function(){v===e&&(v=null)}),h},t}]};return y}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(t){return{create:function(n,i,o){n.setNumPages=o.numPages?t(o.numPages).assign:angular.noop,n.ngModelCtrl={$setViewValue:angular.noop},n._watchers=[],n.init=function(t,e){n.ngModelCtrl=t,n.config=e,t.$render=function(){n.render()},o.itemsPerPage?n._watchers.push(i.$parent.$watch(o.itemsPerPage,function(t){n.itemsPerPage=parseInt(t,10),i.totalPages=n.calculateTotalPages(),n.updatePage()})):n.itemsPerPage=e.itemsPerPage,i.$watch("totalItems",function(t,e){(angular.isDefined(t)||t!==e)&&(i.totalPages=n.calculateTotalPages(),n.updatePage())})},n.calculateTotalPages=function(){var t=n.itemsPerPage<1?1:Math.ceil(i.totalItems/n.itemsPerPage);return Math.max(t||0,1)},n.render=function(){i.page=parseInt(n.ngModelCtrl.$viewValue,10)||1},i.selectPage=function(t,e){e&&e.preventDefault(),(!i.ngDisabled||!e)&&i.page!==t&&0<t&&t<=i.totalPages&&(e&&e.target&&e.target.blur(),n.ngModelCtrl.$setViewValue(t),n.ngModelCtrl.$render())},i.getText=function(t){return i[t+"Text"]||n.config[t+"Text"]},i.noPrevious=function(){return 1===i.page},i.noNext=function(){return i.page===i.totalPages},n.updatePage=function(){n.setNumPages(i.$parent,i.totalPages),i.page>i.totalPages?i.selectPage(i.totalPages):n.ngModelCtrl.$render()},i.$on("$destroy",function(){for(;n._watchers.length;)n._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(t,e,n,i){t.align=angular.isDefined(e.align)?t.$parent.$eval(e.align):i.align,n.create(this,t,e)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("uibPager",["uibPagerConfig",function(s){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPagerController",controllerAs:"pager",templateUrl:function(t,e){return e.templateUrl||"uib/template/pager/pager.html"},replace:!0,link:function(t,e,n,i){var o=i[0],r=i[1];r&&o.init(r,s)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(e,n,t,i,o){var r=this,f=angular.isDefined(n.maxSize)?e.$parent.$eval(n.maxSize):o.maxSize,m=angular.isDefined(n.rotate)?e.$parent.$eval(n.rotate):o.rotate,g=angular.isDefined(n.forceEllipses)?e.$parent.$eval(n.forceEllipses):o.forceEllipses,v=angular.isDefined(n.boundaryLinkNumbers)?e.$parent.$eval(n.boundaryLinkNumbers):o.boundaryLinkNumbers,y=angular.isDefined(n.pageLabel)?function(t){return e.$parent.$eval(n.pageLabel,{$page:t})}:angular.identity;function b(t,e,n){return{number:t,text:e,active:n}}e.boundaryLinks=angular.isDefined(n.boundaryLinks)?e.$parent.$eval(n.boundaryLinks):o.boundaryLinks,e.directionLinks=angular.isDefined(n.directionLinks)?e.$parent.$eval(n.directionLinks):o.directionLinks,i.create(this,e,n),n.maxSize&&r._watchers.push(e.$parent.$watch(t(n.maxSize),function(t){f=parseInt(t,10),r.render()}));var s=this.render;this.render=function(){s(),0<e.page&&e.page<=e.totalPages&&(e.pages=function(t,e){var n=[],i=1,o=e,r=angular.isDefined(f)&&f<e;r&&(m?e<(o=(i=Math.max(t-Math.floor(f/2),1))+f-1)&&(i=(o=e)-f+1):(i=(Math.ceil(t/f)-1)*f+1,o=Math.min(i+f-1,e)));for(var s=i;s<=o;s++){var a=b(s,y(s),s===t);n.push(a)}if(r&&0<f&&(!m||g||v)){if(1<i){if(!v||3<i){var l=b(i-1,"...",!1);n.unshift(l)}if(v){if(3===i){var u=b(2,"2",!1);n.unshift(u)}var c=b(1,"1",!1);n.unshift(c)}}if(o<e){if(!v||o<e-2){var h=b(o+1,"...",!1);n.push(h)}if(v){if(o===e-2){var d=b(e-1,e-1,!1);n.push(d)}var p=b(e,e,!1);n.push(p)}}}return n}(e.page,e.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(t,s){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(t,e){return e.templateUrl||"uib/template/pagination/pagination.html"},replace:!0,link:function(t,e,n,i){var o=i[0],r=i[1];r&&o.init(r,s)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){var a={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},l={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},u={};this.options=function(t){angular.extend(u,t)},this.setTriggers=function(t){angular.extend(l,t)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(t,r,F,H,B,s,e,j,n){var q=n.createNew();function i(t){if(27===t.which){var e=q.top();e&&(e.value.close(),q.removeTop(),e=null)}}return H.on("keypress",i),e.$on("$destroy",function(){H.off("keypress",i)}),function(N,R,i,z){function U(t){var e=(t||z.trigger||i).split(" "),n=e.map(function(t){return l[t]||t});return{show:e,hide:n}}z=angular.extend({},a,u,z);var t=N.replace(/[A-Z]/g,function(t,e){return(e?"-":"")+t.toLowerCase()}),e=s.startSymbol(),n=s.endSymbol(),o="<div "+t+'-popup uib-title="'+e+"title"+n+'" '+(z.useContentExp?'content-exp="contentExp()" ':'content="'+e+"content"+n+'" ')+'placement="'+e+"placement"+n+'" popup-class="'+e+"popupClass"+n+'" animation="animation" is-open="isOpen" origin-scope="origScope" class="uib-position-measure"></div>';return{compile:function(t,e){var I=r(o);return function(i,n,o,t){var e,r,s,a,l,u,c,h=!!angular.isDefined(z.appendToBody)&&z.appendToBody,d=U(void 0),p=angular.isDefined(o[R+"Enable"]),f=i.$new(!0),m=!1,g=!!angular.isDefined(o[R+"IsOpen"])&&j(o[R+"IsOpen"]),v=!!z.useContentExp&&j(o[N]),y=[],b=function(){e&&e.html()&&(u||(u=F(function(){var t=B.positionElements(n,e,f.placement,h);e.css({top:t.top+"px",left:t.left+"px"}),e.hasClass(t.placement.split("-")[0])||(e.removeClass(c.split("-")[0]),e.addClass(t.placement.split("-")[0])),e.hasClass(z.placementClassPrefix+t.placement)||(e.removeClass(z.placementClassPrefix+c),e.addClass(z.placementClassPrefix+t.placement)),e.hasClass("uib-position-measure")?(B.positionArrow(e,t.placement),e.removeClass("uib-position-measure")):c!==t.placement&&B.positionArrow(e,t.placement),c=t.placement,u=null},0,!1)))};function _(){f.isOpen?x():w()}function w(){p&&!i.$eval(o[R+"Enable"])||(T(),function(){f.title=o[R+"Title"],f.content=v?v(i):o[N];f.popupClass=o[R+"Class"],f.placement=angular.isDefined(o[R+"Placement"])?o[R+"Placement"]:z.placement;var t=B.parsePlacement(f.placement);c=t[1]?t[0]+"-"+t[1]:t[0];var e=parseInt(o[R+"PopupDelay"],10),n=parseInt(o[R+"PopupCloseDelay"],10);f.popupDelay=isNaN(e)?z.popupDelay:e,f.popupCloseDelay=isNaN(n)?z.popupCloseDelay:n}(),f.popupDelay?a||(a=F(C,f.popupDelay,!1)):C())}function x(){k(),f.popupCloseDelay?l||(l=F($,f.popupCloseDelay,!1)):$()}function C(){if(k(),T(),!f.content)return angular.noop;!function(){if(e)return;r=f.$new(),e=I(r,function(t){h?H.find("body").append(t):n.after(t)}),function(){y.length=0,v?(y.push(i.$watch(v,function(t){!(f.content=t)&&f.isOpen&&$()})),y.push(r.$watch(function(){m||(m=!0,r.$$postDigest(function(){m=!1,f&&f.isOpen&&b()}))}))):y.push(o.$observe(N,function(t){!(f.content=t)&&f.isOpen?$():b()}));y.push(o.$observe(R+"Title",function(t){f.title=t,f.isOpen&&b()})),y.push(o.$observe(R+"Placement",function(t){f.placement=t||z.placement,f.isOpen&&b()}))}()}(),f.$evalAsync(function(){M(f.isOpen=!0),b()})}function k(){a&&(F.cancel(a),a=null),u&&(F.cancel(u),u=null)}function $(){f&&f.$evalAsync(function(){f&&(M(f.isOpen=!1),f.animation?s||(s=F(S,150,!1)):S())})}function T(){l&&(F.cancel(l),l=null),s&&(F.cancel(s),s=null)}function S(){k(),T(),y.length&&(angular.forEach(y,function(t){t()}),y.length=0),e&&(e.remove(),e=null),r&&(r.$destroy(),r=null)}function M(t){g&&angular.isFunction(g.assign)&&g.assign(i,t)}function D(t){f&&f.isOpen&&e&&(n[0].contains(t.target)||e[0].contains(t.target)||x())}f.origScope=i,f.isOpen=!1,q.add(f,{close:$}),f.contentExp=function(){return f.content},o.$observe("disabled",function(t){t&&k(),t&&f.isOpen&&$()}),g&&i.$watch(g,function(t){f&&!t===f.isOpen&&_()});var L,E=function(){d.show.forEach(function(t){"outsideClick"===t?n.off("click",_):(n.off(t,w),n.off(t,_))}),d.hide.forEach(function(t){"outsideClick"===t?H.off("click",D):n.off(t,x)})};L=o[R+"Trigger"],E(),"none"!==(d=U(L)).show&&d.show.forEach(function(t,e){"outsideClick"===t?(n.on("click",_),H.on("click",D)):t===d.hide[e]?n.on(t,_):t&&(n.on(t,w),n.on(d.hide[e],x)),n.on("keypress",function(t){27===t.which&&x()})});var P,A=i.$eval(o[R+"Animation"]);f.animation=angular.isDefined(A)?!!A:z.animation;var O=R+"AppendToBody";P=O in o&&void 0===o[O]||i.$eval(o[O]),h=angular.isDefined(P)?P:h,i.$on("$destroy",function(){E(),S(),q.remove(f),f=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(h,i,d,p){return{link:function(t,r,e){var s,n,a,l=t.$eval(e.tooltipTemplateTranscludeScope),u=0,c=function(){n&&(n.remove(),n=null),s&&(s.$destroy(),s=null),a&&(h.leave(a).then(function(){n=null}),n=a,a=null)};t.$watch(i.parseAsResourceUrl(e.uibTooltipTemplateTransclude),function(i){var o=++u;i?(p(i,!0).then(function(t){if(o===u){var e=l.$new(),n=d(t)(e,function(t){c(),h.enter(t,r)});a=n,(s=e).$emit("$includeContentLoaded",i)}},function(){o===u&&(c(),t.$emit("$includeContentError",i))}),t.$emit("$includeContentRequested",i)):c()}),t.$on("$destroy",c)}}}]).directive("uibTooltipClasses",["$uibPosition",function(o){return{restrict:"A",link:function(t,e,n){if(t.placement){var i=o.parsePlacement(t.placement);e.addClass(i[0])}t.popupClass&&e.addClass(t.popupClass),t.animation()&&e.addClass(n.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(t){return t("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(t){return t("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(t){return t("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:!0,scope:{uibTitle:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(t){return t("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",uibTitle:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(t){return t("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{replace:!0,scope:{uibTitle:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(t){return t("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(t,e,n){var i=this,o=angular.isDefined(e.animate)?t.$parent.$eval(e.animate):n.animate;function r(){return angular.isDefined(t.maxParam)?t.maxParam:n.max}this.bars=[],t.max=r(),this.addBar=function(e,t,n){o||t.css({transition:"none"}),this.bars.push(e),e.max=r(),e.title=n&&angular.isDefined(n.title)?n.title:"progressbar",e.$watch("value",function(t){e.recalculatePercentage()}),e.recalculatePercentage=function(){var t=i.bars.reduce(function(t,e){return e.percent=+(100*e.value/e.max).toFixed(2),t+e.percent},0);100<t&&(e.percent-=t-100)},e.$on("$destroy",function(){t=null,i.removeBar(e)})},this.removeBar=function(t){this.bars.splice(this.bars.indexOf(t),1),this.bars.forEach(function(t){t.recalculatePercentage()})},t.$watch("maxParam",function(t){i.bars.forEach(function(t){t.max=r(),t.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(t,e,n,i){i.addBar(t,e,n)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(t,e,n,i){i.addBar(t,angular.element(e.children()[0]),{title:n.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(i,o,r){var s={$setViewValue:angular.noop},n=this;this.init=function(t){(s=t).$render=this.render,s.$formatters.push(function(t){return angular.isNumber(t)&&t<<0!==t&&(t=Math.round(t)),t}),this.stateOn=angular.isDefined(o.stateOn)?i.$parent.$eval(o.stateOn):r.stateOn,this.stateOff=angular.isDefined(o.stateOff)?i.$parent.$eval(o.stateOff):r.stateOff,this.enableReset=angular.isDefined(o.enableReset)?i.$parent.$eval(o.enableReset):r.enableReset;var e=angular.isDefined(o.titles)?i.$parent.$eval(o.titles):r.titles;this.titles=angular.isArray(e)&&0<e.length?e:r.titles;var n=angular.isDefined(o.ratingStates)?i.$parent.$eval(o.ratingStates):new Array(angular.isDefined(o.max)?i.$parent.$eval(o.max):r.max);i.range=this.buildTemplateObjects(n)},this.buildTemplateObjects=function(t){for(var e=0,n=t.length;e<n;e++)t[e]=angular.extend({index:e},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(e)},t[e]);return t},this.getTitle=function(t){return t>=this.titles.length?t+1:this.titles[t]},i.rate=function(t){if(!i.readonly&&0<=t&&t<=i.range.length){var e=n.enableReset&&s.$viewValue===t?0:t;s.$setViewValue(e),s.$render()}},i.enter=function(t){i.readonly||(i.value=t),i.onHover({value:t})},i.reset=function(){i.value=s.$viewValue,i.onLeave()},i.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),i.rate(i.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){i.value=s.$viewValue,i.title=n.getTitle(i.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",replace:!0,link:function(t,e,n,i){var o=i[0],r=i[1];o.init(r)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(t){var r,s,a=this;function l(t){for(var e=0;e<a.tabs.length;e++)if(a.tabs[e].index===t)return e}a.tabs=[],a.select=function(t,e){if(!s){var n=l(r),i=a.tabs[n];if(i){if(i.tab.onDeselect({$event:e}),e&&e.isDefaultPrevented())return;i.tab.active=!1}var o=a.tabs[t];o?(o.tab.onSelect({$event:e}),o.tab.active=!0,a.active=o.index,r=o.index):!o&&angular.isNumber(r)&&(a.active=null,r=null)}},a.addTab=function(t){if(a.tabs.push({tab:t,index:t.index}),a.tabs.sort(function(t,e){return t.index>e.index?1:t.index<e.index?-1:0}),t.index===a.active||!angular.isNumber(a.active)&&1===a.tabs.length){var e=l(t.index);a.select(e)}},a.removeTab=function(t){for(var e,n=0;n<a.tabs.length;n++)if(a.tabs[n].tab===t){e=n;break}if(a.tabs[e].index===a.active){var i=e===a.tabs.length-1?e-1:e+1%a.tabs.length;a.select(i)}a.tabs.splice(e,1)},t.$watch("tabset.active",function(t){angular.isNumber(t)&&t!==r&&a.select(l(t))}),t.$on("$destroy",function(){s=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(t,e){return e.templateUrl||"uib/template/tabs/tabset.html"},link:function(t,e,n){t.vertical=!!angular.isDefined(n.vertical)&&t.$parent.$eval(n.vertical),t.justified=!!angular.isDefined(n.justified)&&t.$parent.$eval(n.justified),angular.isUndefined(n.active)&&(t.active=0)}}}).directive("uibTab",["$parse",function(r){return{require:"^uibTabset",replace:!0,templateUrl:function(t,e){return e.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(i,t,e,o,n){i.disabled=!1,e.disable&&i.$parent.$watch(r(e.disable),function(t){i.disabled=!!t}),angular.isUndefined(e.index)&&(o.tabs&&o.tabs.length?i.index=Math.max.apply(null,o.tabs.map(function(t){return t.index}))+1:i.index=0),angular.isUndefined(e.classes)&&(i.classes=""),i.select=function(t){if(!i.disabled){for(var e,n=0;n<o.tabs.length;n++)if(o.tabs[n].tab===i){e=n;break}o.select(e,t)}},o.addTab(i),i.$on("$destroy",function(){o.removeTab(i)}),i.$transcludeFn=n}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(t,e){t.$watch("headingElement",function(t){t&&(e.html(""),e.append(t))})}}}).directive("uibTabContentTransclude",function(){return{restrict:"A",require:"^uibTabset",link:function(t,n,e){var i=t.$eval(e.uibTabContentTransclude).tab;i.$transcludeFn(i.$parent,function(t){angular.forEach(t,function(t){var e;(e=t).tagName&&(e.hasAttribute("uib-tab-heading")||e.hasAttribute("data-uib-tab-heading")||e.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===e.tagName.toLowerCase()||"data-uib-tab-heading"===e.tagName.toLowerCase()||"x-uib-tab-heading"===e.tagName.toLowerCase()||"uib:tab-heading"===e.tagName.toLowerCase())?i.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(r,t,s,e,n,i,a){var o=new Date,l=[],u={$setViewValue:angular.noop},c=angular.isDefined(s.meridians)?r.$parent.$eval(s.meridians):a.meridians||i.DATETIME_FORMATS.AMPMS,h=!angular.isDefined(s.padHours)||r.$parent.$eval(s.padHours);r.tabindex=angular.isDefined(s.tabindex)?s.tabindex:0,t.removeAttr("tabindex"),this.init=function(t,e){(u=t).$render=this.render,u.$formatters.unshift(function(t){return t?new Date(t):null});var n=e.eq(0),i=e.eq(1),o=e.eq(2);(angular.isDefined(s.mousewheel)?r.$parent.$eval(s.mousewheel):a.mousewheel)&&this.setupMousewheelEvents(n,i,o),(angular.isDefined(s.arrowkeys)?r.$parent.$eval(s.arrowkeys):a.arrowkeys)&&this.setupArrowkeyEvents(n,i,o),r.readonlyInput=angular.isDefined(s.readonlyInput)?r.$parent.$eval(s.readonlyInput):a.readonlyInput,this.setupInputEvents(n,i,o)};var d=a.hourStep;s.hourStep&&l.push(r.$parent.$watch(e(s.hourStep),function(t){d=+t}));var p,f,m=a.minuteStep;s.minuteStep&&l.push(r.$parent.$watch(e(s.minuteStep),function(t){m=+t})),l.push(r.$parent.$watch(e(s.min),function(t){var e=new Date(t);p=isNaN(e)?void 0:e})),l.push(r.$parent.$watch(e(s.max),function(t){var e=new Date(t);f=isNaN(e)?void 0:e}));var g=!1;s.ngDisabled&&l.push(r.$parent.$watch(e(s.ngDisabled),function(t){g=t})),r.noIncrementHours=function(){var t=$(o,60*d);return g||f<t||t<o&&t<p},r.noDecrementHours=function(){var t=$(o,60*-d);return g||t<p||o<t&&f<t},r.noIncrementMinutes=function(){var t=$(o,m);return g||f<t||t<o&&t<p},r.noDecrementMinutes=function(){var t=$(o,-m);return g||t<p||o<t&&f<t},r.noIncrementSeconds=function(){var t=T(o,v);return g||f<t||t<o&&t<p},r.noDecrementSeconds=function(){var t=T(o,-v);return g||t<p||o<t&&f<t},r.noToggleMeridian=function(){return o.getHours()<12?g||$(o,720)>f:g||$(o,-720)<p};var v=a.secondStep;function y(){var t=+r.hours;if((r.showMeridian?0<t&&t<13:0<=t&&t<24)&&""!==r.hours)return r.showMeridian&&(12===t&&(t=0),r.meridian===c[1]&&(t+=12)),t}function b(){var t=+r.minutes;if(0<=t&&t<60&&""!==r.minutes)return t}function _(t,e){return null===t?"":angular.isDefined(t)&&t.toString().length<2&&!e?"0"+t:t.toString()}function w(t){x(),u.$setViewValue(new Date(o)),C(t)}function x(){u.$setValidity("time",!0),r.invalidHours=!1,r.invalidMinutes=!1,r.invalidSeconds=!1}function C(t){if(u.$modelValue){var e=o.getHours(),n=o.getMinutes(),i=o.getSeconds();r.showMeridian&&(e=0===e||12===e?12:e%12),r.hours="h"===t?e:_(e,!h),"m"!==t&&(r.minutes=_(n)),r.meridian=o.getHours()<12?c[0]:c[1],"s"!==t&&(r.seconds=_(i)),r.meridian=o.getHours()<12?c[0]:c[1]}else r.hours=null,r.minutes=null,r.seconds=null,r.meridian=c[0]}function k(t){o=T(o,t),w()}function $(t,e){return T(t,60*e)}function T(t,e){var n=new Date(t.getTime()+1e3*e),i=new Date(t);return i.setHours(n.getHours(),n.getMinutes(),n.getSeconds()),i}function S(){return(null===r.hours||""===r.hours)&&(null===r.minutes||""===r.minutes)&&(!r.showSeconds||r.showSeconds&&(null===r.seconds||""===r.seconds))}s.secondStep&&l.push(r.$parent.$watch(e(s.secondStep),function(t){v=+t})),r.showSeconds=a.showSeconds,s.showSeconds&&l.push(r.$parent.$watch(e(s.showSeconds),function(t){r.showSeconds=!!t})),r.showMeridian=a.showMeridian,s.showMeridian&&l.push(r.$parent.$watch(e(s.showMeridian),function(t){if(r.showMeridian=!!t,u.$error.time){var e=y(),n=b();angular.isDefined(e)&&angular.isDefined(n)&&(o.setHours(e),w())}else C()})),this.setupMousewheelEvents=function(t,e,n){var i=function(t){t.originalEvent&&(t=t.originalEvent);var e=t.wheelDelta?t.wheelDelta:-t.deltaY;return t.detail||0<e};t.bind("mousewheel wheel",function(t){g||r.$apply(i(t)?r.incrementHours():r.decrementHours()),t.preventDefault()}),e.bind("mousewheel wheel",function(t){g||r.$apply(i(t)?r.incrementMinutes():r.decrementMinutes()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){g||r.$apply(i(t)?r.incrementSeconds():r.decrementSeconds()),t.preventDefault()})},this.setupArrowkeyEvents=function(t,e,n){t.bind("keydown",function(t){g||(38===t.which?(t.preventDefault(),r.incrementHours(),r.$apply()):40===t.which&&(t.preventDefault(),r.decrementHours(),r.$apply()))}),e.bind("keydown",function(t){g||(38===t.which?(t.preventDefault(),r.incrementMinutes(),r.$apply()):40===t.which&&(t.preventDefault(),r.decrementMinutes(),r.$apply()))}),n.bind("keydown",function(t){g||(38===t.which?(t.preventDefault(),r.incrementSeconds(),r.$apply()):40===t.which&&(t.preventDefault(),r.decrementSeconds(),r.$apply()))})},this.setupInputEvents=function(t,e,n){if(r.readonlyInput)return r.updateHours=angular.noop,r.updateMinutes=angular.noop,void(r.updateSeconds=angular.noop);var i=function(t,e,n){u.$setViewValue(null),u.$setValidity("time",!1),angular.isDefined(t)&&(r.invalidHours=t),angular.isDefined(e)&&(r.invalidMinutes=e),angular.isDefined(n)&&(r.invalidSeconds=n)};r.updateHours=function(){var t=y(),e=b();u.$setDirty(),angular.isDefined(t)&&angular.isDefined(e)?(o.setHours(t),o.setMinutes(e),o<p||f<o?i(!0):w("h")):i(!0)},t.bind("blur",function(t){u.$setTouched(),S()?x():null===r.hours||""===r.hours?i(!0):!r.invalidHours&&r.hours<10&&r.$apply(function(){r.hours=_(r.hours,!h)})}),r.updateMinutes=function(){var t=b(),e=y();u.$setDirty(),angular.isDefined(t)&&angular.isDefined(e)?(o.setHours(e),o.setMinutes(t),o<p||f<o?i(void 0,!0):w("m")):i(void 0,!0)},e.bind("blur",function(t){u.$setTouched(),S()?x():null===r.minutes?i(void 0,!0):!r.invalidMinutes&&r.minutes<10&&r.$apply(function(){r.minutes=_(r.minutes)})}),r.updateSeconds=function(){var t,e=0<=(t=+r.seconds)&&t<60?t:void 0;u.$setDirty(),angular.isDefined(e)?(o.setSeconds(e),w("s")):i(void 0,void 0,!0)},n.bind("blur",function(t){S()?x():!r.invalidSeconds&&r.seconds<10&&r.$apply(function(){r.seconds=_(r.seconds)})})},this.render=function(){var t=u.$viewValue;isNaN(t)?(u.$setValidity("time",!1),n.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(t&&(o=t),o<p||f<o?(u.$setValidity("time",!1),r.invalidHours=!0,r.invalidMinutes=!0):x(),C())},r.showSpinners=angular.isDefined(s.showSpinners)?r.$parent.$eval(s.showSpinners):a.showSpinners,r.incrementHours=function(){r.noIncrementHours()||k(60*d*60)},r.decrementHours=function(){r.noDecrementHours()||k(60*-d*60)},r.incrementMinutes=function(){r.noIncrementMinutes()||k(60*m)},r.decrementMinutes=function(){r.noDecrementMinutes()||k(60*-m)},r.incrementSeconds=function(){r.noIncrementSeconds()||k(v)},r.decrementSeconds=function(){r.noDecrementSeconds()||k(-v)},r.toggleMeridian=function(){var t=b(),e=y();r.noToggleMeridian()||(angular.isDefined(t)&&angular.isDefined(e)?k(720*(o.getHours()<12?60:-60)):r.meridian=r.meridian===c[0]?c[1]:c[0])},r.blur=function(){u.$setTouched()},r.$on("$destroy",function(){for(;l.length;)l.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(n){return{require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(t,e){return e.templateUrl||n.templateUrl},link:function(t,e,n,i){var o=i[0],r=i[1];r&&o.init(r,e.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(n){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(t){var e=t.match(i);if(!e)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+t+'".');return{itemName:e[3],source:n(e[4]),viewMapper:n(e[2]||e[1]),modelMapper:n(e[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(u,c,a,t,n,e,l,i,o,r,h,s,d){var p,f,m=[9,13,27,38,40],g=u.$eval(a.typeaheadMinLength);g||0===g||(g=1),u.$watch(a.typeaheadMinLength,function(t){g=t||0===t?t:1});var v=u.$eval(a.typeaheadWaitMs)||0,y=!1!==u.$eval(a.typeaheadEditable);u.$watch(a.typeaheadEditable,function(t){y=!1!==t});var b,_,w=n(a.typeaheadLoading).assign||angular.noop,x=n(a.typeaheadOnSelect),C=!!angular.isDefined(a.typeaheadSelectOnBlur)&&u.$eval(a.typeaheadSelectOnBlur),k=n(a.typeaheadNoResults).assign||angular.noop,$=a.typeaheadInputFormatter?n(a.typeaheadInputFormatter):void 0,T=!!a.typeaheadAppendToBody&&u.$eval(a.typeaheadAppendToBody),S=a.typeaheadAppendTo?u.$eval(a.typeaheadAppendTo):null,M=!1!==u.$eval(a.typeaheadFocusFirst),D=!!a.typeaheadSelectOnExact&&u.$eval(a.typeaheadSelectOnExact),L=n(a.typeaheadIsOpen).assign||angular.noop,E=u.$eval(a.typeaheadShowHint)||!1,P=n(a.ngModel),A=n(a.ngModel+"($$$p)"),O=d.parse(a.uibTypeahead),I=u.$new(),N=u.$on("$destroy",function(){I.$destroy()});I.$on("$destroy",N);var R,z,U="typeahead-"+I.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":U}),E&&((R=angular.element("<div></div>")).css("position","relative"),c.after(R),(z=c.clone()).attr("placeholder",""),z.attr("tabindex","-1"),z.val(""),z.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),c.css({position:"relative","vertical-align":"top","background-color":"transparent"}),R.append(z),z.after(c));var F=angular.element("<div uib-typeahead-popup></div>");F.attr({id:U,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(a.typeaheadTemplateUrl)&&F.attr("template-url",a.typeaheadTemplateUrl),angular.isDefined(a.typeaheadPopupTemplateUrl)&&F.attr("popup-template-url",a.typeaheadPopupTemplateUrl);var H=function(){I.matches=[],I.activeIdx=-1,c.attr("aria-expanded",!1),E&&z.val("")},B=function(t){return U+"-option-"+t};I.$watch("activeIdx",function(t){t<0?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",B(t))});var j=function(s,a){var l={$viewValue:s};w(u,!0),k(u,!1),e.when(O.source(u,l)).then(function(t){var e,n,i=s===p.$viewValue;if(i&&b)if(t&&0<t.length){I.activeIdx=M?0:-1,k(u,!1);for(var o=I.matches.length=0;o<t.length;o++)l[O.itemName]=t[o],I.matches.push({id:B(o),label:O.viewMapper(I,l),model:t[o]});if(I.query=s,Z(),c.attr("aria-expanded",!0),D&&1===I.matches.length&&(e=s,n=0,I.matches.length>n&&e&&e.toUpperCase()===I.matches[n].label.toUpperCase())&&(angular.isNumber(I.debounceUpdate)||angular.isObject(I.debounceUpdate)?h(function(){I.select(0,a)},angular.isNumber(I.debounceUpdate)?I.debounceUpdate:I.debounceUpdate.default):I.select(0,a)),E){var r=I.matches[0].label;angular.isString(s)&&0<s.length&&r.slice(0,s.length).toUpperCase()===s.toUpperCase()?z.val(s+r.slice(s.length)):z.val("")}}else H(),k(u,!0);i&&w(u,!1)},function(){H(),w(u,!1),k(u,!0)})};T&&(angular.element(o).on("resize",V),i.find("body").on("scroll",V));var q,W=h(function(){I.matches.length&&Z(),I.moveInProgress=!1},200);function V(){I.moveInProgress||(I.moveInProgress=!0,I.$digest()),W()}function Z(){I.position=T?s.offset(c):s.position(c),I.position.top+=c.prop("offsetHeight")}I.moveInProgress=!1,I.query=void 0;var G=function(){q&&l.cancel(q)};H(),I.assignIsOpen=function(t){L(u,t)},I.select=function(t,e){var n,i,o,r,s={};_=!0,s[O.itemName]=i=I.matches[t].model,n=O.modelMapper(u,s),o=u,r=n,angular.isFunction(P(u))&&f&&f.$options&&f.$options.getterSetter?A(o,{$$$p:r}):P.assign(o,r),p.$setValidity("editable",!0),p.$setValidity("parse",!0),x(u,{$item:i,$model:n,$label:O.viewMapper(u,s),$event:e}),H(),!1!==I.$eval(a.typeaheadFocusOnSelect)&&l(function(){c[0].focus()},0,!1)},c.on("keydown",function(t){if(0!==I.matches.length&&-1!==m.indexOf(t.which)){if(-1===I.activeIdx&&(9===t.which||13===t.which)||9===t.which&&t.shiftKey)return H(),void I.$digest();var e;switch(t.preventDefault(),t.which){case 9:case 13:I.$apply(function(){angular.isNumber(I.debounceUpdate)||angular.isObject(I.debounceUpdate)?h(function(){I.select(I.activeIdx,t)},angular.isNumber(I.debounceUpdate)?I.debounceUpdate:I.debounceUpdate.default):I.select(I.activeIdx,t)});break;case 27:t.stopPropagation(),H(),u.$digest();break;case 38:I.activeIdx=(0<I.activeIdx?I.activeIdx:I.matches.length)-1,I.$digest(),(e=F.find("li")[I.activeIdx]).parentNode.scrollTop=e.offsetTop;break;case 40:I.activeIdx=(I.activeIdx+1)%I.matches.length,I.$digest(),(e=F.find("li")[I.activeIdx]).parentNode.scrollTop=e.offsetTop}}}),c.bind("focus",function(t){b=!0,0!==g||p.$viewValue||l(function(){j(p.$viewValue,t)},0)}),c.bind("blur",function(t){C&&I.matches.length&&-1!==I.activeIdx&&!_&&(_=!0,I.$apply(function(){angular.isObject(I.debounceUpdate)&&angular.isNumber(I.debounceUpdate.blur)?h(function(){I.select(I.activeIdx,t)},I.debounceUpdate.blur):I.select(I.activeIdx,t)})),!y&&p.$error.editable&&(p.$setViewValue(),p.$setValidity("editable",!0),p.$setValidity("parse",!0),c.val("")),_=b=!1});var Y=function(t){c[0]!==t.target&&3!==t.which&&0!==I.matches.length&&(H(),r.$$phase||u.$digest())};i.on("click",Y),u.$on("$destroy",function(){i.off("click",Y),(T||S)&&K.remove(),T&&(angular.element(o).off("resize",V),i.find("body").off("scroll",V)),F.remove(),E&&R.remove()});var K=t(F)(I);T?i.find("body").append(K):S?angular.element(S).eq(0).append(K):c.after(K),this.init=function(t,e){p=t,f=e,I.debounceUpdate=p.$options&&n(p.$options.debounce)(u),p.$parsers.unshift(function(t){var e;return b=!0,0===g||t&&t.length>=g?0<v?(G(),e=t,q=l(function(){j(e)},v)):j(t):(w(u,!1),G(),H()),y?t:t?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),null)}),p.$formatters.push(function(t){var e,n={};return y||p.$setValidity("editable",!0),$?(n.$model=t,$(u,n)):(n[O.itemName]=t,e=O.viewMapper(u,n),n[O.itemName]=void 0,e!==O.viewMapper(u,n)?e:t)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(t,e,n,i){i[2].init(i[0],i[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function(o){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(t,e){return e.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(i,t,e){i.templateUrl=e.templateUrl,i.isOpen=function(){var t=0<i.matches.length;return i.assignIsOpen({isOpen:t}),t},i.isActive=function(t){return i.active===t},i.selectActive=function(t){i.active=t},i.selectMatch=function(t,e){var n=i.debounce();angular.isNumber(n)||angular.isObject(n)?o(function(){i.select({activeIdx:t,evt:e})},angular.isNumber(n)?n:n.default):i.select({activeIdx:t,evt:e})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(o,r,s){return{scope:{index:"=",match:"=",query:"="},link:function(n,i,t){var e=s(t.templateUrl)(n.$parent)||"uib/template/typeahead/typeahead-match.html";o(e).then(function(t){var e=angular.element(t.trim());i.replaceWith(e),r(e)(n)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(n,t,i){var o;return o=t.has("$sanitize"),function(t,e){return!o&&/<.*>/g.test(t)&&i.warn("Unsafe use of typeahead please use ngSanitize"),t=e?(""+t).replace(new RegExp(e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),"<strong>$&</strong>"):t,o||(t=n.trustAsHtml(t)),t}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(t){t.put("uib/template/accordion/accordion-group.html",'<div class="panel" ng-class="panelClass || \'panel-default\'">\n  <div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n    <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(t){t.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(t){t.put("uib/template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(t){t.put("uib/template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n  <div class="carousel-inner" ng-transclude></div>\n  <a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n    <span class="sr-only">previous</span>\n  </a>\n  <a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n    <span class="sr-only">next</span>\n  </a>\n  <ol class="carousel-indicators" ng-show="slides.length > 1">\n    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n    </li>\n  </ol>\n</div>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(t){t.put("uib/template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(t){t.put("uib/template/datepicker/datepicker.html",'<div class="uib-datepicker" ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(t){t.put("uib/template/datepicker/day.html",'<table class="uib-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(t){t.put("uib/template/datepicker/month.html",'<table class="uib-monthpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(t){t.put("uib/template/datepicker/year.html",'<table class="uib-yearpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(t){t.put("uib/template/datepickerPopup/popup.html",'<div>\n  <ul class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n    <li ng-transclude></li>\n    <li ng-if="showButtonBar" class="uib-button-bar">\n      <span class="btn-group pull-left">\n        <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n        <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n      </span>\n      <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n    </li>\n  </ul>\n</div>\n')}]),angular.module("uib/template/modal/backdrop.html",[]).run(["$templateCache",function(t){t.put("uib/template/modal/backdrop.html",'<div class="modal-backdrop"\n     uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(t){t.put("uib/template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog {{size ? \'modal-\' + size : \'\'}}"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(t){t.put("uib/template/pager/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(t){t.put("uib/template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(t){t.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(t){t.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(t){t.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    uib-tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(t){t.put("uib/template/popover/popover-html.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(t){t.put("uib/template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(t){t.put("uib/template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(t){t.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(t){t.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(t){t.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(t){t.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(t){t.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(t){t.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(t){t.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(t){t.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(t){t.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(T){T.ui=T.ui||{};T.ui.version="1.12.1";var o,n=0,a=Array.prototype.slice;T.cleanData=(o=T.cleanData,function(t){var e,n,i;for(i=0;null!=(n=t[i]);i++)try{(e=T._data(n,"events"))&&e.remove&&T(n).triggerHandler("remove")}catch(t){}o(t)}),T.widget=function(t,n,e){var i,o,r,s={},a=t.split(".")[0],l=a+"-"+(t=t.split(".")[1]);return e||(e=n,n=T.Widget),T.isArray(e)&&(e=T.extend.apply(null,[{}].concat(e))),T.expr[":"][l.toLowerCase()]=function(t){return!!T.data(t,l)},T[a]=T[a]||{},i=T[a][t],o=T[a][t]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},T.extend(o,i,{version:e.version,_proto:T.extend({},e),_childConstructors:[]}),(r=new n).options=T.widget.extend({},r.options),T.each(e,function(e,r){T.isFunction(r)?s[e]=function(){function i(){return n.prototype[e].apply(this,arguments)}function o(t){return n.prototype[e].apply(this,t)}return function(){var t,e=this._super,n=this._superApply;return this._super=i,this._superApply=o,t=r.apply(this,arguments),this._super=e,this._superApply=n,t}}():s[e]=r}),o.prototype=T.widget.extend(r,{widgetEventPrefix:i&&r.widgetEventPrefix||t},s,{constructor:o,namespace:a,widgetName:t,widgetFullName:l}),i?(T.each(i._childConstructors,function(t,e){var n=e.prototype;T.widget(n.namespace+"."+n.widgetName,o,e._proto)}),delete i._childConstructors):n._childConstructors.push(o),T.widget.bridge(t,o),o},T.widget.extend=function(t){for(var e,n,i=a.call(arguments,1),o=0,r=i.length;o<r;o++)for(e in i[o])n=i[o][e],i[o].hasOwnProperty(e)&&void 0!==n&&(T.isPlainObject(n)?t[e]=T.isPlainObject(t[e])?T.widget.extend({},t[e],n):T.widget.extend({},n):t[e]=n);return t},T.widget.bridge=function(r,e){var s=e.prototype.widgetFullName||r;T.fn[r]=function(n){var t="string"==typeof n,i=a.call(arguments,1),o=this;return t?this.length||"instance"!==n?this.each(function(){var t,e=T.data(this,s);return"instance"===n?(o=e,!1):e?T.isFunction(e[n])&&"_"!==n.charAt(0)?(t=e[n].apply(e,i))!==e&&void 0!==t?(o=t&&t.jquery?o.pushStack(t.get()):t,!1):void 0:T.error("no such method '"+n+"' for "+r+" widget instance"):T.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+n+"'")}):o=void 0:(i.length&&(n=T.widget.extend.apply(null,[n].concat(i))),this.each(function(){var t=T.data(this,s);t?(t.option(n||{}),t._init&&t._init()):T.data(this,s,new e(n,this))})),o}},T.Widget=function(){},T.Widget._childConstructors=[],T.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=T(e||this.defaultElement||this)[0],this.element=T(e),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=T(),this.hoverable=T(),this.focusable=T(),this.classesElementLookup={},e!==this&&(T.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=T(e.style?e.ownerDocument:e.document||e),this.window=T(this.document[0].defaultView||this.document[0].parentWindow)),this.options=T.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:T.noop,_create:T.noop,_init:T.noop,destroy:function(){var n=this;this._destroy(),T.each(this.classesElementLookup,function(t,e){n._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:T.noop,widget:function(){return this.element},option:function(t,e){var n,i,o,r=t;if(0===arguments.length)return T.widget.extend({},this.options);if("string"==typeof t)if(r={},t=(n=t.split(".")).shift(),n.length){for(i=r[t]=T.widget.extend({},this.options[t]),o=0;o<n.length-1;o++)i[n[o]]=i[n[o]]||{},i=i[n[o]];if(t=n.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=e}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,n,i;for(e in t)i=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&i&&i.length&&(n=T(i.get()),this._removeClass(i,e),n.addClass(this._classes({element:n,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(o){var r=[],s=this;function t(t,e){var n,i;for(i=0;i<t.length;i++)n=s.classesElementLookup[t[i]]||T(),n=o.add?T(T.unique(n.get().concat(o.element.get()))):T(n.not(o.element).get()),s.classesElementLookup[t[i]]=n,r.push(t[i]),e&&o.classes[t[i]]&&r.push(o.classes[t[i]])}return o=T.extend({element:this.element,classes:this.options.classes||{}},o),this._on(o.element,{remove:"_untrackClassesElement"}),o.keys&&t(o.keys.match(/\S+/g)||[],!0),o.extra&&t(o.extra.match(/\S+/g)||[]),r.join(" ")},_untrackClassesElement:function(n){var i=this;T.each(i.classesElementLookup,function(t,e){-1!==T.inArray(n.target,e)&&(i.classesElementLookup[t]=T(e.not(n.target).get()))})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof t||null===t,r={extra:o?e:n,keys:o?t:e,element:o?this.element:t,add:i};return r.element.toggleClass(this._classes(r),i),this},_on:function(s,a,t){var l,u=this;"boolean"!=typeof s&&(t=a,a=s,s=!1),t?(a=l=T(a),this.bindings=this.bindings.add(a)):(t=a,a=this.element,l=this.widget()),T.each(t,function(t,e){function n(){if(s||!0!==u.options.disabled&&!T(this).hasClass("ui-state-disabled"))return("string"==typeof e?u[e]:e).apply(u,arguments)}"string"!=typeof e&&(n.guid=e.guid=e.guid||n.guid||T.guid++);var i=t.match(/^([\w:-]*)\s*(.*)$/),o=i[1]+u.eventNamespace,r=i[2];r?l.on(o,r,n):a.on(o,n)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e).off(e),this.bindings=T(this.bindings.not(t).get()),this.focusable=T(this.focusable.not(t).get()),this.hoverable=T(this.hoverable.not(t).get())},_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(T(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(T(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(T(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(T(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,n){var i,o,r=this.options[t];if(n=n||{},(e=T.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],o=e.originalEvent)for(i in o)i in e||(e[i]=o[i]);return this.element.trigger(e,n),!(T.isFunction(r)&&!1===r.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}},T.each({show:"fadeIn",hide:"fadeOut"},function(r,s){T.Widget.prototype["_"+r]=function(e,t,n){var i;"string"==typeof t&&(t={effect:t});var o=t?!0===t||"number"==typeof t?s:t.effect||s:r;"number"==typeof(t=t||{})&&(t={duration:t}),i=!T.isEmptyObject(t),t.complete=n,t.delay&&e.delay(t.delay),i&&T.effects&&T.effects.effect[o]?e[r](t):o!==r&&e[o]?e[o](t.duration,t.easing,n):e.queue(function(t){T(this)[r](),n&&n.call(e[0]),t()})}});T.widget;!function(){var o,x=Math.max,C=Math.abs,i=/left|center|right/,r=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,u=T.fn.position;function k(t,e,n){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?n/100:1)]}function $(t,e){return parseInt(T.css(t,e),10)||0}T.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,e,n=T("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=n.children()[0];return T("body").append(n),t=i.offsetWidth,n.css("overflow","scroll"),t===(e=i.offsetWidth)&&(e=n[0].clientWidth),n.remove(),o=t-e},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?T.position.scrollbarWidth():0,height:i?T.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=T(t||window),n=T.isWindow(e[0]),i=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:n,isDocument:i,offset:!n&&!i?T(t).offset():{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}},T.fn.position=function(h){if(!h||!h.of)return u.apply(this,arguments);h=T.extend({},h);var d,p,f,m,g,t,e,n,v=T(h.of),y=T.position.getWithinInfo(h.within),b=T.position.getScrollInfo(y),_=(h.collision||"flip").split(" "),w={};return t=9===(n=(e=v)[0]).nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:T.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()},v[0].preventDefault&&(h.at="left top"),p=t.width,f=t.height,m=t.offset,g=T.extend({},m),T.each(["my","at"],function(){var t,e,n=(h[this]||"").split(" ");1===n.length&&(n=i.test(n[0])?n.concat(["center"]):r.test(n[0])?["center"].concat(n):["center","center"]),n[0]=i.test(n[0])?n[0]:"center",n[1]=r.test(n[1])?n[1]:"center",t=s.exec(n[0]),e=s.exec(n[1]),w[this]=[t?t[0]:0,e?e[0]:0],h[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===h.at[0]?g.left+=p:"center"===h.at[0]&&(g.left+=p/2),"bottom"===h.at[1]?g.top+=f:"center"===h.at[1]&&(g.top+=f/2),d=k(w.at,p,f),g.left+=d[0],g.top+=d[1],this.each(function(){var n,t,s=T(this),a=s.outerWidth(),l=s.outerHeight(),e=$(this,"marginLeft"),i=$(this,"marginTop"),o=a+e+$(this,"marginRight")+b.width,r=l+i+$(this,"marginBottom")+b.height,u=T.extend({},g),c=k(w.my,s.outerWidth(),s.outerHeight());"right"===h.my[0]?u.left-=a:"center"===h.my[0]&&(u.left-=a/2),"bottom"===h.my[1]?u.top-=l:"center"===h.my[1]&&(u.top-=l/2),u.left+=c[0],u.top+=c[1],n={marginLeft:e,marginTop:i},T.each(["left","top"],function(t,e){T.ui.position[_[t]]&&T.ui.position[_[t]][e](u,{targetWidth:p,targetHeight:f,elemWidth:a,elemHeight:l,collisionPosition:n,collisionWidth:o,collisionHeight:r,offset:[d[0]+c[0],d[1]+c[1]],my:h.my,at:h.at,within:y,elem:s})}),h.using&&(t=function(t){var e=m.left-u.left,n=e+p-a,i=m.top-u.top,o=i+f-l,r={target:{element:v,left:m.left,top:m.top,width:p,height:f},element:{element:s,left:u.left,top:u.top,width:a,height:l},horizontal:n<0?"left":0<e?"right":"center",vertical:o<0?"top":0<i?"bottom":"middle"};p<a&&C(e+n)<p&&(r.horizontal="center"),f<l&&C(i+o)<f&&(r.vertical="middle"),x(C(e),C(n))>x(C(i),C(o))?r.important="horizontal":r.important="vertical",h.using.call(this,t,r)}),s.offset(T.extend(u,{using:t}))})},T.ui.position={fit:{left:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,s=t.left-e.collisionPosition.marginLeft,a=o-s,l=s+e.collisionWidth-r-o;e.collisionWidth>r?0<a&&l<=0?(n=t.left+a+e.collisionWidth-r-o,t.left+=a-n):t.left=0<l&&a<=0?o:l<a?o+r-e.collisionWidth:o:0<a?t.left+=a:0<l?t.left-=l:t.left=x(t.left-s,t.left)},top:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollTop:i.offset.top,r=e.within.height,s=t.top-e.collisionPosition.marginTop,a=o-s,l=s+e.collisionHeight-r-o;e.collisionHeight>r?0<a&&l<=0?(n=t.top+a+e.collisionHeight-r-o,t.top+=a-n):t.top=0<l&&a<=0?o:l<a?o+r-e.collisionHeight:o:0<a?t.top+=a:0<l?t.top-=l:t.top=x(t.top-s,t.top)}},flip:{left:function(t,e){var n,i,o=e.within,r=o.offset.left+o.scrollLeft,s=o.width,a=o.isWindow?o.scrollLeft:o.offset.left,l=t.left-e.collisionPosition.marginLeft,u=l-a,c=l+e.collisionWidth-s-a,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];u<0?((n=t.left+h+d+p+e.collisionWidth-s-r)<0||n<C(u))&&(t.left+=h+d+p):0<c&&(0<(i=t.left-e.collisionPosition.marginLeft+h+d+p-a)||C(i)<c)&&(t.left+=h+d+p)},top:function(t,e){var n,i,o=e.within,r=o.offset.top+o.scrollTop,s=o.height,a=o.isWindow?o.scrollTop:o.offset.top,l=t.top-e.collisionPosition.marginTop,u=l-a,c=l+e.collisionHeight-s-a,h="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];u<0?((i=t.top+h+d+p+e.collisionHeight-s-r)<0||i<C(u))&&(t.top+=h+d+p):0<c&&(0<(n=t.top-e.collisionPosition.marginTop+h+d+p-a)||C(n)<c)&&(t.top+=h+d+p)}},flipfit:{left:function(){T.ui.position.flip.left.apply(this,arguments),T.ui.position.fit.left.apply(this,arguments)},top:function(){T.ui.position.flip.top.apply(this,arguments),T.ui.position.fit.top.apply(this,arguments)}}}}();T.ui.position,T.extend(T.expr[":"],{data:T.expr.createPseudo?T.expr.createPseudo(function(e){return function(t){return!!T.data(t,e)}}):function(t,e,n){return!!T.data(t,n[3])}}),T.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var t,i,l="ui-effects-",u="ui-effects-style",h="ui-effects-animated",c=T;T.effects={effect:{}},function(c,h){var u,d=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],p=c.Color=function(t,e,n,i){return new c.Color.fn.parse(t,e,n,i)},f={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},m={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},s=p.support={},e=c("<p>")[0],g=c.each;function v(t,e,n){var i=m[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:t<0?0:i.max<t?i.max:t)}function a(s){var a=p(),l=a._rgba=[];return s=s.toLowerCase(),g(t,function(t,e){var n,i=e.re.exec(s),o=i&&e.parse(i),r=e.space||"rgba";if(o)return n=a[r](o),a[f[r].cache]=n[f[r].cache],l=a._rgba=n._rgba,!1}),l.length?("0,0,0,0"===l.join()&&c.extend(l,u.transparent),a):u[s]}function l(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}e.style.cssText="background-color:rgba(1,1,1,.5)",s.rgba=-1<e.style.backgroundColor.indexOf("rgba"),g(f,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),p.fn=c.extend(p.prototype,{parse:function(o,t,e,n){if(o===h)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=c(o).css(t),t=h);var r=this,i=c.type(o),s=this._rgba=[];return t!==h&&(o=[o,t,e,n],i="array"),"string"===i?this.parse(a(o)||u._default):"array"===i?(g(f.rgba.props,function(t,e){s[e.idx]=v(o[e.idx],e)}),this):"object"===i?(g(f,o instanceof p?function(t,e){o[e.cache]&&(r[e.cache]=o[e.cache].slice())}:function(t,n){var i=n.cache;g(n.props,function(t,e){if(!r[i]&&n.to){if("alpha"===t||null==o[t])return;r[i]=n.to(r._rgba)}r[i][e.idx]=v(o[t],e,!0)}),r[i]&&c.inArray(null,r[i].slice(0,3))<0&&(r[i][3]=1,n.from&&(r._rgba=n.from(r[i])))}),this):void 0},is:function(t){var o=p(t),r=!0,s=this;return g(f,function(t,e){var n,i=o[e.cache];return i&&(n=s[e.cache]||e.to&&e.to(s._rgba)||[],g(e.props,function(t,e){if(null!=i[e.idx])return r=i[e.idx]===n[e.idx]})),r}),r},_space:function(){var n=[],i=this;return g(f,function(t,e){i[e.cache]&&n.push(t)}),n.pop()},transition:function(t,s){var a=p(t),e=a._space(),n=f[e],i=0===this.alpha()?p("transparent"):this,l=i[n.cache]||n.to(i._rgba),u=l.slice();return a=a[n.cache],g(n.props,function(t,e){var n=e.idx,i=l[n],o=a[n],r=m[e.type]||{};null!==o&&(u[n]=null===i?o:(r.mod&&(o-i>r.mod/2?i+=r.mod:i-o>r.mod/2&&(i-=r.mod)),v((o-i)*s+i,e)))}),this[e](u)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),n=e.pop(),i=p(t)._rgba;return p(c.map(e,function(t,e){return(1-n)*i[e]+n*t}))},toRgbaString:function(){var t="rgba(",e=c.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=c.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),n=e.pop();return t&&e.push(~~(255*n)),"#"+c.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),p.fn.parse.prototype=p.fn,f.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,o=t[1]/255,r=t[2]/255,s=t[3],a=Math.max(i,o,r),l=Math.min(i,o,r),u=a-l,c=a+l,h=.5*c;return e=l===a?0:i===a?60*(o-r)/u+360:o===a?60*(r-i)/u+120:60*(i-o)/u+240,n=0===u?0:h<=.5?u/c:u/(2-c),[Math.round(e)%360,n,h,null==s?1:s]},f.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],o=t[3],r=i<=.5?i*(1+n):i+n-i*n,s=2*i-r;return[Math.round(255*l(s,r,e+1/3)),Math.round(255*l(s,r,e)),Math.round(255*l(s,r,e-1/3)),o]},g(f,function(l,t){var n=t.props,s=t.cache,a=t.to,u=t.from;p.fn[l]=function(t){if(a&&!this[s]&&(this[s]=a(this._rgba)),t===h)return this[s].slice();var e,i=c.type(t),o="array"===i||"object"===i?t:arguments,r=this[s].slice();return g(n,function(t,e){var n=o["object"===i?t:e.idx];null==n&&(n=r[e.idx]),r[e.idx]=v(n,e)}),u?((e=p(u(r)))[s]=r,e):p(r)},g(n,function(s,a){p.fn[s]||(p.fn[s]=function(t){var e,n=c.type(t),i="alpha"===s?this._hsla?"hsla":"rgba":l,o=this[i](),r=o[a.idx];return"undefined"===n?r:("function"===n&&(t=t.call(this,r),n=c.type(t)),null==t&&a.empty?this:("string"===n&&(e=d.exec(t))&&(t=r+parseFloat(e[2])*("+"===e[1]?1:-1)),o[a.idx]=t,this[i](o)))})})}),p.hook=function(t){var e=t.split(" ");g(e,function(t,r){c.cssHooks[r]={set:function(t,e){var n,i,o="";if("transparent"!==e&&("string"!==c.type(e)||(n=a(e)))){if(e=p(n||e),!s.rgba&&1!==e._rgba[3]){for(i="backgroundColor"===r?t.parentNode:t;(""===o||"transparent"===o)&&i&&i.style;)try{o=c.css(i,"backgroundColor"),i=i.parentNode}catch(t){}e=e.blend(o&&"transparent"!==o?o:"_default")}e=e.toRgbaString()}try{t.style[r]=e}catch(t){}}},c.fx.step[r]=function(t){t.colorInit||(t.start=p(t.elem,r),t.end=p(t.end),t.colorInit=!0),c.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})},p.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),c.cssHooks.borderColor={expand:function(n){var i={};return g(["Top","Right","Bottom","Left"],function(t,e){i["border"+e+"Color"]=n}),i}},u=c.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(c),function(){var r,o,s,a=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function u(t){var e,n,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(i&&i.length&&i[0]&&i[i[0]])for(n=i.length;n--;)"string"==typeof i[e=i[n]]&&(o[T.camelCase(e)]=i[e]);else for(e in i)"string"==typeof i[e]&&(o[e]=i[e]);return o}T.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){T.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(c.style(t.elem,e,t.end),t.setAttr=!0)}}),T.fn.addBack||(T.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),T.effects.animateClass=function(o,t,e,n){var r=T.speed(t,e,n);return this.queue(function(){var t,n=T(this),e=n.attr("class")||"",i=r.children?n.find("*").addBack():n;i=i.map(function(){return{el:T(this),start:u(this)}}),(t=function(){T.each(a,function(t,e){o[e]&&n[e+"Class"](o[e])})})(),i=i.map(function(){return this.end=u(this.el[0]),this.diff=function(t,e){var n,i,o={};for(n in e)i=e[n],t[n]!==i&&(l[n]||!T.fx.step[n]&&isNaN(parseFloat(i))||(o[n]=i));return o}(this.start,this.end),this}),n.attr("class",e),i=i.map(function(){var t=this,e=T.Deferred(),n=T.extend({},r,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,n),e.promise()}),T.when.apply(T,i.get()).done(function(){t(),T.each(arguments,function(){var e=this.el;T.each(this.diff,function(t){e.css(t,"")})}),r.complete.call(n[0])})})},T.fn.extend({addClass:(s=T.fn.addClass,function(t,e,n,i){return e?T.effects.animateClass.call(this,{add:t},e,n,i):s.apply(this,arguments)}),removeClass:(o=T.fn.removeClass,function(t,e,n,i){return 1<arguments.length?T.effects.animateClass.call(this,{remove:t},e,n,i):o.apply(this,arguments)}),toggleClass:(r=T.fn.toggleClass,function(t,e,n,i,o){return"boolean"==typeof e||void 0===e?n?T.effects.animateClass.call(this,e?{add:t}:{remove:t},n,i,o):r.apply(this,arguments):T.effects.animateClass.call(this,{toggle:t},e,n,i)}),switchClass:function(t,e,n,i,o){return T.effects.animateClass.call(this,{add:e,remove:t},n,i,o)}})}(),function(){var e,n,i,o;function c(t,e,n,i){return T.isPlainObject(t)&&(t=(e=t).effect),t={effect:t},null==e&&(e={}),T.isFunction(e)&&(i=e,n=null,e={}),("number"==typeof e||T.fx.speeds[e])&&(i=n,n=e,e={}),T.isFunction(n)&&(i=n,n=null),e&&T.extend(t,e),n=n||e.duration,t.duration=T.fx.off?0:"number"==typeof n?n:n in T.fx.speeds?T.fx.speeds[n]:T.fx.speeds._default,t.complete=i||e.complete,t}function r(t){return!(t&&"number"!=typeof t&&!T.fx.speeds[t])||("string"==typeof t&&!T.effects.effect[t]||(!!T.isFunction(t)||"object"==typeof t&&!t.effect))}function s(t,e){var n=e.outerWidth(),i=e.outerHeight(),o=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,n,i,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?n:parseFloat(o[2]),bottom:"auto"===o[3]?i:parseFloat(o[3]),left:parseFloat(o[4])||0}}T.expr&&T.expr.filters&&T.expr.filters.animated&&(T.expr.filters.animated=(e=T.expr.filters.animated,function(t){return!!T(t).data(h)||e(t)})),!1!==T.uiBackCompat&&T.extend(T.effects,{save:function(t,e){for(var n=0,i=e.length;n<i;n++)null!==e[n]&&t.data(l+e[n],t[0].style[e[n]])},restore:function(t,e){for(var n,i=0,o=e.length;i<o;i++)null!==e[i]&&(n=t.data(l+e[i]),t.css(e[i],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent();var i={width:n.outerWidth(!0),height:n.outerHeight(!0),float:n.css("float")},t=T("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:n.width(),height:n.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return n.wrap(t),(n[0]===o||T.contains(n[0],o))&&T(o).trigger("focus"),t=n.parent(),"static"===n.css("position")?(t.css({position:"relative"}),n.css({position:"relative"})):(T.extend(i,{position:n.css("position"),zIndex:n.css("z-index")}),T.each(["top","left","bottom","right"],function(t,e){i[e]=n.css(e),isNaN(parseInt(i[e],10))&&(i[e]="auto")}),n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(e),t.css(i).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===e||T.contains(t[0],e))&&T(e).trigger("focus")),t}}),T.extend(T.effects,{version:"1.12.1",define:function(t,e,n){return n||(n=e,e="effect"),T.effects.effect[t]=n,T.effects.effect[t].mode=e,n},scaledDimensions:function(t,e,n){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(e||100)/100:1,o="vertical"!==n?(e||100)/100:1;return{height:t.height()*o,width:t.width()*i,outerHeight:t.outerHeight()*o,outerWidth:t.outerWidth()*i}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,n){var i=t.queue();1<e&&i.splice.apply(i,[1,0].concat(i.splice(e,n))),t.dequeue()},saveStyle:function(t){t.data(u,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(u)||"",t.removeData(u)},mode:function(t,e){var n=t.is(":hidden");return"toggle"===e&&(e=n?"show":"hide"),(n?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createPlaceholder:function(t){var e,n=t.css("position"),i=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",e=T("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(l+"placeholder",e)),t.css({position:n,left:i.left,top:i.top}),e},removePlaceholder:function(t){var e=l+"placeholder",n=t.data(e);n&&(n.remove(),t.removeData(e))},cleanUp:function(t){T.effects.restoreStyle(t),T.effects.removePlaceholder(t)},setTransition:function(i,t,o,r){return r=r||{},T.each(t,function(t,e){var n=i.cssUnit(e);0<n[0]&&(r[e]=n[0]*o+n[1])}),r}}),T.fn.extend({effect:function(){var i=c.apply(this,arguments),o=T.effects.effect[i.effect],r=o.mode,t=i.queue,e=t||"fx",s=i.complete,a=i.mode,l=[],n=function(t){var e=T(this),n=T.effects.mode(e,a)||r;e.data(h,!0),l.push(n),r&&("show"===n||n===r&&"hide"===n)&&e.show(),r&&"none"===n||T.effects.saveStyle(e),T.isFunction(t)&&t()};if(T.fx.off||!o)return a?this[a](i.duration,s):this.each(function(){s&&s.call(this)});function u(t){var e=T(this);function n(){T.isFunction(s)&&s.call(e[0]),T.isFunction(t)&&t()}i.mode=l.shift(),!1===T.uiBackCompat||r?"none"===i.mode?(e[a](),n()):o.call(e[0],i,function(){e.removeData(h),T.effects.cleanUp(e),"hide"===i.mode&&e.hide(),n()}):(e.is(":hidden")?"hide"===a:"show"===a)?(e[a](),n()):o.call(e[0],i,n)}return!1===t?this.each(n).each(u):this.queue(e,n).queue(e,u)},show:(o=T.fn.show,function(t){if(r(t))return o.apply(this,arguments);var e=c.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}),hide:(i=T.fn.hide,function(t){if(r(t))return i.apply(this,arguments);var e=c.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}),toggle:(n=T.fn.toggle,function(t){if(r(t)||"boolean"==typeof t)return n.apply(this,arguments);var e=c.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}),cssUnit:function(t){var n=this.css(t),i=[];return T.each(["em","px","%","pt"],function(t,e){0<n.indexOf(e)&&(i=[parseFloat(n),e])}),i},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):s(this.css("clip"),this)},transfer:function(t,e){var n=T(this),i=T(t.to),o="fixed"===i.css("position"),r=T("body"),s=o?r.scrollTop():0,a=o?r.scrollLeft():0,l=i.offset(),u={top:l.top-s,left:l.left-a,height:i.innerHeight(),width:i.innerWidth()},c=n.offset(),h=T("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:c.top-s,left:c.left-a,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){h.remove(),T.isFunction(e)&&e()})}}),T.fx.step.clip=function(t){t.clipInit||(t.start=T(t.elem).cssClip(),"string"==typeof t.end&&(t.end=s(t.end,t.elem)),t.clipInit=!0),T(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),i={},T.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){i[t]=function(t){return Math.pow(t,e+2)}}),T.extend(i,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),T.each(i,function(t,e){T.easing["easeIn"+t]=e,T.easing["easeOut"+t]=function(t){return 1-e(1-t)},T.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}});T.effects,T.effects.define("blind","hide",function(t,e){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},i=T(this),o=t.direction||"up",r=i.cssClip(),s={clip:T.extend({},r)},a=T.effects.createPlaceholder(i);s.clip[n[o][0]]=s.clip[n[o][1]],"show"===t.mode&&(i.cssClip(s.clip),a&&a.css(T.effects.clipToBox(s)),s.clip=r),a&&a.animate(T.effects.clipToBox(s),t.duration,t.easing),i.animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),T.effects.define("bounce",function(t,e){var n,i,o,r=T(this),s=t.mode,a="hide"===s,l="show"===s,u=t.direction||"up",c=t.distance,h=t.times||5,d=2*h+(l||a?1:0),p=t.duration/d,f=t.easing,m="up"===u||"down"===u?"top":"left",g="up"===u||"left"===u,v=0,y=r.queue().length;for(T.effects.createPlaceholder(r),o=r.css(m),c||(c=r["top"===m?"outerHeight":"outerWidth"]()/3),l&&((i={opacity:1})[m]=o,r.css("opacity",0).css(m,g?2*-c:2*c).animate(i,p,f)),a&&(c/=Math.pow(2,h-1)),(i={})[m]=o;v<h;v++)(n={})[m]=(g?"-=":"+=")+c,r.animate(n,p,f).animate(i,p,f),c=a?2*c:c/2;a&&((n={opacity:0})[m]=(g?"-=":"+=")+c,r.animate(n,p,f)),r.queue(e),T.effects.unshift(r,y,d+1)}),T.effects.define("clip","hide",function(t,e){var n,i={},o=T(this),r=t.direction||"vertical",s="both"===r,a=s||"horizontal"===r,l=s||"vertical"===r;n=o.cssClip(),i.clip={top:l?(n.bottom-n.top)/2:n.top,right:a?(n.right-n.left)/2:n.right,bottom:l?(n.bottom-n.top)/2:n.bottom,left:a?(n.right-n.left)/2:n.left},T.effects.createPlaceholder(o),"show"===t.mode&&(o.cssClip(i.clip),i.clip=n),o.animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),T.effects.define("drop","hide",function(t,e){var n,i=T(this),o="show"===t.mode,r=t.direction||"left",s="up"===r||"down"===r?"top":"left",a="up"===r||"left"===r?"-=":"+=",l="+="===a?"-=":"+=",u={opacity:0};T.effects.createPlaceholder(i),n=t.distance||i["top"===s?"outerHeight":"outerWidth"](!0)/2,u[s]=a+n,o&&(i.css(u),u[s]=l+n,u.opacity=1),i.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),T.effects.define("explode","hide",function(t,e){var n,i,o,r,s,a,l=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=l,c=T(this),h="show"===t.mode,d=c.show().css("visibility","hidden").offset(),p=Math.ceil(c.outerWidth()/u),f=Math.ceil(c.outerHeight()/l),m=[];function g(){m.push(this),m.length===l*u&&(c.css({visibility:"visible"}),T(m).remove(),e())}for(n=0;n<l;n++)for(r=d.top+n*f,a=n-(l-1)/2,i=0;i<u;i++)o=d.left+i*p,s=i-(u-1)/2,c.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-i*p,top:-n*f}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:f,left:o+(h?s*p:0),top:r+(h?a*f:0),opacity:h?0:1}).animate({left:o+(h?0:s*p),top:r+(h?0:a*f),opacity:h?1:0},t.duration||500,t.easing,g)}),T.effects.define("fade","toggle",function(t,e){var n="show"===t.mode;T(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),T.effects.define("fold","hide",function(e,t){var n=T(this),i=e.mode,o="show"===i,r="hide"===i,s=e.size||15,a=/([0-9]+)%/.exec(s),l=!!e.horizFirst?["right","bottom"]:["bottom","right"],u=e.duration/2,c=T.effects.createPlaceholder(n),h=n.cssClip(),d={clip:T.extend({},h)},p={clip:T.extend({},h)},f=[h[l[0]],h[l[1]]],m=n.queue().length;a&&(s=parseInt(a[1],10)/100*f[r?0:1]),d.clip[l[0]]=s,p.clip[l[0]]=s,p.clip[l[1]]=0,o&&(n.cssClip(p.clip),c&&c.css(T.effects.clipToBox(p)),p.clip=h),n.queue(function(t){c&&c.animate(T.effects.clipToBox(d),u,e.easing).animate(T.effects.clipToBox(p),u,e.easing),t()}).animate(d,u,e.easing).animate(p,u,e.easing).queue(t),T.effects.unshift(n,m,4)}),T.effects.define("highlight","show",function(t,e){var n=T(this),i={backgroundColor:n.css("backgroundColor")};"hide"===t.mode&&(i.opacity=0),T.effects.saveStyle(n),n.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),T.effects.define("size",function(o,e){var t,r,n,i=T(this),s=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=o.mode,c="effect"!==u,h=o.scale||"both",d=o.origin||["middle","center"],p=i.css("position"),f=i.position(),m=T.effects.scaledDimensions(i),g=o.from||m,v=o.to||T.effects.scaledDimensions(i,0);T.effects.createPlaceholder(i),"show"===u&&(n=g,g=v,v=n),r={from:{y:g.height/m.height,x:g.width/m.width},to:{y:v.height/m.height,x:v.width/m.width}},"box"!==h&&"both"!==h||(r.from.y!==r.to.y&&(g=T.effects.setTransition(i,a,r.from.y,g),v=T.effects.setTransition(i,a,r.to.y,v)),r.from.x!==r.to.x&&(g=T.effects.setTransition(i,l,r.from.x,g),v=T.effects.setTransition(i,l,r.to.x,v))),"content"!==h&&"both"!==h||r.from.y!==r.to.y&&(g=T.effects.setTransition(i,s,r.from.y,g),v=T.effects.setTransition(i,s,r.to.y,v)),d&&(t=T.effects.getBaseline(d,m),g.top=(m.outerHeight-g.outerHeight)*t.y+f.top,g.left=(m.outerWidth-g.outerWidth)*t.x+f.left,v.top=(m.outerHeight-v.outerHeight)*t.y+f.top,v.left=(m.outerWidth-v.outerWidth)*t.x+f.left),i.css(g),"content"!==h&&"both"!==h||(a=a.concat(["marginTop","marginBottom"]).concat(s),l=l.concat(["marginLeft","marginRight"]),i.find("*[width]").each(function(){var t=T(this),e=T.effects.scaledDimensions(t),n={height:e.height*r.from.y,width:e.width*r.from.x,outerHeight:e.outerHeight*r.from.y,outerWidth:e.outerWidth*r.from.x},i={height:e.height*r.to.y,width:e.width*r.to.x,outerHeight:e.height*r.to.y,outerWidth:e.width*r.to.x};r.from.y!==r.to.y&&(n=T.effects.setTransition(t,a,r.from.y,n),i=T.effects.setTransition(t,a,r.to.y,i)),r.from.x!==r.to.x&&(n=T.effects.setTransition(t,l,r.from.x,n),i=T.effects.setTransition(t,l,r.to.x,i)),c&&T.effects.saveStyle(t),t.css(n),t.animate(i,o.duration,o.easing,function(){c&&T.effects.restoreStyle(t)})})),i.animate(v,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){var t=i.offset();0===v.opacity&&i.css("opacity",g.opacity),c||(i.css("position","static"===p?"relative":p).offset(t),T.effects.saveStyle(i)),e()}})}),T.effects.define("scale",function(t,e){var n=T(this),i=t.mode,o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"effect"!==i?0:100),r=T.extend(!0,{from:T.effects.scaledDimensions(n),to:T.effects.scaledDimensions(n,o,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(r.from.opacity=1,r.to.opacity=0),T.effects.effect.size.call(this,r,e)}),T.effects.define("puff","hide",function(t,e){var n=T.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});T.effects.effect.scale.call(this,n,e)}),T.effects.define("pulsate","show",function(t,e){var n=T(this),i=t.mode,o="show"===i,r=o||"hide"===i,s=2*(t.times||5)+(r?1:0),a=t.duration/s,l=0,u=1,c=n.queue().length;for(!o&&n.is(":visible")||(n.css("opacity",0).show(),l=1);u<s;u++)n.animate({opacity:l},a,t.easing),l=1-l;n.animate({opacity:l},a,t.easing),n.queue(e),T.effects.unshift(n,c,s+1)}),T.effects.define("shake",function(t,e){var n=1,i=T(this),o=t.direction||"left",r=t.distance||20,s=t.times||3,a=2*s+1,l=Math.round(t.duration/a),u="up"===o||"down"===o?"top":"left",c="up"===o||"left"===o,h={},d={},p={},f=i.queue().length;for(T.effects.createPlaceholder(i),h[u]=(c?"-=":"+=")+r,d[u]=(c?"+=":"-=")+2*r,p[u]=(c?"-=":"+=")+2*r,i.animate(h,l,t.easing);n<s;n++)i.animate(d,l,t.easing).animate(p,l,t.easing);i.animate(d,l,t.easing).animate(h,l/2,t.easing).queue(e),T.effects.unshift(i,f,a+1)}),T.effects.define("slide","show",function(t,e){var n,i,o=T(this),r={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},s=t.mode,a=t.direction||"left",l="up"===a||"down"===a?"top":"left",u="up"===a||"left"===a,c=t.distance||o["top"===l?"outerHeight":"outerWidth"](!0),h={};T.effects.createPlaceholder(o),n=o.cssClip(),i=o.position()[l],h[l]=(u?-1:1)*c+i,h.clip=o.cssClip(),h.clip[r[a][1]]=h.clip[r[a][0]],"show"===s&&(o.cssClip(h.clip),o.css(l,h[l]),h.clip=n,h[l]=i),o.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:e})});!1!==T.uiBackCompat&&T.effects.define("transfer",function(t,e){T(this).transfer(t,e)});T.ui.focusable=function(t,e){var n,i,o,r,s,a=t.nodeName.toLowerCase();return"area"===a?(i=(n=t.parentNode).name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&(0<(o=T("img[usemap='#"+i+"']")).length&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(a)?(r=!t.disabled)&&(s=T(t).closest("fieldset")[0])&&(r=!s.disabled):r="a"===a&&t.href||e,r&&T(t).is(":visible")&&function(t){var e=t.css("visibility");for(;"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}(T(t)))},T.extend(T.expr[":"],{focusable:function(t){return T.ui.focusable(t,null!=T.attr(t,"tabindex"))}});T.ui.focusable,T.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):T(this[0].form)},T.ui.formResetMixin={_formResetHandler:function(){var e=T(this);setTimeout(function(){var t=e.data("ui-form-reset-instances");T.each(t,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(T.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};"1.7"===T.fn.jquery.substring(0,3)&&(T.each(["Width","Height"],function(t,n){var o="Width"===n?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),r={innerWidth:T.fn.innerWidth,innerHeight:T.fn.innerHeight,outerWidth:T.fn.outerWidth,outerHeight:T.fn.outerHeight};function s(t,e,n,i){return T.each(o,function(){e-=parseFloat(T.css(t,"padding"+this))||0,n&&(e-=parseFloat(T.css(t,"border"+this+"Width"))||0),i&&(e-=parseFloat(T.css(t,"margin"+this))||0)}),e}T.fn["inner"+n]=function(t){return void 0===t?r["inner"+n].call(this):this.each(function(){T(this).css(i,s(this,t)+"px")})},T.fn["outer"+n]=function(t,e){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){T(this).css(i,s(this,t,!0,e)+"px")})}}),T.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))});var e,r;T.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},T.ui.escapeSelector=(e=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(e,"\\$1")}),T.fn.labels=function(){var t,e,n,i,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(i=this.eq(0).parents("label"),(n=this.attr("id"))&&(o=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),e="label[for='"+T.ui.escapeSelector(n)+"']",i=i.add(o.find(e).addBack(e))),this.pushStack(i))},T.fn.scrollParent=function(t){var e=this.css("position"),n="absolute"===e,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=T(this);return(!n||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&o.length?o:T(this[0].ownerDocument||document)},T.extend(T.expr[":"],{tabbable:function(t){var e=T.attr(t,"tabindex"),n=null!=e;return(!n||0<=e)&&T.ui.focusable(t,n)}}),T.fn.extend({uniqueId:(r=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&T(this).removeAttr("id")})}}),T.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=T(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():T()}},_createIcons:function(){var t,e,n=this.options.icons;n&&(t=T("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+n.header),t.prependTo(this.headers),e=this.active.children(".ui-accordion-header-icon"),this._removeClass(e,n.header)._addClass(e,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons())):this._activate(e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var e=T.ui.keyCode,n=this.headers.length,i=this.headers.index(t.target),o=!1;switch(t.keyCode){case e.RIGHT:case e.DOWN:o=this.headers[(i+1)%n];break;case e.LEFT:case e.UP:o=this.headers[(i-1+n)%n];break;case e.SPACE:case e.ENTER:this._eventHandler(t);break;case e.HOME:o=this.headers[0];break;case e.END:o=this.headers[n-1]}o&&(T(t.target).attr("tabIndex",-1),T(o).attr("tabIndex",0),T(o).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===T.ui.keyCode.UP&&t.ctrlKey&&T(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=T()):!1===t.active?this._activate(0):this.active.length&&!T.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=T()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var n,t=this.options,e=t.heightStyle,i=this.element.parent();this.active=this._findActive(t.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var t=T(this),e=t.uniqueId().attr("id"),n=t.next(),i=n.uniqueId().attr("id");t.attr("aria-controls",i),n.attr("aria-labelledby",e)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(t.event),"fill"===e?(n=i.height(),this.element.siblings(":visible").each(function(){var t=T(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(n-=t.outerHeight(!0))}),this.headers.each(function(){n-=T(this).outerHeight(!0)}),this.headers.next().each(function(){T(this).height(Math.max(0,n-T(this).innerHeight()+T(this).height()))}).css("overflow","auto")):"auto"===e&&(n=0,this.headers.next().each(function(){var t=T(this).is(":visible");t||T(this).show(),n=Math.max(n,T(this).css("height","").height()),t||T(this).hide()}).height(n))},_activate:function(t){var e=this._findActive(t)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:T.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):T()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&T.each(t.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var e,n,i=this.options,o=this.active,r=T(t.currentTarget),s=r[0]===o[0],a=s&&i.collapsible,l=a?T():r.next(),u=o.next(),c={oldHeader:o,oldPanel:u,newHeader:a?T():r,newPanel:l};t.preventDefault(),s&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!a&&this.headers.index(r),this.active=s?T():r,this._toggle(c),this._removeClass(o,"ui-accordion-header-active","ui-state-active"),i.icons&&(e=o.children(".ui-accordion-header-icon"),this._removeClass(e,null,i.icons.activeHeader)._addClass(e,null,i.icons.header)),s||(this._removeClass(r,"ui-accordion-header-collapsed")._addClass(r,"ui-accordion-header-active","ui-state-active"),i.icons&&(n=r.children(".ui-accordion-header-icon"),this._removeClass(n,null,i.icons.header)._addClass(n,null,i.icons.activeHeader)),this._addClass(r.next(),"ui-accordion-content-active")))},_toggle:function(t){var e=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=e,this.prevHide=n,this.options.animate?this._animate(e,n,t):(n.hide(),e.show(),this._toggleComplete(t)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),e.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):e.length&&this.headers.filter(function(){return 0===parseInt(T(this).attr("tabIndex"),10)}).attr("tabIndex",-1),e.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,n,e){var i,o,r,s=this,a=0,l=t.css("box-sizing"),u=t.length&&(!n.length||t.index()<n.index()),c=this.options.animate||{},h=u&&c.down||c,d=function(){s._toggleComplete(e)};return"number"==typeof h&&(r=h),"string"==typeof h&&(o=h),o=o||h.easing||c.easing,r=r||h.duration||c.duration,n.length?t.length?(i=t.show().outerHeight(),n.animate(this.hideProps,{duration:r,easing:o,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:r,easing:o,complete:d,step:function(t,e){e.now=Math.round(t),"height"!==e.prop?"content-box"===l&&(a+=e.now):"content"!==s.options.heightStyle&&(e.now=Math.round(i-n.outerHeight()-a),a=0)}})):n.animate(this.hideProps,r,o,d):t.animate(this.showProps,r,o,d)},_toggleComplete:function(t){var e=t.oldPanel,n=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(n,"ui-accordion-header-active")._addClass(n,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),T.ui.safeActiveElement=function(e){var n;try{n=e.activeElement}catch(t){n=e.body}return n||(n=e.body),n.nodeName||(n=e.body),n},T.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(t){var e=T(t.target),n=T(T.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var e=T(t.target).closest(".ui-menu-item"),n=T(t.currentTarget);e[0]===n[0]&&(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,n))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,n)},blur:function(t){this._delay(function(){!T.contains(this.element[0],T.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each(function(){var t=T(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var e,n,i,o,r=!0;switch(t.keyCode){case T.ui.keyCode.PAGE_UP:this.previousPage(t);break;case T.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case T.ui.keyCode.HOME:this._move("first","first",t);break;case T.ui.keyCode.END:this._move("last","last",t);break;case T.ui.keyCode.UP:this.previous(t);break;case T.ui.keyCode.DOWN:this.next(t);break;case T.ui.keyCode.LEFT:this.collapse(t);break;case T.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case T.ui.keyCode.ENTER:case T.ui.keyCode.SPACE:this._activate(t);break;case T.ui.keyCode.ESCAPE:this.collapse(t);break;default:r=!1,n=this.previousFilter||"",o=!1,i=96<=t.keyCode&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),i===n?o=!0:i=n+i,e=this._filterMenuItems(i),(e=o&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e).length||(i=String.fromCharCode(t.keyCode),e=this._filterMenuItems(i)),e.length?(this.focus(t,e),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}r&&t.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var t,e,n,i,o=this,r=this.options.icons.submenu,s=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),e=s.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=T(this),e=t.prev(),n=T("<span>").data("ui-menu-submenu-caret",!0);o._addClass(n,"ui-menu-icon","ui-icon "+r),e.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",e.attr("id"))}),this._addClass(e,"ui-menu","ui-widget ui-widget-content ui-front"),(t=s.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=T(this);o._isDivider(t)&&o._addClass(t,"ui-menu-divider","ui-widget-content")}),i=(n=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(i,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!T.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var n,i,o;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(n=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(t){var e,n,i,o,r,s;this._hasScroll()&&(e=parseFloat(T.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(T.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-e-n,o=this.activeMenu.scrollTop(),r=this.activeMenu.height(),s=t.outerHeight(),i<0?this.activeMenu.scrollTop(o+i):r<i+s&&this.activeMenu.scrollTop(o+i-r+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(t){var e=T.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var t=n?this.element:T(e&&e.target).closest(this.element.find(".ui-menu"));t.length||(t=this.element),this._close(t),this.blur(e),this._removeClass(t.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=t},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!T(t.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[e]()),this.focus(n,i)},nextPage:function(t){var e,n,i;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(e=T(this)).offset().top-n-i<0}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var e,n,i;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(e=T(this)).offset().top-n+i}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||T(t.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,e)},_filterMenuItems:function(t){var e=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(T.trim(T(this).children(".ui-menu-item-wrapper").text()))})}});T.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var n,i,o,t=this.element[0].nodeName.toLowerCase(),e="textarea"===t,r="input"===t;this.isMultiLine=e||!r&&this._isContentEditable(this.element),this.valueMethod=this.element[e||r?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(t){if(this.element.prop("readOnly"))i=o=n=!0;else{i=o=n=!1;var e=T.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:n=!0,this._move("previousPage",t);break;case e.PAGE_DOWN:n=!0,this._move("nextPage",t);break;case e.UP:n=!0,this._keyEvent("previous",t);break;case e.DOWN:n=!0,this._keyEvent("next",t);break;case e.ENTER:this.menu.active&&(n=!0,t.preventDefault(),this.menu.select(t));break;case e.TAB:this.menu.active&&this.menu.select(t);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(t),t.preventDefault());break;default:i=!0,this._searchTimeout(t)}}},keypress:function(t){if(n)return n=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||t.preventDefault());if(!i){var e=T.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:this._move("previousPage",t);break;case e.PAGE_DOWN:this._move("nextPage",t);break;case e.UP:this._keyEvent("previous",t);break;case e.DOWN:this._keyEvent("next",t)}}},input:function(t){if(o)return o=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=T("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==T.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,e){var n,i;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){T(t.target).trigger(t.originalEvent)});i=e.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),(n=e.item.attr("aria-label")||i.value)&&T.trim(n).length&&(this.liveRegion.children().hide(),T("<div>").text(n).appendTo(this.liveRegion))},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==T.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=T("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var e=this.menu.element[0];return t.target===this.element[0]||t.target===e||T.contains(e,t.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?T(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var n,i,o=this;T.isArray(this.options.source)?(n=this.options.source,this.source=function(t,e){e(T.ui.autocomplete.filter(n,t.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,e){o.xhr&&o.xhr.abort(),o.xhr=T.ajax({url:i,data:t,dataType:"json",success:function(t){e(t)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(i){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),e=this.menu.element.is(":visible"),n=i.altKey||i.ctrlKey||i.metaKey||i.shiftKey;t&&(!t||e||n)||(this.selectedItem=null,this.search(null,i))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return T.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:T.map(t,function(t){return"string"==typeof t?{label:t,value:t}:T.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var e=this.menu.element.empty();this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),e.position(T.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(n,t){var i=this;T.each(t,function(t,e){i._renderItemData(n,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(t,e){return T("<li>").append(T("<div>").text(e.label)).appendTo(t)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),T.extend(T.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,e){var n=new RegExp(T.ui.autocomplete.escapeRegex(e),"i");return T.grep(t,function(t){return n.test(t.label||t.value||t)})}}),T.widget("ui.autocomplete",T.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),T("<div>").text(e).appendTo(this.liveRegion))}});T.ui.autocomplete;var s=/ui-corner-([a-z]){2,6}/g;T.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var s=this,a=[];T.each(this.options.items,function(o,t){var e,r={};if(t)return"controlgroupLabel"===o?((e=s.element.find(t)).each(function(){var t=T(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),s._addClass(e,null,"ui-widget ui-widget-content ui-state-default"),void(a=a.concat(e.get()))):void(T.fn[o]&&(r=s["_"+o+"Options"]?s["_"+o+"Options"]("middle"):{classes:{}},s.element.find(t).each(function(){var t=T(this),e=t[o]("instance"),n=T.widget.extend({},r);if("button"!==o||!t.parent(".ui-spinner").length){e||(e=t[o]()[o]("instance")),e&&(n.classes=s._resolveClassesValues(n.classes,e)),t[o](n);var i=t[o]("widget");T.data(i[0],"ui-controlgroup-data",e||t[o]("instance")),a.push(i[0])}})))}),this.childWidgets=T(T.unique(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var t=T(this).data("ui-controlgroup-data");t&&t[e]&&t[e]()})},_updateCornerClass:function(t,e){var n=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,n)},_buildSimpleOptions:function(t,e){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[e]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[t],i},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(n,i){var o={};return T.each(n,function(t){var e=i.options.classes[t]||"";e=T.trim(e.replace(s,"")),o[t]=(e+" "+n[t]).replace(/\s+/g," ")}),o},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"!==t?this.refresh():this._callChildMethod(e?"disable":"enable")},refresh:function(){var o,r=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),o=this.childWidgets,this.options.onlyVisible&&(o=o.filter(":visible")),o.length&&(T.each(["first","last"],function(t,e){var n=o[e]().data("ui-controlgroup-data");if(n&&r["_"+n.widgetName+"Options"]){var i=r["_"+n.widgetName+"Options"](1===o.length?"only":e);i.classes=r._resolveClassesValues(i.classes,n),n.element[n.widgetName](i)}else r._updateCornerClass(o[e](),e)}),this._callChildMethod("refresh"))}});T.widget("ui.checkboxradio",[T.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,e,n=this,i=this._super()||{};return this._readType(),e=this.element.labels(),this.label=T(e[e.length-1]),this.label.length||T.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){n.originalLabel+=3===this.nodeType?T(this).text():this.outerHTML}),this.originalLabel&&(i.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(i.disabled=t),i},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||T.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,e="input[name='"+T.ui.escapeSelector(t)+"']";return t?(this.form.length?T(this.form[0].elements).filter(e):T(e).filter(function(){return 0===T(this).form().length})).not(this.element):T([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=T(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e){if(this._super(t,e),"disabled"===t)return this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e);this.refresh()}},_updateIcon:function(t){var e="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=T("<span>"),this.iconSpace=T("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(e+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):e+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",e),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]);var d;T.ui.checkboxradio;T.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===T.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,e){var n="iconPosition"!==t,i=n?this.options.iconPosition:e,o="top"===i||"bottom"===i;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=T("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,e),this._attachIcon(i),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=T("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(i))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,n=void 0===t.icon?this.options.icon:t.icon;e||n||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),(this.element[0].disabled=e)&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==T.uiBackCompat&&(T.widget("ui.button",T.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),T.fn.button=(d=T.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?d.apply(this,arguments):(T.ui.checkboxradio||T.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),T.fn.buttonset=function(){return T.ui.controlgroup||T.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});var p;T.ui.button;function f(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},T.extend(this._defaults,this.regional[""]),this.regional.en=T.extend(!0,{},this.regional[""]),this.regional["en-US"]=T.extend(!0,{},this.regional.en),this.dpDiv=m(T("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function m(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",e,function(){T(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&T(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&T(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",e,g)}function g(){T.datepicker._isDisabledDatepicker(p.inline?p.dpDiv.parent()[0]:p.input[0])||(T(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),T(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&T(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&T(this).addClass("ui-datepicker-next-hover"))}function v(t,e){for(var n in T.extend(t,e),e)null==e[n]&&(t[n]=e[n]);return t}T.extend(T.ui,{datepicker:{version:"1.12.1"}}),T.extend(f.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return v(this._defaults,t||{}),this},_attachDatepicker:function(t,e){var n,i,o;i="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(o=this._newInst(T(t),i)).settings=T.extend({},e||{}),"input"===n?this._connectDatepicker(t,o):i&&this._inlineDatepicker(t,o)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?m(T("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,e){var n=T(t);e.append=T([]),e.trigger=T([]),n.hasClass(this.markerClassName)||(this._attachments(n,e),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(e),T.data(t,"datepicker",e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var n,i,o,r=this._get(e,"appendText"),s=this._get(e,"isRTL");e.append&&e.append.remove(),r&&(e.append=T("<span class='"+this._appendClass+"'>"+r+"</span>"),t[s?"before":"after"](e.append)),t.off("focus",this._showDatepicker),e.trigger&&e.trigger.remove(),"focus"!==(n=this._get(e,"showOn"))&&"both"!==n||t.on("focus",this._showDatepicker),"button"!==n&&"both"!==n||(i=this._get(e,"buttonText"),o=this._get(e,"buttonImage"),e.trigger=T(this._get(e,"buttonImageOnly")?T("<img/>").addClass(this._triggerClass).attr({src:o,alt:i,title:i}):T("<button type='button'></button>").addClass(this._triggerClass).html(o?T("<img/>").attr({src:o,alt:i,title:i}):i)),t[s?"before":"after"](e.trigger),e.trigger.on("click",function(){return T.datepicker._datepickerShowing&&T.datepicker._lastInput===t[0]?T.datepicker._hideDatepicker():(T.datepicker._datepickerShowing&&T.datepicker._lastInput!==t[0]&&T.datepicker._hideDatepicker(),T.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,o,r=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(o=i=n=0;o<t.length;o++)t[o].length>n&&(n=t[o].length,i=o);return i},r.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(t,e){var n=T(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(e.dpDiv),T.data(t,"datepicker",e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,n,i,o){var r,s,a,l,u,c=this._dialogInst;return c||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=T("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),T("body").append(this._dialogInput),(c=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},T.data(this._dialogInput[0],"datepicker",c)),v(c.settings,i||{}),e=e&&e.constructor===Date?this._formatDate(c,e):e,this._dialogInput.val(e),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(s=document.documentElement.clientWidth,a=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[s/2-100+l,a/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),T.blockUI&&T.blockUI(this.dpDiv),T.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var e,n=T(t),i=T.data(t,"datepicker");n.hasClass(this.markerClassName)&&(e=t.nodeName.toLowerCase(),T.removeData(t,"datepicker"),"input"===e?(i.append.remove(),i.trigger.remove(),n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==e&&"span"!==e||n.removeClass(this.markerClassName).empty(),p===i&&(p=null))},_enableDatepicker:function(e){var t,n,i=T(e),o=T.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==t&&"span"!==t||((n=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=T.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var t,n,i=T(e),o=T.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==t&&"span"!==t||((n=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=T.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(t){try{return T.data(t,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,n){var i,o,r,s,a=this._getInst(t);if(2===arguments.length&&"string"==typeof e)return"defaults"===e?T.extend({},T.datepicker._defaults):a?"all"===e?T.extend({},a.settings):this._get(a,e):null;i=e||{},"string"==typeof e&&((i={})[e]=n),a&&(this._curInst===a&&this._hideDatepicker(),o=this._getDateDatepicker(t,!0),r=this._getMinMaxDate(a,"min"),s=this._getMinMaxDate(a,"max"),v(a.settings,i),null!==r&&void 0!==i.dateFormat&&void 0===i.minDate&&(a.settings.minDate=this._formatDate(a,r)),null!==s&&void 0!==i.dateFormat&&void 0===i.maxDate&&(a.settings.maxDate=this._formatDate(a,s)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(T(t),a),this._autoSize(a),this._setDate(a,o),this._updateAlternate(a),this._updateDatepicker(a))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(t){var e,n,i,o=T.datepicker._getInst(t.target),r=!0,s=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,T.datepicker._datepickerShowing)switch(t.keyCode){case 9:T.datepicker._hideDatepicker(),r=!1;break;case 13:return(i=T("td."+T.datepicker._dayOverClass+":not(."+T.datepicker._currentClass+")",o.dpDiv))[0]&&T.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,i[0]),(e=T.datepicker._get(o,"onSelect"))?(n=T.datepicker._formatDate(o),e.apply(o.input?o.input[0]:null,[n,o])):T.datepicker._hideDatepicker(),!1;case 27:T.datepicker._hideDatepicker();break;case 33:T.datepicker._adjustDate(t.target,t.ctrlKey?-T.datepicker._get(o,"stepBigMonths"):-T.datepicker._get(o,"stepMonths"),"M");break;case 34:T.datepicker._adjustDate(t.target,t.ctrlKey?+T.datepicker._get(o,"stepBigMonths"):+T.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&T.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&T.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&T.datepicker._adjustDate(t.target,s?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&T.datepicker._adjustDate(t.target,t.ctrlKey?-T.datepicker._get(o,"stepBigMonths"):-T.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&T.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&T.datepicker._adjustDate(t.target,s?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&T.datepicker._adjustDate(t.target,t.ctrlKey?+T.datepicker._get(o,"stepBigMonths"):+T.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&T.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?T.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e,n,i=T.datepicker._getInst(t.target);if(T.datepicker._get(i,"constrainInput"))return e=T.datepicker._possibleChars(T.datepicker._get(i,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!e||-1<e.indexOf(n)},_doKeyUp:function(t){var e=T.datepicker._getInst(t.target);if(e.input.val()!==e.lastVal)try{T.datepicker.parseDate(T.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,T.datepicker._getFormatConfig(e))&&(T.datepicker._setDateFromField(e),T.datepicker._updateAlternate(e),T.datepicker._updateDatepicker(e))}catch(t){}return!0},_showDatepicker:function(t){var e,n,i,o,r,s,a;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=T("input",t.parentNode)[0]),T.datepicker._isDisabledDatepicker(t)||T.datepicker._lastInput===t)||(e=T.datepicker._getInst(t),T.datepicker._curInst&&T.datepicker._curInst!==e&&(T.datepicker._curInst.dpDiv.stop(!0,!0),e&&T.datepicker._datepickerShowing&&T.datepicker._hideDatepicker(T.datepicker._curInst.input[0])),!1!==(i=(n=T.datepicker._get(e,"beforeShow"))?n.apply(t,[t,e]):{})&&(v(e.settings,i),e.lastVal=null,T.datepicker._lastInput=t,T.datepicker._setDateFromField(e),T.datepicker._inDialog&&(t.value=""),T.datepicker._pos||(T.datepicker._pos=T.datepicker._findPos(t),T.datepicker._pos[1]+=t.offsetHeight),o=!1,T(t).parents().each(function(){return!(o|="fixed"===T(this).css("position"))}),r={left:T.datepicker._pos[0],top:T.datepicker._pos[1]},T.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),T.datepicker._updateDatepicker(e),r=T.datepicker._checkOffset(e,r,o),e.dpDiv.css({position:T.datepicker._inDialog&&T.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),e.inline||(s=T.datepicker._get(e,"showAnim"),a=T.datepicker._get(e,"duration"),e.dpDiv.css("z-index",function(t){for(var e,n;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(t.css("zIndex"),10),!isNaN(n)&&0!==n))return n;t=t.parent()}return 0}(T(t))+1),T.datepicker._datepickerShowing=!0,T.effects&&T.effects.effect[s]?e.dpDiv.show(s,T.datepicker._get(e,"showOptions"),a):e.dpDiv[s||"show"](s?a:null),T.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),T.datepicker._curInst=e)))},_updateDatepicker:function(t){this.maxRows=4,(p=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var e,n=this._getNumberOfMonths(t),i=n[1],o=t.dpDiv.find("."+this._dayOverClass+" a");0<o.length&&g.apply(o.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<i&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",17*i+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===T.datepicker._curInst&&T.datepicker._datepickerShowing&&T.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(e=t.yearshtml,setTimeout(function(){e===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),e=t.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(t,e,n){var i=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(n?0:T(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:T(document).scrollTop());return e.left-=this._get(t,"isRTL")?i-r:0,e.left-=n&&e.left===t.input.offset().left?T(document).scrollLeft():0,e.top-=n&&e.top===t.input.offset().top+s?T(document).scrollTop():0,e.left-=Math.min(e.left,e.left+i>a&&i<a?Math.abs(e.left+i-a):0),e.top-=Math.min(e.top,e.top+o>l&&o<l?Math.abs(o+s):0),e},_findPos:function(t){for(var e,n=this._getInst(t),i=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||T.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return[(e=T(t).offset()).left,e.top]},_hideDatepicker:function(t){var e,n,i,o,r=this._curInst;!r||t&&r!==T.data(t,"datepicker")||this._datepickerShowing&&(e=this._get(r,"showAnim"),n=this._get(r,"duration"),i=function(){T.datepicker._tidyDialog(r)},T.effects&&(T.effects.effect[e]||T.effects[e])?r.dpDiv.hide(e,T.datepicker._get(r,"showOptions"),n,i):r.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?n:null,i),e||i(),this._datepickerShowing=!1,(o=this._get(r,"onClose"))&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),T.blockUI&&(T.unblockUI(),T("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(T.datepicker._curInst){var e=T(t.target),n=T.datepicker._getInst(e[0]);(e[0].id===T.datepicker._mainDivId||0!==e.parents("#"+T.datepicker._mainDivId).length||e.hasClass(T.datepicker.markerClassName)||e.closest("."+T.datepicker._triggerClass).length||!T.datepicker._datepickerShowing||T.datepicker._inDialog&&T.blockUI)&&(!e.hasClass(T.datepicker.markerClassName)||T.datepicker._curInst===n)||T.datepicker._hideDatepicker()}},_adjustDate:function(t,e,n){var i=T(t),o=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(o,e+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(t){var e,n=T(t),i=this._getInst(n[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(e=new Date,i.selectedDay=e.getDate(),i.drawMonth=i.selectedMonth=e.getMonth(),i.drawYear=i.selectedYear=e.getFullYear()),this._notifyChange(i),this._adjustDate(n)},_selectMonthYear:function(t,e,n){var i=T(t),o=this._getInst(i[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(i)},_selectDay:function(t,e,n,i){var o,r=T(t);T(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||((o=this._getInst(r[0])).selectedDay=o.currentDay=T("a",i).html(),o.selectedMonth=o.currentMonth=e,o.selectedYear=o.currentYear=n,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var e=T(t);this._selectDate(e,"")},_selectDate:function(t,e){var n,i=T(t),o=this._getInst(i[0]);e=null!=e?e:this._formatDate(o),o.input&&o.input.val(e),this._updateAlternate(o),(n=this._get(o,"onSelect"))?n.apply(o.input?o.input[0]:null,[e,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var e,n,i,o=this._get(t,"altField");o&&(e=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),i=this.formatDate(e,n,this._getFormatConfig(t)),T(o).val(i))},noWeekends:function(t){var e=t.getDay();return[0<e&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(n,r,t){if(null==n||null==r)throw"Invalid arguments";if(""===(r="object"==typeof r?r.toString():r+""))return null;var i,e,o,s,a=0,l=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),c=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,h=(t?t.dayNames:null)||this._defaults.dayNames,d=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,p=(t?t.monthNames:null)||this._defaults.monthNames,f=-1,m=-1,g=-1,v=-1,y=!1,b=function(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e},_=function(t){var e=b(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,i=new RegExp("^\\d{"+("y"===t?n:1)+","+n+"}"),o=r.substring(a).match(i);if(!o)throw"Missing number at position "+a;return a+=o[0].length,parseInt(o[0],10)},w=function(t,e,n){var i=-1,o=T.map(b(t)?n:e,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(T.each(o,function(t,e){var n=e[1];if(r.substr(a,n.length).toLowerCase()===n.toLowerCase())return i=e[0],a+=n.length,!1}),-1!==i)return i+1;throw"Unknown name at position "+a},x=function(){if(r.charAt(a)!==n.charAt(i))throw"Unexpected literal at position "+a;a++};for(i=0;i<n.length;i++)if(y)"'"!==n.charAt(i)||b("'")?x():y=!1;else switch(n.charAt(i)){case"d":g=_("d");break;case"D":w("D",c,h);break;case"o":v=_("o");break;case"m":m=_("m");break;case"M":m=w("M",d,p);break;case"y":f=_("y");break;case"@":f=(s=new Date(_("@"))).getFullYear(),m=s.getMonth()+1,g=s.getDate();break;case"!":f=(s=new Date((_("!")-this._ticksTo1970)/1e4)).getFullYear(),m=s.getMonth()+1,g=s.getDate();break;case"'":b("'")?x():y=!0;break;default:x()}if(a<r.length&&(o=r.substr(a),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=u?0:-100)),-1<v)for(m=1,g=v;;){if(g<=(e=this._getDaysInMonth(f,m-1)))break;m++,g-=e}if((s=this._daylightSavingAdjust(new Date(f,m-1,g))).getFullYear()!==f||s.getMonth()+1!==m||s.getDate()!==g)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(n,t,e){if(!t)return"";var i,o=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,r=(e?e.dayNames:null)||this._defaults.dayNames,s=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,a=(e?e.monthNames:null)||this._defaults.monthNames,l=function(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e},u=function(t,e,n){var i=""+e;if(l(t))for(;i.length<n;)i="0"+i;return i},c=function(t,e,n,i){return l(t)?i[e]:n[e]},h="",d=!1;if(t)for(i=0;i<n.length;i++)if(d)"'"!==n.charAt(i)||l("'")?h+=n.charAt(i):d=!1;else switch(n.charAt(i)){case"d":h+=u("d",t.getDate(),2);break;case"D":h+=c("D",t.getDay(),o,r);break;case"o":h+=u("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=u("m",t.getMonth()+1,2);break;case"M":h+=c("M",t.getMonth(),s,a);break;case"y":h+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":d=!0;break;default:h+=n.charAt(i)}return h},_possibleChars:function(n){var i,t="",e=!1,o=function(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e};for(i=0;i<n.length;i++)if(e)"'"!==n.charAt(i)||o("'")?t+=n.charAt(i):e=!1;else switch(n.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":o("'")?t+="'":e=!0;break;default:t+=n.charAt(i)}return t},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,o=this._getDefaultDate(t),r=o,s=this._getFormatConfig(t);try{r=this.parseDate(n,i,s)||o}catch(t){i=e?"":i}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=i?r.getDate():0,t.currentMonth=i?r.getMonth():0,t.currentYear=i?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(a,t,e){var n,i,o=null==t||""===t?e:"string"==typeof t?function(t){try{return T.datepicker.parseDate(T.datepicker._get(a,"dateFormat"),t,T.datepicker._getFormatConfig(a))}catch(t){}for(var e=(t.toLowerCase().match(/^c/)?T.datepicker._getDate(a):null)||new Date,n=e.getFullYear(),i=e.getMonth(),o=e.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,s=r.exec(t);s;){switch(s[2]||"d"){case"d":case"D":o+=parseInt(s[1],10);break;case"w":case"W":o+=7*parseInt(s[1],10);break;case"m":case"M":i+=parseInt(s[1],10),o=Math.min(o,T.datepicker._getDaysInMonth(n,i));break;case"y":case"Y":n+=parseInt(s[1],10),o=Math.min(o,T.datepicker._getDaysInMonth(n,i))}s=r.exec(t)}return new Date(n,i,o)}(t):"number"==typeof t?isNaN(t)?e:(n=t,(i=new Date).setDate(i.getDate()+n),i):new Date(t.getTime());return(o=o&&"Invalid Date"===o.toString()?e:o)&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,o=t.selectedMonth,r=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),o===t.selectedMonth&&r===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){T.datepicker._adjustDate(n,-e,"M")},next:function(){T.datepicker._adjustDate(n,+e,"M")},hide:function(){T.datepicker._hideDatepicker()},today:function(){T.datepicker._gotoToday(n)},selectDay:function(){return T.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return T.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return T.datepicker._selectMonthYear(n,this,"Y"),!1}};T(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,o,r,s,a,l,u,c,h,d,p,f,m,g,v,y,b,_,w,x,C,k,$,T,S,M,D,L,E,P,A,O,I,N,R,z,U,F=new Date,H=this._daylightSavingAdjust(new Date(F.getFullYear(),F.getMonth(),F.getDate())),B=this._get(t,"isRTL"),j=this._get(t,"showButtonPanel"),q=this._get(t,"hideIfNoPrevNext"),W=this._get(t,"navigationAsDateFormat"),V=this._getNumberOfMonths(t),Z=this._get(t,"showCurrentAtPos"),G=this._get(t,"stepMonths"),Y=1!==V[0]||1!==V[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Q=t.drawMonth-Z,tt=t.drawYear;if(Q<0&&(Q+=12,tt--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-V[0]*V[1]+1,J.getDate())),e=X&&e<X?X:e;this._daylightSavingAdjust(new Date(tt,Q,1))>e;)--Q<0&&(Q=11,tt--);for(t.drawMonth=Q,t.drawYear=tt,n=this._get(t,"prevText"),n=W?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,Q-G,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,tt,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+n+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+n+"</span></a>",o=this._get(t,"nextText"),o=W?this.formatDate(o,this._daylightSavingAdjust(new Date(tt,Q+G,1)),this._getFormatConfig(t)):o,r=this._canAdjustMonth(t,1,tt,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+o+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+o+"</span></a>",s=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?K:H,s=W?this.formatDate(s,a,this._getFormatConfig(t)):s,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",u=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(B?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,h=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),_="",x=0;x<V[0];x++){for(C="",this.maxRows=4,k=0;k<V[1];k++){if($=this._daylightSavingAdjust(new Date(tt,Q,t.selectedDay)),T=" ui-corner-all",S="",Y){if(S+="<div class='ui-datepicker-group",1<V[1])switch(k){case 0:S+=" ui-datepicker-group-first",T=" ui-corner-"+(B?"right":"left");break;case V[1]-1:S+=" ui-datepicker-group-last",T=" ui-corner-"+(B?"left":"right");break;default:S+=" ui-datepicker-group-middle",T=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===x?B?r:i:"")+(/all|right/.test(T)&&0===x?B?i:r:"")+this._generateMonthYearHeader(t,Q,tt,X,J,0<x||0<k,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",M=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;w<7;w++)M+="<th scope='col'"+(5<=(w+c+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+d[D=(w+c)%7]+"'>"+p[D]+"</span></th>";for(S+=M+"</tr></thead><tbody>",L=this._getDaysInMonth(tt,Q),tt===t.selectedYear&&Q===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,L)),E=(this._getFirstDayOfMonth(tt,Q)-c+7)%7,P=Math.ceil((E+L)/7),A=Y&&this.maxRows>P?this.maxRows:P,this.maxRows=A,O=this._daylightSavingAdjust(new Date(tt,Q,1-E)),I=0;I<A;I++){for(S+="<tr>",N=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(O)+"</td>":"",w=0;w<7;w++)R=g?g.apply(t.input?t.input[0]:null,[O]):[!0,""],U=(z=O.getMonth()!==Q)&&!y||!R[0]||X&&O<X||J&&J<O,N+="<td class='"+(5<=(w+c+6)%7?" ui-datepicker-week-end":"")+(z?" ui-datepicker-other-month":"")+(O.getTime()===$.getTime()&&Q===t.selectedMonth&&t._keyEvent||b.getTime()===O.getTime()&&b.getTime()===$.getTime()?" "+this._dayOverClass:"")+(U?" "+this._unselectableClass+" ui-state-disabled":"")+(z&&!v?"":" "+R[1]+(O.getTime()===K.getTime()?" "+this._currentClass:"")+(O.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(z&&!v||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(U?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(z&&!v?"&#xa0;":U?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===H.getTime()?" ui-state-highlight":"")+(O.getTime()===K.getTime()?" ui-state-active":"")+(z?" ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);S+=N+"</tr>"}11<++Q&&(Q=0,tt++),C+=S+="</tbody></table>"+(Y?"</div>"+(0<V[0]&&k===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}_+=C}return _+=u,t._keyEvent=!1,_},_generateMonthYearHeader:function(t,e,n,i,o,r,s,a){var l,u,c,h,d,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(r||!g)_+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=i&&i.getFullYear()===n,u=o&&o.getFullYear()===n,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=i.getMonth())&&(!u||c<=o.getMonth())&&(_+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+a[c]+"</option>");_+="</select>"}if(y||(b+=_+(!r&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(h=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),f=(p=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e})(h[0]),m=Math.max(f,p(h[1]||"")),f=i?Math.max(f,i.getFullYear()):f,m=o?Math.min(m,o.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=m;f++)t.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!r&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(t,e,n){var i=t.selectedYear+("Y"===n?e:0),o=t.selectedMonth+("M"===n?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(i,o))+("D"===n?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,o,r)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),o=n&&e<n?n:e;return i&&i<o?i:o},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var o=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(n,i+(e<0?e:o[0]*o[1]),1));return e<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var n,i,o=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),s=null,a=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),s=parseInt(n[0],10),a=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(s+=i),n[1].match(/[+\-].*/)&&(a+=i)),(!o||e.getTime()>=o.getTime())&&(!r||e.getTime()<=r.getTime())&&(!s||e.getFullYear()>=s)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var o=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),o,this._getFormatConfig(t))}}),T.fn.datepicker=function(t){if(!this.length)return this;T.datepicker.initialized||(T(document).on("mousedown",T.datepicker._checkExternalClick),T.datepicker.initialized=!0),0===T("#"+T.datepicker._mainDivId).length&&T("body").append(T.datepicker.dpDiv);var e=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?T.datepicker["_"+t+"Datepicker"].apply(T.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?T.datepicker["_"+t+"Datepicker"].apply(T.datepicker,[this].concat(e)):T.datepicker._attachDatepicker(this,t)}):T.datepicker["_"+t+"Datepicker"].apply(T.datepicker,[this[0]].concat(e))},T.datepicker=new f,T.datepicker.initialized=!1,T.datepicker.uuid=(new Date).getTime(),T.datepicker.version="1.12.1";T.datepicker,T.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var y=!1;T(document).on("mouseup",function(){y=!1});T.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(t){if(!0===T.data(t.target,e.widgetName+".preventClickEvent"))return T.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!y){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,n=1===t.which,i=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&T(t.target).closest(this.options.cancel).length;return!(n&&!i&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===T.data(t.target,this.widgetName+".preventClickEvent")&&T.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),y=!0))}},_mouseMove:function(t){if(this._mouseMoved){if(T.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&T.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,y=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),T.ui.plugin={add:function(t,e,n){var i,o=T.ui[t].prototype;for(i in n)o.plugins[i]=o.plugins[i]||[],o.plugins[i].push([e,n[i]])},call:function(t,e,n,i){var o,r=t.plugins[e];if(r&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)t.options[r[o][0]]&&r[o][1].apply(t.element,n)}},T.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&T(t).trigger("blur")};T.widget("ui.draggable",T.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||0<T(t.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===e.iframeFix?"iframe":e.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=T(this);return T("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=T.ui.safeActiveElement(this.document[0]);T(t.target).closest(e).length||T.ui.safeBlur(e)},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),T.ui.ddmanager&&(T.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===T(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),T.ui.ddmanager&&!e.dropBehaviour&&T.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),T.ui.ddmanager&&T.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,e){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!e){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new T.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",T.ui.ddmanager&&T.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=this,n=!1;return T.ui.ddmanager&&!this.options.dropBehaviour&&(n=T.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||T.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?T(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),T.ui.ddmanager&&T.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),T.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new T.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!T(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var e=this.options,n=T.isFunction(e.helper),i=n?T(e.helper.apply(this.element[0],[t])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo),n&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),T.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&T.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options,o=this.document[0];this.relativeContainer=null,i.containment?"window"!==i.containment?"document"!==i.containment?i.containment.constructor!==Array?("parent"===i.containment&&(i.containment=this.helper[0].parentNode),(n=(e=T(i.containment))[0])&&(t=/(scroll|auto)/.test(e.css("overflow")),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=e)):this.containment=i.containment:this.containment=[0,0,T(o).width()-this.helperProportions.width-this.margins.left,(T(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[T(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,T(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,T(window).scrollLeft()+T(window).width()-this.helperProportions.width-this.margins.left,T(window).scrollTop()+(T(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,u=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(n=this.relativeContainer?(i=this.relativeContainer.offset(),[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,u=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,e,n){return n=n||this._uiHash(),T.ui.plugin.call(this,t,[e,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),T.Widget.prototype._trigger.call(this,t,e,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),T.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,n){var i=T.extend({},t,{item:n.element});n.sortables=[],T(n.options.connectToSortable).each(function(){var t=T(this).sortable("instance");t&&!t.options.disabled&&(n.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,i))})},stop:function(e,t,n){var i=T.extend({},t,{item:n.element});n.cancelHelperRemoval=!1,T.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,i))})},drag:function(n,i,o){T.each(o.sortables,function(){var t=!1,e=this;e.positionAbs=o.positionAbs,e.helperProportions=o.helperProportions,e.offset.click=o.offset.click,e._intersectsWith(e.containerCache)&&(t=!0,T.each(o.sortables,function(){return this.positionAbs=o.positionAbs,this.helperProportions=o.helperProportions,this.offset.click=o.offset.click,this!==e&&this._intersectsWith(this.containerCache)&&T.contains(e.element[0],this.element[0])&&(t=!1),t})),t?(e.isOver||(e.isOver=1,o._parent=i.helper.parent(),e.currentItem=i.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return i.helper[0]},n.target=e.currentItem[0],e._mouseCapture(n,!0),e._mouseStart(n,!0,!0),e.offset.click.top=o.offset.click.top,e.offset.click.left=o.offset.click.left,e.offset.parent.left-=o.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=o.offset.parent.top-e.offset.parent.top,o._trigger("toSortable",n),o.dropped=e.element,T.each(o.sortables,function(){this.refreshPositions()}),o.currentItem=o.element,e.fromOutside=o),e.currentItem&&(e._mouseDrag(n),i.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,e.options.revert=!1,e._trigger("out",n,e._uiHash(e)),e._mouseStop(n,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),i.helper.appendTo(o._parent),o._refreshOffsets(n),i.position=o._generatePosition(n,!0),o._trigger("fromSortable",n),o.dropped=!1,T.each(o.sortables,function(){this.refreshPositions()}))})}}),T.ui.plugin.add("draggable","cursor",{start:function(t,e,n){var i=T("body"),o=n.options;i.css("cursor")&&(o._cursor=i.css("cursor")),i.css("cursor",o.cursor)},stop:function(t,e,n){var i=n.options;i._cursor&&T("body").css("cursor",i._cursor)}}),T.ui.plugin.add("draggable","opacity",{start:function(t,e,n){var i=T(e.helper),o=n.options;i.css("opacity")&&(o._opacity=i.css("opacity")),i.css("opacity",o.opacity)},stop:function(t,e,n){var i=n.options;i._opacity&&T(e.helper).css("opacity",i._opacity)}}),T.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,e,n){var i=n.options,o=!1,r=n.scrollParentNotHidden[0],s=n.document[0];r!==s&&"HTML"!==r.tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+r.offsetHeight-t.pageY<i.scrollSensitivity?r.scrollTop=o=r.scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(r.scrollTop=o=r.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+r.offsetWidth-t.pageX<i.scrollSensitivity?r.scrollLeft=o=r.scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(r.scrollLeft=o=r.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-T(s).scrollTop()<i.scrollSensitivity?o=T(s).scrollTop(T(s).scrollTop()-i.scrollSpeed):T(window).height()-(t.pageY-T(s).scrollTop())<i.scrollSensitivity&&(o=T(s).scrollTop(T(s).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-T(s).scrollLeft()<i.scrollSensitivity?o=T(s).scrollLeft(T(s).scrollLeft()-i.scrollSpeed):T(window).width()-(t.pageX-T(s).scrollLeft())<i.scrollSensitivity&&(o=T(s).scrollLeft(T(s).scrollLeft()+i.scrollSpeed)))),!1!==o&&T.ui.ddmanager&&!i.dropBehaviour&&T.ui.ddmanager.prepareOffsets(n,t)}}),T.ui.plugin.add("draggable","snap",{start:function(t,e,n){var i=n.options;n.snapElements=[],T(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=T(this),e=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e,n){var i,o,r,s,a,l,u,c,h,d,p=n.options,f=p.snapTolerance,m=e.offset.left,g=m+n.helperProportions.width,v=e.offset.top,y=v+n.helperProportions.height;for(h=n.snapElements.length-1;0<=h;h--)l=(a=n.snapElements[h].left-n.margins.left)+n.snapElements[h].width,c=(u=n.snapElements[h].top-n.margins.top)+n.snapElements[h].height,g<a-f||l+f<m||y<u-f||c+f<v||!T.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,T.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==p.snapMode&&(i=Math.abs(u-y)<=f,o=Math.abs(c-v)<=f,r=Math.abs(a-g)<=f,s=Math.abs(l-m)<=f,i&&(e.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),o&&(e.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),r&&(e.position.left=n._convertPositionTo("relative",{top:0,left:a-n.helperProportions.width}).left),s&&(e.position.left=n._convertPositionTo("relative",{top:0,left:l}).left)),d=i||o||r||s,"outer"!==p.snapMode&&(i=Math.abs(u-v)<=f,o=Math.abs(c-y)<=f,r=Math.abs(a-m)<=f,s=Math.abs(l-g)<=f,i&&(e.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),o&&(e.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),r&&(e.position.left=n._convertPositionTo("relative",{top:0,left:a}).left),s&&(e.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(i||o||r||s||d)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,T.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=i||o||r||s||d)}}),T.ui.plugin.add("draggable","stack",{start:function(t,e,n){var i,o=n.options,r=T.makeArray(T(o.stack)).sort(function(t,e){return(parseInt(T(t).css("zIndex"),10)||0)-(parseInt(T(e).css("zIndex"),10)||0)});r.length&&(i=parseInt(T(r[0]).css("zIndex"),10)||0,T(r).each(function(t){T(this).css("zIndex",i+t)}),this.css("zIndex",i+r.length))}}),T.ui.plugin.add("draggable","zIndex",{start:function(t,e,n){var i=T(e.helper),o=n.options;i.css("zIndex")&&(o._zIndex=i.css("zIndex")),i.css("zIndex",o.zIndex)},stop:function(t,e,n){var i=n.options;i._zIndex&&T(e.helper).css("zIndex",i._zIndex)}});T.ui.draggable;T.widget("ui.resizable",T.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(t,e){if("hidden"===T(t).css("overflow"))return!1;var n,i=e&&"left"===e?"scrollLeft":"scrollTop";return 0<t[i]||(t[i]=1,n=0<t[i],t[i]=0,n)},_create:function(){var t,e=this.options,n=this;this._addClass("ui-resizable"),T.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(T("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),e.autoHide&&T(this.element).on("mouseenter",function(){e.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){e.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,e=function(t){T(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(e(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,e,n,i,o,r=this.options,s=this;if(this.handles=r.handles||(T(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=T(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},e=0;e<n.length;e++)i="ui-resizable-"+(t=T.trim(n[e])),o=T("<div>"),this._addClass(o,"ui-resizable-handle "+i),o.css({zIndex:r.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(o);this._renderAxis=function(t){var e,n,i,o;for(e in t=t||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=T(this.handles[e]),this._on(this.handles[e],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=T(this.handles[e],this.element),o=/sw|ne|nw|se|n|s/.test(e)?n.outerHeight():n.outerWidth(),i=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(i,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var e,n,i=!1;for(e in this.handles)((n=T(this.handles[e])[0])===t.target||T.contains(n,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var e,n,i,o=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),o.containment&&(e+=T(o.containment).scrollLeft()||0,n+=T(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:e,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=T(".ui-resizable-"+this.axis).css("cursor"),T("body").css("cursor","auto"===i?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e,n,i=this.originalMousePosition,o=this.axis,r=t.pageX-i.left||0,s=t.pageY-i.top||0,a=this._change[o];return this._updatePrevProperties(),a&&(e=a.apply(this,[t,r,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(e=this._updateRatio(e,t)),e=this._respectSize(e,t),this._updateCache(e),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),T.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges())),!1},_mouseStop:function(t){this.resizing=!1;var e,n,i,o,r,s,a,l=this.options,u=this;return this._helper&&(i=(n=(e=this._proportionallyResizeElements).length&&/textarea/i.test(e[0].nodeName))&&this._hasScroll(e[0],"left")?0:u.sizeDiff.height,o=n?0:u.sizeDiff.width,r={width:u.helper.width()-o,height:u.helper.height()-i},s=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,a=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(T.extend(r,{top:a,left:s})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),T("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,n,i,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,i=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),i>r.minHeight&&(r.minHeight=i),n<r.maxWidth&&(r.maxWidth=n),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,i=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===i&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===i&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,i=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,u=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return r&&(t.width=e.minWidth),s&&(t.height=e.minHeight),i&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),r&&u&&(t.left=a-e.minWidth),i&&u&&(t.left=a-e.maxWidth),s&&c&&(t.top=l-e.minHeight),o&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,n=[],i=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)n[e]=parseFloat(i[e])||0,n[e]+=parseFloat(o[e])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,n=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||T("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize;return{left:this.originalPosition.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(t,e,n){return T.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,n]))},sw:function(t,e,n){return T.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,n]))},ne:function(t,e,n){return T.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,n]))},nw:function(t,e,n){return T.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,n]))}},_propagate:function(t,e){T.ui.plugin.call(this,t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),T.ui.plugin.add("resizable","animate",{stop:function(e){var n=T(this).resizable("instance"),t=n.options,i=n._proportionallyResizeElements,o=i.length&&/textarea/i.test(i[0].nodeName),r=o&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,s=o?0:n.sizeDiff.width,a={width:n.size.width-s,height:n.size.height-r},l=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(T.extend(a,u&&l?{top:u,left:l}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var t={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};i&&i.length&&T(i[0]).css({width:t.width,height:t.height}),n._updateCache(t),n._propagate("resize",e)}})}}),T.ui.plugin.add("resizable","containment",{start:function(){var n,i,t,e,o,r,s,a=T(this).resizable("instance"),l=a.options,u=a.element,c=l.containment,h=c instanceof T?c.get(0):/parent/.test(c)?u.parent().get(0):c;h&&(a.containerElement=T(h),/document/.test(c)||c===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:T(document),left:0,top:0,width:T(document).width(),height:T(document).height()||document.body.parentNode.scrollHeight}):(n=T(h),i=[],T(["Top","Right","Left","Bottom"]).each(function(t,e){i[t]=a._num(n.css("padding"+e))}),a.containerOffset=n.offset(),a.containerPosition=n.position(),a.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},t=a.containerOffset,e=a.containerSize.height,o=a.containerSize.width,r=a._hasScroll(h,"left")?h.scrollWidth:o,s=a._hasScroll(h)?h.scrollHeight:e,a.parentData={element:h,left:t.left,top:t.top,width:r,height:s}))},resize:function(t){var e,n,i,o,r=T(this).resizable("instance"),s=r.options,a=r.containerOffset,l=r.position,u=r._aspectRatio||t.shiftKey,c={top:0,left:0},h=r.containerElement,d=!0;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),l.left<(r._helper?a.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-a.left:r.position.left-c.left),u&&(r.size.height=r.size.width/r.aspectRatio,d=!1),r.position.left=s.helper?a.left:0),l.top<(r._helper?a.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-a.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio,d=!1),r.position.top=r._helper?a.top:0),i=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),r.offset.top=i&&o?(r.offset.left=r.parentData.left+r.position.left,r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.element.offset().top),e=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-c.left:r.offset.left-a.left)),n=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-c.top:r.offset.top-a.top)),e+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-e,u&&(r.size.height=r.size.width/r.aspectRatio,d=!1)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,u&&(r.size.width=r.size.height*r.aspectRatio,d=!1)),d||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var t=T(this).resizable("instance"),e=t.options,n=t.containerOffset,i=t.containerPosition,o=t.containerElement,r=T(t.helper),s=r.offset(),a=r.outerWidth()-t.sizeDiff.width,l=r.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(o.css("position"))&&T(this).css({left:s.left-i.left-n.left,width:a,height:l}),t._helper&&!e.animate&&/static/.test(o.css("position"))&&T(this).css({left:s.left-i.left-n.left,width:a,height:l})}}),T.ui.plugin.add("resizable","alsoResize",{start:function(){var t=T(this).resizable("instance").options;T(t.alsoResize).each(function(){var t=T(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var e=T(this).resizable("instance"),i=e.options,o=e.originalSize,r=e.originalPosition,s={height:e.size.height-o.height||0,width:e.size.width-o.width||0,top:e.position.top-r.top||0,left:e.position.left-r.left||0};T(i.alsoResize).each(function(){var t=T(this),i=T(this).data("ui-resizable-alsoresize"),o={},e=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];T.each(e,function(t,e){var n=(i[e]||0)+(s[e]||0);n&&0<=n&&(o[e]=n||null)}),t.css(o)})},stop:function(){T(this).removeData("ui-resizable-alsoresize")}}),T.ui.plugin.add("resizable","ghost",{start:function(){var t=T(this).resizable("instance"),e=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==T.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=T(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=T(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),T.ui.plugin.add("resizable","grid",{resize:function(){var t,e=T(this).resizable("instance"),n=e.options,i=e.size,o=e.originalSize,r=e.originalPosition,s=e.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=a[0]||1,u=a[1]||1,c=Math.round((i.width-o.width)/l)*l,h=Math.round((i.height-o.height)/u)*u,d=o.width+c,p=o.height+h,f=n.maxWidth&&n.maxWidth<d,m=n.maxHeight&&n.maxHeight<p,g=n.minWidth&&n.minWidth>d,v=n.minHeight&&n.minHeight>p;n.grid=a,g&&(d+=l),v&&(p+=u),f&&(d-=l),m&&(p-=u),/^(se|s|e)$/.test(s)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(s)?(e.size.width=d,e.size.height=p,e.position.top=r.top-h):/^(sw)$/.test(s)?(e.size.width=d,e.size.height=p,e.position.left=r.left-c):((p-u<=0||d-l<=0)&&(t=e._getPaddingPlusBorderDimensions(this)),e.position.top=0<p-u?(e.size.height=p,r.top-h):(p=u-t.height,e.size.height=p,r.top+o.height-p),e.position.left=0<d-l?(e.size.width=d,r.left-c):(d=l-t.width,e.size.width=d,r.left+o.width-d))}});T.ui.resizable;T.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=T(this).css(t).offset().top;e<0&&T(this).css("top",t.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&T.fn.draggable&&this._makeDraggable(),this.options.resizable&&T.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?T(t):this.document.find(t||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:T.noop,enable:T.noop,close:function(t){var e=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||T.ui.safeBlur(T.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var n=!1,i=this.uiDialog.siblings(".ui-front:visible").map(function(){return+T(this).css("z-index")}).get(),o=Math.max.apply(null,i);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),n=!0),n&&!e&&this._trigger("focus",t),n},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=T(T.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(t){function e(){var t=T.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||T.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),e.call(this),this._delay(e)},_createWrapper:function(){this.uiDialog=T("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===T.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===T.ui.keyCode.TAB&&!t.isDefaultPrevented()){var e=this.uiDialog.find(":tabbable"),n=e.filter(":first"),i=e.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){i.trigger("focus")}),t.preventDefault()):(this._delay(function(){n.trigger("focus")}),t.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=T("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){T(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=T("<button type='button'></button>").button({label:T("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),t=T("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=T("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=T("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var o=this,t=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),T.isEmptyObject(t)||T.isArray(t)&&!t.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(T.each(t,function(t,e){var n,i;e=T.isFunction(e)?{click:e,text:t}:e,e=T.extend({type:"button"},e),n=e.click,i={icon:e.icon,iconPosition:e.iconPosition,showLabel:e.showLabel,icons:e.icons,text:e.text},delete e.click,delete e.icon,delete e.iconPosition,delete e.showLabel,delete e.icons,"boolean"==typeof e.text&&delete e.text,T("<button></button>",e).button(i).appendTo(o.uiButtonSet).on("click",function(){n.apply(o.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var o=this,r=this.options;function s(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){o._addClass(T(this),"ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",t,s(e))},drag:function(t,e){o._trigger("drag",t,s(e))},stop:function(t,e){var n=e.offset.left-o.document.scrollLeft(),i=e.offset.top-o.document.scrollTop();r.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=i?"+":"")+i,of:o.window},o._removeClass(T(this),"ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",t,s(e))}})},_makeResizable:function(){var r=this,s=this.options,t=s.resizable,e=this.uiDialog.css("position"),n="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";function a(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:n,start:function(t,e){r._addClass(T(this),"ui-dialog-resizing"),r._blockFrames(),r._trigger("resizeStart",t,a(e))},resize:function(t,e){r._trigger("resize",t,a(e))},stop:function(t,e){var n=r.uiDialog.offset(),i=n.left-r.document.scrollLeft(),o=n.top-r.document.scrollTop();s.height=r.uiDialog.height(),s.width=r.uiDialog.width(),s.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=o?"+":"")+o,of:r.window},r._removeClass(T(this),"ui-dialog-resizing"),r._unblockFrames(),r._trigger("resizeStop",t,a(e))}}).css("position",e)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=T(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),e=T.inArray(this,t);-1!==e&&t.splice(e,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,o={};T.each(t,function(t,e){n._setOption(t,e),t in n.sizeRelatedOptions&&(i=!0),t in n.resizableRelatedOptions&&(o[t]=e)}),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,e){var n,i,o=this.uiDialog;"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:T("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((n=o.is(":data(ui-draggable)"))&&!e&&o.draggable("destroy"),!n&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((i=o.is(":data(ui-resizable)"))&&!e&&o.resizable("destroy"),i&&"string"==typeof e&&o.resizable("option","handles",e),i||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=T(this);return T("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!T(t.target).closest(".ui-dialog").length||!!T(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=T("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==T.uiBackCompat&&T.widget("ui.dialog",T.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}});T.ui.dialog;T.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,n=e.accept;this.isover=!1,this.isout=!0,this.accept=T.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){T.ui.ddmanager.droppables[t]=T.ui.ddmanager.droppables[t]||[],T.ui.ddmanager.droppables[t].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=T.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,e){if("accept"===t)this.accept=T.isFunction(e)?e:function(t){return t.is(e)};else if("scope"===t){var n=T.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(e)}this._super(t,e)},_activate:function(t){var e=T.ui.ddmanager.current;this._addActiveClass(),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=T.ui.ddmanager.current;this._removeActiveClass(),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=T.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=T.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(e)))},_drop:function(e,t){var n=t||T.ui.ddmanager.current,i=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=T(this).droppable("instance");if(t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&b(n,T.extend(t,{offset:t.element.offset()}),t.options.tolerance,e))return!(i=!0)}),!i&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var b=T.ui.intersect=function(){function d(t,e,n){return e<=t&&t<e+n}return function(t,e,n,i){if(!e.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,r=(t.positionAbs||t.position.absolute).top+t.margins.top,s=o+t.helperProportions.width,a=r+t.helperProportions.height,l=e.offset.left,u=e.offset.top,c=l+e.proportions().width,h=u+e.proportions().height;switch(n){case"fit":return l<=o&&s<=c&&u<=r&&a<=h;case"intersect":return l<o+t.helperProportions.width/2&&s-t.helperProportions.width/2<c&&u<r+t.helperProportions.height/2&&a-t.helperProportions.height/2<h;case"pointer":return d(i.pageY,u,e.proportions().height)&&d(i.pageX,l,e.proportions().width);case"touch":return(u<=r&&r<=h||u<=a&&a<=h||r<u&&h<a)&&(l<=o&&o<=c||l<=s&&s<=c||o<l&&c<s);default:return!1}}}();!(T.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var n,i,o=T.ui.ddmanager.droppables[t.options.scope]||[],r=e?e.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<o.length;n++)if(!(o[n].options.disabled||t&&!o[n].accept.call(o[n].element[0],t.currentItem||t.element))){for(i=0;i<s.length;i++)if(s[i]===o[n].element[0]){o[n].proportions().height=0;continue t}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===r&&o[n]._activate.call(o[n],e),o[n].offset=o[n].element.offset(),o[n].proportions({width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight}))}},drop:function(t,e){var n=!1;return T.each((T.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&b(t,this,this.options.tolerance,e)&&(n=this._drop.call(this,e)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))}),n},dragStart:function(t,e){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||T.ui.ddmanager.prepareOffsets(t,e)})},drag:function(r,s){r.options.refreshPositions&&T.ui.ddmanager.prepareOffsets(r,s),T.each(T.ui.ddmanager.droppables[r.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var t,e,n,i=b(r,this,this.options.tolerance,s),o=!i&&this.isover?"isout":i&&!this.isover?"isover":null;o&&(this.options.greedy&&(e=this.options.scope,(n=this.element.parents(":data(ui-droppable)").filter(function(){return T(this).droppable("instance").options.scope===e})).length&&((t=T(n[0]).droppable("instance")).greedyChild="isover"===o)),t&&"isover"===o&&(t.isover=!1,t.isout=!0,t._out.call(t,s)),this[o]=!0,this["isout"===o?"isover":"isout"]=!1,this["isover"===o?"_over":"_out"].call(this,s),t&&"isout"===o&&(t.isout=!1,t.isover=!0,t._over.call(t,s)))}})},dragStop:function(t,e){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||T.ui.ddmanager.prepareOffsets(t,e)}})!==T.uiBackCompat&&T.widget("ui.droppable",T.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});T.ui.droppable,T.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=T("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,e=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(e.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=T("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),T.widget("ui.selectable",T.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var i=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){i.elementPos=T(i.element[0]).offset(),i.selectees=T(i.options.filter,i.element[0]),i._addClass(i.selectees,"ui-selectee"),i.selectees.each(function(){var t=T(this),e=t.offset(),n={left:e.left-i.elementPos.left,top:e.top-i.elementPos.top};T.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=T("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(n){var i=this,t=this.options;this.opos=[n.pageX,n.pageY],this.elementPos=T(this.element[0]).offset(),this.options.disabled||(this.selectees=T(t.filter,this.element[0]),this._trigger("start",n),T(t.appendTo).append(this.helper),this.helper.css({left:n.pageX,top:n.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=T.data(this,"selectable-item");t.startselected=!0,n.metaKey||n.ctrlKey||(i._removeClass(t.$element,"ui-selected"),t.selected=!1,i._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element}))}),T(n.target).parents().addBack().each(function(){var t,e=T.data(this,"selectable-item");if(e)return t=!n.metaKey&&!n.ctrlKey||!e.$element.hasClass("ui-selected"),i._removeClass(e.$element,t?"ui-unselecting":"ui-selected")._addClass(e.$element,t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?i._trigger("selecting",n,{selecting:e.element}):i._trigger("unselecting",n,{unselecting:e.element}),!1}))},_mouseDrag:function(i){if(this.dragged=!0,!this.options.disabled){var t,o=this,r=this.options,s=this.opos[0],a=this.opos[1],l=i.pageX,u=i.pageY;return l<s&&(t=l,l=s,s=t),u<a&&(t=u,u=a,a=t),this.helper.css({left:s,top:a,width:l-s,height:u-a}),this.selectees.each(function(){var t=T.data(this,"selectable-item"),e=!1,n={};t&&t.element!==o.element[0]&&(n.left=t.left+o.elementPos.left,n.right=t.right+o.elementPos.left,n.top=t.top+o.elementPos.top,n.bottom=t.bottom+o.elementPos.top,"touch"===r.tolerance?e=!(n.left>l||n.right<s||n.top>u||n.bottom<a):"fit"===r.tolerance&&(e=n.left>s&&n.right<l&&n.top>a&&n.bottom<u),e?(t.selected&&(o._removeClass(t.$element,"ui-selected"),t.selected=!1),t.unselecting&&(o._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1),t.selecting||(o._addClass(t.$element,"ui-selecting"),t.selecting=!0,o._trigger("selecting",i,{selecting:t.element}))):(t.selecting&&((i.metaKey||i.ctrlKey)&&t.startselected?(o._removeClass(t.$element,"ui-selecting"),t.selecting=!1,o._addClass(t.$element,"ui-selected"),t.selected=!0):(o._removeClass(t.$element,"ui-selecting"),t.selecting=!1,t.startselected&&(o._addClass(t.$element,"ui-unselecting"),t.unselecting=!0),o._trigger("unselecting",i,{unselecting:t.element}))),t.selected&&(i.metaKey||i.ctrlKey||t.startselected||(o._removeClass(t.$element,"ui-selected"),t.selected=!1,o._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,o._trigger("unselecting",i,{unselecting:t.element})))))}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,T(".ui-unselecting",this.element[0]).each(function(){var t=T.data(this,"selectable-item");n._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1,t.startselected=!1,n._trigger("unselected",e,{unselected:t.element})}),T(".ui-selecting",this.element[0]).each(function(){var t=T.data(this,"selectable-item");n._removeClass(t.$element,"ui-selecting")._addClass(t.$element,"ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,n._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),T.widget("ui.selectmenu",[T.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=T()},_drawButton:function(){var t,e=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=T("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=T("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(n).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){e._rendered||e._refreshMenu()})},_drawMenu:function(){var i=this;this.menu=T("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=T("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,e){t.preventDefault(),i._setSelection(),i._select(e.item.data("ui-selectmenu-item"),t)},focus:function(t,e){var n=e.item.data("ui-selectmenu-item");null!=i.focusIndex&&n.index!==i.focusIndex&&(i._trigger("focus",t,{item:n}),i.isOpen||i._select(n,t)),i.focusIndex=n.index,i.button.attr("aria-activedescendant",i.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(T.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var e=T("<span>");return this._setText(e,t.label),this._addClass(e,"ui-selectmenu-text"),e},_renderMenu:function(i,t){var o=this,r="";T.each(t,function(t,e){var n;e.optgroup!==r&&(n=T("<li>",{text:e.optgroup}),o._addClass(n,"ui-selectmenu-optgroup","ui-menu-divider"+(e.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),n.appendTo(i),r=e.optgroup),o._renderItemData(i,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(t,e){var n=T("<li>"),i=T("<div>",{title:e.element.attr("title")});return e.disabled&&this._addClass(n,null,"ui-state-disabled"),this._setText(i,e.label),n.append(i).appendTo(t)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var n,i,o=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex).parent("li"):(n=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),o+=":not(.ui-state-disabled)"),(i="first"===t||"last"===t?n["first"===t?"prevAll":"nextAll"](o).eq(-1):n[t+"All"](o).eq(0)).length&&this.menuInstance.focus(e,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?((t=window.getSelection()).removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(T(t.target).closest(".ui-selectmenu-menu, #"+T.ui.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection()).rangeCount&&(this.range=t.getRangeAt(0)):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(t){var e=!0;switch(t.keyCode){case T.ui.keyCode.TAB:case T.ui.keyCode.ESCAPE:this.close(t),e=!1;break;case T.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case T.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case T.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case T.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case T.ui.keyCode.LEFT:this._move("prev",t);break;case T.ui.keyCode.RIGHT:this._move("next",t);break;case T.ui.keyCode.HOME:case T.ui.keyCode.PAGE_UP:this._move("first",t);break;case T.ui.keyCode.END:case T.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),e=!1}e&&t.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==n&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var n=this.button.find("span.ui-icon");this._removeClass(n,null,this.options.icons.button)._addClass(n,null,e.button)}this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?T(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;!1!==t?(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(t){var n=this,i=[];t.each(function(t,e){i.push(n._parseOption(T(e),t))}),this.items=i},_parseOption:function(t,e){var n=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),T.widget("ui.slider",T.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,e,n=this.options,i=this.element.find(".ui-slider-handle"),o=[];for(e=n.values&&n.values.length||1,i.length>e&&(i.slice(e).remove(),i=i.slice(0,e)),t=i.length;t<e;t++)o.push("<span tabindex='0'></span>");this.handles=i.add(T(o.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){T(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:T.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=T("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var e,n,i,o,r,s,a,l=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(n-l.values(t));(e<i||i===e&&(t===l._lastChangedValue||l.values(t)===u.min))&&(i=e,o=T(this),r=t)}),!1!==this._start(t,r)&&(this._mouseSliding=!0,this._handleIndex=r,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),s=o.offset(),a=!T(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:t.pageX-s.left-o.width()/2,top:t.pageY-s.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,n),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,o;return 1<(n=("horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),i=this._valueMax()-this._valueMin(),o=this._valueMin()+n*i,this._trimAlignValue(o)},_uiHash:function(t,e,n){var i={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(i.value=void 0!==e?e:this.values(t),i.values=n||this.values()),i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,n){var i,o=this.value(),r=this.values();this._hasMultipleValues()&&(i=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&!0===this.options.range&&(n=0===e?Math.min(i,n):Math.max(i,n)),r[e]=n),n!==o&&!1!==this._trigger("slide",t,this._uiHash(e,n,r))&&(this._hasMultipleValues()?this.values(e,n):this.value(n))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var n,i,o;if(1<arguments.length)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!T.isArray(t))return this._hasMultipleValues()?this._values(t):this.value();for(n=this.options.values,i=t,o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(i[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,e){var n,i=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),T.isArray(this.options.values)&&(i=this.options.values.length),this._super(t,e),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(e),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=i-1;0<=n;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=0<n?e:-e),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),n=this.options.step;(t=Math.round((t-e)/n)*n+e)>this.options.max&&(t-=n),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,n,t,i,o,r=this.options.range,s=this.options,a=this,l=!this._animateOff&&s.animate,u={};this._hasMultipleValues()?this.handles.each(function(t){n=(a.values(t)-a._valueMin())/(a._valueMax()-a._valueMin())*100,u["horizontal"===a.orientation?"left":"bottom"]=n+"%",T(this).stop(1,1)[l?"animate":"css"](u,s.animate),!0===a.options.range&&("horizontal"===a.orientation?(0===t&&a.range.stop(1,1)[l?"animate":"css"]({left:n+"%"},s.animate),1===t&&a.range[l?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:s.animate})):(0===t&&a.range.stop(1,1)[l?"animate":"css"]({bottom:n+"%"},s.animate),1===t&&a.range[l?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:s.animate}))),e=n}):(t=this.value(),i=this._valueMin(),o=this._valueMax(),n=o!==i?(t-i)/(o-i)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[l?"animate":"css"](u,s.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:n+"%"},s.animate),"max"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-n+"%"},s.animate),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:n+"%"},s.animate),"max"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-n+"%"},s.animate))},_handleEvents:{keydown:function(t){var e,n,i,o=T(t.target).data("ui-slider-handle-index");switch(t.keyCode){case T.ui.keyCode.HOME:case T.ui.keyCode.END:case T.ui.keyCode.PAGE_UP:case T.ui.keyCode.PAGE_DOWN:case T.ui.keyCode.UP:case T.ui.keyCode.RIGHT:case T.ui.keyCode.DOWN:case T.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(T(t.target),null,"ui-state-active"),!1===this._start(t,o)))return}switch(i=this.options.step,e=n=this._hasMultipleValues()?this.values(o):this.value(),t.keyCode){case T.ui.keyCode.HOME:n=this._valueMin();break;case T.ui.keyCode.END:n=this._valueMax();break;case T.ui.keyCode.PAGE_UP:n=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/this.numPages);break;case T.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/this.numPages);break;case T.ui.keyCode.UP:case T.ui.keyCode.RIGHT:if(e===this._valueMax())return;n=this._trimAlignValue(e+i);break;case T.ui.keyCode.DOWN:case T.ui.keyCode.LEFT:if(e===this._valueMin())return;n=this._trimAlignValue(e-i)}this._slide(t,o,n)},keyup:function(t){var e=T(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,e),this._change(t,e),this._removeClass(T(t.target),null,"ui-state-active"))}}}),T.widget("ui.sortable",T.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return e<=t&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),T.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var n=null,i=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),T(t.target).parents().each(function(){if(T.data(this,o.widgetName+"-item")===o)return n=T(this),!1}),T.data(t.target,o.widgetName+"-item")===o&&(n=T(t.target)),!!n&&(!(this.options.handle&&!e&&(T(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,n){var i,o,r=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},T.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=T("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(i=this.containers.length-1;0<=i;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return T.ui.ddmanager&&(T.ui.ddmanager.current=this),T.ui.ddmanager&&!r.dropBehaviour&&T.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,n,i,o,r=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-this.document.scrollTop()<r.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<r.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),t.pageX-this.document.scrollLeft()<r.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),!1!==s&&T.ui.ddmanager&&!r.dropBehaviour&&T.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(i=(n=this.items[e]).item[0],(o=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===i||T.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&T.contains(this.element[0],i))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),T.ui.ddmanager&&T.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(T.ui.ddmanager&&!this.options.dropBehaviour&&T.ui.ddmanager.drop(this,t),this.options.revert){var n=this,i=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,T(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new T.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),T.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?T(this.domPosition.prev).after(this.currentItem):T(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},T(t).each(function(){var t=(T(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&n.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e.each(function(){n.push(T(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,u=this.offset.click.top,c=this.offset.click.left,h="x"===this.options.axis||a<i+u&&i+u<l,d="y"===this.options.axis||r<e+c&&e+c<s,p=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:r<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!(!i||!o)&&(e=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var e,n,i,o,r=[],s=[],a=this._connectWith();if(a&&t)for(e=a.length-1;0<=e;e--)for(n=(i=T(a[e],this.document[0])).length-1;0<=n;n--)(o=T.data(i[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&s.push([T.isFunction(o.options.items)?o.options.items.call(o.element):T(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);function l(){r.push(this)}for(s.push([T.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):T(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),e=s.length-1;0<=e;e--)s[e][0].each(l);return T(r)},_removeCurrentsFromItems:function(){var n=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=T.grep(this.items,function(t){for(var e=0;e<n.length;e++)if(n[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,n,i,o,r,s,a,l,u=this.items,c=[[T.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):T(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(e=h.length-1;0<=e;e--)for(n=(i=T(h[e],this.document[0])).length-1;0<=n;n--)(o=T.data(i[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&(c.push([T.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):T(o.options.items,o.element),o]),this.containers.push(o));for(e=c.length-1;0<=e;e--)for(r=c[e][1],n=0,l=(s=c[e][0]).length;n<l;n++)(a=T(s[n])).data(this.widgetName+"-item",r),u.push({item:a,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,n,i,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(n=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?T(this.options.toleranceElement,n.item):n.item,t||(n.width=i.outerWidth(),n.height=i.outerHeight()),o=i.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)o=this.containers[e].element.offset(),this.containers[e].containerCache.left=o.left,this.containers[e].containerCache.top=o.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(n){var i,o=(n=n||this).options;o.placeholder&&o.placeholder.constructor!==String||(i=o.placeholder,o.placeholder={element:function(){var t=n.currentItem[0].nodeName.toLowerCase(),e=T("<"+t+">",n.document[0]);return n._addClass(e,"ui-sortable-placeholder",i||n.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===t?n._createTrPlaceholder(n.currentItem.find("tr").eq(0),T("<tr>",n.document[0]).appendTo(e)):"tr"===t?n._createTrPlaceholder(n.currentItem,e):"img"===t&&e.attr("src",n.currentItem.attr("src")),i||e.css("visibility","hidden"),e},update:function(t,e){i&&!o.forcePlaceholderSize||(e.height()||e.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}),n.placeholder=T(o.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),o.placeholder.update(n,n.placeholder)},_createTrPlaceholder:function(t,e){var n=this;t.children().each(function(){T("<td>&#160;</td>",n.document[0]).attr("colspan",T(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,n,i,o,r,s,a,l,u,c,h=null,d=null;for(e=this.containers.length-1;0<=e;e--)if(!T.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(h&&T.contains(this.containers[e].element[0],h.element[0]))continue;h=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(i=1e4,o=null,r=(u=h.floating||this._isFloating(this.currentItem))?"left":"top",s=u?"width":"height",c=u?"pageX":"pageY",n=this.items.length-1;0<=n;n--)T.contains(this.containers[d].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(a=this.items[n].item.offset()[r],l=!1,t[c]-a>this.items[n][s]/2&&(l=!0),Math.abs(t[c]-a)<i&&(i=Math.abs(t[c]-a),o=this.items[n],this.direction=l?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return void(this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[d].element,!0),this._trigger("change",t,this._uiHash()),this.containers[d]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(t){var e=this.options,n=T.isFunction(e.helper)?T(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||T("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!e.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!e.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),T.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&T.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&T.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=T(i.containment)[0],e=T(i.containment).offset(),n="hidden"!==T(t).css("overflow"),this.containment=[e.left+(parseInt(T(t).css("borderLeftWidth"),10)||0)+(parseInt(T(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(T(t).css("borderTopWidth"),10)||0)+(parseInt(T(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(T(t).css("borderLeftWidth"),10)||0)-(parseInt(T(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(T(t).css("borderTopWidth"),10)||0)-(parseInt(T(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&T.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop())*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())*n}},_generatePosition:function(t){var e,n,i=this.options,o=t.pageX,r=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&T.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),i.grid&&(e=this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1],r=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-i.grid[1]:e+i.grid[1]:e,n=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-i.grid[0]:n+i.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:s.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function o(e,n,i){return function(t){i._trigger(e,t,n._uiHash(n))}}for(this.fromOutside&&!e&&i.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||i.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(i.push(function(t){this._trigger("remove",t,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;0<=n;n--)e||i.push(o("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(o("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===T.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||T([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}});function _(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}T.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var i=this._super(),o=this.element;return T.each(["min","max","step"],function(t,e){var n=o.attr(e);null!=n&&n.length&&(i[e]=n)}),i},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((0<e?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(t){var e;function n(){this.element[0]===T.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=e,this._delay(function(){this.previous=e}))}e=this.element[0]===T.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),!1!==this._start(t)&&this._repeat(null,T(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(T(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,T(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var e=this.options,n=T.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,e.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-e.page,t),!0}return!1},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0)},_repeat:function(t,e,n){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,n)},t),this._spin(e*this.options.step,n)},_spin:function(t,e){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:n})||(this._value(n),this.counter++)},_increment:function(t){var e=this.options.incremental;return e?T.isFunction(e)?e(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_adjustValue:function(t){var e,n,i=this.options;return n=t-(e=null!==i.min?i.min:0),t=e+(n=Math.round(n/i.step)*i.step),t=parseFloat(t.toFixed(this._precision())),null!==i.max&&t>i.max?i.max:null!==i.min&&t<i.min?i.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var n,i,o;if("culture"===t||"numberFormat"===t)return n=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(n));"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,e.up),o=this.buttons.last().find(".ui-icon"),this._removeClass(o,null,this.options.icons.down),this._addClass(o,null,e.down)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:_(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var n;""!==t&&null!==(n=this._parse(t))&&(e||(n=this._adjustValue(n)),t=this._format(n)),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:_(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:_(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:_(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:_(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){if(!arguments.length)return this._parse(this.element.val());_(this._value).call(this,t)},widget:function(){return this.uiSpinner}}),!1!==T.uiBackCompat&&T.widget("ui.spinner",T.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});var w;T.ui.spinner;T.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(w=/#.*$/,function(t){var e,n;e=t.href.replace(w,""),n=location.href.replace(w,"");try{e=decodeURIComponent(e)}catch(t){}try{n=decodeURIComponent(n)}catch(t){}return 1<t.hash.length&&e===n}),_create:function(){var e=this,t=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,t.collapsible),this._processTabs(),t.active=this._initialActive(),T.isArray(t.disabled)&&(t.disabled=T.unique(t.disabled.concat(T.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(t.active):this.active=T(),this._refresh(),this.active.length&&this.load(t.active)},_initialActive:function(){var n=this.options.active,t=this.options.collapsible,i=location.hash.substring(1);return null===n&&(i&&this.tabs.each(function(t,e){if(T(e).attr("aria-controls")===i)return n=t,!1}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==n&&-1!==n||(n=!!this.tabs.length&&0)),!1!==n&&-1===(n=this.tabs.index(this.tabs.eq(n)))&&(n=!t&&0),!t&&!1===n&&this.anchors.length&&(n=0),n},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):T()}},_tabKeydown:function(t){var e=T(T.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(e),i=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case T.ui.keyCode.RIGHT:case T.ui.keyCode.DOWN:n++;break;case T.ui.keyCode.UP:case T.ui.keyCode.LEFT:i=!1,n--;break;case T.ui.keyCode.END:n=this.anchors.length-1;break;case T.ui.keyCode.HOME:n=0;break;case T.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case T.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,i),t.ctrlKey||t.metaKey||(e.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===T.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===T.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===T.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,e){var n=this.tabs.length-1;for(;-1!==T.inArray((n<t&&(t=0),t<0&&(t=n),t),this.options.disabled);)t=e?t+1:t-1;return t},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){"active"!==t?(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._activate(e)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,e=this.tablist.children(":has(a[href])");t.disabled=T.map(e.filter(".ui-state-disabled"),function(t){return e.index(t)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!T.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=T()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=T()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var l=this,t=this.tabs,e=this.anchors,n=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){T(this).is(".ui-state-disabled")&&t.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){T(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return T("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=T(),this.anchors.each(function(t,e){var n,i,o,r=T(e).uniqueId().attr("id"),s=T(e).closest("li"),a=s.attr("aria-controls");l._isLocal(e)?(o=(n=e.hash).substring(1),i=l.element.find(l._sanitizeSelector(n))):(n="#"+(o=s.attr("aria-controls")||T({}).uniqueId()[0].id),(i=l.element.find(n)).length||(i=l._createPanel(o)).insertAfter(l.panels[t-1]||l.tablist),i.attr("aria-live","polite")),i.length&&(l.panels=l.panels.add(i)),a&&s.data("ui-tabs-aria-controls",a),s.attr({"aria-controls":o,"aria-labelledby":r}),i.attr("aria-labelledby",r)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),t&&(this._off(t.not(this.tabs)),this._off(e.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return T("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var e,n,i;for(T.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),i=0;n=this.tabs[i];i++)e=T(n),!0===t||-1!==T.inArray(i,t)?(e.attr("aria-disabled","true"),this._addClass(e,null,"ui-state-disabled")):(e.removeAttr("aria-disabled"),this._removeClass(e,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var n={};t&&T.each(t.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,e=this.element.parent();"fill"===t?(n=e.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=T(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=T(this).outerHeight(!0)}),this.panels.each(function(){T(this).height(Math.max(0,n-T(this).innerHeight()+T(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,T(this).height("").height())}).height(n))},_eventHandler:function(t){var e=this.options,n=this.active,i=T(t.currentTarget).closest("li"),o=i[0]===n[0],r=o&&e.collapsible,s=r?T():this._getPanelForTab(i),a=n.length?this._getPanelForTab(n):T(),l={oldTab:n,oldPanel:a,newTab:r?T():i,newPanel:s};t.preventDefault(),i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading")||this.running||o&&!e.collapsible||!1===this._trigger("beforeActivate",t,l)||(e.active=!r&&this.tabs.index(i),this.active=o?T():i,this.xhr&&this.xhr.abort(),a.length||s.length||T.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(i),t),this._toggle(t,l))},_toggle:function(t,e){var n=this,i=e.newPanel,o=e.oldPanel;function r(){n.running=!1,n._trigger("activate",t,e)}function s(){n._addClass(e.newTab.closest("li"),"ui-tabs-active","ui-state-active"),i.length&&n.options.show?n._show(i,n.options.show,r):(i.show(),r())}this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){n._removeClass(e.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s()}):(this._removeClass(e.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),o.hide(),s()),o.attr("aria-hidden","true"),e.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&o.length?e.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return 0===T(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false"),e.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var e,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),e=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:e,currentTarget:e,preventDefault:T.noop}))},_findActive:function(t){return!1===t?T():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+T.ui.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){T.data(this,"ui-tabs-destroy")?T(this).remove():T(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var t=T(this),e=t.data("ui-tabs-aria-controls");e?t.attr("aria-controls",e).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var t=this.options.disabled;!1!==t&&(t=void 0!==n&&(n=this._getIndex(n),T.isArray(t)?T.map(t,function(t){return t!==n?t:null}):T.map(this.tabs,function(t,e){return e!==n?e:null})),this._setOptionDisabled(t))},disable:function(t){var e=this.options.disabled;if(!0!==e){if(void 0===t)e=!0;else{if(t=this._getIndex(t),-1!==T.inArray(t,e))return;e=T.isArray(e)?T.merge([t],e).sort():[t]}this._setOptionDisabled(e)}},load:function(t,i){t=this._getIndex(t);var o=this,n=this.tabs.eq(t),e=n.find(".ui-tabs-anchor"),r=this._getPanelForTab(n),s={tab:n,panel:r},a=function(t,e){"abort"===e&&o.panels.stop(!1,!0),o._removeClass(n,"ui-tabs-loading"),r.removeAttr("aria-busy"),t===o.xhr&&delete o.xhr};this._isLocal(e[0])||(this.xhr=T.ajax(this._ajaxSettings(e,i,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(n,"ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.done(function(t,e,n){setTimeout(function(){r.html(t),o._trigger("load",i,s),a(n,e)},1)}).fail(function(t,e){setTimeout(function(){a(t,e)},1)})))},_ajaxSettings:function(t,n,i){var o=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,e){return o._trigger("beforeLoad",n,T.extend({jqXHR:t,ajaxSettings:e},i))}}},_getPanelForTab:function(t){var e=T(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+e))}}),!1!==T.uiBackCompat&&T.widget("ui.tabs",T.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}});T.ui.tabs;T.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=T(this).attr("title")||"";return T("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,e){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(e),t.data("ui-tooltip-id",e).attr("aria-describedby",T.trim(n.join(" ")))},_removeDescribedBy:function(t){var e=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),i=T.inArray(e,n);-1!==i&&n.splice(i,1),t.removeData("ui-tooltip-id"),(n=T.trim(n.join(" ")))?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=T("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=T([])},_setOption:function(t,e){var n=this;this._super(t,e),"content"===t&&T.each(this.tooltips,function(t,e){n._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var i=this;T.each(this.tooltips,function(t,e){var n=T.Event("blur");n.target=n.currentTarget=e.element[0],i.close(n,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=T(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=T(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=T([])},open:function(t){var n=this,e=T(t?t.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&e.parents().each(function(){var t,e=T(this);e.data("ui-tooltip-open")&&((t=T.Event("blur")).target=t.currentTarget=this,n.close(t,!0)),e.attr("title")&&(e.uniqueId(),n.parents[this.id]={element:this,title:e.attr("title")},e.attr("title",""))}),this._registerCloseHandlers(t,e),this._updateContent(e,t))},_updateContent:function(e,n){var t,i=this.options.content,o=this,r=n?n.type:null;if("string"==typeof i||i.nodeType||i.jquery)return this._open(n,e,i);(t=i.call(e[0],function(t){o._delay(function(){e.data("ui-tooltip-open")&&(n&&(n.type=r),this._open(n,e,t))})}))&&this._open(n,e,t)},_open:function(t,e,n){var i,o,r,s,a=T.extend({},this.options.position);function l(t){a.of=t,o.is(":hidden")||o.position(a)}n&&((i=this._find(e))?i.tooltip.find(".ui-tooltip-content").html(n):(e.is("[title]")&&(t&&"mouseover"===t.type?e.attr("title",""):e.removeAttr("title")),i=this._tooltip(e),o=i.tooltip,this._addDescribedBy(e,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),(s=T("<div>").html(o.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),s.removeAttr("id").find("[id]").removeAttr("id"),s.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:l}),l(t)):o.position(T.extend({of:e},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){o.is(":visible")&&(l(a.of),clearInterval(r))},T.fx.interval)),this._trigger("open",t,{tooltip:o})))},_registerCloseHandlers:function(t,n){var e={keyup:function(t){if(t.keyCode===T.ui.keyCode.ESCAPE){var e=T.Event(t);e.currentTarget=n[0],this.close(e,!0)}}};n[0]!==this.element[0]&&(e.remove=function(){this._removeTooltip(this._find(n).tooltip)}),t&&"mouseover"!==t.type||(e.mouseleave="close"),t&&"focusin"!==t.type||(e.focusout="close"),this._on(!0,n,e)},close:function(t){var e,n=this,i=T(t?t.currentTarget:this.element),o=this._find(i);o?(e=o.tooltip,o.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),o.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){n._removeTooltip(T(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&T.each(this.parents,function(t,e){T(e.element).attr("title",e.title),delete n.parents[t]}),o.closing=!0,this._trigger("close",t,{tooltip:e}),o.hiding||(o.closing=!1))):i.removeData("ui-tooltip-open")},_tooltip:function(t){var e=T("<div>").attr("role","tooltip"),n=T("<div>").appendTo(e),i=e.uniqueId().attr("id");return this._addClass(n,"ui-tooltip-content"),this._addClass(e,"ui-tooltip","ui-widget ui-widget-content"),e.appendTo(this._appendTo(t)),this.tooltips[i]={element:t,tooltip:e}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");return e.length||(e=this.document[0].body),e},_destroy:function(){var o=this;T.each(this.tooltips,function(t,e){var n=T.Event("blur"),i=e.element;n.target=n.currentTarget=i[0],o.close(n,!0),T("#"+t).remove(),i.data("ui-tooltip-title")&&(i.attr("title")||i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==T.uiBackCompat&&T.widget("ui.tooltip",T.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}});T.ui.tooltip}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.CodeMirror=e()}(this,function(){"use strict";var t=navigator.userAgent,e=navigator.platform,m=/gecko\/\d/i.test(t),n=/MSIE \d/.test(t),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),w=n||i||o,x=w&&(n?document.documentMode||6:+(o||i)[1]),b=!o&&/WebKit\//.test(t),r=b&&/Qt\/\d+\.\d+/.test(t),s=!o&&/Chrome\//.test(t),g=/Opera\//.test(t),l=/Apple Computer/.test(navigator.vendor),a=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),u=/PhantomJS/.test(t),c=!o&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t),h=/Android/.test(t),d=c||h||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),_=c||/Mac/.test(e),p=/\bCrOS\b/.test(t),f=/win/i.test(e),v=g&&t.match(/Version\/(\d*\.\d*)/);v&&(v=Number(v[1])),v&&15<=v&&(b=!(g=!1));var y=_&&(r||g&&(null==v||v<12.11)),C=m||w&&9<=x;function k(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var $,T=function(t,e){var n=t.className,i=k(e).exec(n);if(i){var o=n.slice(i.index+i[0].length);t.className=n.slice(0,i.index)+(o?i[1]+o:"")}};function S(t){for(var e=t.childNodes.length;0<e;--e)t.removeChild(t.firstChild);return t}function M(t,e){return S(t).appendChild(e)}function L(t,e,n,i){var o=document.createElement(t);if(n&&(o.className=n),i&&(o.style.cssText=i),"string"==typeof e)o.appendChild(document.createTextNode(e));else if(e)for(var r=0;r<e.length;++r)o.appendChild(e[r]);return o}function D(t,e,n,i){var o=L(t,e,n,i);return o.setAttribute("role","presentation"),o}function E(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function P(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function A(t,e){var n=t.className;k(e).test(n)||(t.className+=(n?" ":"")+e)}function O(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)n[i]&&!k(n[i]).test(e)&&(e+=" "+n[i]);return e}$=document.createRange?function(t,e,n,i){var o=document.createRange();return o.setEnd(i||t,n),o.setStart(t,e),o}:function(t,e,n){var i=document.body.createTextRange();try{i.moveToElementText(t.parentNode)}catch(t){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i};var I=function(t){t.select()};function N(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function R(t,e,n){for(var i in e||(e={}),t)!t.hasOwnProperty(i)||!1===n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function z(t,e,n,i,o){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var r=i||0,s=o||0;;){var a=t.indexOf("\t",r);if(a<0||e<=a)return s+(e-r);s+=a-r,s+=n-s%n,r=a+1}}c?I=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:w&&(I=function(t){try{t.select()}catch(t){}});var U=function(){this.id=null};function F(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}U.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var H=30,B={toString:function(){return"CodeMirror.Pass"}},j={scroll:!1},q={origin:"*mouse"},W={origin:"+move"};function V(t,e,n){for(var i=0,o=0;;){var r=t.indexOf("\t",i);-1==r&&(r=t.length);var s=r-i;if(r==t.length||e<=o+s)return i+Math.min(s,e-o);if(o+=r-i,i=r+1,e<=(o+=n-o%n))return i}}var Z=[""];function G(t){for(;Z.length<=t;)Z.push(Y(Z)+" ");return Z[t]}function Y(t){return t[t.length-1]}function K(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function X(){}function J(t,e){var n;return n=Object.create?Object.create(t):(X.prototype=t,new X),e&&R(e,n),n}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function tt(t){return/\w/.test(t)||""<t&&(t.toUpperCase()!=t.toLowerCase()||Q.test(t))}function et(t,e){return e?!!(-1<e.source.indexOf("\\w")&&tt(t))||e.test(t):tt(t)}function nt(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var it=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ot(t){return 768<=t.charCodeAt(0)&&it.test(t)}function rt(t,e,n){for(;(n<0?0<e:e<t.length)&&ot(t.charAt(e));)e+=n;return e}function st(t,e,n){for(var i=n<e?-1:1;;){if(e==n)return e;var o=(e+n)/2,r=i<0?Math.ceil(o):Math.floor(o);if(r==e)return t(r)?e:n;t(r)?n=r:e=r+i}}function at(t,e,n){var i=this;this.input=n,i.scrollbarFiller=L("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=L("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=D("div",null,"CodeMirror-code"),i.selectionDiv=L("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=L("div",null,"CodeMirror-cursors"),i.measure=L("div",null,"CodeMirror-measure"),i.lineMeasure=L("div",null,"CodeMirror-measure"),i.lineSpace=D("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=D("div",[i.lineSpace],"CodeMirror-lines");i.mover=L("div",[o],null,"position: relative"),i.sizer=L("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=L("div",null,null,"position: absolute; height: "+H+"px; width: 1px;"),i.gutters=L("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=L("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=L("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),w&&x<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),b||m&&d||(i.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(i.wrapper):t(i.wrapper)),i.viewFrom=i.viewTo=e.first,i.reportedViewFrom=i.reportedViewTo=e.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,n.init(i)}function lt(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var i=0;;++i){var o=n.children[i],r=o.chunkSize();if(e<r){n=o;break}e-=r}return n.lines[e]}function ut(t,n,i){var o=[],r=n.line;return t.iter(n.line,i.line+1,function(t){var e=t.text;r==i.line&&(e=e.slice(0,i.ch)),r==n.line&&(e=e.slice(n.ch)),o.push(e),++r}),o}function ct(t,e,n){var i=[];return t.iter(e,n,function(t){i.push(t.text)}),i}function ht(t,e){var n=e-t.height;if(n)for(var i=t;i;i=i.parent)i.height+=n}function dt(t){if(null==t.parent)return null;for(var e=t.parent,n=F(e.lines,t),i=e.parent;i;i=(e=i).parent)for(var o=0;i.children[o]!=e;++o)n+=i.children[o].chunkSize();return n+e.first}function pt(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var o=t.children[i],r=o.height;if(e<r){t=o;continue t}e-=r,n+=o.chunkSize()}return n}while(!t.lines);for(var s=0;s<t.lines.length;++s){var a=t.lines[s].height;if(e<a)break;e-=a}return n+s}function ft(t,e){return e>=t.first&&e<t.first+t.size}function mt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function gt(t,e,n){if(void 0===n&&(n=null),!(this instanceof gt))return new gt(t,e,n);this.line=t,this.ch=e,this.sticky=n}function vt(t,e){return t.line-e.line||t.ch-e.ch}function yt(t,e){return t.sticky==e.sticky&&0==vt(t,e)}function bt(t){return gt(t.line,t.ch)}function _t(t,e){return vt(t,e)<0?e:t}function wt(t,e){return vt(t,e)<0?t:e}function xt(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function Ct(t,e){if(e.line<t.first)return gt(t.first,0);var n,i,o,r=t.first+t.size-1;return e.line>r?gt(r,lt(t,r).text.length):(i=lt(t,(n=e).line).text.length,null==(o=n.ch)||i<o?gt(n.line,i):o<0?gt(n.line,0):n)}function kt(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=Ct(t,e[i]);return n}var $t=!1,Tt=!1;function St(t,e,n){this.marker=t,this.from=e,this.to=n}function Mt(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function Dt(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function Lt(t,e){if(e.full)return null;var n=ft(t,e.from.line)&&lt(t,e.from.line).markedSpans,i=ft(t,e.to.line)&&lt(t,e.to.line).markedSpans;if(!n&&!i)return null;var o=e.from.ch,r=e.to.ch,s=0==vt(e.from,e.to),a=function(t,e,n){var i;if(t)for(var o=0;o<t.length;++o){var r=t[o],s=r.marker;if(null==r.from||(s.inclusiveLeft?r.from<=e:r.from<e)||r.from==e&&"bookmark"==s.type&&(!n||!r.marker.insertLeft)){var a=null==r.to||(s.inclusiveRight?r.to>=e:r.to>e);(i||(i=[])).push(new St(s,r.from,a?null:r.to))}}return i}(n,o,s),l=function(t,e,n){var i;if(t)for(var o=0;o<t.length;++o){var r=t[o],s=r.marker;if(null==r.to||(s.inclusiveRight?r.to>=e:r.to>e)||r.from==e&&"bookmark"==s.type&&(!n||r.marker.insertLeft)){var a=null==r.from||(s.inclusiveLeft?r.from<=e:r.from<e);(i||(i=[])).push(new St(s,a?null:r.from-e,null==r.to?null:r.to-e))}}return i}(i,r,s),u=1==e.text.length,c=Y(e.text).length+(u?o:0);if(a)for(var h=0;h<a.length;++h){var d=a[h];if(null==d.to){var p=Mt(l,d.marker);p?u&&(d.to=null==p.to?null:p.to+c):d.to=o}}if(l)for(var f=0;f<l.length;++f){var m=l[f];if(null!=m.to&&(m.to+=c),null==m.from)Mt(a,m.marker)||(m.from=c,u&&(a||(a=[])).push(m));else m.from+=c,u&&(a||(a=[])).push(m)}a&&(a=Et(a)),l&&l!=a&&(l=Et(l));var g=[a];if(!u){var v,y=e.text.length-2;if(0<y&&a)for(var b=0;b<a.length;++b)null==a[b].to&&(v||(v=[])).push(new St(a[b].marker,null,null));for(var _=0;_<y;++_)g.push(v);g.push(l)}return g}function Et(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Pt(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function At(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Ot(t){return t.inclusiveLeft?-1:0}function It(t){return t.inclusiveRight?1:0}function Nt(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var i=t.find(),o=e.find(),r=vt(i.from,o.from)||Ot(t)-Ot(e);if(r)return-r;var s=vt(i.to,o.to)||It(t)-It(e);return s||e.id-t.id}function Rt(t,e){var n,i=Tt&&t.markedSpans;if(i)for(var o=void 0,r=0;r<i.length;++r)(o=i[r]).marker.collapsed&&null==(e?o.from:o.to)&&(!n||Nt(n,o.marker)<0)&&(n=o.marker);return n}function zt(t){return Rt(t,!0)}function Ut(t){return Rt(t,!1)}function Ft(t,e){var n,i=Tt&&t.markedSpans;if(i)for(var o=0;o<i.length;++o){var r=i[o];r.marker.collapsed&&(null==r.from||r.from<e)&&(null==r.to||r.to>e)&&(!n||Nt(n,r.marker)<0)&&(n=r.marker)}return n}function Ht(t,e,n,i,o){var r=lt(t,e),s=Tt&&r.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var u=l.marker.find(0),c=vt(u.from,n)||Ot(l.marker)-Ot(o),h=vt(u.to,i)||It(l.marker)-It(o);if(!(0<=c&&h<=0||c<=0&&0<=h)&&(c<=0&&(l.marker.inclusiveRight&&o.inclusiveLeft?0<=vt(u.to,n):0<vt(u.to,n))||0<=c&&(l.marker.inclusiveRight&&o.inclusiveLeft?vt(u.from,i)<=0:vt(u.from,i)<0)))return!0}}}function Bt(t){for(var e;e=zt(t);)t=e.find(-1,!0).line;return t}function jt(t,e){var n=lt(t,e),i=Bt(n);return n==i?e:dt(i)}function qt(t,e){if(e>t.lastLine())return e;var n,i=lt(t,e);if(!Wt(t,i))return e;for(;n=Ut(i);)i=n.find(1,!0).line;return dt(i)+1}function Wt(t,e){var n=Tt&&e.markedSpans;if(n)for(var i=void 0,o=0;o<n.length;++o)if((i=n[o]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Vt(t,e,i))return!0}}function Vt(t,e,n){if(null==n.to){var i=n.marker.find(1,!0);return Vt(t,i.line,Mt(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var o=void 0,r=0;r<e.markedSpans.length;++r)if((o=e.markedSpans[r]).marker.collapsed&&!o.marker.widgetNode&&o.from==n.to&&(null==o.to||o.to!=n.from)&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&Vt(t,e,o))return!0}function Zt(t){for(var e=0,n=(t=Bt(t)).parent,i=0;i<n.lines.length;++i){var o=n.lines[i];if(o==t)break;e+=o.height}for(var r=n.parent;r;r=(n=r).parent)for(var s=0;s<r.children.length;++s){var a=r.children[s];if(a==n)break;e+=a.height}return e}function Gt(t){if(0==t.height)return 0;for(var e,n=t.text.length,i=t;e=zt(i);){var o=e.find(0,!0);i=o.from.line,n+=o.from.ch-o.to.ch}for(i=t;e=Ut(i);){var r=e.find(0,!0);n-=i.text.length-r.from.ch,n+=(i=r.to.line).text.length-r.to.ch}return n}function Yt(t){var n=t.display,e=t.doc;n.maxLine=lt(e,e.first),n.maxLineLength=Gt(n.maxLine),n.maxLineChanged=!0,e.iter(function(t){var e=Gt(t);e>n.maxLineLength&&(n.maxLineLength=e,n.maxLine=t)})}var Kt=null;function Xt(t,e,n){var i;Kt=null;for(var o=0;o<t.length;++o){var r=t[o];if(r.from<e&&r.to>e)return o;r.to==e&&(r.from!=r.to&&"before"==n?i=o:Kt=o),r.from==e&&(r.from!=r.to&&"before"!=n?i=o:Kt=o)}return null!=i?i:Kt}var Jt=function(){var R="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",z="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var U=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,F=/[stwN]/,H=/[LRr]/,B=/[Lb1n]/,j=/[1n]/;function q(t,e,n){this.level=t,this.from=e,this.to=n}return function(t,e){var n="ltr"==e?"L":"R";if(0==t.length||"ltr"==e&&!U.test(t))return!1;for(var i,o=t.length,r=[],s=0;s<o;++s)r.push((i=t.charCodeAt(s))<=247?R.charAt(i):1424<=i&&i<=1524?"R":1536<=i&&i<=1785?z.charAt(i-1536):1774<=i&&i<=2220?"r":8192<=i&&i<=8203?"w":8204==i?"b":"L");for(var a=0,l=n;a<o;++a){var u=r[a];"m"==u?r[a]=l:l=u}for(var c=0,h=n;c<o;++c){var d=r[c];"1"==d&&"r"==h?r[c]="n":H.test(d)&&"r"==(h=d)&&(r[c]="R")}for(var p=1,f=r[0];p<o-1;++p){var m=r[p];"+"==m&&"1"==f&&"1"==r[p+1]?r[p]="1":","!=m||f!=r[p+1]||"1"!=f&&"n"!=f||(r[p]=f),f=m}for(var g=0;g<o;++g){var v=r[g];if(","==v)r[g]="N";else if("%"==v){var y=void 0;for(y=g+1;y<o&&"%"==r[y];++y);for(var b=g&&"!"==r[g-1]||y<o&&"1"==r[y]?"1":"N",_=g;_<y;++_)r[_]=b;g=y-1}}for(var w=0,x=n;w<o;++w){var C=r[w];"L"==x&&"1"==C?r[w]="L":H.test(C)&&(x=C)}for(var k=0;k<o;++k)if(F.test(r[k])){var $=void 0;for($=k+1;$<o&&F.test(r[$]);++$);for(var T="L"==(k?r[k-1]:n),S=T==("L"==($<o?r[$]:n))?T?"L":"R":n,M=k;M<$;++M)r[M]=S;k=$-1}for(var D,L=[],E=0;E<o;)if(B.test(r[E])){var P=E;for(++E;E<o&&B.test(r[E]);++E);L.push(new q(0,P,E))}else{var A=E,O=L.length;for(++E;E<o&&"L"!=r[E];++E);for(var I=A;I<E;)if(j.test(r[I])){A<I&&L.splice(O,0,new q(1,A,I));var N=I;for(++I;I<E&&j.test(r[I]);++I);L.splice(O,0,new q(2,N,I)),A=I}else++I;A<E&&L.splice(O,0,new q(1,A,E))}return"ltr"==e&&(1==L[0].level&&(D=t.match(/^\s+/))&&(L[0].from=D[0].length,L.unshift(new q(0,0,D[0].length))),1==Y(L).level&&(D=t.match(/\s+$/))&&(Y(L).to-=D[0].length,L.push(new q(0,o-D[0].length,o)))),"rtl"==e?L.reverse():L}}();function Qt(t,e){var n=t.order;return null==n&&(n=t.order=Jt(t.text,e)),n}var te=[],ee=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={});i[e]=(i[e]||te).concat(n)}};function ne(t,e){return t._handlers&&t._handlers[e]||te}function ie(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers,o=i&&i[e];if(o){var r=F(o,n);-1<r&&(i[e]=o.slice(0,r).concat(o.slice(r+1)))}}}function oe(t,e){var n=ne(t,e);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),o=0;o<n.length;++o)n[o].apply(null,i)}function re(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),oe(t,n||e.type,t,e),he(e)||e.codemirrorIgnore}function se(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==F(n,e[i])&&n.push(e[i])}function ae(t,e){return 0<ne(t,e).length}function le(t){t.prototype.on=function(t,e){ee(this,t,e)},t.prototype.off=function(t,e){ie(this,t,e)}}function ue(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function ce(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function he(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function de(t){ue(t),ce(t)}function pe(t){return t.target||t.srcElement}function fe(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),_&&t.ctrlKey&&1==e&&(e=3),e}var me,ge,ve=function(){if(w&&x<9)return!1;var t=L("div");return"draggable"in t||"dragDrop"in t}();function ye(t){if(null==me){var e=L("span","");M(t,L("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(me=e.offsetWidth<=1&&2<e.offsetHeight&&!(w&&x<8))}var n=me?L("span",""):L("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function be(t){if(null!=ge)return ge;var e=M(t,document.createTextNode("AA")),n=$(e,0,1).getBoundingClientRect(),i=$(e,1,2).getBoundingClientRect();return S(t),!(!n||n.left==n.right)&&(ge=i.right-n.right<3)}var _e,we=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var o=t.indexOf("\n",e);-1==o&&(o=t.length);var r=t.slice(e,"\r"==t.charAt(o-1)?o-1:o),s=r.indexOf("\r");-1!=s?(n.push(r.slice(0,s)),e+=s+1):(n.push(r),e=o+1)}return n}:function(t){return t.split(/\r\n?|\n/)},xe=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Ce="oncopy"in(_e=L("div"))||(_e.setAttribute("oncopy","return;"),"function"==typeof _e.oncopy),ke=null;var $e={},Te={};function Se(t){if("string"==typeof t&&Te.hasOwnProperty(t))t=Te[t];else if(t&&"string"==typeof t.name&&Te.hasOwnProperty(t.name)){var e=Te[t.name];"string"==typeof e&&(e={name:e}),(t=J(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Se("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Se("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Me(t,e){e=Se(e);var n=$e[e.name];if(!n)return Me(t,"text/plain");var i=n(t,e);if(De.hasOwnProperty(e.name)){var o=De[e.name];for(var r in o)o.hasOwnProperty(r)&&(i.hasOwnProperty(r)&&(i["_"+r]=i[r]),i[r]=o[r])}if(i.name=e.name,e.helperType&&(i.helperType=e.helperType),e.modeProps)for(var s in e.modeProps)i[s]=e.modeProps[s];return i}var De={};function Le(t,e){R(e,De.hasOwnProperty(t)?De[t]:De[t]={})}function Ee(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var o=e[i];o instanceof Array&&(o=o.concat([])),n[i]=o}return n}function Pe(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function Ae(t,e,n){return!t.startState||t.startState(e,n)}var Oe=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};Oe.prototype.eol=function(){return this.pos>=this.string.length},Oe.prototype.sol=function(){return this.pos==this.lineStart},Oe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Oe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Oe.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},Oe.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Oe.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Oe.prototype.skipToEnd=function(){this.pos=this.string.length},Oe.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(-1<e)return this.pos=e,!0},Oe.prototype.backUp=function(t){this.pos-=t},Oe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=z(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?z(this.string,this.lineStart,this.tabSize):0)},Oe.prototype.indentation=function(){return z(this.string,null,this.tabSize)-(this.lineStart?z(this.string,this.lineStart,this.tabSize):0)},Oe.prototype.match=function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&0<i.index?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var o=function(t){return n?t.toLowerCase():t};if(o(this.string.substr(this.pos,t.length))==o(t))return!1!==e&&(this.pos+=t.length),!0},Oe.prototype.current=function(){return this.string.slice(this.start,this.pos)},Oe.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Oe.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Oe.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var Ie=function(t,e){this.state=t,this.lookAhead=e},Ne=function(t,e,n,i){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function Re(e,n,i,t){var l=[e.state.modeGen],o={};Ve(e,n.text,e.doc.mode,i,function(t,e){return l.push(t,e)},o,t);for(var u=i.state,r=function(t){i.baseTokens=l;var r=e.state.overlays[t],s=1,a=0;i.state=!0,Ve(e,n.text,r.mode,i,function(t,e){for(var n=s;a<t;){var i=l[s];t<i&&l.splice(s,1,t,l[s+1],i),s+=2,a=Math.min(t,i)}if(e)if(r.opaque)l.splice(n,s-n,t,"overlay "+e),s=n+2;else for(;n<s;n+=2){var o=l[n+1];l[n+1]=(o?o+" ":"")+"overlay "+e}},o),i.state=u,i.baseTokens=null,i.baseTokenPos=1},s=0;s<e.state.overlays.length;++s)r(s);return{styles:l,classes:o.bgClass||o.textClass?o:null}}function ze(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=Ue(t,dt(e)),o=e.text.length>t.options.maxHighlightLength&&Ee(t.doc.mode,i.state),r=Re(t,e,i);o&&(i.state=o),e.stateAfter=i.save(!o),e.styles=r.styles,r.classes?e.styleClasses=r.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function Ue(n,i,t){var e=n.doc,o=n.display;if(!e.mode.startState)return new Ne(e,!0,i);var r=function(t,e,n){for(var i,o,r=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;s<a;--a){if(a<=r.first)return r.first;var l=lt(r,a-1),u=l.stateAfter;if(u&&(!n||a+(u instanceof Ie?u.lookAhead:0)<=r.modeFrontier))return a;var c=z(l.text,null,t.options.tabSize);(null==o||c<i)&&(o=a-1,i=c)}return o}(n,i,t),s=r>e.first&&lt(e,r-1).stateAfter,a=s?Ne.fromSaved(e,s,r):new Ne(e,Ae(e.mode),r);return e.iter(r,i,function(t){Fe(n,t.text,a);var e=a.line;t.stateAfter=e==i-1||e%5==0||e>=o.viewFrom&&e<o.viewTo?a.save():null,a.nextLine()}),t&&(e.modeFrontier=a.line),a}function Fe(t,e,n,i){var o=t.doc.mode,r=new Oe(e,t.options.tabSize,n);for(r.start=r.pos=i||0,""==e&&He(o,n.state);!r.eol();)Be(o,r,n.state),r.start=r.pos}function He(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Pe(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Be(t,e,n,i){for(var o=0;o<10;o++){i&&(i[0]=Pe(t,n).mode);var r=t.token(e,n);if(e.pos>e.start)return r}throw new Error("Mode "+t.name+" failed to advance stream.")}Ne.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},Ne.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},Ne.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Ne.fromSaved=function(t,e,n){return e instanceof Ie?new Ne(t,Ee(t.mode,e.state),n,e.lookAhead):new Ne(t,Ee(t.mode,e),n)},Ne.prototype.save=function(t){var e=!1!==t?Ee(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new Ie(e,this.maxLookAhead):e};var je=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n};function qe(t,e,n,i){var o,r,s=t.doc,a=s.mode,l=lt(s,(e=Ct(s,e)).line),u=Ue(t,e.line,n),c=new Oe(l.text,t.options.tabSize,u);for(i&&(r=[]);(i||c.pos<e.ch)&&!c.eol();)c.start=c.pos,o=Be(a,c,u.state),i&&r.push(new je(c,o,Ee(s.mode,u.state)));return i?r:new je(c,o,u.state)}function We(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[i])||(e[i]+=" "+n[2])}return t}function Ve(t,e,n,i,o,r,s){var a=n.flattenSpans;null==a&&(a=t.options.flattenSpans);var l,u=0,c=null,h=new Oe(e,t.options.tabSize,i),d=t.options.addModeClass&&[null];for(""==e&&We(He(n,i.state),r);!h.eol();){if(l=h.pos>t.options.maxHighlightLength?(a=!1,s&&Fe(t,e,i,h.pos),h.pos=e.length,null):We(Be(n,h,i.state,d),r),d){var p=d[0].name;p&&(l="m-"+(l?p+" "+l:p))}if(!a||c!=l){for(;u<h.start;)o(u=Math.min(h.start,u+5e3),c);c=l}h.start=h.pos}for(;u<h.pos;){var f=Math.min(h.pos,u+5e3);o(f,c),u=f}}var Ze=function(t,e,n){this.text=t,At(this,e),this.height=n?n(this):1};Ze.prototype.lineNo=function(){return dt(this)},le(Ze);var Ge={},Ye={};function Ke(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?Ye:Ge;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function Xe(t,e){var n=D("span",null,null,b?"padding-right: .1px":null),i={pre:D("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var o=0;o<=(e.rest?e.rest.length:0);o++){var r=o?e.rest[o-1]:e.line,s=void 0;i.pos=0,i.addToken=Qe,be(t.display.measure)&&(s=Qt(r,t.doc.direction))&&(i.addToken=tn(i.addToken,s)),i.map=[],nn(r,i,ze(t,r,e!=t.display.externalMeasured&&dt(r))),r.styleClasses&&(r.styleClasses.bgClass&&(i.bgClass=O(r.styleClasses.bgClass,i.bgClass||"")),r.styleClasses.textClass&&(i.textClass=O(r.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(ye(t.display.measure))),0==o?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(b){var a=i.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return oe(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=O(i.pre.className,i.textClass||"")),i}function Je(t){var e=L("span","","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function Qe(t,e,n,i,o,r,s){if(e){var a,l=t.splitSpaces?function(t,e){if(1<t.length&&!/  /.test(t))return t;for(var n=e,i="",o=0;o<t.length;o++){var r=t.charAt(o);" "!=r||!n||o!=t.length-1&&32!=t.charCodeAt(o+1)||(r=""),i+=r,n=" "==r}return i}(e,t.trailingSpace):e,u=t.cm.state.specialChars,c=!1;if(u.test(e)){a=document.createDocumentFragment();for(var h=0;;){u.lastIndex=h;var d=u.exec(e),p=d?d.index-h:e.length-h;if(p){var f=document.createTextNode(l.slice(h,h+p));w&&x<9?a.appendChild(L("span",[f])):a.appendChild(f),t.map.push(t.pos,t.pos+p,f),t.col+=p,t.pos+=p}if(!d)break;h+=p+1;var m=void 0;if("\t"==d[0]){var g=t.cm.options.tabSize,v=g-t.col%g;(m=a.appendChild(L("span",G(v),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),t.col+=v}else"\r"==d[0]||"\n"==d[0]?(m=a.appendChild(L("span","\r"==d[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",d[0]):((m=t.cm.options.specialCharPlaceholder(d[0])).setAttribute("cm-text",d[0]),w&&x<9?a.appendChild(L("span",[m])):a.appendChild(m)),t.col+=1;t.map.push(t.pos,t.pos+1,m),t.pos++}}else t.col+=e.length,a=document.createTextNode(l),t.map.push(t.pos,t.pos+e.length,a),w&&x<9&&(c=!0),t.pos+=e.length;if(t.trailingSpace=32==l.charCodeAt(e.length-1),n||i||o||c||r){var y=n||"";i&&(y+=i),o&&(y+=o);var b=L("span",[a],y,r);if(s)for(var _ in s)s.hasOwnProperty(_)&&"style"!=_&&"class"!=_&&b.setAttribute(_,s[_]);return t.content.appendChild(b)}t.content.appendChild(a)}}function tn(h,d){return function(t,e,n,i,o,r,s){n=n?n+" cm-force-border":"cm-force-border";for(var a=t.pos,l=a+e.length;;){for(var u=void 0,c=0;c<d.length&&!((u=d[c]).to>a&&u.from<=a);c++);if(u.to>=l)return h(t,e,n,i,o,r,s);h(t,e.slice(0,u.to-a),n,i,null,r,s),i=null,e=e.slice(u.to-a),a=u.to}}}function en(t,e,n,i){var o=!i&&n.widgetNode;o&&t.map.push(t.pos,t.pos+e,o),!i&&t.cm.display.input.needsContentAttribute&&(o||(o=t.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",n.id)),o&&(t.cm.display.input.setUneditable(o),t.content.appendChild(o)),t.pos+=e,t.trailingSpace=!1}function nn(t,e,n){var i=t.markedSpans,o=t.text,r=0;if(i)for(var s,a,l,u,c,h,d,p=o.length,f=0,m=1,g="",v=0;;){if(v==f){l=u=c=a="",h=d=null,v=1/0;for(var y=[],b=void 0,_=0;_<i.length;++_){var w=i[_],x=w.marker;if("bookmark"==x.type&&w.from==f&&x.widgetNode)y.push(x);else if(w.from<=f&&(null==w.to||w.to>f||x.collapsed&&w.to==f&&w.from==f)){if(null!=w.to&&w.to!=f&&v>w.to&&(v=w.to,u=""),x.className&&(l+=" "+x.className),x.css&&(a=(a?a+";":"")+x.css),x.startStyle&&w.from==f&&(c+=" "+x.startStyle),x.endStyle&&w.to==v&&(b||(b=[])).push(x.endStyle,w.to),x.title&&((d||(d={})).title=x.title),x.attributes)for(var C in x.attributes)(d||(d={}))[C]=x.attributes[C];x.collapsed&&(!h||Nt(h.marker,x)<0)&&(h=w)}else w.from>f&&v>w.from&&(v=w.from)}if(b)for(var k=0;k<b.length;k+=2)b[k+1]==v&&(u+=" "+b[k]);if(!h||h.from==f)for(var $=0;$<y.length;++$)en(e,0,y[$]);if(h&&(h.from||0)==f){if(en(e,(null==h.to?p+1:h.to)-f,h.marker,null==h.from),null==h.to)return;h.to==f&&(h=!1)}}if(p<=f)break;for(var T=Math.min(p,v);;){if(g){var S=f+g.length;if(!h){var M=T<S?g.slice(0,T-f):g;e.addToken(e,M,s?s+l:l,c,f+M.length==v?u:"",a,d)}if(T<=S){g=g.slice(T-f),f=T;break}f=S,c=""}g=o.slice(r,r=n[m++]),s=Ke(n[m++],e.cm.options)}}else for(var D=1;D<n.length;D+=2)e.addToken(e,o.slice(r,r=n[D]),Ke(n[D+1],e.cm.options))}function on(t,e,n){this.line=e,this.rest=function(t){for(var e,n;e=Ut(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}(e),this.size=this.rest?dt(Y(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Wt(t,e)}function rn(t,e,n){for(var i,o=[],r=e;r<n;r=i){var s=new on(t.doc,lt(t.doc,r),r);i=r+s.size,o.push(s)}return o}var sn=null;var an=null;function ln(t,e){var n=ne(t,e);if(n.length){var i,o=Array.prototype.slice.call(arguments,2);sn?i=sn.delayedCallbacks:an?i=an:(i=an=[],setTimeout(un,0));for(var r=function(t){i.push(function(){return n[t].apply(null,o)})},s=0;s<n.length;++s)r(s)}}function un(){var t=an;an=null;for(var e=0;e<t.length;++e)t[e]()}function cn(t,e,n,i){for(var o=0;o<e.changes.length;o++){var r=e.changes[o];"text"==r?pn(t,e):"gutter"==r?mn(t,e,n,i):"class"==r?fn(t,e):"widget"==r&&gn(t,e,i)}e.changes=null}function hn(t){return t.node==t.text&&(t.node=L("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),w&&x<8&&(t.node.style.zIndex=2)),t.node}function dn(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Xe(t,e)}function pn(t,e){var n=e.text.className,i=dn(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,fn(t,e)):n&&(e.text.className=n)}function fn(t,e){!function(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var i=hn(e);e.background=i.insertBefore(L("div",null,n),i.firstChild),t.display.input.setUneditable(e.background)}}(t,e),e.line.wrapClass?hn(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}function mn(t,e,n,i){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var o=hn(e);e.gutterBackground=L("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),o.insertBefore(e.gutterBackground,e.text)}var r=e.line.gutterMarkers;if(t.options.lineNumbers||r){var s=hn(e),a=e.gutter=L("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(t.display.input.setUneditable(a),s.insertBefore(a,e.text),e.line.gutterClass&&(a.className+=" "+e.line.gutterClass),!t.options.lineNumbers||r&&r["CodeMirror-linenumbers"]||(e.lineNumber=a.appendChild(L("div",mt(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),r)for(var l=0;l<t.options.gutters.length;++l){var u=t.options.gutters[l],c=r.hasOwnProperty(u)&&r[u];c&&a.appendChild(L("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[u]+"px; width: "+i.gutterWidth[u]+"px"))}}}function gn(t,e,n){e.alignable&&(e.alignable=null);for(var i=e.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,"CodeMirror-linewidget"==i.className&&e.node.removeChild(i);vn(t,e,n)}function vn(t,e,n){if(yn(t,e.line,e,n,!0),e.rest)for(var i=0;i<e.rest.length;i++)yn(t,e.rest[i],e,n,!1)}function yn(t,e,n,i,o){if(e.widgets)for(var r=hn(n),s=0,a=e.widgets;s<a.length;++s){var l=a[s],u=L("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),bn(l,u,n,i),t.display.input.setUneditable(u),o&&l.above?r.insertBefore(u,n.gutter||n.text):r.appendChild(u),ln(l,"redraw")}}function bn(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var o=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(o-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=o+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function _n(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!E(document.body,t.node)){var n="position: relative;";t.coverGutter&&(n+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(n+="width: "+e.display.wrapper.clientWidth+"px;"),M(e.display.measure,L("div",[t.node],null,n))}return t.height=t.node.parentNode.offsetHeight}function wn(t,e){for(var n=pe(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function xn(t){return t.lineSpace.offsetTop}function Cn(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function kn(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=M(t.measure,L("pre","x")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(t.cachedPaddingH=i),i}function $n(t){return H-t.display.nativeBarWidth}function Tn(t){return t.display.scroller.clientWidth-$n(t)-t.display.barWidth}function Sn(t){return t.display.scroller.clientHeight-$n(t)-t.display.barHeight}function Mn(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(var o=0;o<t.rest.length;o++)if(dt(t.rest[o])>n)return{map:t.measure.maps[o],cache:t.measure.caches[o],before:!0}}function Dn(t,e,n,i){return Pn(t,En(t,e),n,i)}function Ln(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[ai(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function En(t,e){var n=dt(e),i=Ln(t,n);i&&!i.text?i=null:i&&i.changes&&(cn(t,i,n,ni(t)),t.curOp.forceUpdate=!0),i||(i=function(t,e){var n=dt(e=Bt(e)),i=t.display.externalMeasured=new on(t.doc,e,n);i.lineN=n;var o=i.built=Xe(t,i);return i.text=o.pre,M(t.display.lineMeasure,o.pre),i}(t,e));var o=Mn(i,e,n);return{line:e,view:i,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function Pn(t,e,n,i,o){e.before&&(n=-1);var r,s=n+(i||"");return e.cache.hasOwnProperty(s)?r=e.cache[s]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(!function(t,e,n){var i=t.options.lineWrapping,o=i&&Tn(t);if(!e.measure.heights||i&&e.measure.width!=o){var r=e.measure.heights=[];if(i){e.measure.width=o;for(var s=e.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],u=s[a+1];2<Math.abs(l.bottom-u.bottom)&&r.push((l.bottom+u.top)/2-n.top)}}r.push(n.bottom-n.top)}}(t,e.view,e.rect),e.hasHeights=!0),(r=function(t,e,n,i){var o,r=In(e.map,n,i),s=r.node,a=r.start,l=r.end,u=r.collapse;if(3==s.nodeType){for(var c=0;c<4;c++){for(;a&&ot(e.line.text.charAt(r.coverStart+a));)--a;for(;r.coverStart+l<r.coverEnd&&ot(e.line.text.charAt(r.coverStart+l));)++l;if((o=w&&x<9&&0==a&&l==r.coverEnd-r.coverStart?s.parentNode.getBoundingClientRect():Nn($(s,a,l).getClientRects(),i)).left||o.right||0==a)break;l=a,a-=1,u="right"}w&&x<11&&(o=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=ke)return ke;var e=M(t,L("span","x")),n=e.getBoundingClientRect(),i=$(e,0,1).getBoundingClientRect();return ke=1<Math.abs(n.left-i.left)}(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*i,bottom:e.bottom*i}}(t.display.measure,o))}else{var h;0<a&&(u=i="right"),o=t.options.lineWrapping&&1<(h=s.getClientRects()).length?h["right"==i?h.length-1:0]:s.getBoundingClientRect()}if(w&&x<9&&!a&&(!o||!o.left&&!o.right)){var d=s.parentNode.getClientRects()[0];o=d?{left:d.left,right:d.left+ei(t.display),top:d.top,bottom:d.bottom}:On}for(var p=o.top-e.rect.top,f=o.bottom-e.rect.top,m=(p+f)/2,g=e.view.measure.heights,v=0;v<g.length-1&&!(m<g[v]);v++);var y=v?g[v-1]:0,b=g[v],_={left:("right"==u?o.right:o.left)-e.rect.left,right:("left"==u?o.left:o.right)-e.rect.left,top:y,bottom:b};o.left||o.right||(_.bogus=!0);t.options.singleCursorHeightPerLine||(_.rtop=p,_.rbottom=f);return _}(t,e,n,i)).bogus||(e.cache[s]=r)),{left:r.left,right:r.right,top:o?r.rtop:r.top,bottom:o?r.rbottom:r.bottom}}var An,On={left:0,right:0,top:0,bottom:0};function In(t,e,n){for(var i,o,r,s,a,l,u=0;u<t.length;u+=3)if(a=t[u],l=t[u+1],e<a?(o=0,r=1,s="left"):e<l?r=(o=e-a)+1:(u==t.length-3||e==l&&t[u+3]>e)&&(o=(r=l-a)-1,l<=e&&(s="right")),null!=o){if(i=t[u+2],a==l&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==o)for(;u&&t[u-2]==t[u-3]&&t[u-1].insertLeft;)i=t[2+(u-=3)],s="left";if("right"==n&&o==l-a)for(;u<t.length-3&&t[u+3]==t[u+4]&&!t[u+5].insertLeft;)i=t[(u+=3)+2],s="right";break}return{node:i,start:o,end:r,collapse:s,coverStart:a,coverEnd:l}}function Nn(t,e){var n=On;if("left"==e)for(var i=0;i<t.length&&(n=t[i]).left==n.right;i++);else for(var o=t.length-1;0<=o&&(n=t[o]).left==n.right;o--);return n}function Rn(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function zn(t){t.display.externalMeasure=null,S(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Rn(t.display.view[e])}function Un(t){zn(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Fn(){return s&&h?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Hn(){return s&&h?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Bn(t){var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;++n)t.widgets[n].above&&(e+=_n(t.widgets[n]));return e}function jn(t,e,n,i,o){if(!o){var r=Bn(e);n.top+=r,n.bottom+=r}if("line"==i)return n;i||(i="local");var s=Zt(e);if("local"==i?s+=xn(t.display):s-=t.display.viewOffset,"page"==i||"window"==i){var a=t.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:Hn());var l=a.left+("window"==i?0:Fn());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function qn(t,e,n){if("div"==n)return e;var i=e.left,o=e.top;if("page"==n)i-=Fn(),o-=Hn();else if("local"==n||!n){var r=t.display.sizer.getBoundingClientRect();i+=r.left,o+=r.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:o-s.top}}function Wn(t,e,n,i,o){return i||(i=lt(t.doc,e.line)),jn(t,i,Dn(t,i,e.ch,o),n)}function Vn(i,t,o,r,s,a){function l(t,e){var n=Pn(i,s,t,e?"right":"left",a);return e?n.left=n.right:n.right=n.left,jn(i,r,n,o)}r=r||lt(i.doc,t.line),s||(s=En(i,r));var u=Qt(r,i.doc.direction),e=t.ch,n=t.sticky;if(e>=r.text.length?(e=r.text.length,n="before"):e<=0&&(e=0,n="after"),!u)return l("before"==n?e-1:e,"before"==n);function c(t,e,n){return l(n?t-1:t,1==u[e].level!=n)}var h=Xt(u,e,n),d=Kt,p=c(e,h,"before"==n);return null!=d&&(p.other=c(e,d,"before"!=n)),p}function Zn(t,e){var n=0;e=Ct(t.doc,e),t.options.lineWrapping||(n=ei(t.display)*e.ch);var i=lt(t.doc,e.line),o=Zt(i)+xn(t.display);return{left:n,right:n,top:o,bottom:o+i.height}}function Gn(t,e,n,i,o){var r=gt(t,e,n);return r.xRel=o,i&&(r.outside=!0),r}function Yn(t,e,n){var i=t.doc;if((n+=t.display.viewOffset)<0)return Gn(i.first,0,null,!0,-1);var o=pt(i,n),r=i.first+i.size-1;if(r<o)return Gn(i.first+i.size-1,lt(i,r).text.length,null,!0,1);e<0&&(e=0);for(var s=lt(i,o);;){var a=Qn(t,s,o,e,n),l=Ft(s,a.ch+(0<a.xRel?1:0));if(!l)return a;var u=l.find(1);if(u.line==o)return u;s=lt(i,o=u.line)}}function Kn(e,t,n,i){i-=Bn(t);var o=t.text.length,r=st(function(t){return Pn(e,n,t-1).bottom<=i},o,0);return{begin:r,end:o=st(function(t){return Pn(e,n,t).top>i},r,o)}}function Xn(t,e,n,i){return n||(n=En(t,e)),Kn(t,e,n,jn(t,e,Pn(t,n,i),"line").top)}function Jn(t,e,n,i){return!(t.bottom<=n)&&(t.top>n||(i?t.left:t.right)>e)}function Qn(n,t,e,i,o){o-=Zt(t);var r=En(n,t),s=Bn(t),a=0,l=t.text.length,u=!0,c=Qt(t,n.doc.direction);if(c){var h=(n.options.lineWrapping?function(t,e,n,i,o,r,s){var a=Kn(t,e,i,s),l=a.begin,u=a.end;/\s/.test(e.text.charAt(u-1))&&u--;for(var c=null,h=null,d=0;d<o.length;d++){var p=o[d];if(!(p.from>=u||p.to<=l)){var f=1!=p.level,m=Pn(t,i,f?Math.min(u,p.to)-1:Math.max(l,p.from)).right,g=m<r?r-m+1e9:m-r;(!c||g<h)&&(c=p,h=g)}}c||(c=o[o.length-1]);c.from<l&&(c={from:l,to:c.to,level:c.level});c.to>u&&(c={from:c.from,to:u,level:c.level});return c}:function(i,o,r,s,a,l,u){var t=st(function(t){var e=a[t],n=1!=e.level;return Jn(Vn(i,gt(r,n?e.to:e.from,n?"before":"after"),"line",o,s),l,u,!0)},0,a.length-1),e=a[t];if(0<t){var n=1!=e.level,c=Vn(i,gt(r,n?e.from:e.to,n?"after":"before"),"line",o,s);Jn(c,l,u,!0)&&c.top>u&&(e=a[t-1])}return e})(n,t,e,r,c,i,o);a=(u=1!=h.level)?h.from:h.to-1,l=u?h.to:h.from-1}var d,p,f=null,m=null,g=st(function(t){var e=Pn(n,r,t);return e.top+=s,e.bottom+=s,!!Jn(e,i,o,!1)&&(e.top<=o&&e.left<=i&&(f=t,m=e),!0)},a,l),v=!1;if(m){var y=i-m.left<m.right-i,b=y==u;g=f+(b?0:1),p=b?"after":"before",d=y?m.left:m.right}else{u||g!=l&&g!=a||g++,p=0==g?"after":g==t.text.length?"before":Pn(n,r,g-(u?1:0)).bottom+s<=o==u?"after":"before";var _=Vn(n,gt(e,g,p),"line",t,r);d=_.left,v=o<_.top||o>=_.bottom}return Gn(e,g=rt(t.text,g,1),p,v,i-d)}function ti(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==An){An=L("pre");for(var e=0;e<49;++e)An.appendChild(document.createTextNode("x")),An.appendChild(L("br"));An.appendChild(document.createTextNode("x"))}M(t.measure,An);var n=An.offsetHeight/50;return 3<n&&(t.cachedTextHeight=n),S(t.measure),n||1}function ei(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=L("span","xxxxxxxxxx"),n=L("pre",[e]);M(t.measure,n);var i=e.getBoundingClientRect(),o=(i.right-i.left)/10;return 2<o&&(t.cachedCharWidth=o),o||10}function ni(t){for(var e=t.display,n={},i={},o=e.gutters.clientLeft,r=e.gutters.firstChild,s=0;r;r=r.nextSibling,++s)n[t.options.gutters[s]]=r.offsetLeft+r.clientLeft+o,i[t.options.gutters[s]]=r.clientWidth;return{fixedPos:ii(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function ii(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function oi(i){var o=ti(i.display),r=i.options.lineWrapping,s=r&&Math.max(5,i.display.scroller.clientWidth/ei(i.display)-3);return function(t){if(Wt(i.doc,t))return 0;var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;n++)t.widgets[n].height&&(e+=t.widgets[n].height);return r?e+(Math.ceil(t.text.length/s)||1)*o:e+o}}function ri(t){var e=t.doc,n=oi(t);e.iter(function(t){var e=n(t);e!=t.height&&ht(t,e)})}function si(t,e,n,i){var o=t.display;if(!n&&"true"==pe(e).getAttribute("cm-not-content"))return null;var r,s,a=o.lineSpace.getBoundingClientRect();try{r=e.clientX-a.left,s=e.clientY-a.top}catch(e){return null}var l,u=Yn(t,r,s);if(i&&1==u.xRel&&(l=lt(t.doc,u.line).text).length==u.ch){var c=z(l,l.length,t.options.tabSize)-l.length;u=gt(u.line,Math.max(0,Math.round((r-kn(t.display).left)/ei(t.display))-c))}return u}function ai(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,i=0;i<n.length;i++)if((e-=n[i].size)<0)return i}function li(t){t.display.input.showSelection(t.display.input.prepareSelection())}function ui(t,e){void 0===e&&(e=!0);for(var n=t.doc,i={},o=i.cursors=document.createDocumentFragment(),r=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(e||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=t.display.viewTo||a.to().line<t.display.viewFrom)){var l=a.empty();(l||t.options.showCursorWhenSelecting)&&ci(t,a.head,o),l||di(t,a,r)}}return i}function ci(t,e,n){var i=Vn(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),o=n.appendChild(L("div","","CodeMirror-cursor"));if(o.style.left=i.left+"px",o.style.top=i.top+"px",o.style.height=Math.max(0,i.bottom-i.top)*t.options.cursorHeight+"px",i.other){var r=n.appendChild(L("div","","CodeMirror-cursor CodeMirror-secondarycursor"));r.style.display="",r.style.left=i.other.left+"px",r.style.top=i.other.top+"px",r.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function hi(t,e){return t.top-e.top||t.left-e.left}function di(s,t,e){var n=s.display,i=s.doc,o=document.createDocumentFragment(),r=kn(s.display),T=r.left,S=Math.max(n.sizerWidth,Tn(s)-n.sizer.offsetLeft)-r.right,M="ltr"==i.direction;function D(t,e,n,i){e<0&&(e=0),e=Math.round(e),i=Math.round(i),o.appendChild(L("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?S-t:n)+"px;\n                             height: "+(i-e)+"px"))}function a(n,y,b){var _,w,r=lt(i,n),x=r.text.length;function C(t,e){return Wn(s,gt(n,t),"div",r,e)}function k(t,e,n){var i=Xn(s,r,null,t),o="ltr"==e==("after"==n)?"left":"right";return C("after"==n?i.begin:i.end-(/\s/.test(r.text.charAt(i.end-1))?2:1),o)[o]}var $=Qt(r,i.direction);return function(t,e,n,i){if(!t)return i(e,n,"ltr",0);for(var o=!1,r=0;r<t.length;++r){var s=t[r];(s.from<n&&s.to>e||e==n&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr",r),o=!0)}o||i(e,n,"ltr")}($,y||0,null==b?x:b,function(t,e,n,i){var o="ltr"==n,r=C(t,o?"left":"right"),s=C(e-1,o?"right":"left"),a=null==y&&0==t,l=null==b&&e==x,u=0==i,c=!$||i==$.length-1;if(s.top-r.top<=3){var h=(M?l:a)&&c,d=(M?a:l)&&u?T:(o?r:s).left,p=h?S:(o?s:r).right;D(d,r.top,p-d,r.bottom)}else{var f,m,g,v;v=o?(f=M&&a&&u?T:r.left,m=M?S:k(t,n,"before"),g=M?T:k(e,n,"after"),M&&l&&c?S:s.right):(f=M?k(t,n,"before"):T,m=!M&&a&&u?S:r.right,g=!M&&l&&c?T:s.left,M?k(e,n,"after"):S),D(f,r.top,m-f,r.bottom),r.bottom<s.top&&D(T,r.bottom,null,s.top),D(g,s.top,v-g,s.bottom)}(!_||hi(r,_)<0)&&(_=r),hi(s,_)<0&&(_=s),(!w||hi(r,w)<0)&&(w=r),hi(s,w)<0&&(w=s)}),{start:_,end:w}}var l=t.from(),u=t.to();if(l.line==u.line)a(l.line,l.ch,u.ch);else{var c=lt(i,l.line),h=lt(i,u.line),d=Bt(c)==Bt(h),p=a(l.line,l.ch,d?c.text.length+1:null).end,f=a(u.line,d?0:null,u.ch).start;d&&(p.top<f.top-2?(D(p.right,p.top,null,p.bottom),D(T,f.top,f.left,f.bottom)):D(p.right,p.top,f.left-p.right,p.bottom)),p.bottom<f.top&&D(T,p.bottom,null,f.top)}e.appendChild(o)}function pi(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",0<t.options.cursorBlinkRate?e.blinker=setInterval(function(){return e.cursorDiv.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function fi(t){t.state.focused||(t.display.input.focus(),gi(t))}function mi(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,vi(t))},100)}function gi(t,e){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(oe(t,"focus",t,e),t.state.focused=!0,A(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),b&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),pi(t))}function vi(t,e){t.state.delayingBlurEvent||(t.state.focused&&(oe(t,"blur",t,e),t.state.focused=!1,T(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function yi(t){for(var e=t.display,n=e.lineDiv.offsetTop,i=0;i<e.view.length;i++){var o=e.view[i],r=t.options.lineWrapping,s=void 0,a=0;if(!o.hidden){if(w&&x<8){var l=o.node.offsetTop+o.node.offsetHeight;s=l-n,n=l}else{var u=o.node.getBoundingClientRect();s=u.bottom-u.top,!r&&o.text.firstChild&&(a=o.text.firstChild.getBoundingClientRect().right-u.left-1)}var c=o.line.height-s;if(s<2&&(s=ti(e)),(.005<c||c<-.005)&&(ht(o.line,s),bi(o.line),o.rest))for(var h=0;h<o.rest.length;h++)bi(o.rest[h]);if(a>t.display.sizerWidth){var d=Math.ceil(a/ei(t.display));d>t.display.maxLineLength&&(t.display.maxLineLength=d,t.display.maxLine=o.line,t.display.maxLineChanged=!0)}}}}function bi(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function _i(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-xn(t));var o=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight,r=pt(e,i),s=pt(e,o);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<r?s=pt(e,Zt(lt(e,r=a))+t.wrapper.clientHeight):Math.min(l,e.lastLine())>=s&&(r=pt(e,Zt(lt(e,l))-t.wrapper.clientHeight),s=l)}return{from:r,to:Math.max(s,r+1)}}function wi(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=ii(e)-e.scroller.scrollLeft+t.doc.scrollLeft,o=e.gutters.offsetWidth,r=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){t.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=r),n[s].gutterBackground&&(n[s].gutterBackground.style.left=r));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=r}t.options.fixedGutter&&(e.gutters.style.left=i+o+"px")}}function xi(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=mt(t.options,e.first+e.size-1),i=t.display;if(n.length==i.lineNumChars)return!1;var o=i.measure.appendChild(L("div",[L("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),r=o.firstChild.offsetWidth,s=o.offsetWidth-r;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(r,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",ao(t),!0}function Ci(t,e){var n=t.display,i=ti(t.display);e.top<0&&(e.top=0);var o=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,r=Sn(t),s={};e.bottom-e.top>r&&(e.bottom=e.top+r);var a=t.doc.height+Cn(n),l=e.top<i,u=e.bottom>a-i;if(e.top<o)s.scrollTop=l?0:e.top;else if(e.bottom>o+r){var c=Math.min(e.top,(u?a:e.bottom)-r);c!=o&&(s.scrollTop=c)}var h=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft,d=Tn(t)-(t.options.fixedGutter?n.gutters.offsetWidth:0),p=e.right-e.left>d;return p&&(e.right=e.left+d),e.left<10?s.scrollLeft=0:e.left<h?s.scrollLeft=Math.max(0,e.left-(p?0:10)):e.right>d+h-3&&(s.scrollLeft=e.right+(p?0:10)-d),s}function ki(t,e){null!=e&&(Si(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function $i(t){Si(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Ti(t,e,n){null==e&&null==n||Si(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Si(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Mi(t,Zn(t,e.from),Zn(t,e.to),e.margin))}function Mi(t,e,n,i){var o=Ci(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-i,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+i});Ti(t,o.scrollLeft,o.scrollTop)}function Di(t,e){Math.abs(t.doc.scrollTop-e)<2||(m||so(t,{top:e}),Li(t,e,!0),m&&so(t),eo(t,100))}function Li(t,e,n){e=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function Ei(t,e,n,i){e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!i||(t.doc.scrollLeft=e,wi(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function Pi(t){var e=t.display,n=e.gutters.offsetWidth,i=Math.round(t.doc.height+Cn(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+$n(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}var Ai=function(t,e,n){this.cm=n;var i=this.vert=L("div",[L("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=L("div",[L("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=o.tabIndex=-1,t(i),t(o),ee(i,"scroll",function(){i.clientHeight&&e(i.scrollTop,"vertical")}),ee(o,"scroll",function(){o.clientWidth&&e(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,w&&x<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ai.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,i=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?i+"px":"0";var o=t.viewHeight-(e?i:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+o)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=t.barLeft+"px";var r=t.viewWidth-t.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+r)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<t.clientHeight&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:e?i:0}},Ai.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ai.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ai.prototype.zeroWidthHack=function(){var t=_&&!a?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new U,this.disableVert=new U},Ai.prototype.enableZeroWidthBar=function(n,i,o){n.style.pointerEvents="auto",i.set(1e3,function t(){var e=n.getBoundingClientRect();("vert"==o?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1))!=n?n.style.pointerEvents="none":i.set(1e3,t)})},Ai.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Oi=function(){};function Ii(t,e){e||(e=Pi(t));var n=t.display.barWidth,i=t.display.barHeight;Ni(t,e);for(var o=0;o<4&&n!=t.display.barWidth||i!=t.display.barHeight;o++)n!=t.display.barWidth&&t.options.lineWrapping&&yi(t),Ni(t,Pi(t)),n=t.display.barWidth,i=t.display.barHeight}function Ni(t,e){var n=t.display,i=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}Oi.prototype.update=function(){return{bottom:0,right:0}},Oi.prototype.setScrollLeft=function(){},Oi.prototype.setScrollTop=function(){},Oi.prototype.clear=function(){};var Ri={native:Ai,null:Oi};function zi(n){n.display.scrollbars&&(n.display.scrollbars.clear(),n.display.scrollbars.addClass&&T(n.display.wrapper,n.display.scrollbars.addClass)),n.display.scrollbars=new Ri[n.options.scrollbarStyle](function(t){n.display.wrapper.insertBefore(t,n.display.scrollbarFiller),ee(t,"mousedown",function(){n.state.focused&&setTimeout(function(){return n.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,e){"horizontal"==e?Ei(n,t):Di(n,t)},n),n.display.scrollbars.addClass&&A(n.display.wrapper,n.display.scrollbars.addClass)}var Ui=0;function Fi(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ui},e=t.curOp,sn?sn.ops.push(e):e.ownsGroup=sn={ops:[e],delayedCallbacks:[]}}function Hi(t){var e=t.curOp;e&&function(t,e){var n=t.ownsGroup;if(n)try{!function(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var i=0;i<t.ops.length;i++){var o=t.ops[i];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(n<e.length)}(n)}finally{sn=null,e(n)}}(e,function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,n=0;n<e.length;n++)Bi(e[n]);for(var i=0;i<e.length;i++)(o=e[i]).updatedDisplay=o.mustUpdate&&oo(o.cm,o.update);var o;for(var r=0;r<e.length;r++)ji(e[r]);for(var s=0;s<e.length;s++)qi(e[s]);for(var a=0;a<e.length;a++)Wi(e[a])}(t)})}function Bi(t){var e,n,i=t.cm,o=i.display;!(n=(e=i).display).scrollbarsClipped&&n.scroller.offsetWidth&&(n.nativeBarWidth=n.scroller.offsetWidth-n.scroller.clientWidth,n.heightForcer.style.height=$n(e)+"px",n.sizer.style.marginBottom=-n.nativeBarWidth+"px",n.sizer.style.borderRightWidth=$n(e)+"px",n.scrollbarsClipped=!0),t.updateMaxLine&&Yt(i),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<o.viewFrom||t.scrollToPos.to.line>=o.viewTo)||o.maxLineChanged&&i.options.lineWrapping,t.update=t.mustUpdate&&new io(i,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function ji(t){var e=t.cm,n=e.display;t.updatedDisplay&&yi(e),t.barMeasure=Pi(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Dn(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+$n(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-Tn(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function qi(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Ei(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==P();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&Ii(e,t.barMeasure),t.updatedDisplay&&lo(e,t.barMeasure),t.selectionChanged&&pi(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&fi(t.cm)}function Wi(t){var e=t.cm,n=e.display,i=e.doc;(t.updatedDisplay&&ro(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&Li(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&Ei(e,t.scrollLeft,!0,!0),t.scrollToPos)&&function(t,e){if(!re(t,"scrollCursorIntoView")){var n=t.display,i=n.sizer.getBoundingClientRect(),o=null;if(e.top+i.top<0?o=!0:e.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!u){var r=L("div","",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-xn(t.display))+"px;\n                         height: "+(e.bottom-e.top+$n(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(r),r.scrollIntoView(o),t.display.lineSpace.removeChild(r)}}}(e,function(t,e,n,i){var o;null==i&&(i=0),t.options.lineWrapping||e!=n||(n="before"==(e=e.ch?gt(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e).sticky?gt(e.line,e.ch+1,"before"):e);for(var r=0;r<5;r++){var s=!1,a=Vn(t,e),l=n&&n!=e?Vn(t,n):a,u=Ci(t,o={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-i,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+i}),c=t.doc.scrollTop,h=t.doc.scrollLeft;if(null!=u.scrollTop&&(Di(t,u.scrollTop),1<Math.abs(t.doc.scrollTop-c)&&(s=!0)),null!=u.scrollLeft&&(Ei(t,u.scrollLeft),1<Math.abs(t.doc.scrollLeft-h)&&(s=!0)),!s)break}return o}(e,Ct(i,t.scrollToPos.from),Ct(i,t.scrollToPos.to),t.scrollToPos.margin));var o=t.maybeHiddenMarkers,r=t.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||oe(o[s],"hide");if(r)for(var a=0;a<r.length;++a)r[a].lines.length&&oe(r[a],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&oe(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function Vi(t,e){if(t.curOp)return e();Fi(t);try{return e()}finally{Hi(t)}}function Zi(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Fi(t);try{return e.apply(t,arguments)}finally{Hi(t)}}}function Gi(t){return function(){if(this.curOp)return t.apply(this,arguments);Fi(this);try{return t.apply(this,arguments)}finally{Hi(this)}}}function Yi(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Fi(t);try{return e.apply(this,arguments)}finally{Hi(t)}}}function Ki(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i||(i=0);var o=t.display;if(i&&n<o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>e)&&(o.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=o.viewTo)Tt&&jt(t.doc,e)<o.viewTo&&Ji(t);else if(n<=o.viewFrom)Tt&&qt(t.doc,n+i)>o.viewFrom?Ji(t):(o.viewFrom+=i,o.viewTo+=i);else if(e<=o.viewFrom&&n>=o.viewTo)Ji(t);else if(e<=o.viewFrom){var r=Qi(t,n,n+i,1);r?(o.view=o.view.slice(r.index),o.viewFrom=r.lineN,o.viewTo+=i):Ji(t)}else if(n>=o.viewTo){var s=Qi(t,e,e,-1);s?(o.view=o.view.slice(0,s.index),o.viewTo=s.lineN):Ji(t)}else{var a=Qi(t,e,e,-1),l=Qi(t,n,n+i,1);a&&l?(o.view=o.view.slice(0,a.index).concat(rn(t,a.lineN,l.lineN)).concat(o.view.slice(l.index)),o.viewTo+=i):Ji(t)}var u=o.externalMeasured;u&&(n<u.lineN?u.lineN+=i:e<u.lineN+u.size&&(o.externalMeasured=null))}function Xi(t,e,n){t.curOp.viewChanged=!0;var i=t.display,o=t.display.externalMeasured;if(o&&e>=o.lineN&&e<o.lineN+o.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var r=i.view[ai(t,e)];if(null!=r.node){var s=r.changes||(r.changes=[]);-1==F(s,n)&&s.push(n)}}}function Ji(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function Qi(t,e,n,i){var o,r=ai(t,e),s=t.display.view;if(!Tt||n==t.doc.first+t.doc.size)return{index:r,lineN:n};for(var a=t.display.viewFrom,l=0;l<r;l++)a+=s[l].size;if(a!=e){if(0<i){if(r==s.length-1)return null;o=a+s[r].size-e,r++}else o=a-e;e+=o,n+=o}for(;jt(t.doc,n)!=n;){if(r==(i<0?0:s.length-1))return null;n+=i*s[r-(i<0?1:0)].size,r+=i}return{index:r,lineN:n}}function to(t){for(var e=t.display.view,n=0,i=0;i<e.length;i++){var o=e[i];o.hidden||o.node&&!o.changes||++n}return n}function eo(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,N(no,t))}function no(l){var u=l.doc;if(!(u.highlightFrontier>=l.display.viewTo)){var c=+new Date+l.options.workTime,h=Ue(l,u.highlightFrontier),d=[];u.iter(h.line,Math.min(u.first+u.size,l.display.viewTo+500),function(t){if(h.line>=l.display.viewFrom){var e=t.styles,n=t.text.length>l.options.maxHighlightLength?Ee(u.mode,h.state):null,i=Re(l,t,h,!0);n&&(h.state=n),t.styles=i.styles;var o=t.styleClasses,r=i.classes;r?t.styleClasses=r:o&&(t.styleClasses=null);for(var s=!e||e.length!=t.styles.length||o!=r&&(!o||!r||o.bgClass!=r.bgClass||o.textClass!=r.textClass),a=0;!s&&a<e.length;++a)s=e[a]!=t.styles[a];s&&d.push(h.line),t.stateAfter=h.save(),h.nextLine()}else t.text.length<=l.options.maxHighlightLength&&Fe(l,t.text,h),t.stateAfter=h.line%5==0?h.save():null,h.nextLine();if(+new Date>c)return eo(l,l.options.workDelay),!0}),u.highlightFrontier=h.line,u.modeFrontier=Math.max(u.modeFrontier,h.line),d.length&&Vi(l,function(){for(var t=0;t<d.length;t++)Xi(l,d[t],"text")})}}var io=function(t,e,n){var i=t.display;this.viewport=e,this.visible=_i(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Tn(t),this.force=n,this.dims=ni(t),this.events=[]};function oo(t,e){var n=t.display,i=t.doc;if(e.editorIsHidden)return Ji(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==to(t))return!1;xi(t)&&(Ji(t),e.dims=ni(t));var o=i.first+i.size,r=Math.max(e.visible.from-t.options.viewportMargin,i.first),s=Math.min(o,e.visible.to+t.options.viewportMargin);n.viewFrom<r&&r-n.viewFrom<20&&(r=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(o,n.viewTo)),Tt&&(r=jt(t.doc,r),s=qt(t.doc,s));var a,l,u,c,h=r!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;l=r,u=s,0==(c=(a=t).display).view.length||l>=c.viewTo||u<=c.viewFrom?(c.view=rn(a,l,u),c.viewFrom=l):(c.viewFrom>l?c.view=rn(a,l,c.viewFrom).concat(c.view):c.viewFrom<l&&(c.view=c.view.slice(ai(a,l))),c.viewFrom=l,c.viewTo<u?c.view=c.view.concat(rn(a,c.viewTo,u)):c.viewTo>u&&(c.view=c.view.slice(0,ai(a,u)))),c.viewTo=u,n.viewOffset=Zt(lt(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var d=to(t);if(!h&&0==d&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var p=function(t){if(t.hasFocus())return null;var e=P();if(!e||!E(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&E(t.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(t);return 4<d&&(n.lineDiv.style.display="none"),function(n,t,e){var i=n.display,o=n.options.lineNumbers,r=i.lineDiv,s=r.firstChild;function a(t){var e=t.nextSibling;return b&&_&&n.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),e}for(var l=i.view,u=i.viewFrom,c=0;c<l.length;c++){var h=l[c];if(h.hidden);else if(h.node&&h.node.parentNode==r){for(;s!=h.node;)s=a(s);var d=o&&null!=t&&t<=u&&h.lineNumber;h.changes&&(-1<F(h.changes,"gutter")&&(d=!1),cn(n,h,u,e)),d&&(S(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(mt(n.options,u)))),s=h.node.nextSibling}else{var p=(g=u,v=e,void 0,y=dn(f=n,m=h),m.text=m.node=y.pre,y.bgClass&&(m.bgClass=y.bgClass),y.textClass&&(m.textClass=y.textClass),fn(f,m),mn(f,m,g,v),vn(f,m,v),m.node);r.insertBefore(p,s)}u+=h.size}var f,m,g,v,y;for(;s;)s=a(s)}(t,n.updateLineNumbers,e.dims),4<d&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(t){if(t&&t.activeElt&&t.activeElt!=P()&&(t.activeElt.focus(),t.anchorNode&&E(document.body,t.anchorNode)&&E(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}(p),S(n.cursorDiv),S(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,h&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,eo(t,400)),!(n.updateLineNumbers=null)}function ro(t,e){for(var n=e.viewport,i=!0;(i&&t.options.lineWrapping&&e.oldDisplayWidth!=Tn(t)||(n&&null!=n.top&&(n={top:Math.min(t.doc.height+Cn(t.display)-Sn(t),n.top)}),e.visible=_i(t.display,t.doc,n),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&oo(t,e);i=!1){yi(t);var o=Pi(t);li(t),Ii(t,o),lo(t,o),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function so(t,e){var n=new io(t,e);if(oo(t,n)){yi(t),ro(t,n);var i=Pi(t);li(t),Ii(t,i),lo(t,i),n.finish()}}function ao(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px"}function lo(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+$n(t)+"px"}function uo(t){var e=t.display.gutters,n=t.options.gutters;S(e);for(var i=0;i<n.length;++i){var o=n[i],r=e.appendChild(L("div",null,"CodeMirror-gutter "+o));"CodeMirror-linenumbers"==o&&((t.display.lineGutter=r).style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=i?"":"none",ao(t)}function co(t){var e=F(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):-1<e&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}io.prototype.signal=function(t,e){ae(t,e)&&this.events.push(arguments)},io.prototype.finish=function(){for(var t=0;t<this.events.length;t++)oe.apply(null,this.events[t])};var ho=0,po=null;function fo(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function mo(t){var e=fo(t);return e.x*=po,e.y*=po,e}function go(t,e){var n=fo(e),i=n.x,o=n.y,r=t.display,s=r.scroller,a=s.scrollWidth>s.clientWidth,l=s.scrollHeight>s.clientHeight;if(i&&a||o&&l){if(o&&_&&b)t:for(var u=e.target,c=r.view;u!=s;u=u.parentNode)for(var h=0;h<c.length;h++)if(c[h].node==u){t.display.currentWheelTarget=u;break t}if(i&&!m&&!g&&null!=po)return o&&l&&Di(t,Math.max(0,s.scrollTop+o*po)),Ei(t,Math.max(0,s.scrollLeft+i*po)),(!o||o&&l)&&ue(e),void(r.wheelStartX=null);if(o&&null!=po){var d=o*po,p=t.doc.scrollTop,f=p+r.wrapper.clientHeight;d<0?p=Math.max(0,p+d-50):f=Math.min(t.doc.height,f+d+50),so(t,{top:p,bottom:f})}ho<20&&(null==r.wheelStartX?(r.wheelStartX=s.scrollLeft,r.wheelStartY=s.scrollTop,r.wheelDX=i,r.wheelDY=o,setTimeout(function(){if(null!=r.wheelStartX){var t=s.scrollLeft-r.wheelStartX,e=s.scrollTop-r.wheelStartY,n=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,n&&(po=(po*ho+n)/(ho+1),++ho)}},200)):(r.wheelDX+=i,r.wheelDY+=o))}}w?po=-.53:m?po=15:s?po=-.7:l&&(po=-1/3);var vo=function(t,e){this.ranges=t,this.primIndex=e};vo.prototype.primary=function(){return this.ranges[this.primIndex]},vo.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],i=t.ranges[e];if(!yt(n.anchor,i.anchor)||!yt(n.head,i.head))return!1}return!0},vo.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new yo(bt(this.ranges[e].anchor),bt(this.ranges[e].head));return new vo(t,this.primIndex)},vo.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},vo.prototype.contains=function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(0<=vt(e,i.from())&&vt(t,i.to())<=0)return n}return-1};var yo=function(t,e){this.anchor=t,this.head=e};function bo(t,e,n){var i=t&&t.options.selectionsMayTouch,o=e[n];e.sort(function(t,e){return vt(t.from(),e.from())}),n=F(e,o);for(var r=1;r<e.length;r++){var s=e[r],a=e[r-1],l=vt(a.to(),s.from());if(i&&!s.empty()?0<l:0<=l){var u=wt(a.from(),s.from()),c=_t(a.to(),s.to()),h=a.empty()?s.from()==s.head:a.from()==a.head;r<=n&&--n,e.splice(--r,2,new yo(h?c:u,h?u:c))}}return new vo(e,n)}function _o(t,e){return new vo([new yo(t,e||t)],0)}function wo(t){return t.text?gt(t.from.line+t.text.length-1,Y(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function xo(t,e){if(vt(t,e.from)<0)return t;if(vt(t,e.to)<=0)return wo(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=wo(e).ch-e.to.ch),gt(n,i)}function Co(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var o=t.sel.ranges[i];n.push(new yo(xo(o.anchor,e),xo(o.head,e)))}return bo(t.cm,n,t.sel.primIndex)}function ko(t,e,n){return t.line==e.line?gt(n.line,t.ch-e.ch+n.ch):gt(n.line+(t.line-e.line),t.ch)}function $o(t){t.doc.mode=Me(t.options,t.doc.modeOption),To(t)}function To(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,eo(t,100),t.state.modeGen++,t.curOp&&Ki(t)}function So(t,e){return 0==e.from.ch&&0==e.to.ch&&""==Y(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Mo(t,i,e,o){function r(t){return e?e[t]:null}function n(t,e,n){!function(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Pt(t),At(t,n);var o=i?i(t):1;o!=t.height&&ht(t,o)}(t,e,n,o),ln(t,"change",t,i)}function s(t,e){for(var n=[],i=t;i<e;++i)n.push(new Ze(u[i],r(i),o));return n}var a=i.from,l=i.to,u=i.text,c=lt(t,a.line),h=lt(t,l.line),d=Y(u),p=r(u.length-1),f=l.line-a.line;if(i.full)t.insert(0,s(0,u.length)),t.remove(u.length,t.size-u.length);else if(So(t,i)){var m=s(0,u.length-1);n(h,h.text,p),f&&t.remove(a.line,f),m.length&&t.insert(a.line,m)}else if(c==h)if(1==u.length)n(c,c.text.slice(0,a.ch)+d+c.text.slice(l.ch),p);else{var g=s(1,u.length-1);g.push(new Ze(d+c.text.slice(l.ch),p,o)),n(c,c.text.slice(0,a.ch)+u[0],r(0)),t.insert(a.line+1,g)}else if(1==u.length)n(c,c.text.slice(0,a.ch)+u[0]+h.text.slice(l.ch),r(0)),t.remove(a.line+1,f);else{n(c,c.text.slice(0,a.ch)+u[0],r(0)),n(h,d+h.text.slice(l.ch),p);var v=s(1,u.length-1);1<f&&t.remove(a.line+1,f-1),t.insert(a.line+1,v)}ln(t,"change",t,i)}function Do(t,a,l){!function t(e,n,i){if(e.linked)for(var o=0;o<e.linked.length;++o){var r=e.linked[o];if(r.doc!=n){var s=i&&r.sharedHist;l&&!s||(a(r.doc,s),t(r.doc,e,s))}}}(t,null,!0)}function Lo(t,e){if(e.cm)throw new Error("This document is already in use.");ri((t.doc=e).cm=t),$o(t),Eo(t),t.options.lineWrapping||Yt(t),t.options.mode=e.modeOption,Ki(t)}function Eo(t){("rtl"==t.doc.direction?A:T)(t.display.lineDiv,"CodeMirror-rtl")}function Po(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function Ao(t,e){var n={from:bt(e.from),to:wo(e),text:ut(t,e.from,e.to)};return zo(t,n,e.from.line,e.to.line+1),Do(t,function(t){return zo(t,n,e.from.line,e.to.line+1)},!0),n}function Oo(t){for(;t.length;){if(!Y(t).ranges)break;t.pop()}}function Io(t,e,n,i){var o=t.history;o.undone.length=0;var r,s,a,l=+new Date;if((o.lastOp==i||o.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&o.lastModTime>l-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(r=(a=o).lastOp==i?(Oo(a.done),Y(a.done)):a.done.length&&!Y(a.done).ranges?Y(a.done):1<a.done.length&&!a.done[a.done.length-2].ranges?(a.done.pop(),Y(a.done)):void 0))s=Y(r.changes),0==vt(e.from,e.to)&&0==vt(e.from,s.to)?s.to=wo(e):r.changes.push(Ao(t,e));else{var u=Y(o.done);for(u&&u.ranges||Ro(t.sel,o.done),r={changes:[Ao(t,e)],generation:o.generation},o.done.push(r);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(n),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=l,o.lastOp=o.lastSelOp=i,o.lastOrigin=o.lastSelOrigin=e.origin,s||oe(t,"historyAdded")}function No(t,e,n,i){var o,r,s,a,l,u=t.history,c=i&&i.origin;n==u.lastSelOp||c&&u.lastSelOrigin==c&&(u.lastModTime==u.lastSelTime&&u.lastOrigin==c||(o=t,r=c,s=Y(u.done),a=e,"*"==(l=r.charAt(0))||"+"==l&&s.ranges.length==a.ranges.length&&s.somethingSelected()==a.somethingSelected()&&new Date-o.history.lastSelTime<=(o.cm?o.cm.options.historyEventDelay:500)))?u.done[u.done.length-1]=e:Ro(e,u.done),u.lastSelTime=+new Date,u.lastSelOrigin=c,u.lastSelOp=n,i&&!1!==i.clearRedo&&Oo(u.undone)}function Ro(t,e){var n=Y(e);n&&n.ranges&&n.equals(t)||e.push(t)}function zo(e,n,t,i){var o=n["spans_"+e.id],r=0;e.iter(Math.max(e.first,t),Math.min(e.first+e.size,i),function(t){t.markedSpans&&((o||(o=n["spans_"+e.id]={}))[r]=t.markedSpans),++r})}function Uo(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Fo(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=[],o=0;o<e.text.length;++o)i.push(Uo(n[o]));return i}(t,e),i=Lt(t,e);if(!n)return i;if(!i)return n;for(var o=0;o<n.length;++o){var r=n[o],s=i[o];if(r&&s)t:for(var a=0;a<s.length;++a){for(var l=s[a],u=0;u<r.length;++u)if(r[u].marker==l.marker)continue t;r.push(l)}else s&&(n[o]=s)}return n}function Ho(t,e,n){for(var i=[],o=0;o<t.length;++o){var r=t[o];if(r.ranges)i.push(n?vo.prototype.deepCopy.call(r):r);else{var s=r.changes,a=[];i.push({changes:a});for(var l=0;l<s.length;++l){var u=s[l],c=void 0;if(a.push({from:u.from,to:u.to,text:u.text}),e)for(var h in u)(c=h.match(/^spans_(\d+)$/))&&-1<F(e,Number(c[1]))&&(Y(a)[h]=u[h],delete u[h])}}}return i}function Bo(t,e,n,i){if(i){var o=t.anchor;if(n){var r=vt(e,o)<0;r!=vt(n,o)<0?(o=e,e=n):r!=vt(e,n)<0&&(e=n)}return new yo(o,e)}return new yo(n||e,e)}function jo(t,e,n,i,o){null==o&&(o=t.cm&&(t.cm.display.shift||t.extend)),Go(t,new vo([Bo(t.sel.primary(),e,n,o)],0),i)}function qo(t,e,n){for(var i=[],o=t.cm&&(t.cm.display.shift||t.extend),r=0;r<t.sel.ranges.length;r++)i[r]=Bo(t.sel.ranges[r],e[r],null,o);Go(t,bo(t.cm,i,t.sel.primIndex),n)}function Wo(t,e,n,i){var o=t.sel.ranges.slice(0);o[e]=n,Go(t,bo(t.cm,o,t.sel.primIndex),i)}function Vo(t,e,n,i){Go(t,_o(e,n),i)}function Zo(t,e,n){var i=t.history.done,o=Y(i);o&&o.ranges?Yo(t,i[i.length-1]=e,n):Go(t,e,n)}function Go(t,e,n){Yo(t,e,n),No(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function Yo(t,e,n){var i,o,r,s;(ae(t,"beforeSelectionChange")||t.cm&&ae(t.cm,"beforeSelectionChange"))&&(i=t,r=n,s={ranges:(o=e).ranges,update:function(t){this.ranges=[];for(var e=0;e<t.length;e++)this.ranges[e]=new yo(Ct(i,t[e].anchor),Ct(i,t[e].head))},origin:r&&r.origin},oe(i,"beforeSelectionChange",i,s),i.cm&&oe(i.cm,"beforeSelectionChange",i.cm,s),e=s.ranges!=o.ranges?bo(i.cm,s.ranges,s.ranges.length-1):o),Ko(t,Jo(t,e,n&&n.bias||(vt(e.primary().head,t.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!t.cm||$i(t.cm)}function Ko(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,se(t.cm)),ln(t,"cursorActivity",t))}function Xo(t){Ko(t,Jo(t,t.sel,null,!1))}function Jo(t,e,n,i){for(var o,r=0;r<e.ranges.length;r++){var s=e.ranges[r],a=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[r],l=tr(t,s.anchor,a&&a.anchor,n,i),u=tr(t,s.head,a&&a.head,n,i);(o||l!=s.anchor||u!=s.head)&&(o||(o=e.ranges.slice(0,r)),o[r]=new yo(l,u))}return o?bo(t.cm,o,e.primIndex):e}function Qo(t,e,n,i,o){var r=lt(t,e.line);if(r.markedSpans)for(var s=0;s<r.markedSpans.length;++s){var a=r.markedSpans[s],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=e.ch:a.from<e.ch))&&(null==a.to||(l.inclusiveRight?a.to>=e.ch:a.to>e.ch))){if(o&&(oe(l,"beforeCursorEnter"),l.explicitlyCleared)){if(r.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var u=l.find(i<0?1:-1),c=void 0;if((i<0?l.inclusiveRight:l.inclusiveLeft)&&(u=er(t,u,-i,u&&u.line==e.line?r:null)),u&&u.line==e.line&&(c=vt(u,n))&&(i<0?c<0:0<c))return Qo(t,u,e,i,o)}var h=l.find(i<0?-1:1);return(i<0?l.inclusiveLeft:l.inclusiveRight)&&(h=er(t,h,i,h.line==e.line?r:null)),h?Qo(t,h,e,i,o):null}}return e}function tr(t,e,n,i,o){var r=i||1,s=Qo(t,e,n,r,o)||!o&&Qo(t,e,n,r,!0)||Qo(t,e,n,-r,o)||!o&&Qo(t,e,n,-r,!0);return s||(t.cantEdit=!0,gt(t.first,0))}function er(t,e,n,i){return n<0&&0==e.ch?e.line>t.first?Ct(t,gt(e.line-1)):null:0<n&&e.ch==(i||lt(t,e.line)).text.length?e.line<t.first+t.size-1?gt(e.line+1,0):null:new gt(e.line,e.ch+n)}function nr(t){t.setSelection(gt(t.firstLine(),0),gt(t.lastLine()),j)}function ir(o,t,e){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return e&&(r.update=function(t,e,n,i){t&&(r.from=Ct(o,t)),e&&(r.to=Ct(o,e)),n&&(r.text=n),void 0!==i&&(r.origin=i)}),oe(o,"beforeChange",o,r),o.cm&&oe(o.cm,"beforeChange",o.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function or(t,e,n){if(t.cm){if(!t.cm.curOp)return Zi(t.cm,or)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(ae(t,"beforeChange")||t.cm&&ae(t.cm,"beforeChange"))||(e=ir(t,e,!0))){var i=$t&&!n&&function(t,e,n){var i=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=F(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var o=[{from:e,to:n}],r=0;r<i.length;++r)for(var s=i[r],a=s.find(0),l=0;l<o.length;++l){var u=o[l];if(!(vt(u.to,a.from)<0||0<vt(u.from,a.to))){var c=[l,1],h=vt(u.from,a.from),d=vt(u.to,a.to);(h<0||!s.inclusiveLeft&&!h)&&c.push({from:u.from,to:a.from}),(0<d||!s.inclusiveRight&&!d)&&c.push({from:a.to,to:u.to}),o.splice.apply(o,c),l+=c.length-3}}return o}(t,e.from,e.to);if(i)for(var o=i.length-1;0<=o;--o)rr(t,{from:i[o].from,to:i[o].to,text:o?[""]:e.text,origin:e.origin});else rr(t,e)}}function rr(t,n){if(1!=n.text.length||""!=n.text[0]||0!=vt(n.from,n.to)){var e=Co(t,n);Io(t,n,e,t.cm?t.cm.curOp.id:NaN),lr(t,n,e,Lt(t,n));var i=[];Do(t,function(t,e){e||-1!=F(i,t.history)||(dr(t.history,n),i.push(t.history)),lr(t,n,null,Lt(t,n))})}}function sr(o,r,t){var e=o.cm&&o.cm.state.suppressEdits;if(!e||t){for(var s,n=o.history,i=o.sel,a="undo"==r?n.done:n.undone,l="undo"==r?n.undone:n.done,u=0;u<a.length&&(s=a[u],t?!s.ranges||s.equals(o.sel):s.ranges);u++);if(u!=a.length){for(n.lastOrigin=n.lastSelOrigin=null;;){if(!(s=a.pop()).ranges){if(e)return void a.push(s);break}if(Ro(s,l),t&&!s.equals(o.sel))return void Go(o,s,{clearRedo:!1});i=s}var c=[];Ro(i,l),l.push({changes:c,generation:n.generation}),n.generation=s.generation||++n.maxGeneration;for(var h=ae(o,"beforeChange")||o.cm&&ae(o.cm,"beforeChange"),d=function(t){var n=s.changes[t];if(n.origin=r,h&&!ir(o,n,!1))return a.length=0,{};c.push(Ao(o,n));var e=t?Co(o,n):Y(a);lr(o,n,e,Fo(o,n)),!t&&o.cm&&o.cm.scrollIntoView({from:n.from,to:wo(n)});var i=[];Do(o,function(t,e){e||-1!=F(i,t.history)||(dr(t.history,n),i.push(t.history)),lr(t,n,null,Fo(t,n))})},p=s.changes.length-1;0<=p;--p){var f=d(p);if(f)return f.v}}}}function ar(t,e){if(0!=e&&(t.first+=e,t.sel=new vo(K(t.sel.ranges,function(t){return new yo(gt(t.anchor.line+e,t.anchor.ch),gt(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){Ki(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)Xi(t.cm,i,"gutter")}}function lr(t,e,n,i){if(t.cm&&!t.cm.curOp)return Zi(t.cm,lr)(t,e,n,i);if(e.to.line<t.first)ar(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var o=e.text.length-1-(t.first-e.from.line);ar(t,o),e={from:gt(t.first,0),to:gt(e.to.line+o,e.to.ch),text:[Y(e.text)],origin:e.origin}}var r=t.lastLine();e.to.line>r&&(e={from:e.from,to:gt(r,lt(t,r).text.length),text:[e.text[0]],origin:e.origin}),e.removed=ut(t,e.from,e.to),n||(n=Co(t,e)),t.cm?function(t,e,n){var i=t.doc,o=t.display,r=e.from,s=e.to,a=!1,l=r.line;t.options.lineWrapping||(l=dt(Bt(lt(i,r.line))),i.iter(l,s.line+1,function(t){if(t==o.maxLine)return a=!0}));-1<i.sel.contains(e.from,e.to)&&se(t);Mo(i,e,n,oi(t)),t.options.lineWrapping||(i.iter(l,r.line+e.text.length,function(t){var e=Gt(t);e>o.maxLineLength&&(o.maxLine=t,o.maxLineLength=e,o.maxLineChanged=!0,a=!1)}),a&&(t.curOp.updateMaxLine=!0));(function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,i=e-1;n<i;i--){var o=lt(t,i).stateAfter;if(o&&(!(o instanceof Ie)||i+o.lookAhead<e)){n=i+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}})(i,r.line),eo(t,400);var u=e.text.length-(s.line-r.line)-1;e.full?Ki(t):r.line!=s.line||1!=e.text.length||So(t.doc,e)?Ki(t,r.line,s.line+1,u):Xi(t,r.line,"text");var c=ae(t,"changes"),h=ae(t,"change");if(h||c){var d={from:r,to:s,text:e.text,removed:e.removed,origin:e.origin};h&&ln(t,"change",t,d),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}(t.cm,e,i):Mo(t,e,i),Yo(t,n,j)}}function ur(t,e,n,i,o){var r;i||(i=n),vt(i,n)<0&&(n=(r=[i,n])[0],i=r[1]),"string"==typeof e&&(e=t.splitLines(e)),or(t,{from:n,to:i,text:e,origin:o})}function cr(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function hr(t,e,n,i){for(var o=0;o<t.length;++o){var r=t[o],s=!0;if(r.ranges){r.copied||((r=t[o]=r.deepCopy()).copied=!0);for(var a=0;a<r.ranges.length;a++)cr(r.ranges[a].anchor,e,n,i),cr(r.ranges[a].head,e,n,i)}else{for(var l=0;l<r.changes.length;++l){var u=r.changes[l];if(n<u.from.line)u.from=gt(u.from.line+i,u.from.ch),u.to=gt(u.to.line+i,u.to.ch);else if(e<=u.to.line){s=!1;break}}s||(t.splice(0,o+1),o=0)}}}function dr(t,e){var n=e.from.line,i=e.to.line,o=e.text.length-(i-n)-1;hr(t.done,n,i,o),hr(t.undone,n,i,o)}function pr(t,e,n,i){var o=e,r=e;return"number"==typeof e?r=lt(t,xt(t,e)):o=dt(e),null==o?null:(i(r,o)&&t.cm&&Xi(t.cm,o,n),r)}function fr(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function mr(t){this.children=t;for(var e=0,n=0,i=0;i<t.length;++i){var o=t[i];e+=o.chunkSize(),n+=o.height,o.parent=this}this.size=e,this.height=n,this.parent=null}yo.prototype.from=function(){return wt(this.anchor,this.head)},yo.prototype.to=function(){return _t(this.anchor,this.head)},yo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},fr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n,i=t,o=t+e;i<o;++i){var r=this.lines[i];this.height-=r.height,(n=r).parent=null,Pt(n),ln(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0;i<e.length;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;t<i;++t)if(n(this.lines[t]))return!0}},mr.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(t<o){var r=Math.min(e,o-t),s=i.height;if(i.removeInner(t,r),this.height-=s-i.height,o==r&&(this.children.splice(n--,1),i.parent=null),0==(e-=r))break;t=0}else t-=o}if(this.size-e<25&&(1<this.children.length||!(this.children[0]instanceof fr))){var a=[];this.collapse(a),this.children=[new fr(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0;i<this.children.length;++i){var o=this.children[i],r=o.chunkSize();if(t<=r){if(o.insertInner(t,e,n),o.lines&&50<o.lines.length){for(var s=o.lines.length%25+25,a=s;a<o.lines.length;){var l=new fr(o.lines.slice(a,a+=25));o.height-=l.height,this.children.splice(++i,0,l),l.parent=this}o.lines=o.lines.slice(0,s),this.maybeSpill()}break}t-=r}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new mr(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=F(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var i=new mr(t.children);(i.parent=t).children=[i,e],t=i}e.parent=t.parent}while(10<t.children.length);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0;i<this.children.length;++i){var o=this.children[i],r=o.chunkSize();if(t<r){var s=Math.min(e,r-t);if(o.iterN(t,s,n))return!0;if(0==(e-=s))break;t=0}else t-=r}}};var gr=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=t,this.node=e};function vr(t,e,n){Zt(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&ki(t,n)}gr.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,i=dt(n);if(null!=i&&e){for(var o=0;o<e.length;++o)e[o]==this&&e.splice(o--,1);e.length||(n.widgets=null);var r=_n(this);ht(n,Math.max(0,n.height-r)),t&&(Vi(t,function(){vr(t,n,-r),Xi(t,i,"widget")}),ln(t,"lineWidgetCleared",t,this,i))}},gr.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,i=this.line;this.height=null;var o=_n(this)-e;o&&(Wt(this.doc,i)||ht(i,i.height+o),n&&Vi(n,function(){n.curOp.forceUpdate=!0,vr(n,i,o),ln(n,"lineWidgetChanged",n,t,dt(i))}))},le(gr);var yr=0,br=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++yr};function _r(e,i,o,t,n){if(t&&t.shared)return function(t,n,i,o,r){(o=R(o)).shared=!1;var s=[_r(t,n,i,o,r)],a=s[0],l=o.widgetNode;return Do(t,function(t){l&&(o.widgetNode=l.cloneNode(!0)),s.push(_r(t,Ct(t,n),Ct(t,i),o,r));for(var e=0;e<t.linked.length;++e)if(t.linked[e].isParent)return;a=Y(s)}),new wr(s,a)}(e,i,o,t,n);if(e.cm&&!e.cm.curOp)return Zi(e.cm,_r)(e,i,o,t,n);var r=new br(e,n),s=vt(i,o);if(t&&R(t,r,!1),0<s||0==s&&!1!==r.clearWhenEmpty)return r;if(r.replacedWith&&(r.collapsed=!0,r.widgetNode=D("span",[r.replacedWith],"CodeMirror-widget"),t.handleMouseEvents||r.widgetNode.setAttribute("cm-ignore-events","true"),t.insertLeft&&(r.widgetNode.insertLeft=!0)),r.collapsed){if(Ht(e,i.line,i,o,r)||i.line!=o.line&&Ht(e,o.line,i,o,r))throw new Error("Inserting collapsed marker partially overlapping an existing one");Tt=!0}r.addToHistory&&Io(e,{from:i,to:o,origin:"markText"},e.sel,NaN);var a,l=i.line,u=e.cm;if(e.iter(l,o.line+1,function(t){var e,n;u&&r.collapsed&&!u.options.lineWrapping&&Bt(t)==u.display.maxLine&&(a=!0),r.collapsed&&l!=i.line&&ht(t,0),e=t,n=new St(r,l==i.line?i.ch:null,l==o.line?o.ch:null),e.markedSpans=e.markedSpans?e.markedSpans.concat([n]):[n],n.marker.attachLine(e),++l}),r.collapsed&&e.iter(i.line,o.line+1,function(t){Wt(e,t)&&ht(t,0)}),r.clearOnEnter&&ee(r,"beforeCursorEnter",function(){return r.clear()}),r.readOnly&&($t=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),r.collapsed&&(r.id=++yr,r.atomic=!0),u){if(a&&(u.curOp.updateMaxLine=!0),r.collapsed)Ki(u,i.line,o.line+1);else if(r.className||r.startStyle||r.endStyle||r.css||r.attributes||r.title)for(var c=i.line;c<=o.line;c++)Xi(u,c,"text");r.atomic&&Xo(u.doc),ln(u,"markerAdded",u,r)}return r}br.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Fi(t),ae(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var i=null,o=null,r=0;r<this.lines.length;++r){var s=this.lines[r],a=Mt(s.markedSpans,this);t&&!this.collapsed?Xi(t,dt(s),"text"):t&&(null!=a.to&&(o=dt(s)),null!=a.from&&(i=dt(s))),s.markedSpans=Dt(s.markedSpans,a),null==a.from&&this.collapsed&&!Wt(this.doc,s)&&t&&ht(s,ti(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var u=Bt(this.lines[l]),c=Gt(u);c>t.display.maxLineLength&&(t.display.maxLine=u,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&Ki(t,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Xo(t.doc)),t&&ln(t,"markerCleared",t,this,i,o),e&&Hi(t),this.parent&&this.parent.clear()}},br.prototype.find=function(t,e){var n,i;null==t&&"bookmark"==this.type&&(t=1);for(var o=0;o<this.lines.length;++o){var r=this.lines[o],s=Mt(r.markedSpans,this);if(null!=s.from&&(n=gt(e?r:dt(r),s.from),-1==t))return n;if(null!=s.to&&(i=gt(e?r:dt(r),s.to),1==t))return i}return n&&{from:n,to:i}},br.prototype.changed=function(){var r=this,s=this.find(-1,!0),a=this,l=this.doc.cm;s&&l&&Vi(l,function(){var t=s.line,e=dt(s.line),n=Ln(l,e);if(n&&(Rn(n),l.curOp.selectionChanged=l.curOp.forceUpdate=!0),l.curOp.updateMaxLine=!0,!Wt(a.doc,t)&&null!=a.height){var i=a.height;a.height=null;var o=_n(a)-i;o&&ht(t,t.height+o)}ln(l,"markerChanged",l,r)})},br.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=F(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},br.prototype.detachLine=function(t){if(this.lines.splice(F(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},le(br);var wr=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function xr(t){return t.findMarks(gt(t.first,0),t.clipPos(gt(t.lastLine())),function(t){return t.parent})}function Cr(r){for(var t=function(t){var e=r[t],n=[e.primary.doc];Do(e.primary.doc,function(t){return n.push(t)});for(var i=0;i<e.markers.length;i++){var o=e.markers[i];-1==F(n,o.doc)&&(o.parent=null,e.markers.splice(i--,1))}},e=0;e<r.length;e++)t(e)}wr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ln(this,"clear")}},wr.prototype.find=function(t,e){return this.primary.find(t,e)},le(wr);var kr=0,$r=function(t,e,n,i,o){if(!(this instanceof $r))return new $r(t,e,n,i,o);null==n&&(n=0),mr.call(this,[new fr([new Ze("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var r=gt(n,0);this.sel=_o(r),this.history=new Po(null),this.id=++kr,this.modeOption=e,this.lineSep=i,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Mo(this,{from:r,to:r,text:t}),Go(this,_o(r),j)};$r.prototype=J(mr.prototype,{constructor:$r,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=ct(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:Yi(function(t){var e=gt(this.first,0),n=this.first+this.size-1;or(this,{from:e,to:gt(n,lt(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Ti(this.cm,0,0),Go(this,_o(e),j)}),replaceRange:function(t,e,n,i){ur(this,t,e=Ct(this,e),n=n?Ct(this,n):e,i)},getRange:function(t,e,n){var i=ut(this,Ct(this,t),Ct(this,e));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(ft(this,t))return lt(this,t)},getLineNumber:function(t){return dt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=lt(this,t)),Bt(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return Ct(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Yi(function(t,e,n){Vo(this,Ct(this,"number"==typeof t?gt(t,e||0):t),null,n)}),setSelection:Yi(function(t,e,n){Vo(this,Ct(this,t),Ct(this,e||t),n)}),extendSelection:Yi(function(t,e,n){jo(this,Ct(this,t),e&&Ct(this,e),n)}),extendSelections:Yi(function(t,e){qo(this,kt(this,t),e)}),extendSelectionsBy:Yi(function(t,e){qo(this,kt(this,K(this.sel.ranges,t)),e)}),setSelections:Yi(function(t,e,n){if(t.length){for(var i=[],o=0;o<t.length;o++)i[o]=new yo(Ct(this,t[o].anchor),Ct(this,t[o].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Go(this,bo(this.cm,i,e),n)}}),addSelection:Yi(function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new yo(Ct(this,t),Ct(this,e||t))),Go(this,bo(this.cm,i,i.length-1),n)}),getSelection:function(t){for(var e,n=this.sel.ranges,i=0;i<n.length;i++){var o=ut(this,n[i].from(),n[i].to());e=e?e.concat(o):o}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,i=0;i<n.length;i++){var o=ut(this,n[i].from(),n[i].to());!1!==t&&(o=o.join(t||this.lineSeparator())),e[i]=o}return e},replaceSelection:function(t,e,n){for(var i=[],o=0;o<this.sel.ranges.length;o++)i[o]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:Yi(function(t,e,n){for(var i=[],o=this.sel,r=0;r<o.ranges.length;r++){var s=o.ranges[r];i[r]={from:s.from(),to:s.to(),text:this.splitLines(t[r]),origin:n}}for(var a=e&&"end"!=e&&function(t,e,n){for(var i=[],o=gt(t.first,0),r=o,s=0;s<e.length;s++){var a=e[s],l=ko(a.from,o,r),u=ko(wo(a),o,r);if(o=a.to,r=u,"around"==n){var c=t.sel.ranges[s],h=vt(c.head,c.anchor)<0;i[s]=new yo(h?u:l,h?l:u)}else i[s]=new yo(l,l)}return new vo(i,t.sel.primIndex)}(this,i,e),l=i.length-1;0<=l;l--)or(this,i[l]);a?Zo(this,a):this.cm&&$i(this.cm)}),undo:Yi(function(){sr(this,"undo")}),redo:Yi(function(){sr(this,"redo")}),undoSelection:Yi(function(){sr(this,"undo",!0)}),redoSelection:Yi(function(){sr(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(var o=0;o<t.undone.length;o++)t.undone[o].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new Po(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Ho(this.history.done),undone:Ho(this.history.undone)}},setHistory:function(t){var e=this.history=new Po(this.history.maxGeneration);e.done=Ho(t.done.slice(0),null,!0),e.undone=Ho(t.undone.slice(0),null,!0)},setGutterMarker:Yi(function(t,n,i){return pr(this,t,"gutter",function(t){var e=t.gutterMarkers||(t.gutterMarkers={});return!(e[n]=i)&&nt(e)&&(t.gutterMarkers=null),!0})}),clearGutter:Yi(function(e){var n=this;this.iter(function(t){t.gutterMarkers&&t.gutterMarkers[e]&&pr(n,t,"gutter",function(){return t.gutterMarkers[e]=null,nt(t.gutterMarkers)&&(t.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if("number"==typeof t){if(!ft(this,t))return null;if(!(t=lt(this,e=t)))return null}else if(null==(e=dt(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:Yi(function(t,n,i){return pr(this,t,"gutter"==n?"gutter":"class",function(t){var e="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(t[e]){if(k(i).test(t[e]))return!1;t[e]+=" "+i}else t[e]=i;return!0})}),removeLineClass:Yi(function(t,r,s){return pr(this,t,"gutter"==r?"gutter":"class",function(t){var e="text"==r?"textClass":"background"==r?"bgClass":"gutter"==r?"gutterClass":"wrapClass",n=t[e];if(!n)return!1;if(null==s)t[e]=null;else{var i=n.match(k(s));if(!i)return!1;var o=i.index+i[0].length;t[e]=n.slice(0,i.index)+(i.index&&o!=n.length?" ":"")+n.slice(o)||null}return!0})}),addLineWidget:Yi(function(t,e,n){return o=t,r=new gr(i=this,e,n),(s=i.cm)&&r.noHScroll&&(s.display.alignWidgets=!0),pr(i,o,"widget",function(t){var e=t.widgets||(t.widgets=[]);if(null==r.insertAt?e.push(r):e.splice(Math.min(e.length-1,Math.max(0,r.insertAt)),0,r),r.line=t,s&&!Wt(i,t)){var n=Zt(t)<i.scrollTop;ht(t,t.height+_n(r)),n&&ki(s,r.height),s.curOp.forceUpdate=!0}return!0}),s&&ln(s,"lineWidgetAdded",s,r,"number"==typeof o?o:dt(o)),r;var i,o,r,s}),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return _r(this,Ct(this,t),Ct(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return _r(this,t=Ct(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=lt(this,(t=Ct(this,t)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];(null==o.from||o.from<=t.ch)&&(null==o.to||o.to>=t.ch)&&e.push(o.marker.parent||o.marker)}return e},findMarks:function(o,r,s){o=Ct(this,o),r=Ct(this,r);var a=[],l=o.line;return this.iter(o.line,r.line+1,function(t){var e=t.markedSpans;if(e)for(var n=0;n<e.length;n++){var i=e[n];null!=i.to&&l==o.line&&o.ch>=i.to||null==i.from&&l!=o.line||null!=i.from&&l==r.line&&i.from>=r.ch||s&&!s(i.marker)||a.push(i.marker.parent||i.marker)}++l}),a},getAllMarks:function(){var i=[];return this.iter(function(t){var e=t.markedSpans;if(e)for(var n=0;n<e.length;++n)null!=e[n].from&&i.push(e[n].marker)}),i},posFromIndex:function(n){var i,o=this.first,r=this.lineSeparator().length;return this.iter(function(t){var e=t.text.length+r;if(n<e)return i=n,!0;n-=e,++o}),Ct(this,gt(o,i))},indexFromPos:function(t){var e=(t=Ct(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,function(t){e+=t.text.length+n}),e},copy:function(t){var e=new $r(ct(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new $r(ct(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n],o=i.find(),r=t.clipPos(o.from),s=t.clipPos(o.to);if(vt(r,s)){var a=_r(t,r,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}(i,xr(this)),i},unlinkDoc:function(t){if(t instanceof xs&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),Cr(xr(this));break}}if(t.history==this.history){var n=[t.id];Do(t,function(t){return n.push(t.id)},!0),t.history=new Po(null),t.history.done=Ho(this.history.done,n),t.history.undone=Ho(this.history.undone,n)}},iterLinkedDocs:function(t){Do(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):we(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Yi(function(t){var e;("rtl"!=t&&(t="ltr"),t!=this.direction)&&(this.direction=t,this.iter(function(t){return t.order=null}),this.cm&&Vi(e=this.cm,function(){Eo(e),Ki(e)}))})}),$r.prototype.eachLine=$r.prototype.iter;var Tr=0;function Sr(t){var o=this;if(Mr(o),!re(o,t)&&!wn(o.display,t)){ue(t),w&&(Tr=+new Date);var r=si(o,t,!0),e=t.dataTransfer.files;if(r&&!o.isReadOnly())if(e&&e.length&&window.FileReader&&window.File)for(var s=e.length,a=Array(s),l=0,n=function(t,n){if(!o.options.allowDropFileTypes||-1!=F(o.options.allowDropFileTypes,t.type)){var i=new FileReader;i.onload=Zi(o,function(){var t=i.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t)&&(t=""),a[n]=t,++l==s){var e={from:r=Ct(o.doc,r),to:r,text:o.doc.splitLines(a.join(o.doc.lineSeparator())),origin:"paste"};or(o.doc,e),Zo(o.doc,_o(r,wo(e)))}}),i.readAsText(t)}},i=0;i<s;++i)n(e[i],i);else{if(o.state.draggingText&&-1<o.doc.sel.contains(r))return o.state.draggingText(t),void setTimeout(function(){return o.display.input.focus()},20);try{var u=t.dataTransfer.getData("Text");if(u){var c;if(o.state.draggingText&&!o.state.draggingText.copy&&(c=o.listSelections()),Yo(o.doc,_o(r,r)),c)for(var h=0;h<c.length;++h)ur(o.doc,"",c[h].anchor,c[h].head,"drag");o.replaceSelection(u,"around","paste"),o.display.input.focus()}}catch(t){}}}}function Mr(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Dr(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var o=t[i].CodeMirror;o&&n.push(o)}n.length&&n[0].operation(function(){for(var t=0;t<n.length;t++)e(n[t])})}}var Lr=!1;function Er(){var t;Lr||(ee(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Dr(Pr)},100))}),ee(window,"blur",function(){return Dr(vi)}),Lr=!0)}function Pr(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var Ar={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Or=0;Or<10;Or++)Ar[Or+48]=Ar[Or+96]=String(Or);for(var Ir=65;Ir<=90;Ir++)Ar[Ir]=String.fromCharCode(Ir);for(var Nr=1;Nr<=12;Nr++)Ar[Nr+111]=Ar[Nr+63235]="F"+Nr;var Rr={};function zr(t){var e,n,i,o,r=t.split(/-(?!$)/);t=r[r.length-1];for(var s=0;s<r.length-1;s++){var a=r[s];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);i=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),o&&(t="Cmd-"+t),i&&(t="Shift-"+t),t}function Ur(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete t[n];continue}for(var o=K(n.split(" "),zr),r=0;r<o.length;r++){var s=void 0,a=void 0;s=r==o.length-1?(a=o.join(" "),i):(a=o.slice(0,r+1).join(" "),"...");var l=e[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else e[a]=s}delete t[n]}for(var u in e)t[u]=e[u];return t}function Fr(t,e,n,i){var o=(e=qr(e)).call?e.call(t,i):e[t];if(!1===o)return"nothing";if("..."===o)return"multi";if(null!=o&&n(o))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Fr(t,e.fallthrough,n,i);for(var r=0;r<e.fallthrough.length;r++){var s=Fr(t,e.fallthrough[r],n,i);if(s)return s}}}function Hr(t){var e="string"==typeof t?t:Ar[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Br(t,e,n){var i=t;return e.altKey&&"Alt"!=i&&(t="Alt-"+t),(y?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(t="Ctrl-"+t),(y?e.ctrlKey:e.metaKey)&&"Cmd"!=i&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=i&&(t="Shift-"+t),t}function jr(t,e){if(g&&34==t.keyCode&&t.char)return!1;var n=Ar[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),Br(n,t,e))}function qr(t){return"string"==typeof t?Rr[t]:t}function Wr(e,t){for(var n=e.doc.sel.ranges,i=[],o=0;o<n.length;o++){for(var r=t(n[o]);i.length&&vt(r.from,Y(i).to)<=0;){var s=i.pop();if(vt(s.from,r.from)<0){r.from=s.from;break}}i.push(r)}Vi(e,function(){for(var t=i.length-1;0<=t;t--)ur(e.doc,"",i[t].from,i[t].to,"+delete");$i(e)})}function Vr(t,e,n){var i=rt(t.text,e+n,n);return i<0||i>t.text.length?null:i}function Zr(t,e,n){var i=Vr(t,e.ch,n);return null==i?null:new gt(e.line,i,n<0?"after":"before")}function Gr(t,e,n,i,o){if(t){var r=Qt(n,e.doc.direction);if(r){var s,a=o<0?Y(r):r[0],l=o<0==(1==a.level)?"after":"before";if(0<a.level||"rtl"==e.doc.direction){var u=En(e,n);s=o<0?n.text.length-1:0;var c=Pn(e,u,s).top;s=st(function(t){return Pn(e,u,t).top==c},o<0==(1==a.level)?a.from:a.to-1,s),"before"==l&&(s=Vr(n,s,1))}else s=o<0?a.to:a.from;return new gt(i,s,l)}}return new gt(i,o<0?n.text.length:0,o<0?"before":"after")}Rr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Rr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Rr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Rr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Rr.default=_?Rr.macDefault:Rr.pcDefault;var Yr={selectAll:nr,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),j)},killLine:function(n){return Wr(n,function(t){if(t.empty()){var e=lt(n.doc,t.head.line).text.length;return t.head.ch==e&&t.head.line<n.lastLine()?{from:t.head,to:gt(t.head.line+1,0)}:{from:t.head,to:gt(t.head.line,e)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Wr(e,function(t){return{from:gt(t.from().line,0),to:Ct(e.doc,gt(t.to().line+1,0))}})},delLineLeft:function(t){return Wr(t,function(t){return{from:gt(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(n){return Wr(n,function(t){var e=n.charCoords(t.head,"div").top+5;return{from:n.coordsChar({left:0,top:e},"div"),to:t.from()}})},delWrappedLineRight:function(i){return Wr(i,function(t){var e=i.charCoords(t.head,"div").top+5,n=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:e},"div");return{from:t.from(),to:n}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(gt(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(gt(t.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Kr(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Xr(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(t,e){var n=lt(t.doc,e),i=function(t){for(var e;e=Ut(t);)t=e.find(1,!0).line;return t}(n);i!=n&&(e=dt(i));return Gr(!0,t,n,e,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(n){return n.extendSelectionsBy(function(t){var e=n.cursorCoords(t.head,"div").top+5;return n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:e},"div")},W)},goLineLeft:function(n){return n.extendSelectionsBy(function(t){var e=n.cursorCoords(t.head,"div").top+5;return n.coordsChar({left:0,top:e},"div")},W)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(t){var e=i.cursorCoords(t.head,"div").top+5,n=i.coordsChar({left:0,top:e},"div");return n.ch<i.getLine(n.line).search(/\S/)?Xr(i,t.head):n},W)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"char")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,o=0;o<n.length;o++){var r=n[o].from(),s=z(t.getLine(r.line),r.ch,i);e.push(G(i-s%i))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(s){return Vi(s,function(){for(var t=s.listSelections(),e=[],n=0;n<t.length;n++)if(t[n].empty()){var i=t[n].head,o=lt(s.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new gt(i.line,i.ch-1)),0<i.ch)i=new gt(i.line,i.ch+1),s.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),gt(i.line,i.ch-2),i,"+transpose");else if(i.line>s.doc.first){var r=lt(s.doc,i.line-1).text;r&&(i=new gt(i.line,1),s.replaceRange(o.charAt(0)+s.doc.lineSeparator()+r.charAt(r.length-1),gt(i.line-1,r.length-1),i,"+transpose"))}e.push(new yo(i,i))}s.setSelections(e)})},newlineAndIndent:function(i){return Vi(i,function(){for(var t=i.listSelections(),e=t.length-1;0<=e;e--)i.replaceRange(i.doc.lineSeparator(),t[e].anchor,t[e].head,"+input");t=i.listSelections();for(var n=0;n<t.length;n++)i.indentLine(t[n].from().line,null,!0);$i(i)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function Kr(t,e){var n=lt(t.doc,e),i=Bt(n);return i!=n&&(e=dt(i)),Gr(!0,t,i,e,1)}function Xr(t,e){var n=Kr(t,e.line),i=lt(t.doc,n.line),o=Qt(i,t.doc.direction);if(o&&0!=o[0].level)return n;var r=Math.max(0,i.text.search(/\S/)),s=e.line==n.line&&e.ch<=r&&e.ch;return gt(n.line,s?0:r,n.sticky)}function Jr(t,e,n){if("string"==typeof e&&!(e=Yr[e]))return!1;t.display.input.ensurePolled();var i=t.display.shift,o=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),o=e(t)!=B}finally{t.display.shift=i,t.state.suppressEdits=!1}return o}var Qr=new U;function ts(t,e,n,i){var o=t.state.keySeq;if(o){if(Hr(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:Qr.set(50,function(){t.state.keySeq==o&&(t.state.keySeq=null,t.display.input.reset())}),es(t,o+" "+e,n,i))return!0}return es(t,e,n,i)}function es(t,e,n,i){var o=function(t,e,n){for(var i=0;i<t.state.keyMaps.length;i++){var o=Fr(e,t.state.keyMaps[i],n,t);if(o)return o}return t.options.extraKeys&&Fr(e,t.options.extraKeys,n,t)||Fr(e,t.options.keyMap,n,t)}(t,e,i);return"multi"==o&&(t.state.keySeq=e),"handled"==o&&ln(t,"keyHandled",t,e,n),"handled"!=o&&"multi"!=o||(ue(n),pi(t)),!!o}function ns(e,t){var n=jr(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?ts(e,"Shift-"+n,t,function(t){return Jr(e,t,!0)})||ts(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Jr(e,t)}):ts(e,n,t,function(t){return Jr(e,t)}))}var is=null;function os(t){if(this.curOp.focus=P(),!re(this,t)){w&&x<11&&27==t.keyCode&&(t.returnValue=!1);var e=t.keyCode;this.display.shift=16==e||t.shiftKey;var n=ns(this,t);g&&(is=n?e:null,!n&&88==e&&!Ce&&(_?t.metaKey:t.ctrlKey)&&this.replaceSelection("",null,"cut")),18!=e||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function n(t){18!=t.keyCode&&t.altKey||(T(e,"CodeMirror-crosshair"),ie(document,"keyup",n),ie(document,"mouseover",n))}A(e,"CodeMirror-crosshair"),ee(document,"keyup",n),ee(document,"mouseover",n)}(this)}}function rs(t){16==t.keyCode&&(this.doc.sel.shift=!1),re(this,t)}function ss(t){if(!(wn(this.display,t)||re(this,t)||t.ctrlKey&&!t.altKey||_&&t.metaKey)){var e=t.keyCode,n=t.charCode;if(g&&e==is)return is=null,void ue(t);if(!g||t.which&&!(t.which<10)||!ns(this,t)){var i,o=String.fromCharCode(null==n?e:n);if("\b"!=o)if(!ts(i=this,"'"+o+"'",t,function(t){return Jr(i,t,!0)}))this.display.input.onKeyPress(t)}}}var as,ls,us=function(t,e,n){this.time=t,this.pos=e,this.button=n};function cs(t){var e=this,n=e.display;if(!(re(e,t)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=t.shiftKey,wn(n,t))b||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!ps(e,t)){var i,o,r,s=si(e,t),a=fe(t),l=s?(i=s,o=a,r=+new Date,ls&&ls.compare(r,i,o)?(as=ls=null,"triple"):as&&as.compare(r,i,o)?(ls=new us(r,i,o),as=null,"double"):(as=new us(r,i,o),ls=null,"single")):"single";window.focus(),1==a&&e.state.selectingText&&e.state.selectingText(t),s&&function(n,t,i,e,o){var r="Click";"double"==e?r="Double"+r:"triple"==e&&(r="Triple"+r);return ts(n,Br(r=(1==t?"Left":2==t?"Middle":"Right")+r,o),o,function(t){if("string"==typeof t&&(t=Yr[t]),!t)return!1;var e=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0),e=t(n,i)!=B}finally{n.state.suppressEdits=!1}return e})}(e,a,s,l,t)||(1==a?s?function(t,e,n,i){w?setTimeout(N(fi,t),0):t.curOp.focus=P();var o,r=function(t,e,n){var i=t.getOption("configureMouse"),o=i?i(t,e,n):{};if(null==o.unit){var r=p?n.shiftKey&&n.metaKey:n.altKey;o.unit=r?"rectangle":"single"==e?"char":"double"==e?"word":"line"}(null==o.extend||t.doc.extend)&&(o.extend=t.doc.extend||n.shiftKey);null==o.addNew&&(o.addNew=_?n.metaKey:n.ctrlKey);null==o.moveOnDrag&&(o.moveOnDrag=!(_?n.altKey:n.ctrlKey));return o}(t,n,i),s=t.doc.sel;t.options.dragDrop&&ve&&!t.isReadOnly()&&"single"==n&&-1<(o=s.contains(e))&&(vt((o=s.ranges[o]).from(),e)<0||0<e.xRel)&&(0<vt(o.to(),e)||e.xRel<0)?function(e,n,i,o){var r=e.display,s=!1,a=Zi(e,function(t){b&&(r.scroller.draggable=!1),e.state.draggingText=!1,ie(r.wrapper.ownerDocument,"mouseup",a),ie(r.wrapper.ownerDocument,"mousemove",l),ie(r.scroller,"dragstart",u),ie(r.scroller,"drop",a),s||(ue(t),o.addNew||jo(e.doc,i,null,null,o.extend),b||w&&9==x?setTimeout(function(){r.wrapper.ownerDocument.body.focus(),r.input.focus()},20):r.input.focus())}),l=function(t){s=s||10<=Math.abs(n.clientX-t.clientX)+Math.abs(n.clientY-t.clientY)},u=function(){return s=!0};b&&(r.scroller.draggable=!0);(e.state.draggingText=a).copy=!o.moveOnDrag,r.scroller.dragDrop&&r.scroller.dragDrop();ee(r.wrapper.ownerDocument,"mouseup",a),ee(r.wrapper.ownerDocument,"mousemove",l),ee(r.scroller,"dragstart",u),ee(r.scroller,"drop",a),mi(e),setTimeout(function(){return r.input.focus()},20)}(t,i,e,r):function(g,t,v,y){var s=g.display,b=g.doc;ue(t);var _,w,x=b.sel,e=x.ranges;y.addNew&&!y.extend?(w=b.sel.contains(v),_=-1<w?e[w]:new yo(v,v)):(_=b.sel.primary(),w=b.sel.primIndex);if("rectangle"==y.unit)y.addNew||(_=new yo(v,v)),v=si(g,t,!0,!0),w=-1;else{var n=hs(g,v,y.unit);_=y.extend?Bo(_,n.anchor,n.head,y.extend):n}y.addNew?-1==w?(w=e.length,Go(b,bo(g,e.concat([_]),w),{scroll:!1,origin:"*mouse"})):1<e.length&&e[w].empty()&&"char"==y.unit&&!y.extend?(Go(b,bo(g,e.slice(0,w).concat(e.slice(w+1)),0),{scroll:!1,origin:"*mouse"}),x=b.sel):Wo(b,w,_,q):(Go(b,new vo([_],w=0),q),x=b.sel);var C=v;function a(t){if(0!=vt(C,t))if(C=t,"rectangle"==y.unit){for(var e=[],n=g.options.tabSize,i=z(lt(b,v.line).text,v.ch,n),o=z(lt(b,t.line).text,t.ch,n),r=Math.min(i,o),s=Math.max(i,o),a=Math.min(v.line,t.line),l=Math.min(g.lastLine(),Math.max(v.line,t.line));a<=l;a++){var u=lt(b,a).text,c=V(u,r,n);r==s?e.push(new yo(gt(a,c),gt(a,c))):u.length>c&&e.push(new yo(gt(a,c),gt(a,V(u,s,n))))}e.length||e.push(new yo(v,v)),Go(b,bo(g,x.ranges.slice(0,w).concat(e),w),{origin:"*mouse",scroll:!1}),g.scrollIntoView(t)}else{var h,d=_,p=hs(g,t,y.unit),f=d.anchor;f=0<vt(p.anchor,f)?(h=p.head,wt(d.from(),p.anchor)):(h=p.anchor,_t(d.to(),p.head));var m=x.ranges.slice(0);m[w]=function(t,e){var n=e.anchor,i=e.head,o=lt(t.doc,n.line);if(0==vt(n,i)&&n.sticky==i.sticky)return e;var r=Qt(o);if(!r)return e;var s=Xt(r,n.ch,n.sticky),a=r[s];if(a.from!=n.ch&&a.to!=n.ch)return e;var l,u=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==u||u==r.length)return e;if(i.line!=n.line)l=0<(i.line-n.line)*("ltr"==t.doc.direction?1:-1);else{var c=Xt(r,i.ch,i.sticky),h=c-s||(i.ch-n.ch)*(1==a.level?-1:1);l=c==u-1||c==u?h<0:0<h}var d=r[u+(l?-1:0)],p=l==(1==d.level),f=p?d.from:d.to,m=p?"after":"before";return n.ch==f&&n.sticky==m?e:new yo(new gt(n.line,f,m),i)}(g,new yo(Ct(b,f),h)),Go(b,bo(g,m,w),q)}}var l=s.wrapper.getBoundingClientRect(),u=0;function i(t){g.state.selectingText=!1,u=1/0,ue(t),s.input.focus(),ie(s.wrapper.ownerDocument,"mousemove",o),ie(s.wrapper.ownerDocument,"mouseup",r),b.history.lastSelOrigin=null}var o=Zi(g,function(t){0!==t.buttons&&fe(t)?function t(e){var n=++u;var i=si(g,e,!0,"rectangle"==y.unit);if(!i)return;if(0!=vt(i,C)){g.curOp.focus=P(),a(i);var o=_i(s,b);(i.line>=o.to||i.line<o.from)&&setTimeout(Zi(g,function(){u==n&&t(e)}),150)}else{var r=e.clientY<l.top?-20:e.clientY>l.bottom?20:0;r&&setTimeout(Zi(g,function(){u==n&&(s.scroller.scrollTop+=r,t(e))}),50)}}(t):i(t)}),r=Zi(g,i);g.state.selectingText=r,ee(s.wrapper.ownerDocument,"mousemove",o),ee(s.wrapper.ownerDocument,"mouseup",r)}(t,i,e,r)}(e,s,l,t):pe(t)==n.scroller&&ue(t):2==a?(s&&jo(e.doc,s),setTimeout(function(){return n.input.focus()},20)):3==a&&(C?e.display.input.onContextMenu(t):mi(e)))}}function hs(t,e,n){if("char"==n)return new yo(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new yo(gt(e.line,0),Ct(t.doc,gt(e.line+1,0)));var i=n(t,e);return new yo(i.from,i.to)}function ds(t,e,n,i){var o,r;if(e.touches)o=e.touches[0].clientX,r=e.touches[0].clientY;else try{o=e.clientX,r=e.clientY}catch(e){return!1}if(o>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&ue(e);var s=t.display,a=s.lineDiv.getBoundingClientRect();if(r>a.bottom||!ae(t,n))return he(e);r-=a.top-s.viewOffset;for(var l=0;l<t.options.gutters.length;++l){var u=s.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=o)return oe(t,n,t,pt(t.doc,r),t.options.gutters[l],e),he(e)}}function ps(t,e){return ds(t,e,"gutterClick",!0)}function fs(t,e){var n,i;wn(t.display,e)||(i=e,ae(n=t,"gutterContextMenu")&&ds(n,i,"gutterContextMenu",!1))||(re(t,e,"contextmenu")||C||t.display.input.onContextMenu(e))}function ms(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Un(t)}us.prototype.compare=function(t,e,n){return this.time+400>t&&0==vt(e,this.pos)&&n==this.button};var gs={toString:function(){return"CodeMirror.Init"}},vs={},ys={};function bs(t){uo(t),Ki(t),wi(t)}function _s(t,e,n){if(!e!=!(n&&n!=gs)){var i=t.display.dragFunctions,o=e?ee:ie;o(t.display.scroller,"dragstart",i.start),o(t.display.scroller,"dragenter",i.enter),o(t.display.scroller,"dragover",i.over),o(t.display.scroller,"dragleave",i.leave),o(t.display.scroller,"drop",i.drop)}}function ws(t){t.options.lineWrapping?(A(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(T(t.display.wrapper,"CodeMirror-wrap"),Yt(t)),ri(t),Ki(t),Un(t),setTimeout(function(){return Ii(t)},100)}function xs(t,e){var n=this;if(!(this instanceof xs))return new xs(t,e);this.options=e=e?R(e):{},R(vs,e,!1),co(e);var i=e.value;"string"==typeof i?i=new $r(i,e.mode,null,e.lineSeparator,e.direction):e.mode&&(i.modeOption=e.mode),this.doc=i;var o=new xs.inputStyles[e.inputStyle](this),r=this.display=new at(t,i,o);for(var s in uo(r.wrapper.CodeMirror=this),ms(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),zi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new U,keySeq:null,specialChars:null},e.autofocus&&!d&&r.input.focus(),w&&x<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(o){var r=o.display;ee(r.scroller,"mousedown",Zi(o,cs)),ee(r.scroller,"dblclick",w&&x<11?Zi(o,function(t){if(!re(o,t)){var e=si(o,t);if(e&&!ps(o,t)&&!wn(o.display,t)){ue(t);var n=o.findWordAt(e);jo(o.doc,n.anchor,n.head)}}}):function(t){return re(o,t)||ue(t)});ee(r.scroller,"contextmenu",function(t){return fs(o,t)});var n,i={end:0};function s(){r.activeTouch&&(n=setTimeout(function(){return r.activeTouch=null},1e3),(i=r.activeTouch).end=+new Date)}function a(t,e){if(null==e.left)return!0;var n=e.left-t.left,i=e.top-t.top;return 400<n*n+i*i}ee(r.scroller,"touchstart",function(t){if(!re(o,t)&&!function(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}(t)&&!ps(o,t)){r.input.ensurePolled(),clearTimeout(n);var e=+new Date;r.activeTouch={start:e,moved:!1,prev:e-i.end<=300?i:null},1==t.touches.length&&(r.activeTouch.left=t.touches[0].pageX,r.activeTouch.top=t.touches[0].pageY)}}),ee(r.scroller,"touchmove",function(){r.activeTouch&&(r.activeTouch.moved=!0)}),ee(r.scroller,"touchend",function(t){var e=r.activeTouch;if(e&&!wn(r,t)&&null!=e.left&&!e.moved&&new Date-e.start<300){var n,i=o.coordsChar(r.activeTouch,"page");n=!e.prev||a(e,e.prev)?new yo(i,i):!e.prev.prev||a(e,e.prev.prev)?o.findWordAt(i):new yo(gt(i.line,0),Ct(o.doc,gt(i.line+1,0))),o.setSelection(n.anchor,n.head),o.focus(),ue(t)}s()}),ee(r.scroller,"touchcancel",s),ee(r.scroller,"scroll",function(){r.scroller.clientHeight&&(Di(o,r.scroller.scrollTop),Ei(o,r.scroller.scrollLeft,!0),oe(o,"scroll",o))}),ee(r.scroller,"mousewheel",function(t){return go(o,t)}),ee(r.scroller,"DOMMouseScroll",function(t){return go(o,t)}),ee(r.wrapper,"scroll",function(){return r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),r.dragFunctions={enter:function(t){re(o,t)||de(t)},over:function(t){re(o,t)||(!function(t,e){var n=si(t,e);if(n){var i=document.createDocumentFragment();ci(t,n,i),t.display.dragCursor||(t.display.dragCursor=L("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),M(t.display.dragCursor,i)}}(o,t),de(t))},start:function(t){return function(t,e){if(w&&(!t.state.draggingText||+new Date-Tr<100))de(e);else if(!re(t,e)&&!wn(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!l)){var n=L("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",g&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),g&&n.parentNode.removeChild(n)}}(o,t)},drop:Zi(o,Sr),leave:function(t){re(o,t)||Mr(o)}};var t=r.input.getField();ee(t,"keyup",function(t){return rs.call(o,t)}),ee(t,"keydown",Zi(o,os)),ee(t,"keypress",Zi(o,ss)),ee(t,"focus",function(t){return gi(o,t)}),ee(t,"blur",function(t){return vi(o,t)})}(this),Er(),Fi(this),this.curOp.forceUpdate=!0,Lo(this,i),e.autofocus&&!d||this.hasFocus()?setTimeout(N(gi,this),20):vi(this),ys)ys.hasOwnProperty(s)&&ys[s](n,e[s],gs);xi(this),e.finishInit&&e.finishInit(this);for(var a=0;a<Cs.length;++a)Cs[a](n);Hi(this),b&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(r.lineDiv).textRendering&&(r.lineDiv.style.textRendering="auto")}xs.defaults=vs,xs.optionHandlers=ys;var Cs=[];function ks(t,e,n,i){var o,r=t.doc;null==n&&(n="add"),"smart"==n&&(r.mode.indent?o=Ue(t,e).state:n="prev");var s=t.options.tabSize,a=lt(r,e),l=z(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var u,c=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&((u=r.mode.indent(o,a.text.slice(c.length),a.text))==B||150<u)){if(!i)return;n="prev"}}else u=0,n="not";"prev"==n?u=e>r.first?z(lt(r,e-1).text,null,s):0:"add"==n?u=l+t.options.indentUnit:"subtract"==n?u=l-t.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var h="",d=0;if(t.options.indentWithTabs)for(var p=Math.floor(u/s);p;--p)d+=s,h+="\t";if(d<u&&(h+=G(u-d)),h!=c)return ur(r,h,gt(e,0),gt(e,c.length),"+input"),!(a.stateAfter=null);for(var f=0;f<r.sel.ranges.length;f++){var m=r.sel.ranges[f];if(m.head.line==e&&m.head.ch<c.length){var g=gt(e,c.length);Wo(r,f,new yo(g,g));break}}}xs.defineInitHook=function(t){return Cs.push(t)};var $s=null;function Ts(t){$s=t}function Ss(t,e,n,i,o){var r=t.doc;t.display.shift=!1,i||(i=r.sel);var s,a=t.state.pasteIncoming||"paste"==o,l=we(e),u=null;if(a&&1<i.ranges.length)if($s&&$s.text.join("\n")==e){if(i.ranges.length%$s.text.length==0){u=[];for(var c=0;c<$s.text.length;c++)u.push(r.splitLines($s.text[c]))}}else l.length==i.ranges.length&&t.options.pasteLinesPerSelection&&(u=K(l,function(t){return[t]}));for(var h=i.ranges.length-1;0<=h;h--){var d=i.ranges[h],p=d.from(),f=d.to();d.empty()&&(n&&0<n?p=gt(p.line,p.ch-n):t.state.overwrite&&!a?f=gt(f.line,Math.min(lt(r,f.line).text.length,f.ch+Y(l).length)):a&&$s&&$s.lineWise&&$s.text.join("\n")==e&&(p=f=gt(p.line,0))),s=t.curOp.updateInput;var m={from:p,to:f,text:u?u[h%u.length]:l,origin:o||(a?"paste":t.state.cutIncoming?"cut":"+input")};or(t.doc,m),ln(t,"inputRead",t,m)}e&&!a&&Ds(t,e),$i(t),t.curOp.updateInput=s,t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=!1}function Ms(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||Vi(e,function(){return Ss(e,n,0,null,"paste")}),!0}function Ds(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,i=n.ranges.length-1;0<=i;i--){var o=n.ranges[i];if(!(100<o.head.ch||i&&n.ranges[i-1].head.line==o.head.line)){var r=t.getModeAt(o.head),s=!1;if(r.electricChars){for(var a=0;a<r.electricChars.length;a++)if(-1<e.indexOf(r.electricChars.charAt(a))){s=ks(t,o.head.line,"smart");break}}else r.electricInput&&r.electricInput.test(lt(t.doc,o.head.line).text.slice(0,o.head.ch))&&(s=ks(t,o.head.line,"smart"));s&&ln(t,"electricInput",t,o.head.line)}}}function Ls(t){for(var e=[],n=[],i=0;i<t.doc.sel.ranges.length;i++){var o=t.doc.sel.ranges[i].head.line,r={anchor:gt(o,0),head:gt(o+1,0)};n.push(r),e.push(t.getRange(r.anchor,r.head))}return{text:e,ranges:n}}function Es(t,e){t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","off"),t.setAttribute("spellcheck",!!e)}function Ps(){var t=L("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=L("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?t.style.width="1000px":t.setAttribute("wrap","off"),c&&(t.style.border="1px solid black"),Es(t),e}function As(i,o,r,t,s){var e=o,n=r,a=lt(i,o.line);function l(t){var e,n;if(null==(e=s?function(e,n,a,t){var l=Qt(n,e.doc.direction);if(!l)return Zr(n,a,t);a.ch>=n.text.length?(a.ch=n.text.length,a.sticky="before"):a.ch<=0&&(a.ch=0,a.sticky="after");var i=Xt(l,a.ch,a.sticky),o=l[i];if("ltr"==e.doc.direction&&o.level%2==0&&(0<t?o.to>a.ch:o.from<a.ch))return Zr(n,a,t);var r,u=function(t,e){return Vr(n,t instanceof gt?t.ch:t,e)},s=function(t){return e.options.lineWrapping?(r=r||En(e,n),Xn(e,n,r,t)):{begin:0,end:n.text.length}},c=s("before"==a.sticky?u(a,-1):a.ch);if("rtl"==e.doc.direction||1==o.level){var h=1==o.level==t<0,d=u(a,h?1:-1);if(null!=d&&(h?d<=o.to&&d<=c.end:d>=o.from&&d>=c.begin)){var p=h?"before":"after";return new gt(a.line,d,p)}}var f=function(t,e,n){for(var i=function(t,e){return e?new gt(a.line,u(t,1),"before"):new gt(a.line,t,"after")};0<=t&&t<l.length;t+=e){var o=l[t],r=0<e==(1!=o.level),s=r?n.begin:u(n.end,-1);if(o.from<=s&&s<o.to)return i(s,r);if(s=r?o.from:u(o.to,-1),n.begin<=s&&s<n.end)return i(s,r)}},m=f(i+t,t,c);if(m)return m;var g=0<t?c.end:u(c.begin,-1);return null==g||0<t&&g==n.text.length||!(m=f(0<t?0:l.length-1,t,s(g)))?null:m}(i.cm,a,o,r):Zr(a,o,r))){if(t||(n=o.line+r)<i.first||n>=i.first+i.size||(o=new gt(n,o.ch,o.sticky),!(a=lt(i,n))))return!1;o=Gr(s,i.cm,a,o.line,r)}else o=e;return!0}if("char"==t)l();else if("column"==t)l(!0);else if("word"==t||"group"==t)for(var u=null,c="group"==t,h=i.cm&&i.cm.getHelper(o,"wordChars"),d=!0;!(r<0)||l(!d);d=!1){var p=a.text.charAt(o.ch)||"\n",f=et(p,h)?"w":c&&"\n"==p?"n":!c||/\s/.test(p)?null:"p";if(!c||d||f||(f="s"),u&&u!=f){r<0&&(r=1,l(),o.sticky="after");break}if(f&&(u=f),0<r&&!l(!d))break}var m=tr(i,o,e,n,!0);return yt(e,m)&&(m.hitSide=!0),m}function Os(t,e,n,i){var o,r,s=t.doc,a=e.left;if("page"==i){var l=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(l-.5*ti(t.display),3);o=(0<n?e.bottom:e.top)+n*u}else"line"==i&&(o=0<n?e.bottom+3:e.top-3);for(;(r=Yn(t,a,o)).outside;){if(n<0?o<=0:o>=s.height){r.hitSide=!0;break}o+=5*n}return r}var Is=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new U,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ns(t,e){var n=Ln(t,e.line);if(!n||n.hidden)return null;var i=lt(t.doc,e.line),o=Mn(n,i,e.line),r=Qt(i,t.doc.direction),s="left";r&&(s=Xt(r,e.ch)%2?"right":"left");var a=In(o.map,e.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Rs(t,e){return e&&(t.bad=!0),t}function zs(t,e,n){var i;if(e==t.display.lineDiv){if(!(i=t.display.lineDiv.childNodes[n]))return Rs(t.clipPos(gt(t.display.viewTo-1)),!0);e=null,n=0}else for(i=e;;i=i.parentNode){if(!i||i==t.display.lineDiv)return null;if(i.parentNode&&i.parentNode==t.display.lineDiv)break}for(var o=0;o<t.display.view.length;o++){var r=t.display.view[o];if(r.node==i)return Us(r,e,n)}}function Us(u,t,e){var n=u.text.firstChild,i=!1;if(!t||!E(n,t))return Rs(gt(dt(u.line),0),!0);if(t==n&&(i=!0,t=n.childNodes[e],e=0,!t)){var o=u.rest?Y(u.rest):u.line;return Rs(gt(dt(o),o.text.length),i)}var r=3==t.nodeType?t:null,s=t;for(r||1!=t.childNodes.length||3!=t.firstChild.nodeType||(r=t.firstChild,e&&(e=r.nodeValue.length));s.parentNode!=n;)s=s.parentNode;var c=u.measure,h=c.maps;function a(t,e,n){for(var i=-1;i<(h?h.length:0);i++)for(var o=i<0?c.map:h[i],r=0;r<o.length;r+=3){var s=o[r+2];if(s==t||s==e){var a=dt(i<0?u.line:u.rest[i]),l=o[r]+n;return(n<0||s!=t)&&(l=o[r+(n?1:0)]),gt(a,l)}}}var l=a(r,s,e);if(l)return Rs(l,i);for(var d=s.nextSibling,p=r?r.nodeValue.length-e:0;d;d=d.nextSibling){if(l=a(d,d.firstChild,0))return Rs(gt(l.line,l.ch-p),i);p+=d.textContent.length}for(var f=s.previousSibling,m=e;f;f=f.previousSibling){if(l=a(f,f.firstChild,-1))return Rs(gt(l.line,l.ch+m),i);m+=f.textContent.length}}Is.prototype.init=function(t){var e=this,s=this,a=s.cm,l=s.div=t.lineDiv;function n(t){if(!re(a,t)){if(a.somethingSelected())Ts({lineWise:!1,text:a.getSelections()}),"cut"==t.type&&a.replaceSelection("",null,"cut");else{if(!a.options.lineWiseCopyCut)return;var e=Ls(a);Ts({lineWise:!0,text:e.text}),"cut"==t.type&&a.operation(function(){a.setSelections(e.ranges,0,j),a.replaceSelection("",null,"cut")})}if(t.clipboardData){t.clipboardData.clearData();var n=$s.text.join("\n");if(t.clipboardData.setData("Text",n),t.clipboardData.getData("Text")==n)return void t.preventDefault()}var i=Ps(),o=i.firstChild;a.display.lineSpace.insertBefore(i,a.display.lineSpace.firstChild),o.value=$s.text.join("\n");var r=document.activeElement;I(o),setTimeout(function(){a.display.lineSpace.removeChild(i),r.focus(),r==l&&s.showPrimarySelection()},50)}}Es(l,a.options.spellcheck),ee(l,"paste",function(t){re(a,t)||Ms(t,a)||x<=11&&setTimeout(Zi(a,function(){return e.updateFromDOM()}),20)}),ee(l,"compositionstart",function(t){e.composing={data:t.data,done:!1}}),ee(l,"compositionupdate",function(t){e.composing||(e.composing={data:t.data,done:!1})}),ee(l,"compositionend",function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)}),ee(l,"touchstart",function(){return s.forceCompositionEnd()}),ee(l,"input",function(){e.composing||e.readFromDOMSoon()}),ee(l,"copy",n),ee(l,"cut",n)},Is.prototype.prepareSelection=function(){var t=ui(this.cm,!1);return t.focus=this.cm.state.focused,t},Is.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Is.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Is.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,n=e.doc.sel.primary(),i=n.from(),o=n.to();if(e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||o.line<e.display.viewFrom)t.removeAllRanges();else{var r=zs(e,t.anchorNode,t.anchorOffset),s=zs(e,t.focusNode,t.focusOffset);if(!r||r.bad||!s||s.bad||0!=vt(wt(r,s),i)||0!=vt(_t(r,s),o)){var a=e.display.view,l=i.line>=e.display.viewFrom&&Ns(e,i)||{node:a[0].measure.map[2],offset:0},u=o.line<e.display.viewTo&&Ns(e,o);if(!u){var c=a[a.length-1].measure,h=c.maps?c.maps[c.maps.length-1]:c.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(l&&u){var d,p=t.rangeCount&&t.getRangeAt(0);try{d=$(l.node,l.offset,u.offset,u.node)}catch(t){}d&&(!m&&e.state.focused?(t.collapse(l.node,l.offset),d.collapsed||(t.removeAllRanges(),t.addRange(d))):(t.removeAllRanges(),t.addRange(d)),p&&null==t.anchorNode?t.addRange(p):m&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},Is.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Is.prototype.showMultipleSelections=function(t){M(this.cm.display.cursorDiv,t.cursors),M(this.cm.display.selectionDiv,t.selection)},Is.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Is.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return E(this.div,e)},Is.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Is.prototype.blur=function(){this.div.blur()},Is.prototype.getField=function(){return this.div},Is.prototype.supportsTouch=function(){return!0},Is.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Vi(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},Is.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Is.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(h&&s&&this.cm.options.gutters.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=zs(e,t.anchorNode,t.anchorOffset),i=zs(e,t.focusNode,t.focusOffset);n&&i&&Vi(e,function(){Go(e.doc,_o(n,i),j),(n.bad||i.bad)&&(e.curOp.selectionChanged=!0)})}}},Is.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,n,i=this.cm,o=i.display,r=i.doc.sel.primary(),s=r.from(),a=r.to();if(0==s.ch&&s.line>i.firstLine()&&(s=gt(s.line-1,lt(i.doc,s.line-1).length)),a.ch==lt(i.doc,a.line).text.length&&a.line<i.lastLine()&&(a=gt(a.line+1,0)),s.line<o.viewFrom||a.line>o.viewTo-1)return!1;n=s.line==o.viewFrom||0==(t=ai(i,s.line))?(e=dt(o.view[0].line),o.view[0].node):(e=dt(o.view[t].line),o.view[t-1].node.nextSibling);var l,u,c=ai(i,a.line);if(u=c==o.view.length-1?(l=o.viewTo-1,o.lineDiv.lastChild):(l=dt(o.view[c+1].line)-1,o.view[c+1].node.previousSibling),!n)return!1;for(var h=i.doc.splitLines(function(l,t,e,u,c){var n="",h=!1,d=l.doc.lineSeparator(),p=!1;function f(){h&&(n+=d,p&&(n+=d),h=p=!1)}function m(t){t&&(f(),n+=t)}function g(t){if(1==t.nodeType){var e=t.getAttribute("cm-text");if(e)return void m(e);var n,i=t.getAttribute("cm-marker");if(i){var o=l.findMarks(gt(u,0),gt(c+1,0),(a=+i,function(t){return t.id==a}));return void(o.length&&(n=o[0].find(0))&&m(ut(l.doc,n.from,n.to).join(d)))}if("false"==t.getAttribute("contenteditable"))return;var r=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;r&&f();for(var s=0;s<t.childNodes.length;s++)g(t.childNodes[s]);/^(pre|p)$/i.test(t.nodeName)&&(p=!0),r&&(h=!0)}else 3==t.nodeType&&m(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var a}for(;g(t),t!=e;)t=t.nextSibling,p=!1;return n}(i,n,u,e,l)),d=ut(i.doc,gt(e,0),gt(l,lt(i.doc,l).text.length));1<h.length&&1<d.length;)if(Y(h)==Y(d))h.pop(),d.pop(),l--;else{if(h[0]!=d[0])break;h.shift(),d.shift(),e++}for(var p=0,f=0,m=h[0],g=d[0],v=Math.min(m.length,g.length);p<v&&m.charCodeAt(p)==g.charCodeAt(p);)++p;for(var y=Y(h),b=Y(d),_=Math.min(y.length-(1==h.length?p:0),b.length-(1==d.length?p:0));f<_&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)++f;if(1==h.length&&1==d.length&&e==s.line)for(;p&&p>s.ch&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)p--,f++;h[h.length-1]=y.slice(0,y.length-f).replace(/^\u200b+/,""),h[0]=h[0].slice(p).replace(/\u200b+$/,"");var w=gt(e,p),x=gt(l,d.length?Y(d).length-f:0);return 1<h.length||h[0]||vt(w,x)?(ur(i.doc,h,w,x,"+input"),!0):void 0},Is.prototype.ensurePolled=function(){this.forceCompositionEnd()},Is.prototype.reset=function(){this.forceCompositionEnd()},Is.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Is.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},Is.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||Vi(this.cm,function(){return Ki(t.cm)})},Is.prototype.setUneditable=function(t){t.contentEditable="false"},Is.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||Zi(this.cm,Ss)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Is.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Is.prototype.onContextMenu=function(){},Is.prototype.resetPosition=function(){},Is.prototype.needsContentAttribute=!0;var Fs,Hs,Bs,js=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new U,this.hasSelection=!1,this.composing=null};js.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var o=this.textarea;function r(t){if(!re(i,t)){if(i.somethingSelected())Ts({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var e=Ls(i);Ts({lineWise:!0,text:e.text}),"cut"==t.type?i.setSelections(e.ranges,null,j):(n.prevInput="",o.value=e.text.join("\n"),I(o))}"cut"==t.type&&(i.state.cutIncoming=!0)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),c&&(o.style.width="0px"),ee(o,"input",function(){w&&9<=x&&t.hasSelection&&(t.hasSelection=null),n.poll()}),ee(o,"paste",function(t){re(i,t)||Ms(t,i)||(i.state.pasteIncoming=!0,n.fastPoll())}),ee(o,"cut",r),ee(o,"copy",r),ee(e.scroller,"paste",function(t){wn(e,t)||re(i,t)||(i.state.pasteIncoming=!0,n.focus())}),ee(e.lineSpace,"selectstart",function(t){wn(e,t)||ue(t)}),ee(o,"compositionstart",function(){var t=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:t,range:i.markText(t,i.getCursor("to"),{className:"CodeMirror-composing"})}}),ee(o,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},js.prototype.createField=function(t){this.wrapper=Ps(),this.textarea=this.wrapper.firstChild},js.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,i=ui(t);if(t.options.moveInputWithCursor){var o=Vn(t,n.sel.primary().head,"div"),r=e.wrapper.getBoundingClientRect(),s=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,o.top+s.top-r.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,o.left+s.left-r.left))}return i},js.prototype.showSelection=function(t){var e=this.cm.display;M(e.cursorDiv,t.cursors),M(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},js.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&I(this.textarea),w&&9<=x&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",w&&9<=x&&(this.hasSelection=null))}},js.prototype.getField=function(){return this.textarea},js.prototype.supportsTouch=function(){return!1},js.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!d||P()!=this.textarea))try{this.textarea.focus()}catch(t){}},js.prototype.blur=function(){this.textarea.blur()},js.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},js.prototype.receivedFocus=function(){this.slowPoll()},js.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},js.prototype.fastPoll=function(){var e=!1,n=this;n.pollingFast=!0,n.polling.set(20,function t(){n.poll()||e?(n.pollingFast=!1,n.slowPoll()):(e=!0,n.polling.set(60,t))})},js.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!e.state.focused||xe(n)&&!i&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var o=n.value;if(o==i&&!e.somethingSelected())return!1;if(w&&9<=x&&this.hasSelection===o||_&&/[\uf700-\uf7ff]/.test(o))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var r=o.charCodeAt(0);if(8203!=r||i||(i=""),8666==r)return this.reset(),this.cm.execCommand("undo")}for(var s=0,a=Math.min(i.length,o.length);s<a&&i.charCodeAt(s)==o.charCodeAt(s);)++s;return Vi(e,function(){Ss(e,o.slice(s),i.length-s,null,t.composing?"*compose":null),1e3<o.length||-1<o.indexOf("\n")?n.value=t.prevInput="":t.prevInput=o,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},js.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},js.prototype.onKeyPress=function(){w&&9<=x&&(this.hasSelection=null),this.fastPoll()},js.prototype.onContextMenu=function(t){var n=this,i=n.cm,o=i.display,r=n.textarea,e=si(i,t),s=o.scroller.scrollTop;if(e&&!g){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(e)&&Zi(i,Go)(i.doc,_o(e),j);var a=r.style.cssText,l=n.wrapper.style.cssText;n.wrapper.style.cssText="position: absolute";var u,c=n.wrapper.getBoundingClientRect();if(r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-c.top-5)+"px; left: "+(t.clientX-c.left-5)+"px;\n      z-index: 1000; background: "+(w?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",b&&(u=window.scrollY),o.input.focus(),b&&window.scrollTo(null,u),o.input.reset(),i.somethingSelected()||(r.value=n.prevInput=" "),n.contextMenuPending=!0,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),w&&9<=x&&d(),C){de(t);var h=function(){ie(window,"mouseup",h),setTimeout(p,20)};ee(window,"mouseup",h)}else setTimeout(p,50)}function d(){if(null!=r.selectionStart){var t=i.somethingSelected(),e=""+(t?r.value:"");r.value="",r.value=e,n.prevInput=t?"":"",r.selectionStart=1,r.selectionEnd=e.length,o.selForContextMenu=i.doc.sel}}function p(){if(n.contextMenuPending=!1,n.wrapper.style.cssText=l,r.style.cssText=a,w&&x<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=s),null!=r.selectionStart){(!w||w&&x<9)&&d();var t=0,e=function(){o.selForContextMenu==i.doc.sel&&0==r.selectionStart&&0<r.selectionEnd&&""==n.prevInput?Zi(i,nr)(i):t++<10?o.detectingSelectAll=setTimeout(e,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(e,200)}}},js.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t},js.prototype.setUneditable=function(){},js.prototype.needsContentAttribute=!1,function(o){var r=o.optionHandlers;function t(t,e,i,n){o.defaults[t]=e,i&&(r[t]=n?function(t,e,n){n!=gs&&i(t,e,n)}:i)}o.defineOption=t,o.Init=gs,t("value","",function(t,e){return t.setValue(e)},!0),t("mode",null,function(t,e){t.doc.modeOption=e,$o(t)},!0),t("indentUnit",2,$o,!0),t("indentWithTabs",!1),t("smartIndent",!0),t("tabSize",4,function(t){To(t),Un(t),Ki(t)},!0),t("lineSeparator",null,function(t,i){if(t.doc.lineSep=i){var o=[],r=t.doc.first;t.doc.iter(function(t){for(var e=0;;){var n=t.text.indexOf(i,e);if(-1==n)break;e=n+i.length,o.push(gt(r,n))}r++});for(var e=o.length-1;0<=e;e--)ur(t.doc,i,o[e],gt(o[e].line,o[e].ch+i.length))}}),t("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=gs&&t.refresh()}),t("specialCharPlaceholder",Je,function(t){return t.refresh()},!0),t("electricChars",!0),t("inputStyle",d?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),t("spellcheck",!1,function(t,e){return t.getInputField().spellcheck=e},!0),t("rtlMoveVisually",!f),t("wholeLineUpdateBefore",!0),t("theme","default",function(t){ms(t),bs(t)},!0),t("keyMap","default",function(t,e,n){var i=qr(e),o=n!=gs&&qr(n);o&&o.detach&&o.detach(t,i),i.attach&&i.attach(t,o||null)}),t("extraKeys",null),t("configureMouse",null),t("lineWrapping",!1,ws,!0),t("gutters",[],function(t){co(t.options),bs(t)},!0),t("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?ii(t.display)+"px":"0",t.refresh()},!0),t("coverGutterNextToScrollbar",!1,function(t){return Ii(t)},!0),t("scrollbarStyle","native",function(t){zi(t),Ii(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),t("lineNumbers",!1,function(t){co(t.options),bs(t)},!0),t("firstLineNumber",1,bs,!0),t("lineNumberFormatter",function(t){return t},bs,!0),t("showCursorWhenSelecting",!1,li,!0),t("resetSelectionOnContextMenu",!0),t("lineWiseCopyCut",!0),t("pasteLinesPerSelection",!0),t("selectionsMayTouch",!1),t("readOnly",!1,function(t,e){"nocursor"==e&&(vi(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)}),t("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),t("dragDrop",!0,_s),t("allowDropFileTypes",null),t("cursorBlinkRate",530),t("cursorScrollMargin",0),t("cursorHeight",1,li,!0),t("singleCursorHeightPerLine",!0,li,!0),t("workTime",100),t("workDelay",100),t("flattenSpans",!0,To,!0),t("addModeClass",!1,To,!0),t("pollInterval",100),t("undoDepth",200,function(t,e){return t.doc.history.undoDepth=e}),t("historyEventDelay",1250),t("viewportMargin",10,function(t){return t.refresh()},!0),t("maxHighlightLength",1e4,To,!0),t("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),t("tabindex",null,function(t,e){return t.display.input.getField().tabIndex=e||""}),t("autofocus",null),t("direction","ltr",function(t,e){return t.doc.setDirection(e)},!0),t("phrases",null)}(xs),Hs=(Fs=xs).optionHandlers,Bs=Fs.helpers={},Fs.prototype={constructor:Fs,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,e){var n=this.options,i=n[t];n[t]==e&&"mode"!=t||(n[t]=e,Hs.hasOwnProperty(t)&&Zi(this,Hs[t])(this,e,i),oe(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](qr(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:Gi(function(t,e){var n=t.token?t:Fs.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");!function(t,e,n){for(var i=0,o=n(e);i<t.length&&n(t[i])<=o;)i++;t.splice(i,0,e)}(this.state.overlays,{mode:n,modeSpec:t,opaque:e&&e.opaque,priority:e&&e.priority||0},function(t){return t.priority}),this.state.modeGen++,Ki(this)}),removeOverlay:Gi(function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,void Ki(this)}}),indentLine:Gi(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),ft(this.doc,t)&&ks(this,t,e,n)}),indentSelection:Gi(function(t){for(var e=this.doc.sel.ranges,n=-1,i=0;i<e.length;i++){var o=e[i];if(o.empty())o.head.line>n&&(ks(this,o.head.line,t,!0),n=o.head.line,i==this.doc.sel.primIndex&&$i(this));else{var r=o.from(),s=o.to(),a=Math.max(n,r.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<n;++l)ks(this,l,t);var u=this.doc.sel.ranges;0==r.ch&&e.length==u.length&&0<u[i].from().ch&&Wo(this.doc,i,new yo(r,u[i].to()),j)}}}),getTokenAt:function(t,e){return qe(this,t,e)},getLineTokens:function(t,e){return qe(this,gt(t),e,!0)},getTokenTypeAt:function(t){t=Ct(this.doc,t);var e,n=ze(this,lt(this.doc,t.line)),i=0,o=(n.length-1)/2,r=t.ch;if(0==r)e=n[2];else for(;;){var s=i+o>>1;if((s?n[2*s-1]:0)>=r)o=s;else{if(!(n[2*s+1]<r)){e=n[2*s+2];break}i=s+1}}var a=e?e.indexOf("overlay "):-1;return a<0?e:0==a?null:e.slice(0,a-1)},getModeAt:function(t){var e=this.doc.mode;return e.innerMode?Fs.innerMode(e,this.getTokenAt(t).state).mode:e},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var n=[];if(!Bs.hasOwnProperty(e))return n;var i=Bs[e],o=this.getModeAt(t);if("string"==typeof o[e])i[o[e]]&&n.push(i[o[e]]);else if(o[e])for(var r=0;r<o[e].length;r++){var s=i[o[e][r]];s&&n.push(s)}else o.helperType&&i[o.helperType]?n.push(i[o.helperType]):i[o.name]&&n.push(i[o.name]);for(var a=0;a<i._global.length;a++){var l=i._global[a];l.pred(o,this)&&-1==F(n,l.val)&&n.push(l.val)}return n},getStateAfter:function(t,e){var n=this.doc;return Ue(this,(t=xt(n,null==t?n.first+n.size-1:t))+1,e).state},cursorCoords:function(t,e){var n=this.doc.sel.primary();return Vn(this,null==t?n.head:"object"==typeof t?Ct(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return Wn(this,Ct(this.doc,t),e||"page")},coordsChar:function(t,e){return Yn(this,(t=qn(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=qn(this,{top:t,left:0},e||"page").top,pt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var i,o=!1;if("number"==typeof t){var r=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:r<t&&(t=r,o=!0),i=lt(this.doc,t)}else i=t;return jn(this,i,{top:0,left:0},e||"page",n||o).top+(o?this.doc.height-Zt(i):0)},defaultTextHeight:function(){return ti(this.display)},defaultCharWidth:function(){return ei(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,o){var r,s,a,l=this.display,u=(t=Vn(this,Ct(this.doc,t))).bottom,c=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),l.sizer.appendChild(e),"over"==i)u=t.top;else if("above"==i||"near"==i){var h=Math.max(l.wrapper.clientHeight,this.doc.height),d=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>h)&&t.top>e.offsetHeight?u=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=h&&(u=t.bottom),c+e.offsetWidth>d&&(c=d-e.offsetWidth)}e.style.top=u+"px",e.style.left=e.style.right="","right"==o?(c=l.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==o?c=0:"middle"==o&&(c=(l.sizer.clientWidth-e.offsetWidth)/2),e.style.left=c+"px"),n&&(r=this,s={left:c,top:u,right:c+e.offsetWidth,bottom:u+e.offsetHeight},null!=(a=Ci(r,s)).scrollTop&&Di(r,a.scrollTop),null!=a.scrollLeft&&Ei(r,a.scrollLeft))},triggerOnKeyDown:Gi(os),triggerOnKeyPress:Gi(ss),triggerOnKeyUp:rs,triggerOnMouseDown:Gi(cs),execCommand:function(t){if(Yr.hasOwnProperty(t))return Yr[t].call(null,this)},triggerElectric:Gi(function(t){Ds(this,t)}),findPosH:function(t,e,n,i){var o=1;e<0&&(o=-1,e=-e);for(var r=Ct(this.doc,t),s=0;s<e&&!(r=As(this.doc,r,o,n,i)).hitSide;++s);return r},moveH:Gi(function(e,n){var i=this;this.extendSelectionsBy(function(t){return i.display.shift||i.doc.extend||t.empty()?As(i.doc,t.head,e,n,i.options.rtlMoveVisually):e<0?t.from():t.to()},W)}),deleteH:Gi(function(n,i){var t=this.doc.sel,o=this.doc;t.somethingSelected()?o.replaceSelection("",null,"+delete"):Wr(this,function(t){var e=As(o,t.head,n,i,!1);return n<0?{from:e,to:t.head}:{from:t.head,to:e}})}),findPosV:function(t,e,n,i){var o=1,r=i;e<0&&(o=-1,e=-e);for(var s=Ct(this.doc,t),a=0;a<e;++a){var l=Vn(this,s,"div");if(null==r?r=l.left:l.left=r,(s=Os(this,l,o,n)).hitSide)break}return s},moveV:Gi(function(i,o){var r=this,s=this.doc,a=[],l=!this.display.shift&&!s.extend&&s.sel.somethingSelected();if(s.extendSelectionsBy(function(t){if(l)return i<0?t.from():t.to();var e=Vn(r,t.head,"div");null!=t.goalColumn&&(e.left=t.goalColumn),a.push(e.left);var n=Os(r,e,i,o);return"page"==o&&t==s.sel.primary()&&ki(r,Wn(r,n,"div").top-e.top),n},W),a.length)for(var t=0;t<s.sel.ranges.length;t++)s.sel.ranges[t].goalColumn=a[t]}),findWordAt:function(t){var e=lt(this.doc,t.line).text,n=t.ch,i=t.ch;if(e){var o=this.getHelper(t,"wordChars");"before"!=t.sticky&&i!=e.length||!n?++i:--n;for(var r=e.charAt(n),s=et(r,o)?function(t){return et(t,o)}:/\s/.test(r)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!et(t)};0<n&&s(e.charAt(n-1));)--n;for(;i<e.length&&s(e.charAt(i));)++i}return new yo(gt(t.line,n),gt(t.line,i))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?A(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),oe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==P()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Gi(function(t,e){Ti(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-$n(this)-this.display.barHeight,width:t.scrollWidth-$n(this)-this.display.barWidth,clientHeight:Sn(this),clientWidth:Tn(this)}},scrollIntoView:Gi(function(t,e){var n,i;null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:gt(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?(i=t,Si(n=this),n.curOp.scrollToPos=i):Mi(this,t.from,t.to,t.margin)}),setSize:Gi(function(t,e){var n=this,i=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=i(t)),null!=e&&(this.display.wrapper.style.height=i(e)),this.options.lineWrapping&&zn(this);var o=this.display.viewFrom;this.doc.iter(o,this.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){Xi(n,o,"widget");break}++o}),this.curOp.forceUpdate=!0,oe(this,"refresh",this)}),operation:function(t){return Vi(this,t)},startOperation:function(){return Fi(this)},endOperation:function(){return Hi(this)},refresh:Gi(function(){var t=this.display.cachedTextHeight;Ki(this),this.curOp.forceUpdate=!0,Un(this),Ti(this,this.doc.scrollLeft,this.doc.scrollTop),ao(this),(null==t||.5<Math.abs(t-ti(this.display)))&&ri(this),oe(this,"refresh",this)}),swapDoc:Gi(function(t){var e=this.doc;return e.cm=null,Lo(this,t),Un(this),this.display.input.reset(),Ti(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,e),e}),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},le(Fs),Fs.registerHelper=function(t,e,n){Bs.hasOwnProperty(t)||(Bs[t]=Fs[t]={_global:[]}),Bs[t][e]=n},Fs.registerGlobalHelper=function(t,e,n,i){Fs.registerHelper(t,e,i),Bs[t]._global.push({pred:n,val:i})};var qs,Ws="iter insert remove copy getEditor constructor".split(" ");for(var Vs in $r.prototype)$r.prototype.hasOwnProperty(Vs)&&F(Ws,Vs)<0&&(xs.prototype[Vs]=function(t){return function(){return t.apply(this.doc,arguments)}}($r.prototype[Vs]));return le($r),xs.inputStyles={textarea:js,contenteditable:Is},xs.defineMode=function(t){xs.defaults.mode||"null"==t||(xs.defaults.mode=t),function(t,e){2<arguments.length&&(e.dependencies=Array.prototype.slice.call(arguments,2)),$e[t]=e}.apply(this,arguments)},xs.defineMIME=function(t,e){Te[t]=e},xs.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),xs.defineMIME("text/plain","null"),xs.defineExtension=function(t,e){xs.prototype[t]=e},xs.defineDocExtension=function(t,e){$r.prototype[t]=e},xs.fromTextArea=function(e,t){if((t=t?R(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=P();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=a.getValue()}var o;if(e.form&&(ee(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var r=e.form;o=r.submit;try{var s=r.submit=function(){i(),r.submit=o,r.submit(),r.submit=s}}catch(t){}}t.finishInit=function(t){t.save=i,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,i(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(ie(e.form,"submit",i),"function"==typeof e.form.submit&&(e.form.submit=o))}},e.style.display="none";var a=xs(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return a},(qs=xs).off=ie,qs.on=ee,qs.wheelEventPixels=mo,qs.Doc=$r,qs.splitLines=we,qs.countColumn=z,qs.findColumn=V,qs.isWordChar=tt,qs.Pass=B,qs.signal=oe,qs.Line=Ze,qs.changeEnd=wo,qs.scrollbarModel=Ri,qs.Pos=gt,qs.cmpPos=vt,qs.modes=$e,qs.mimeModes=Te,qs.resolveMode=Se,qs.getMode=Me,qs.modeExtensions=De,qs.extendMode=Le,qs.copyState=Ee,qs.startState=Ae,qs.innerMode=Pe,qs.commands=Yr,qs.keyMap=Rr,qs.keyName=jr,qs.isModifierKey=Hr,qs.lookupKey=Fr,qs.normalizeKeyMap=Ur,qs.StringStream=Oe,qs.SharedTextMarker=wr,qs.TextMarker=br,qs.LineWidget=gr,qs.e_preventDefault=ue,qs.e_stopPropagation=ce,qs.e_stop=de,qs.addClass=A,qs.contains=E,qs.rmClass=T,qs.keyNames=Ar,xs.version="5.42.0",xs}),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";var m,r=["webkit","Moz","ms","O"],g={};function v(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function y(t){for(var e=1,n=arguments.length;e<n;e++)t.appendChild(arguments[e]);return t}var t,b=(t=v("style",{type:"text/css"}),y(document.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet);function i(t,e){var n,i,o=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<r.length;i++)if(void 0!==o[n=r[i]+e])return n;if(void 0!==o[e])return e}function _(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function w(t,e){return"string"==typeof t?t:t[e%t.length]}var n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};function o(t){this.opts=e(t||{},o.defaults,n)}o.defaults={},e(o.prototype,{spin:function(t){this.stop();var n=this,i=n.opts,o=n.el=_(v(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex});if(_(o,{left:i.left,top:i.top}),t&&t.insertBefore(o,t.firstChild||null),o.setAttribute("role","progressbar"),n.lines(o,n.opts),!m){var r,s=0,a=(i.lines-1)*(1-i.direction)/2,l=i.fps,u=l/i.speed,c=(1-i.opacity)/(u*i.trail/100),h=u/i.lines;!function t(){s++;for(var e=0;e<i.lines;e++)r=Math.max(1-(s+(i.lines-e)*h)%u*c,i.opacity),n.opacity(o,e*i.direction+a,r,i);n.timeout=n.el&&setTimeout(t,~~(1e3/l))}()}return n},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(t,n){var e,i,o,r,s,a,l,u,c,h,d=0,p=(n.lines-1)*(1-n.direction)/2;function f(t,e){return _(v(),{position:"absolute",width:n.length+n.width+"px",height:n.width+"px",background:t,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/n.lines*d+n.rotate)+"deg) translate("+n.radius+"px,0)",borderRadius:(n.corners*n.width>>1)+"px"})}for(;d<n.lines;d++)e=_(v(),{position:"absolute",top:1+~(n.width/2)+"px",transform:n.hwaccel?"translate3d(0,0,0)":"",opacity:n.opacity,animation:m&&(i=n.opacity,o=n.trail,r=p+d*n.direction,s=n.lines,void 0,void 0,void 0,void 0,void 0,a=["opacity",o,~~(100*i),r,s].join("-"),l=.01+r/s*100,u=Math.max(1-(1-i)/o*(100-l),i),c=m.substring(0,m.indexOf("Animation")).toLowerCase(),h=c&&"-"+c+"-"||"",g[a]||(b.insertRule("@"+h+"keyframes "+a+"{0%{opacity:"+u+"}"+l+"%{opacity:"+i+"}"+(l+.01)+"%{opacity:1}"+(l+o)%100+"%{opacity:"+i+"}100%{opacity:"+u+"}}",b.cssRules.length),g[a]=1),a+" "+1/n.speed+"s linear infinite")}),n.shadow&&y(e,_(f("#000","0 0 4px #000"),{top:"2px"})),y(t,y(e,f(w(n.color,d),"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var s=_(v("group"),{behavior:"url(#default#VML)"});return!i(s,"transform")&&s.adj?function(){function u(t,e){return v("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}b.addRule(".spin-vml","behavior:url(#default#VML)"),o.prototype.lines=function(t,i){var o=i.length+i.width,e=2*o;function r(){return _(u("group",{coordsize:e+" "+e,coordorigin:-o+" "+-o}),{width:e,height:e})}var n,s=2*-(i.width+i.length)+"px",a=_(r(),{position:"absolute",top:s,left:s});function l(t,e,n){y(a,y(_(r(),{rotation:360/i.lines*t+"deg",left:~~e}),y(_(u("roundrect",{arcsize:i.corners}),{width:o,height:i.width,left:i.radius,top:-i.width>>1,filter:n}),u("fill",{color:w(i.color,t),opacity:i.opacity}),u("stroke",{opacity:0}))))}if(i.shadow)for(n=1;n<=i.lines;n++)l(n,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(n=1;n<=i.lines;n++)l(n);return y(t,a)},o.prototype.opacity=function(t,e,n,i){var o=t.firstChild;i=i.shadow&&i.lines||0,o&&e+i<o.childNodes.length&&(o=(o=(o=o.childNodes[e+i])&&o.firstChild)&&o.firstChild)&&(o.opacity=n)}}():m=i(s,"animation"),o}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).crossfilter=t()}}(function(){return function r(s,a,l){function u(e,t){if(!a[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var o=a[e]={exports:{}};s[e][0].call(o.exports,function(t){return u(s[e][1][t]||t)},o,o.exports,r,s,a,l)}return a[e].exports}for(var c="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e){e.exports=t("./src/crossfilter").crossfilter},{"./src/crossfilter":6}],2:[function(t,Z){(function(t){function e(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function n(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function i(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function o(t,e){for(var n=t.length;n--;)if((i=t[n][0])===(o=e)||i!=i&&o!=o)return n;var i,o;return-1}function r(t){return!(!h(t)||(e=t,O&&O in e))&&(c(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?z:T).test(function(t){if(null!=t){try{return I.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function s(t,e){var n,i,o=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function a(t,e){var n,i,o=(i=e,null==(n=t)?void 0:n[i]);return r(o)?o:void 0}function l(t){if("string"==typeof t||d(t))return t;var e=t+"";return"0"==e&&1/t==-v?"-0":e}function u(o,r){if("function"!=typeof o||r&&"function"!=typeof r)throw new TypeError(m);var s=function(){var t=arguments,e=r?r.apply(this,t):t[0],n=s.cache;if(n.has(e))return n.get(e);var i=o.apply(this,t);return s.cache=n.set(e,i),i};return s.cache=new(u.Cache||i),s}function c(t){var e=h(t)?R.call(t):"";return e==y||e==b}function h(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function d(t){return"symbol"==typeof t||!!(e=t)&&"object"==typeof e&&R.call(t)==_;var e}function p(t){return null==t?"":function(t){if("string"==typeof t)return t;if(d(t))return q?q.call(t):"";var e=t+"";return"0"==e&&1/t==-v?"-0":e}(t)}var f,m="Expected a function",g="__lodash_hash_undefined__",v=1/0,y="[object Function]",b="[object GeneratorFunction]",_="[object Symbol]",w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/,C=/^\./,k=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/\\(\\)?/g,T=/^\[object .+?Constructor\]$/,S="object"==typeof t&&t&&t.Object===Object&&t,M="object"==typeof self&&self&&self.Object===Object&&self,D=S||M||Function("return this")(),L=Array.prototype,E=Function.prototype,P=Object.prototype,A=D["__core-js_shared__"],O=(f=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",I=E.toString,N=P.hasOwnProperty,R=P.toString,z=RegExp("^"+I.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=D.Symbol,F=L.splice,H=a(D,"Map"),B=a(Object,"create"),j=U?U.prototype:void 0,q=j?j.toString:void 0;e.prototype.clear=function(){this.__data__=B?B(null):{}},e.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},e.prototype.get=function(t){var e=this.__data__;if(B){var n=e[t];return n===g?void 0:n}return N.call(e,t)?e[t]:void 0},e.prototype.has=function(t){var e=this.__data__;return B?void 0!==e[t]:N.call(e,t)},e.prototype.set=function(t,e){return this.__data__[t]=B&&void 0===e?g:e,this},n.prototype.clear=function(){this.__data__=[]},n.prototype.delete=function(t){var e=this.__data__,n=o(e,t);return!(n<0||(n==e.length-1?e.pop():F.call(e,n,1),0))},n.prototype.get=function(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]},n.prototype.has=function(t){return-1<o(this.__data__,t)},n.prototype.set=function(t,e){var n=this.__data__,i=o(n,t);return i<0?n.push([t,e]):n[i][1]=e,this},i.prototype.clear=function(){this.__data__={hash:new e,map:new(H||n),string:new e}},i.prototype.delete=function(t){return s(this,t).delete(t)},i.prototype.get=function(t){return s(this,t).get(t)},i.prototype.has=function(t){return s(this,t).has(t)},i.prototype.set=function(t,e){return s(this,t).set(t,e),this};var W=u(function(t){t=p(t);var o=[];return C.test(t)&&o.push(""),t.replace(k,function(t,e,n,i){o.push(n?i.replace($,"$1"):e||t)}),o});u.Cache=i;var V=Array.isArray;Z.exports=function(t,e,n){var i,o=-1,r=(e=function(t,e){if(V(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!d(t))||x.test(t)||!w.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:V(i=e)?i:W(i)).length;for(r||(t=void 0,r=1);++o<r;){var s=null==t?void 0:t[l(e[o])];void 0===s&&(o=r,s=n),t=c(s)?s.call(t):s}return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e){e.exports={version:"1.4.6"}},{}],4:[function(t,e){function n(t){for(var e=new Array(t),n=-1;++n<t;)e[n]=0;return e}function i(t){this.length=t,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=r(t)}if("undefined"!=typeof Uint8Array)var r=function(t){return new Uint8Array(t)},o=function(t,e){if(t.length>=e)return t;var n=new t.constructor(e);return n.set(t),n},s=function(t,e){var n,i,o;switch(e){case 16:o=t.length,n=new Uint16Array(o);break;case 32:i=t.length,n=new Uint32Array(i);break;default:throw new Error("invalid array width!")}return n.set(t),n};i.prototype.lengthen=function(t){var e,n;for(e=0,n=this.subarrays;e<n;++e)this[e]=o(this[e],t);this.length=t},i.prototype.add=function(){var t,e,n,i,o;for(i=0,o=this.subarrays;i<o;++i)if(n=~(t=this.masks[i])&-~t,!(32<=(e=this.width-32*i))||n)return e<32&&n&1<<e&&(this[i]=s(this[i],e<<=1),this.width=32*i+e),this.masks[i]|=n,{offset:i,one:n};return this[this.subarrays]=r(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},i.prototype.copy=function(t,e){var n,i;for(n=0,i=this.subarrays;n<i;++n)this[n][t]=this[n][e]},i.prototype.truncate=function(t){var e,n;for(e=0,n=this.subarrays;e<n;++e){for(var i=this.length-1;t<=i;i--)this[e][i]=0;this[e].length=t}this.length=t},i.prototype.zero=function(t){var e,n;for(e=0,n=this.subarrays;e<n;++e)if(this[e][t])return!1;return!0},i.prototype.zeroExcept=function(t,e,n){var i,o;for(i=0,o=this.subarrays;i<o;++i)if(i===e?this[i][t]&n:this[i][t])return!1;return!0},i.prototype.zeroExceptMask=function(t,e){var n,i;for(n=0,i=this.subarrays;n<i;++n)if(this[n][t]&e[n])return!1;return!0},i.prototype.only=function(t,e,n){var i,o;for(i=0,o=this.subarrays;i<o;++i)if(this[i][t]!=(i===e?n:0))return!1;return!0},i.prototype.onlyExcept=function(t,e,n,i,o){var r,s,a;for(s=0,a=this.subarrays;s<a;++s)if(r=this[s][t],s===e&&(r&=n),r!=(s===i?o:0))return!1;return!0},e.exports={array8:n,array16:n,array32:n,arrayLengthen:function(t,e){for(var n=t.length;n<e;)t[n++]=0;return t},arrayWiden:function(t,e){if(32<e)throw new Error("invalid array width!");return t},bitarray:i}},{}],5:[function(t,e){"use strict";function n(r){function t(t,e,n,i){for(;n<i;){var o=n+i>>>1;e<r(t[o])?i=o:n=o+1}return n}return(t.right=t).left=function(t,e,n,i){for(;n<i;){var o=n+i>>>1;r(t[o])<e?n=o+1:i=o}return n},t}var i=t("./identity");e.exports=n(i),e.exports.by=n},{"./identity":10}],6:[function(t,e,n){"use strict";function Y(t,e){return(e<257?X.array8:e<65537?X.array16:X.array32)(t)}function R(t){for(var e=Y(t,t),n=-1;++n<t;)e[n]=n;return e}function K(t){return 8===t?256:16===t?65536:4294967296}var X=t("./array"),w=t("./filter"),J=t("./identity"),Q=t("./null"),tt=t("./zero"),et=t("./heapselect"),nt=t("./heap"),it=t("./bisect"),i=t("./insertionsort"),ot=t("./permute"),rt=t("./quicksort"),st=t("./reduce"),o=t("./../package.json"),at=t("lodash.result");n.crossfilter=function(){function t(e){var n=V,i=e.length;return i&&(W=W.concat(e),q.lengthen(V+=i),_.forEach(function(t){t(e,n,i)}),b("dataAdded")),r}function o(t){var e,n,i,o,r=Array(q.subarrays);for(e=0;e<q.subarrays;e++)r[e]=-1;for(n=0,i=t.length;n<i;n++)r[(o=t[n].id())>>7]&=~(1<<(63&o));return r}function b(t){for(var e=0;e<n.length;e++)n[e](t)}var q,r={add:t,remove:function(t){for(var e=Y(V,V),n=[],i="function"==typeof t,o=0,r=0;o<V;++o)s=o,(i?t(W[s],s):q.zero(s))?(n.push(o),e[o]=-1):e[o]=r++;var s;Z.forEach(function(t){t(-1,-1,[],n,!0)}),G.forEach(function(t){t(e)});for(var a=0,l=0;a<V;++a)-1!==e[a]&&(a!==l&&(q.copy(l,a),W[l]=W[a]),++l);W.length=V=l,q.truncate(l),b("dataRemoved")},dimension:function(x,z){function e(t,e,n){if(z){L=[];for(var i=_=N=0;i<t.length;i++)for(_=0,L=x(t[i]);_<L.length;_++)N++;C=[],T=R(t.length),M=Y(N,1);for(var o=R(N),r=0,s=0;s<t.length;s++)if((L=x(t[s])).length)for(T[s]=L.length,_=0;_<L.length;_++)C.push(L[_]),o[r]=s,r++;else T[s]=0,E.push(s+e);var a=P(R(N),0,N);C=ot(C,a),k=ot(o,a)}else C=t.map(x),k=P(R(n),0,n),C=ot(C,k);z&&(n=N);var l=A(C),u=l[0],c=l[1];if(D)for(var h=0;h<n;++h)D(C[h],h)||(q[H][k[h]+e]|=U,z&&(M[h]=1));else{for(var d=0;d<u;++d)q[H][k[d]+e]|=U,z&&(M[d]=1);for(var p=c;p<n;++p)q[H][k[p]+e]|=U,z&&(M[p]=1)}if(!e)return B=C,j=k,$=T,S=M,O=u,void(I=c);var f,m=B,g=j,v=S,y=0;if(i=0,z&&(f=e,e=m.length,n=N),B=z?new Array(e+n):new Array(V),j=z?new Array(e+n):Y(V,V),z&&(S=Y(e+n,1)),z){var b=$.length;$=X.arrayLengthen($,V);for(var _=0;_+b<V;_++)$[_+b]=T[_]}for(var w=0;i<e&&y<n;++w)m[i]<C[y]?(B[w]=m[i],z&&(S[w]=v[i]),j[w]=g[i++]):(B[w]=C[y],z&&(S[w]=M[y]),j[w]=k[y++]+(z?f:e));for(;i<e;++i,++w)B[w]=m[i],z&&(S[w]=v[i]),j[w]=g[i];for(;y<n;++y,++w)B[w]=C[y],z&&(S[w]=M[y]),j[w]=k[y]+(z?f:e);l=A(B),O=l[0],I=l[1]}function n(t,e,n){g.forEach(function(t){t(C,k,e,n)}),C=k=null}function i(t){if(z){for(var e=0,n=0;e<E.length;e++)-1!==t[E[e]]&&(E[n]=t[E[e]],n++);for(E.length=n,n=e=0;e<V;e++)-1!==t[e]&&(n!==e&&($[n]=$[e]),n++);$.length=n}for(var i,o=B.length,r=0,s=0;r<o;++r)-1!==t[i=j[r]]&&(r!==s&&(B[s]=B[r]),j[s]=t[i],z&&(S[s]=S[r]),++s);for(B.length=s,z&&(S.length=s);s<o;)j[s++]=0;var a=A(B);O=a[0],I=a[1]}function o(t){var n=t[0],i=t[1];if(D)return D=null,d(function(t,e){return n<=e&&e<i},0===t[0]&&t[1]===B.length),O=n,I=i,m;var e,o,r,s=[],a=[],l=[],u=[];if(n<O)for(e=n,o=Math.min(O,i);e<o;++e)s.push(j[e]),l.push(e);else if(O<n)for(e=O,o=Math.min(n,I);e<o;++e)a.push(j[e]),u.push(e);if(I<i)for(e=Math.max(n,I),o=i;e<o;++e)s.push(j[e]),l.push(e);else if(i<I)for(e=Math.max(O,i),o=I;e<o;++e)a.push(j[e]),u.push(e);if(z){var c=[],h=[];for(e=0;e<s.length;e++)$[s[e]]++,S[l[e]]=0,1===$[s[e]]&&(q[H][s[e]]^=U,c.push(s[e]));for(e=0;e<a.length;e++)$[a[e]]--,S[u[e]]=1,0===$[a[e]]&&(q[H][a[e]]^=U,h.push(a[e]));if(s=c,a=h,0===t[0]&&t[1]===B.length)for(e=0;e<E.length;e++)q[H][r=E[e]]&U&&(q[H][r]^=U,s.push(r));else for(e=0;e<E.length;e++)q[H][r=E[e]]&U||(q[H][r]^=U,a.push(r))}else{for(e=0;e<s.length;e++)q[H][s[e]]^=U;for(e=0;e<a.length;e++)q[H][a[e]]^=U}return O=n,I=i,Z.forEach(function(t){t(U,H,s,a)}),b("filtered"),m}function r(t){return p=t,f=!0,o((A=w.filterExact(it,t))(B))}function s(t){return p=t,f=!0,o((A=w.filterRange(it,t))(B))}function a(){return p=void 0,f=!1,o((A=w.filterAll)(B))}function l(t){f=!0,D=p=t,A=w.filterAll,d(t,!1);var e=A(B);return O=e[0],I=e[1],m}function d(t,e){var n,i,o,r=[],s=[],a=[],l=[],u=B.length;if(!z)for(n=0;n<u;++n)!(q[H][i=j[n]]&U)^!!(o=t(B[n],n))&&(o?r.push(i):s.push(i));if(z)for(n=0;n<u;++n)t(B[n],n)?(r.push(j[n]),a.push(n)):(s.push(j[n]),l.push(n));if(z){var c=[],h=[];for(n=0;n<r.length;n++)1===S[a[n]]&&($[r[n]]++,S[a[n]]=0,1===$[r[n]]&&(q[H][r[n]]^=U,c.push(r[n])));for(n=0;n<s.length;n++)0===S[l[n]]&&($[s[n]]--,S[l[n]]=1,0===$[s[n]]&&(q[H][s[n]]^=U,h.push(s[n])));if(r=c,s=h,e)for(n=0;n<E.length;n++)q[H][i=E[n]]&U&&(q[H][i]^=U,r.push(i));else for(n=0;n<E.length;n++)q[H][i=E[n]]&U||(q[H][i]^=U,s.push(i))}else{for(n=0;n<r.length;n++)q[H][r[n]]&U&&(q[H][r[n]]&=F);for(n=0;n<s.length;n++)q[H][s[n]]&U||(q[H][s[n]]|=U)}Z.forEach(function(t){t(U,H,r,s)}),b("filtered")}function u(_){function e(t,e,n,i){function o(){return z?void A++:void(++A===P&&(d=X.arrayWiden(d,E<<=1),T=X.arrayWiden(T,E),P=K(E)))}z&&(L=n,n=B.length-t.length,i=t.length);var r,s,a,l,u,c,h=$,d=z?[]:Y(A,P),p=S,f=M,m=D,g=A,v=0,y=0;for(N&&(p=m=Q),N&&(f=m=Q),$=new Array(A),A=0,T=z?g?T:[]:1<g?X.arrayLengthen(T,V):Y(V,P),g&&(a=(s=h[0]).key);y<i&&!((l=_(t[y]))>=l);)++y;for(;y<i;){for(s&&a<=l?(u=s,c=a,d[v]=A,(s=h[++v])&&(a=s.key)):(u={key:l,value:m()},c=l),$[A]=u;l<=c&&(r=e[y]+(z?L:n),z?T[r]?T[r].push(A):T[r]=[A]:T[r]=A,u.value=p(u.value,W[r],!0),q.zeroExcept(r,H,F)||(u.value=f(u.value,W[r],!1)),!(++y>=i));)l=_(t[y]);o()}for(;v<g;)$[d[v]=A]=h[v++],o();if(z)for(var b=0;b<V;b++)T[b]||(T[b]=[]);if(v<A)if(z)for(v=0;v<L;++v)for(b=0;b<T[v].length;b++)T[v][b]=d[T[v][b]];else for(v=0;v<n;++v)T[v]=d[T[v]];r=Z.indexOf(O),1<A||z?(O=w,I=C):(!A&&R&&(A=1,$=[{key:null,value:m()}]),I=1===A?(O=x,k):O=Q,T=null),Z[r]=O}function n(t){if(1<A||z){var e,n,i,o=A,r=$,s=Y(o,o);if(z){for(i=e=0;e<V;++e)if(-1!==t[e]){for(T[i]=T[e],n=0;n<T[i].length;n++)s[T[i][n]]=1;++i}}else for(i=e=0;e<V;++e)-1!==t[e]&&(s[T[i]=T[e]]=1,++i);for($=[],e=A=0;e<o;++e)s[e]&&(s[e]=A++,$.push(r[e]));if(1<A||z)if(z)for(e=0;e<i;++e)for(n=0;n<T[e].length;++n)T[e][n]=s[T[e][n]];else for(e=0;e<i;++e)T[e]=s[T[e]];else T=null;Z[Z.indexOf(O)]=1<A||z?(I=C,O=w):1===A?(I=k,O=x):I=O=Q}else if(1===A){if(R)return;for(var a=0;a<V;++a)if(-1!==t[a])return;$=[],A=0,Z[Z.indexOf(O)]=O=I=Q}}function w(t,e,n,i,o){var r,s,a,l,u;if(!(t===U&&e===H||N))if(z){for(r=0,l=n.length;r<l;++r)if(q.zeroExcept(a=n[r],H,F))for(s=0;s<T[a].length;s++)(u=$[T[a][s]]).value=S(u.value,W[a],!1,s);for(r=0,l=i.length;r<l;++r)if(q.onlyExcept(a=i[r],H,F,e,t))for(s=0;s<T[a].length;s++)(u=$[T[a][s]]).value=M(u.value,W[a],o,s)}else{for(r=0,l=n.length;r<l;++r)q.zeroExcept(a=n[r],H,F)&&((u=$[T[a]]).value=S(u.value,W[a],!1));for(r=0,l=i.length;r<l;++r)q.onlyExcept(a=i[r],H,F,e,t)&&((u=$[T[a]]).value=M(u.value,W[a],o))}}function x(t,e,n,i,o){if(!(t===U&&e===H||N)){var r,s,a,l=$[0];for(r=0,a=n.length;r<a;++r)q.zeroExcept(s=n[r],H,F)&&(l.value=S(l.value,W[s],!1));for(r=0,a=i.length;r<a;++r)q.onlyExcept(s=i[r],H,F,e,t)&&(l.value=M(l.value,W[s],o))}}function C(){var t,e,n;for(t=0;t<A;++t)$[t].value=D();if(z){for(t=0;t<V;++t)for(e=0;e<T[t].length;e++)(n=$[T[t][e]]).value=S(n.value,W[t],!0,e);for(t=0;t<V;++t)if(!q.zeroExcept(t,H,F))for(e=0;e<T[t].length;e++)(n=$[T[t][e]]).value=M(n.value,W[t],!1,e)}else{for(t=0;t<V;++t)(n=$[T[t]]).value=S(n.value,W[t],!0);for(t=0;t<V;++t)q.zeroExcept(t,H,F)||((n=$[T[t]]).value=M(n.value,W[t],!1))}}function k(){var t,e=$[0];for(e.value=D(),t=0;t<V;++t)e.value=S(e.value,W[t],!0);for(t=0;t<V;++t)q.zeroExcept(t,H,F)||(e.value=M(e.value,W[t],!1))}function i(){return N&&(I(),N=!1),$}function o(t,e,n){return S=t,M=e,D=n,N=!0,a}function t(){return o(st.reduceIncrement,st.reduceDecrement,tt)}function r(e){function t(t){return e(t.value)}return l=et.by(t),u=nt.by(t),a}function s(){var t=Z.indexOf(O);return 0<=t&&Z.splice(t,1),0<=(t=g.indexOf(e))&&g.splice(t,1),0<=(t=G.indexOf(n))&&G.splice(t,1),0<=(t=v.indexOf(a))&&v.splice(t,1),a}var a={top:function(t){var e=l(i(),0,$.length,t);return u.sort(e,0,e.length)},all:i,reduce:o,reduceCount:t,reduceSum:function(t){return o(st.reduceAdd(t),st.reduceSubtract(t),tt)},order:r,orderNatural:function(){return r(J)},size:function(){return A},dispose:s,remove:s};v.push(a);var $,T,l,u,S,M,D,L,E=8,P=K(E),A=0,O=Q,I=Q,N=!0,R=_===Q;return arguments.length<1&&(_=J),Z.push(O),g.push(e),G.push(n),e(B,j,0,V),t().orderNatural()}function t(){v.forEach(function(t){t.dispose()});var t=_.indexOf(e);return 0<=t&&_.splice(t,1),0<=(t=_.indexOf(n))&&_.splice(t,1),0<=(t=G.indexOf(i))&&G.splice(t,1),q.masks[H]&=F,a()}if("string"==typeof x){var c=x;x=function(t){return at(t,c)}}var U,F,H,h,B,j,C,k,$,T,S,M,D,p,f,L,m={filter:function(t){return null==t?a():Array.isArray(t)?s(t):"function"==typeof t?l(t):r(t)},filterExact:r,filterRange:s,filterFunction:l,filterAll:a,currentFilter:function(){return p},hasCurrentFilter:function(){return f},top:function(t,e){var n,i=[],o=I,r=0;for(e&&0<e&&(r=e);--o>=O&&0<t;)q.zero(n=j[o])&&(0<r?--r:(i.push(W[n]),--t));if(z)for(o=0;o<E.length&&0<t;o++)q.zero(n=E[o])&&(0<r?--r:(i.push(W[n]),--t));return i},bottom:function(t,e){var n,i,o=[],r=0;if(e&&0<e&&(r=e),z)for(n=0;n<E.length&&0<t;n++)q.zero(i=E[n])&&(0<r?--r:(o.push(W[i]),--t));for(n=O;n<I&&0<t;)q.zero(i=j[n])&&(0<r?--r:(o.push(W[i]),--t)),n++;return o},group:u,groupAll:function(){var t=u(Q),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t},dispose:t,remove:t,accessor:x,id:function(){return h}},E=[],P=rt.by(function(t){return C[t]}),A=w.filterAll,g=[],v=[],O=0,I=0,N=0;_.unshift(e),_.push(n),G.push(i);var y=q.add();return H=y.offset,U=y.one,F=~U,h=H<<7|Math.log(U)/Math.log(2),e(W,0,V),n(0,0,V),m},groupAll:function(){function e(t,e){var n;if(!h)for(n=e;n<V;++n)l=u(l,W[n],!0),q.zero(n)||(l=c(l,W[n],!1))}function n(t,e,n,i,o){var r,s,a;if(!h){for(r=0,a=n.length;r<a;++r)q.zero(s=n[r])&&(l=u(l,W[s],o));for(r=0,a=i.length;r<a;++r)q.only(s=i[r],e,t)&&(l=c(l,W[s],o))}}function i(t,e,n){return u=t,c=e,r=n,h=!0,s}function t(){return i(st.reduceIncrement,st.reduceDecrement,tt)}function o(){var t=Z.indexOf(n);return 0<=t&&Z.splice(t,1),0<=(t=_.indexOf(e))&&_.splice(t,1),s}var l,u,c,r,s={reduce:i,reduceCount:t,reduceSum:function(t){return i(st.reduceAdd(t),st.reduceSubtract(t),tt)},value:function(){return h&&(function(){var t;for(l=r(),t=0;t<V;++t)l=u(l,W[t],!0),q.zero(t)||(l=c(l,W[t],!1))}(),h=!1),l},dispose:o,remove:o},h=!0;return Z.push(n),_.push(e),e(0,0),t()},size:function(){return V},all:function(){return W},allFiltered:function(t){var e=[],n=0,i=o(t||[]);for(n=0;n<V;n++)q.zeroExceptMask(n,i)&&e.push(W[n]);return e},onChange:function(t){return"function"!=typeof t?void console.warn("onChange callback parameter must be a function!"):(n.push(t),function(){n.splice(n.indexOf(t),1)})},isElementFiltered:function(t,e){var n=o(e||[]);return q.zeroExceptMask(t,n)}},W=[],V=0,Z=[],_=[],G=[],n=[];return q=new X.bitarray(0),arguments.length?t(arguments[0]):r},n.crossfilter.heap=nt,n.crossfilter.heapselect=et,n.crossfilter.bisect=it,n.crossfilter.insertionsort=i,n.crossfilter.permute=ot,n.crossfilter.quicksort=rt,n.crossfilter.version=o.version},{"./../package.json":3,"./array":4,"./bisect":5,"./filter":7,"./heap":8,"./heapselect":9,"./identity":10,"./insertionsort":11,"./null":12,"./permute":13,"./quicksort":14,"./reduce":15,"./zero":16,"lodash.result":2}],7:[function(t,e){"use strict";e.exports={filterExact:function(n,i){return function(t){var e=t.length;return[n.left(t,i,0,e),n.right(t,i,0,e)]}},filterRange:function(n,t){var i=t[0],o=t[1];return function(t){var e=t.length;return[n.left(t,i,0,e),n.left(t,o,0,e)]}},filterAll:function(t){return[0,t.length]}}},{}],8:[function(t,e){"use strict";function n(a){function t(t,e,n){for(var i=n-e,o=1+(i>>>1);0<--o;)r(t,o,i,e);return t}function r(t,e,n,i){for(var o,r=t[--i+e],s=a(r);(o=e<<1)<=n&&(o<n&&a(t[i+o])>a(t[i+o+1])&&o++,!(s<=a(t[i+o])));)t[i+e]=t[i+o],e=o;t[i+e]=r}return t.sort=function(t,e,n){for(var i,o=n-e;0<--o;)i=t[e],t[e]=t[e+o],t[e+o]=i,r(t,1,o,e);return t},t}var i=t("./identity");e.exports=n(i),e.exports.by=n},{"./identity":10}],9:[function(t,e){"use strict";function n(l){var u=o.by(l);return function(t,e,n,i){var o,r,s,a=new Array(i=Math.min(n-e,i));for(r=0;r<i;++r)a[r]=t[e++];if(u(a,0,i),e<n)for(o=l(a[0]);l(s=t[e])>o&&(a[0]=s,o=l(u(a,0,i)[0])),++e<n;);return a}}var i=t("./identity"),o=t("./heap");e.exports=n(i),e.exports.by=n},{"./heap":8,"./identity":10}],10:[function(t,e){"use strict";e.exports=function(t){return t}},{}],11:[function(t,e){"use strict";function n(a){return function(t,e,n){for(var i=e+1;i<n;++i){for(var o=i,r=t[i],s=a(r);e<o&&a(t[o-1])>s;--o)t[o]=t[o-1];t[o]=r}return t}}var i=t("./identity");e.exports=n(i),e.exports.by=n},{"./identity":10}],12:[function(t,e){"use strict";e.exports=function(){return null}},{}],13:[function(t,e){"use strict";e.exports=function(t,e,n){for(var i=0,o=e.length,r=n?JSON.parse(JSON.stringify(t)):new Array(o);i<o;++i)r[i]=t[e[i]];return r}},{}],14:[function(t,e){function n(E){function P(t,e,n){return(n-e<32?i:function(r,t,e){var n,i=0|(e-t)/6,o=t+i,s=e-1-i,a=t+e-1>>1,l=a-i,u=a+i,c=r[o],h=E(c),d=r[l],p=E(d),f=r[a],m=E(f),g=r[u],v=E(g),y=r[s],b=E(y);p<h&&(n=c,c=d,d=n,n=h,h=p,p=n),b<v&&(n=g,g=y,y=n,n=v,v=b,b=n),m<h&&(n=c,c=f,f=n,n=h,h=m,m=n),m<p&&(n=d,d=f,f=n,n=p,p=m,m=n),v<h&&(n=c,c=g,g=n,n=h,h=v,v=n),v<m&&(n=f,f=g,g=n,n=m,m=v,v=n),b<p&&(n=d,d=y,y=n,n=p,p=b,b=n),m<p&&(n=d,d=f,f=n,n=p,p=m,m=n),b<v&&(n=g,g=y,y=n,n=v,v=b,b=n);var _=d,w=p,x=g,C=v;r[o]=c,r[l]=r[t],r[a]=f,r[u]=r[e-1],r[s]=y;var k=t+1,$=e-2,T=w<=C&&C<=w;if(T)for(var S=k;S<=$;++S){var M=r[S],D=E(M);if(D<w)S!==k&&(r[S]=r[k],r[k]=M),++k;else if(w<D)for(;;){var L=E(r[$]);if(!(w<L)){if(L<w){r[S]=r[k],r[k++]=r[$],r[$--]=M;break}r[S]=r[$],r[$--]=M;break}$--}}else!function(){for(var t=k;t<=$;t++){var e=r[t],n=E(e);if(n<w)t!==k&&(r[t]=r[k],r[k]=e),++k;else if(C<n)for(;;){var i=E(r[$]);if(!(C<i)){r[$--]=(i<w?(r[t]=r[k],r[k++]=r[$]):r[t]=r[$],e);break}if(--$<t)break}}}();return r[t]=r[k-1],r[k-1]=_,r[e-1]=r[$+1],r[$+1]=x,P(r,t,k-1),P(r,$+2,e),T?r:(k<o&&s<$&&function(){for(var t,e;(t=E(r[k]))<=w&&w<=t;)++k;for(;(e=E(r[$]))<=C&&C<=e;)--$;for(var n=k;n<=$;n++){var i=r[n],o=E(i);if(o<=w&&w<=o)n!==k&&(r[n]=r[k],r[k]=i),k++;else if(o<=C&&C<=o)for(;;){if(!((e=E(r[$]))<=C&&C<=e)){r[$--]=(e<w?(r[n]=r[k],r[k++]=r[$]):r[n]=r[$],i);break}if(--$<n)break}}}(),P(r,k,$+1))})(t,e,n)}var i=o.by(E);return P}var i=t("./identity"),o=t("./insertionsort");e.exports=n(i),e.exports.by=n},{"./identity":10,"./insertionsort":11}],15:[function(t,e){"use strict";e.exports={reduceIncrement:function(t){return t+1},reduceDecrement:function(t){return t-1},reduceAdd:function(n){return function(t,e){return t+ +n(e)}},reduceSubtract:function(n){return function(t,e){return t-n(e)}}}},{}],16:[function(t,e){"use strict";e.exports=function(){return 0}},{}]},{},[1])(1)}),function(t,e){"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof module&&module.exports?module.exports=function(t){return t.tip=e(t),t.tip}:t.d3.tip=e(t.d3)}(this,function(v){return function(){var u=function(){return"n"},c=function(){return[0,0]},h=function(){return" "},n=t(),i=null,l=null,d=null;function p(t){var e;i="svg"===(e=(e=t).node()).tagName.toLowerCase()?e:e.ownerSVGElement,l=i.createSVGPoint(),document.body.appendChild(n)}p.show=function(){var t=Array.prototype.slice.call(arguments);t[t.length-1]instanceof SVGElement&&(d=t.pop());var e,n=h.apply(this,t),i=c.apply(this,t),o=u.apply(this,t),r=g(),s=m.length,a=document.documentElement.scrollTop||document.body.scrollTop,l=document.documentElement.scrollLeft||document.body.scrollLeft;for(r.html(n).style({opacity:1,"pointer-events":"all"});s--;)r.classed(m[s],!1);return e=f.get(o).apply(this),r.classed(o,!0).style({top:e.top+i[0]+a+"px",left:e.left+i[1]+l+"px"}),p},p.hide=function(){return g().style({opacity:0,"pointer-events":"none"}),p},p.attr=function(t,e){if(arguments.length<2&&"string"==typeof t)return g().attr(t);var n=Array.prototype.slice.call(arguments);return v.selection.prototype.attr.apply(g(),n),p},p.style=function(t,e){if(arguments.length<2&&"string"==typeof t)return g().style(t);var n=Array.prototype.slice.call(arguments);return v.selection.prototype.style.apply(g(),n),p},p.direction=function(t){return arguments.length?(u=null==t?t:v.functor(t),p):u},p.offset=function(t){return arguments.length?(c=null==t?t:v.functor(t),p):c},p.html=function(t){return arguments.length?(h=null==t?t:v.functor(t),p):h},p.destroy=function(){return n&&(g().remove(),n=null),p};var f=v.map({n:function(){var t=e();return{top:t.n.y-n.offsetHeight,left:t.n.x-n.offsetWidth/2}},s:function(){var t=e();return{top:t.s.y,left:t.s.x-n.offsetWidth/2}},e:function(){var t=e();return{top:t.e.y-n.offsetHeight/2,left:t.e.x}},w:function(){var t=e();return{top:t.w.y-n.offsetHeight/2,left:t.w.x-n.offsetWidth}},nw:function(){var t=e();return{top:t.nw.y-n.offsetHeight,left:t.nw.x-n.offsetWidth}},ne:function(){var t=e();return{top:t.ne.y-n.offsetHeight,left:t.ne.x}},sw:function(){var t=e();return{top:t.sw.y,left:t.sw.x-n.offsetWidth}},se:function(){var t=e();return{top:t.se.y,left:t.e.x}}}),m=f.keys();function t(){var t=v.select(document.createElement("div"));return t.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"}),t.node()}function g(){return null===n&&(n=t(),document.body.appendChild(n)),v.select(n)}function e(){for(var t=d||v.event.target;void 0===t.getScreenCTM&&"undefined"===t.parentNode;)t=t.parentNode;var e={},n=t.getScreenCTM(),i=t.getBBox(),o=i.width,r=i.height,s=i.x,a=i.y;return l.x=s,l.y=a,e.nw=l.matrixTransform(n),l.x+=o,e.ne=l.matrixTransform(n),l.y+=r,e.se=l.matrixTransform(n),l.x-=o,e.sw=l.matrixTransform(n),l.y-=r/2,e.w=l.matrixTransform(n),l.x+=o,e.e=l.matrixTransform(n),l.x-=o/2,l.y-=r/2,e.n=l.matrixTransform(n),l.y+=r,e.s=l.matrixTransform(n),e}return p}}),function(s,d,a){var e,n,t=s.L,f={};f.version="0.7.7","object"==typeof module&&"object"==typeof module.exports?module.exports=f:"function"==typeof define&&define.amd&&define(f),f.noConflict=function(){return s.L=t,this},(s.L=f).Util={extend:function(t){var e,n,i,o,r=Array.prototype.slice.call(arguments,1);for(n=0,i=r.length;n<i;n++)for(e in o=r[n]||{})o.hasOwnProperty(e)&&(t[e]=o[e]);return t},bind:function(t,e){var n=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,n||arguments)}},stamp:(e=0,n="_leaflet_id",function(t){return t[n]=t[n]||++e,t[n]}),invokeEach:function(t,e,n){var i,o;if("object"!=typeof t)return!1;for(i in o=Array.prototype.slice.call(arguments,3),t)e.apply(n,[i,t[i]].concat(o));return!0},limitExecByInterval:function(n,i,o){var r,s;return function t(){var e=arguments;r?s=!0:(r=!0,setTimeout(function(){r=!1,s&&(t.apply(o,e),s=!1)},i),n.apply(o,e))}},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return f.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=f.extend({},t.options,e),t.options},getParamString:function(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,i){return t.replace(/\{ *([\w_]+) *\}/g,function(t,e){var n=i[e];if(n===a)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(i)),n})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var e,n,i=["webkit","moz","o","ms"];for(e=0;e<i.length&&!n;e++)n=s[i[e]+t];return n}var i=0;function o(t){var e=+new Date,n=Math.max(0,16-(e-i));return i=e+n,s.setTimeout(t,n)}var r=s.requestAnimationFrame||t("RequestAnimationFrame")||o,e=s.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){s.clearTimeout(t)};f.Util.requestAnimFrame=function(t,e,n,i){if(t=f.bind(t,e),!n||r!==o)return r.call(s,t,i);t()},f.Util.cancelAnimFrame=function(t){t&&e.call(s,t)}}(),f.extend=f.Util.extend,f.bind=f.Util.bind,f.stamp=f.Util.stamp,f.setOptions=f.Util.setOptions,f.Class=function(){},f.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var i=new n;for(var o in(i.constructor=e).prototype=i,this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);t.statics&&(f.extend(e,t.statics),delete t.statics),t.includes&&(f.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=f.extend({},i.options,t.options)),f.extend(i,t),i._initHooks=[];var r=this;return e.__super__=r.prototype,i.callInitHooks=function(){if(!this._initHooksCalled){r.prototype.callInitHooks&&r.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;t<e;t++)i._initHooks[t].call(this)}},e},f.Class.include=function(t){f.extend(this.prototype,t)},f.Class.mergeOptions=function(t){f.extend(this.prototype.options,t)},f.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var i,o,r,l,u,c,h,p,m,g,v,y,b,_,w,x,C,k,$,T,S,M,D,L="_leaflet_events";f.Mixin={},f.Mixin.Events={addEventListener:function(t,e,n){if(f.Util.invokeEach(t,this.addEventListener,this,e,n))return this;var i,o,r,s,a,l,u,c=this[L]=this[L]||{},h=n&&n!==this&&f.stamp(n);for(i=0,o=(t=f.Util.splitWords(t)).length;i<o;i++)r={action:e,context:n||this},s=t[i],h?(l=(a=s+"_idx")+"_len",(u=c[a]=c[a]||{})[h]||(u[h]=[],c[l]=(c[l]||0)+1),u[h].push(r)):(c[s]=c[s]||[],c[s].push(r));return this},hasEventListeners:function(t){var e=this[L];return!!e&&(t in e&&0<e[t].length||t+"_idx"in e&&0<e[t+"_idx_len"])},removeEventListener:function(t,e,n){if(!this[L])return this;if(!t)return this.clearAllEventListeners();if(f.Util.invokeEach(t,this.removeEventListener,this,e,n))return this;var i,o,r,s,a,l,u,c,h=this[L],d=n&&n!==this&&f.stamp(n);for(i=0,o=(t=f.Util.splitWords(t)).length;i<o;i++)if(u=(l=(r=t[i])+"_idx")+"_len",c=h[l],e){if(s=d&&c?c[d]:h[r]){for(a=s.length-1;0<=a;a--)s[a].action!==e||n&&s[a].context!==n||(s.splice(a,1)[0].action=f.Util.falseFn);n&&c&&0===s.length&&(delete c[d],h[u]--)}}else delete h[r],delete h[l],delete h[u];return this},clearAllEventListeners:function(){return delete this[L],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var n,i,o,r,s,a=f.Util.extend({},e,{type:t,target:this}),l=this[L];if(l[t])for(i=0,o=(n=l[t].slice()).length;i<o;i++)n[i].action.call(n[i].context,a);for(s in r=l[t+"_idx"])if(n=r[s].slice())for(i=0,o=n.length;i<o;i++)n[i].action.call(n[i].context,a);return this},addOneTimeEventListener:function(t,e,n){if(f.Util.invokeEach(t,this.addOneTimeEventListener,this,e,n))return this;var i=f.bind(function(){this.removeEventListener(t,e,n).removeEventListener(t,i,n)},this);return this.addEventListener(t,e,n).addEventListener(t,i,n)}},f.Mixin.Events.on=f.Mixin.Events.addEventListener,f.Mixin.Events.off=f.Mixin.Events.removeEventListener,f.Mixin.Events.once=f.Mixin.Events.addOneTimeEventListener,f.Mixin.Events.fire=f.Mixin.Events.fireEvent,o=(i="ActiveXObject"in s)&&!d.addEventListener,r=navigator.userAgent.toLowerCase(),l=-1!==r.indexOf("webkit"),u=-1!==r.indexOf("chrome"),c=-1!==r.indexOf("phantom"),h=-1!==r.indexOf("android"),p=-1!==r.search("android [23]"),m=-1!==r.indexOf("gecko"),g=typeof orientation!=a+"",v=!s.PointerEvent&&s.MSPointerEvent,y=s.PointerEvent&&s.navigator.pointerEnabled||v,b="devicePixelRatio"in s&&1<s.devicePixelRatio||"matchMedia"in s&&s.matchMedia("(min-resolution:144dpi)")&&s.matchMedia("(min-resolution:144dpi)").matches,_=d.documentElement,w=i&&"transition"in _.style,x="WebKitCSSMatrix"in s&&"m11"in new s.WebKitCSSMatrix&&!p,C="MozPerspective"in _.style,k="OTransition"in _.style,$=!s.L_DISABLE_3D&&(w||x||C||k)&&!c,T=!s.L_NO_TOUCH&&!c&&(y||"ontouchstart"in s||s.DocumentTouch&&d instanceof s.DocumentTouch),f.Browser={ie:i,ielt9:o,webkit:l,gecko:m&&!l&&!s.opera&&!i,android:h,android23:p,chrome:u,ie3d:w,webkit3d:x,gecko3d:C,opera3d:k,any3d:$,mobile:g,mobileWebkit:g&&l,mobileWebkit3d:g&&x,mobileOpera:g&&s.opera,touch:T,msPointer:v,pointer:y,retina:b},f.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},f.Point.prototype={clone:function(){return new f.Point(this.x,this.y)},add:function(t){return this.clone()._add(f.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(f.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){var e=(t=f.point(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=f.point(t)).x===this.x&&t.y===this.y},contains:function(t){return t=f.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+f.Util.formatNum(this.x)+", "+f.Util.formatNum(this.y)+")"}},f.point=function(t,e,n){return t instanceof f.Point?t:f.Util.isArray(t)?new f.Point(t[0],t[1]):t===a||null===t?t:new f.Point(t,e,n)},f.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},f.Bounds.prototype={extend:function(t){return t=f.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new f.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new f.Point(this.min.x,this.max.y)},getTopRight:function(){return new f.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof f.Point?f.point(t):f.bounds(t))instanceof f.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=f.bounds(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>=e.x&&i.x<=n.x,s=o.y>=e.y&&i.y<=n.y;return r&&s},isValid:function(){return!(!this.min||!this.max)}},f.bounds=function(t,e){return!t||t instanceof f.Bounds?t:new f.Bounds(t,e)},f.Transformation=function(t,e,n,i){this._a=t,this._b=e,this._c=n,this._d=i},f.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new f.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},f.DomUtil={get:function(t){return"string"==typeof t?d.getElementById(t):t},getStyle:function(t,e){var n=t.style[e];if(!n&&t.currentStyle&&(n=t.currentStyle[e]),(!n||"auto"===n)&&d.defaultView){var i=d.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n},getViewportOffset:function(t){var e,n=0,i=0,o=t,r=d.body,s=d.documentElement;do{if(n+=o.offsetTop||0,i+=o.offsetLeft||0,n+=parseInt(f.DomUtil.getStyle(o,"borderTopWidth"),10)||0,i+=parseInt(f.DomUtil.getStyle(o,"borderLeftWidth"),10)||0,e=f.DomUtil.getStyle(o,"position"),o.offsetParent===r&&"absolute"===e)break;if("fixed"===e){n+=r.scrollTop||s.scrollTop||0,i+=r.scrollLeft||s.scrollLeft||0;break}if("relative"===e&&!o.offsetLeft){var a=f.DomUtil.getStyle(o,"width"),l=f.DomUtil.getStyle(o,"max-width"),u=o.getBoundingClientRect();"none"===a&&"none"===l||(i+=u.left+o.clientLeft),n+=u.top+(r.scrollTop||s.scrollTop||0);break}o=o.offsetParent}while(o);o=t;do{if(o===r)break;n-=o.scrollTop||0,i-=o.scrollLeft||0,o=o.parentNode}while(o);return new f.Point(i,n)},documentIsLtr:function(){return f.DomUtil._docIsLtrCached||(f.DomUtil._docIsLtrCached=!0,f.DomUtil._docIsLtr="ltr"===f.DomUtil.getStyle(d.body,"direction")),f.DomUtil._docIsLtr},create:function(t,e,n){var i=d.createElement(t);return i.className=e,n&&n.appendChild(i),i},hasClass:function(t,e){if(t.classList!==a)return t.classList.contains(e);var n=f.DomUtil._getClass(t);return 0<n.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==a)for(var n=f.Util.splitWords(e),i=0,o=n.length;i<o;i++)t.classList.add(n[i]);else if(!f.DomUtil.hasClass(t,e)){var r=f.DomUtil._getClass(t);f.DomUtil._setClass(t,(r?r+" ":"")+e)}},removeClass:function(t,e){t.classList!==a?t.classList.remove(e):f.DomUtil._setClass(t,f.Util.trim((" "+f.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===a?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===a?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}},testProp:function(t){for(var e=d.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},getTranslateString:function(t){var e=f.Browser.webkit3d,n=(e?",0":"")+")";return"translate"+(e?"3d":"")+"("+t.x+"px,"+t.y+"px"+n},getScaleString:function(t,e){return f.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t)))+(" scale("+t+") ")},setPosition:function(t,e,n){t._leaflet_pos=e,!n&&f.Browser.any3d?t.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},f.DomUtil.TRANSFORM=f.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),f.DomUtil.TRANSITION=f.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),f.DomUtil.TRANSITION_END="webkitTransition"===f.DomUtil.TRANSITION||"OTransition"===f.DomUtil.TRANSITION?f.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in d)f.extend(f.DomUtil,{disableTextSelection:function(){f.DomEvent.on(s,"selectstart",f.DomEvent.preventDefault)},enableTextSelection:function(){f.DomEvent.off(s,"selectstart",f.DomEvent.preventDefault)}});else{var e=f.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);f.extend(f.DomUtil,{disableTextSelection:function(){if(e){var t=d.documentElement.style;this._userSelect=t[e],t[e]="none"}},enableTextSelection:function(){e&&(d.documentElement.style[e]=this._userSelect,delete this._userSelect)}})}f.extend(f.DomUtil,{disableImageDrag:function(){f.DomEvent.on(s,"dragstart",f.DomEvent.preventDefault)},enableImageDrag:function(){f.DomEvent.off(s,"dragstart",f.DomEvent.preventDefault)}})}(),f.LatLng=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,n!==a&&(this.alt=parseFloat(n))},f.extend(f.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),f.LatLng.prototype={equals:function(t){return!!t&&(t=f.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=f.LatLng.MAX_MARGIN)},toString:function(t){return"LatLng("+f.Util.formatNum(this.lat,t)+", "+f.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=f.latLng(t);var e=f.LatLng.DEG_TO_RAD,n=(t.lat-this.lat)*e,i=(t.lng-this.lng)*e,o=this.lat*e,r=t.lat*e,s=Math.sin(n/2),a=Math.sin(i/2),l=s*s+a*a*Math.cos(o)*Math.cos(r);return 12756274*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))},wrap:function(t,e){var n=this.lng;return n=(n+(e=e||180))%(e-(t=t||-180))+(n<t||n===e?e:t),new f.LatLng(this.lat,n)}},f.latLng=function(t,e){return t instanceof f.LatLng?t:f.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new f.LatLng(t[0],t[1],t[2]):null:t===a||null===t?t:"object"==typeof t&&"lat"in t?new f.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===a?null:new f.LatLng(t,e)},f.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},f.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=f.latLng(t);return(t=null!==e?e:f.latLngBounds(t))instanceof f.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new f.LatLng(t.lat,t.lng),this._northEast=new f.LatLng(t.lat,t.lng)):t instanceof f.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new f.LatLngBounds(new f.LatLng(e.lat-i,e.lng-o),new f.LatLng(n.lat+i,n.lng+o))},getCenter:function(){return new f.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new f.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new f.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof f.LatLng?f.latLng(t):f.latLngBounds(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof f.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=f.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&i.lat<=n.lat,s=o.lng>=e.lng&&i.lng<=n.lng;return r&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=f.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},f.latLngBounds=function(t,e){return!t||t instanceof f.LatLngBounds?t:new f.LatLngBounds(t,e)},f.Projection={},f.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=f.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=t.lng*e,r=i*e;return r=Math.log(Math.tan(Math.PI/4+r/2)),new f.Point(o,r)},unproject:function(t){var e=f.LatLng.RAD_TO_DEG,n=t.x*e,i=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new f.LatLng(i,n)}},f.Projection.LonLat={project:function(t){return new f.Point(t.lng,t.lat)},unproject:function(t){return new f.LatLng(t.y,t.x)}},f.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return f.point(e,e)}},f.CRS.Simple=f.extend({},f.CRS,{projection:f.Projection.LonLat,transformation:new f.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),f.CRS.EPSG3857=f.extend({},f.CRS,{code:"EPSG:3857",projection:f.Projection.SphericalMercator,transformation:new f.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){return this.projection.project(t).multiplyBy(6378137)}}),f.CRS.EPSG900913=f.extend({},f.CRS.EPSG3857,{code:"EPSG:900913"}),f.CRS.EPSG4326=f.extend({},f.CRS,{code:"EPSG:4326",projection:f.Projection.LonLat,transformation:new f.Transformation(1/360,.5,-1/360,.5)}),f.Map=f.Class.extend({includes:f.Mixin.Events,options:{crs:f.CRS.EPSG3857,fadeAnimation:f.DomUtil.TRANSITION&&!f.Browser.android23,trackResize:!0,markerZoomAnimation:f.DomUtil.TRANSITION&&f.Browser.any3d},initialize:function(t,e){e=f.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=f.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==a&&this.setView(f.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===a?this.getZoom():e,this._resetView(f.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),r=(t instanceof f.Point?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/i),s=this.containerPointToLatLng(o.add(r));return this.setView(s,e,{zoom:n})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():f.latLngBounds(t);var n=f.point(e.paddingTopLeft||e.padding||[0,0]),i=f.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));o=e.maxZoom?Math.min(e.maxZoom,o):o;var r=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o),l=this.unproject(s.add(a).divideBy(2).add(r),o);return this.setView(l,o,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(f.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=f.latLngBounds(t),(this.options.maxBounds=t)?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var n=this.getCenter(),i=this._limitCenter(n,this._zoom,t);return n.equals(i)?this:this.panTo(i,e)},addLayer:function(t){var e=f.stamp(t);return this._layers[e]||(!(this._layers[e]=t).options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&t instanceof f.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t)),this},removeLayer:function(t){var e=f.stamp(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&t instanceof f.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this))),this},hasLayer:function(t){return!!t&&f.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=f.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),i=e.divideBy(2).round(),o=n.divideBy(2).round(),r=i.subtract(o);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=a}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new f.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===a?this._layersMinZoom===a?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===a?this._layersMaxZoom===a?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=f.latLngBounds(t);var i,o=this.getMinZoom()-(e?1:0),r=this.getMaxZoom(),s=this.getSize(),a=t.getNorthWest(),l=t.getSouthEast(),u=!0;for(n=f.point(n||[0,0]);o++,i=this.project(l,o).subtract(this.project(a,o)).add(n),(u=e?i.x<s.x||i.y<s.y:s.contains(i))&&o<=r;);return u&&e?null:e?o:o-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new f.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new f.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===a?this._zoom:e,this.options.crs.latLngToPoint(f.latLng(t),e)},unproject:function(t,e){return e=e===a?this._zoom:e,this.options.crs.pointToLatLng(f.point(t),e)},layerPointToLatLng:function(t){var e=f.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(f.latLng(t))._round()._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return f.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return f.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(f.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(f.latLng(t)))},mouseEventToContainerPoint:function(t){return f.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=f.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;f.DomUtil.addClass(t,"leaflet-container"+(f.Browser.touch?" leaflet-touch":"")+(f.Browser.retina?" leaflet-retina":"")+(f.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=f.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(f.DomUtil.addClass(t.markerPane,e),f.DomUtil.addClass(t.shadowPane,e),f.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return f.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){for(var e=0,n=(t=t?f.Util.isArray(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_resetView:function(t,e,n,i){var o=this._zoom!==e;i||(this.fire("movestart"),o&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),n?this._initialTopLeftPoint._add(this._getMapPanePos()):f.DomUtil.setPosition(this._mapPane,new f.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var r=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),r&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(o||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(t){f.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,n=-1/0,i=this._getZoomSpan();for(t in this._zoomBoundLayers){var o=this._zoomBoundLayers[t];isNaN(o.options.minZoom)||(e=Math.min(e,o.options.minZoom)),isNaN(o.options.maxZoom)||(n=Math.max(n,o.options.maxZoom))}t===a?this._layersMaxZoom=this._layersMinZoom=a:(this._layersMaxZoom=n,this._layersMinZoom=e),i!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(f.DomEvent){t=t||"on",f.DomEvent[t](this._container,"click",this._onMouseClick,this);var e,n,i=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(e=0,n=i.length;e<n;e++)f.DomEvent[t](this._container,i[e],this._fireMouseEvent,this);this.options.trackResize&&f.DomEvent[t](s,"resize",this._onResize,this)}},_onResize:function(){f.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=f.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||f.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!f.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&f.DomEvent.preventDefault(t);var n=this.mouseEventToContainerPoint(t),i=this.containerPointToLayerPoint(n),o=this.layerPointToLatLng(i);this.fire(e,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return f.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewTopLeftPoint(n,e).add(this._getMapPanePos());return this.project(t,e)._subtract(i)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),r=new f.Bounds(i.subtract(o),i.add(o)),s=this._getBoundsOffset(r,n,e);return this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new f.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=this.project(e.getNorthWest(),n).subtract(t.min),o=this.project(e.getSouthEast(),n).subtract(t.max),r=this._rebound(i.x,-o.x),s=this._rebound(i.y,-o.y);return new f.Point(r,s)},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom();return Math.max(e,Math.min(n,t))}}),f.map=function(t,e){return new f.Map(t,e)},f.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=f.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=this.R_MAJOR,r=this.R_MINOR,s=t.lng*e*o,a=i*e,l=r/o,u=Math.sqrt(1-l*l),c=u*Math.sin(a);c=Math.pow((1-c)/(1+c),.5*u);var h=Math.tan(.5*(.5*Math.PI-a))/c;return a=-o*Math.log(h),new f.Point(s,a)},unproject:function(t){for(var e,n=f.LatLng.RAD_TO_DEG,i=this.R_MAJOR,o=this.R_MINOR,r=t.x*n/i,s=o/i,a=Math.sqrt(1-s*s),l=Math.exp(-t.y/i),u=Math.PI/2-2*Math.atan(l),c=15,h=.1;1e-7<Math.abs(h)&&0<--c;)e=a*Math.sin(u),u+=h=Math.PI/2-2*Math.atan(l*Math.pow((1-e)/(1+e),.5*a))-u;return new f.LatLng(u*n,r)}},f.CRS.EPSG3395=f.extend({},f.CRS,{code:"EPSG:3395",projection:f.Projection.Mercator,transformation:(S=f.Projection.Mercator.R_MAJOR,M=.5/(Math.PI*S),new f.Transformation(M,.5,-M,.5))}),f.TileLayer=f.Class.extend({includes:f.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:f.Browser.mobile,updateWhenIdle:f.Browser.mobile},initialize:function(t,e){(e=f.setOptions(this,e)).detectRetina&&f.Browser.retina&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,0<e.minZoom&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=f.latLngBounds(e.bounds)),this._url=t;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=f.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==a&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var n,i,o,r=t.children,s=-e(1/0,-1/0);for(i=0,o=r.length;i<o;i++)r[i]!==this._container&&(n=parseInt(r[i].style.zIndex,10),isNaN(n)||(s=e(s,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(s)?s:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(f.Browser.ielt9)for(t in e)f.DomUtil.setOpacity(e[t],this.options.opacity);else f.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=f.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=f.DomUtil.create("div",e,this._container),this._tileContainer=f.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,i=this.options.tileSize;return n&&n<e&&(i=Math.round(t.getZoomScale(e)/t.getZoomScale(n)*i)),i},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),n=t.getZoom(),i=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var o=f.bounds(e.min.divideBy(i)._floor(),e.max.divideBy(i)._floor());this._addTilesFromCenterOut(o),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(o)}}},_addTilesFromCenterOut:function(t){var e,n,i,o=[],r=t.getCenter();for(e=t.min.y;e<=t.max.y;e++)for(n=t.min.x;n<=t.max.x;n++)i=new f.Point(n,e),this._tileShouldBeLoaded(i)&&o.push(i);var s=o.length;if(0!==s){o.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)});var a=d.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=s,n=0;n<s;n++)this._addTile(o[n],a);this._tileContainer.appendChild(a)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var n=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=n.x)||t.y<0||t.y>=n.y)return!1}if(e.bounds){var i=this._getTileSize(),o=t.multiplyBy(i),r=o.add([i,i]),s=this._map.unproject(o),a=this._map.unproject(r);if(e.continuousWorld||e.noWrap||(s=s.wrap(),a=a.wrap()),!e.bounds.intersects([s,a]))return!1}return!0},_removeOtherTiles:function(t){var e,n,i,o;for(o in this._tiles)e=o.split(":"),n=parseInt(e[0],10),i=parseInt(e[1],10),(n<t.min.x||n>t.max.x||i<t.min.y||i>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(f.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),f.Browser.android||(e.onload=null,e.src=f.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var n=this._getTilePos(t),i=this._getTile();f.DomUtil.setPosition(i,n,f.Browser.chrome),this._tiles[t.x+":"+t.y]=i,this._loadTile(i,t),i.parentNode!==this._tileContainer&&e.appendChild(i)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),n=this._getTileSize();return t.multiplyBy(n).subtract(e)},getTileUrl:function(t){return f.Util.template(this._url,f.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&0<this._unusedTiles.length){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=f.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=f.Util.falseFn,f.Browser.ielt9&&this.options.opacity!==a&&f.DomUtil.setOpacity(t,this.options.opacity),f.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&f.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(f.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==f.Util.emptyImageUrl&&(f.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),f.tileLayer=function(t,e){return new f.TileLayer(t,e)},f.TileLayer.WMS=f.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var n=f.extend({},this.defaultWmsParams),i=e.tileSize||this.options.tileSize;for(var o in e.detectRetina&&f.Browser.retina?n.width=n.height=2*i:n.width=n.height=i,e)this.options.hasOwnProperty(o)||"crs"===o||(n[o]=e[o]);this.wmsParams=n,f.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,f.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,n=this.options.tileSize,i=t.multiplyBy(n),o=i.add([n,n]),r=this._crs.project(e.unproject(i,t.z)),s=this._crs.project(e.unproject(o,t.z)),a=1.3<=this._wmsVersion&&this._crs===f.CRS.EPSG4326?[s.y,r.x,r.y,s.x].join(","):[r.x,s.y,s.x,r.y].join(","),l=f.Util.template(this._url,{s:this._getSubdomain(t)});return l+f.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+a},setParams:function(t,e){return f.extend(this.wmsParams,t),e||this.redraw(),this}}),f.tileLayer.wms=function(t,e){return new f.TileLayer.WMS(t,e)},f.TileLayer.Canvas=f.TileLayer.extend({options:{async:!1},initialize:function(t){f.setOptions(this,t)},redraw:function(){for(var t in this._map&&(this._reset({hard:!0}),this._update()),this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=f.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=f.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),f.tileLayer.canvas=function(t){return new f.TileLayer.Canvas(t)},f.ImageOverlay=f.Class.extend({includes:f.Mixin.Events,options:{opacity:1},initialize:function(t,e,n){this._url=t,this._bounds=f.latLngBounds(e),f.setOptions(this,n)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&f.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=f.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&f.Browser.any3d?f.DomUtil.addClass(this._image,"leaflet-zoom-animated"):f.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),f.extend(this._image,{galleryimg:"no",onselectstart:f.Util.falseFn,onmousemove:f.Util.falseFn,onload:f.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,n=this._image,i=e.getZoomScale(t.zoom),o=this._bounds.getNorthWest(),r=this._bounds.getSouthEast(),s=e._latLngToNewLayerPoint(o,t.zoom,t.center),a=e._latLngToNewLayerPoint(r,t.zoom,t.center)._subtract(s),l=s._add(a._multiplyBy(.5*(1-1/i)));n.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(l)+" scale("+i+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);f.DomUtil.setPosition(t,e),t.style.width=n.x+"px",t.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){f.DomUtil.setOpacity(this._image,this.options.opacity)}}),f.imageOverlay=function(t,e,n){return new f.ImageOverlay(t,e,n)},f.Icon=f.Class.extend({options:{className:""},initialize:function(t){f.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n,i=this._getIconUrl(t);if(i)return n=e&&"IMG"===e.tagName?this._createImg(i,e):this._createImg(i),this._setIconStyles(n,t),n;if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null},_setIconStyles:function(t,e){var n,i=this.options,o=f.point(i[e+"Size"]);!(n="shadow"===e?f.point(i.shadowAnchor||i.iconAnchor):f.point(i.iconAnchor))&&o&&(n=o.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+i.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||d.createElement("img")).src=t,e},_getIconUrl:function(t){return f.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),f.icon=function(t){return new f.Icon(t)},f.Icon.Default=f.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];f.Browser.retina&&"icon"===t&&(t+="-2x");var n=f.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+t+".png"}}),f.Icon.Default.imagePath=function(){var t,e,n,i,o=d.getElementsByTagName("script"),r=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=o.length;t<e;t++)if((n=o[t].src).match(r))return((i=n.split(r)[0])?i+"/":"")+"images"}(),f.Marker=f.Class.extend({includes:f.Mixin.Events,options:{icon:new f.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){f.setOptions(this,e),this._latlng=f.latLng(t)},onAdd:function(t){(this._map=t).on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=f.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var t=this.options,e=this._map,n=e.options.zoomAnimation&&e.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",i=t.icon.createIcon(this._icon),o=!1;i!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(i.title=t.title),t.alt&&(i.alt=t.alt)),f.DomUtil.addClass(i,n),t.keyboard&&(i.tabIndex="0"),this._icon=i,this._initInteraction(),t.riseOnHover&&f.DomEvent.on(i,"mouseover",this._bringToFront,this).on(i,"mouseout",this._resetZIndex,this);var r=t.icon.createShadow(this._shadow),s=!1;r!==this._shadow&&(this._removeShadow(),s=!0),r&&f.DomUtil.addClass(r,n),this._shadow=r,t.opacity<1&&this._updateOpacity();var a=this._map._panes;o&&a.markerPane.appendChild(this._icon),r&&s&&a.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&f.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){f.DomUtil.setPosition(this._icon,t),this._shadow&&f.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];f.DomUtil.addClass(t,"leaflet-clickable"),f.DomEvent.on(t,"click",this._onMouseClick,this),f.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)f.DomEvent.on(t,e[n],this._fireMouseEvent,this);f.Handler.MarkerDrag&&(this.dragging=new f.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&f.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&f.DomEvent.preventDefault(t),"mousedown"!==t.type?f.DomEvent.stopPropagation(t):f.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){f.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&f.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),f.marker=function(t,e){return new f.Marker(t,e)},f.DivIcon=f.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:d.createElement("div"),n=this.options;return!1!==n.html?e.innerHTML=n.html:e.innerHTML="",n.bgPos&&(e.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),f.divIcon=function(t){return new f.DivIcon(t)},f.Map.mergeOptions({closePopupOnClick:!0}),f.Popup=f.Class.extend({includes:f.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){f.setOptions(this,t),this._source=e,this._animated=f.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&f.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&f.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),f.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&f.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=f.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",n=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=f.DomUtil.create("div",n);this.options.closeButton&&((t=this._closeButton=f.DomUtil.create("a",e+"-close-button",i)).href="#close",t.innerHTML="&#215;",f.DomEvent.disableClickPropagation(t),f.DomEvent.on(t,"click",this._onCloseButtonClick,this));var o=this._wrapper=f.DomUtil.create("div",e+"-content-wrapper",i);f.DomEvent.disableClickPropagation(o),this._contentNode=f.DomUtil.create("div",e+"-content",o),f.DomEvent.disableScrollPropagation(this._contentNode),f.DomEvent.on(o,"contextmenu",f.DomEvent.stopPropagation),this._tipContainer=f.DomUtil.create("div",e+"-tip-container",i),this._tip=f.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&o<i?(e.height=o+"px",f.DomUtil.addClass(t,r)):f.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,n=f.point(this.options.offset);e&&f.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);f.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,n=this._containerWidth,i=new f.Point(this._containerLeft,-e-this._containerBottom);this._animated&&i._add(f.DomUtil.getPosition(this._container));var o=t.layerPointToContainerPoint(i),r=f.point(this.options.autoPanPadding),s=f.point(this.options.autoPanPaddingTopLeft||r),a=f.point(this.options.autoPanPaddingBottomRight||r),l=t.getSize(),u=0,c=0;o.x+n+a.x>l.x&&(u=o.x+n-l.x+a.x),o.x-u-s.x<0&&(u=o.x-s.x),o.y+e+a.y>l.y&&(c=o.y+e-l.y+a.y),o.y-c-s.y<0&&(c=o.y-s.y),(u||c)&&t.fire("autopanstart").panBy([u,c])}},_onCloseButtonClick:function(t){this._close(),f.DomEvent.stop(t)}}),f.popup=function(t,e){return new f.Popup(t,e)},f.Map.include({openPopup:function(t,e,n){if(this.closePopup(),!(t instanceof f.Popup)){var i=t;t=new f.Popup(n).setLatLng(e).setContent(i)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),f.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var n=f.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(f.Popup.prototype.options.offset),e&&e.offset&&(n=n.add(e.offset)),e=f.extend({offset:n},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof f.Popup?(f.setOptions(t,e),(this._popup=t)._source=this):this._popup=new f.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),f.LayerGroup=f.Class.extend({initialize:function(t){var e,n;if(this._layers={},t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return f.stamp(t)}}),f.layerGroup=function(t){return new f.LayerGroup(t)},f.FeatureGroup=f.LayerGroup.extend({includes:f.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),"off"in t&&t.off(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new f.LatLngBounds;return this.eachLayer(function(t){e.extend(t instanceof f.Marker?t.getLatLng():t.getBounds())}),e},_propagateEvent:function(t){t=f.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),f.featureGroup=function(t){return new f.FeatureGroup(t)},f.Path=f.Class.extend({includes:[f.Mixin.Events],statics:{CLIP_PADDING:(D=((f.Browser.mobile?1280:2e3)/Math.max(s.outerWidth,s.outerHeight)-1)/2,Math.max(0,Math.min(.5,D)))},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){f.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,f.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return f.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),f.Map.include({_updatePathViewport:function(){var t=f.Path.CLIP_PADDING,e=this.getSize(),n=f.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),i=n.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new f.Bounds(n,i)}}),f.Path.SVG_NS="http://www.w3.org/2000/svg",f.Browser.svg=!(!d.createElementNS||!d.createElementNS(f.Path.SVG_NS,"svg").createSVGRect),f.Path=f.Path.extend({statics:{SVG:f.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,n=t.firstChild;return e&&n!==e&&t.insertBefore(e,n),this},getPathString:function(){},_createElement:function(t){return d.createElementNS(f.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&f.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){!f.Browser.svg&&f.Browser.vml||f.DomUtil.addClass(this._path,"leaflet-clickable"),f.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)f.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this._map&&this.hasEventListeners(t.type)){var e=this._map,n=e.mouseEventToContainerPoint(t),i=e.containerPointToLayerPoint(n),o=e.layerPointToLatLng(i);this.fire(t.type,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:t}),"contextmenu"===t.type&&f.DomEvent.preventDefault(t),"mousemove"!==t.type&&f.DomEvent.stopPropagation(t)}}}),f.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=f.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&f.Browser.any3d?(f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),n=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(n)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max,i=n.x-e.x,o=n.y-e.y,r=this._pathRoot,s=this._panes.overlayPane;f.Browser.mobileWebkit&&s.removeChild(r),f.DomUtil.setPosition(r,e),r.setAttribute("width",i),r.setAttribute("height",o),r.setAttribute("viewBox",[e.x,e.y,i,o].join(" ")),f.Browser.mobileWebkit&&s.appendChild(r)}}}),f.Path.include({bindPopup:function(t,e){return t instanceof f.Popup?this._popup=t:(this._popup&&!e||(this._popup=new f.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),f.Browser.vml=!f.Browser.svg&&function(){try{var t=d.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),f.Path=f.Browser.svg||!f.Browser.vml?f.Path:f.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return d.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return d.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return d.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");f.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&f.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,n=this.options,i=this._container;i.stroked=n.stroke,i.filled=n.fill,n.stroke?(t||((t=this._stroke=this._createElement("stroke")).endcap="round",i.appendChild(t)),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=f.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",n.lineCap&&(t.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(t.joinstyle=n.lineJoin)):t&&(i.removeChild(t),this._stroke=null),n.fill?(e||(e=this._fill=this._createElement("fill"),i.appendChild(e)),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(i.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),f.Map.include(f.Browser.svg||!f.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=d.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),f.Browser.canvas=!!d.createElement("canvas").getContext,f.Path=f.Path.SVG&&!s.L_PREFER_CANVAS||!f.Browser.canvas?f.Path:f.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return f.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!f.Path._updateRequest&&(f.Path._updateRequest=f.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){f.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color),t.lineCap&&(this._ctx.lineCap=t.lineCap),t.lineJoin&&(this._ctx.lineJoin=t.lineJoin)},_drawPath:function(){var t,e,n,i,o,r;for(this._ctx.beginPath(),t=0,n=this._parts.length;t<n;t++){for(e=0,i=this._parts[t].length;e<i;e++)o=this._parts[t][e],r=(0===e?"move":"line")+"To",this._ctx[r](o.x,o.y);this instanceof f.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill(e.fillRule||"evenodd")),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(t){this._containsPoint(t.layerPoint)&&this.fire(t.type,t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),f.Map.include(f.Path.SVG&&!s.L_PREFER_CANVAS||!f.Browser.canvas?{}:{_initPathRoot:function(){var t,e=this._pathRoot;e||((e=this._pathRoot=d.createElement("canvas")).style.position="absolute",(t=this._canvasCtx=e.getContext("2d")).lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max.subtract(e),i=this._pathRoot;f.DomUtil.setPosition(i,e),i.width=n.x,i.height=n.y,i.getContext("2d").translate(-e.x,-e.y)}}}),f.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,i=new(typeof Uint8Array!=a+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,this._simplifyDPStep(t,i,e,0,n-1);var o,r=[];for(o=0;o<n;o++)i[o]&&r.push(t[o]);return r},_simplifyDPStep:function(t,e,n,i,o){var r,s,a,l=0;for(s=i+1;s<=o-1;s++)l<(a=this._sqClosestPointOnSegment(t[s],t[i],t[o],!0))&&(r=s,l=a);n<l&&(e[r]=1,this._simplifyDPStep(t,e,n,i,r),this._simplifyDPStep(t,e,n,r,o))},_reducePoints:function(t,e){for(var n=[t[0]],i=1,o=0,r=t.length;i<r;i++)this._sqDist(t[i],t[o])>e&&(n.push(t[i]),o=i);return o<r-1&&n.push(t[r-1]),n},clipSegment:function(t,e,n,i){var o,r,s,a=i?this._lastCode:this._getBitCode(t,n),l=this._getBitCode(e,n);for(this._lastCode=l;;){if(!(a|l))return[t,e];if(a&l)return!1;o=a||l,r=this._getEdgeIntersection(t,e,o,n),s=this._getBitCode(r,n),o===a?(t=r,a=s):(e=r,l=s)}},_getEdgeIntersection:function(t,e,n,i){var o=e.x-t.x,r=e.y-t.y,s=i.min,a=i.max;return 8&n?new f.Point(t.x+o*(a.y-t.y)/r,a.y):4&n?new f.Point(t.x+o*(s.y-t.y)/r,s.y):2&n?new f.Point(a.x,t.y+r*(a.x-t.x)/o):1&n?new f.Point(s.x,t.y+r*(s.x-t.x)/o):void 0},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,n,i){var o,r=e.x,s=e.y,a=n.x-r,l=n.y-s,u=a*a+l*l;return 0<u&&(1<(o=((t.x-r)*a+(t.y-s)*l)/u)?(r=n.x,s=n.y):0<o&&(r+=a*o,s+=l*o)),a=t.x-r,l=t.y-s,i?a*a+l*l:new f.Point(r,s)}},f.Polyline=f.Path.extend({initialize:function(t,e){f.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;t<e;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,n="";t<e;t++)n+=this._getPathPartStr(this._parts[t]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(f.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,n,i=1/0,o=this._parts,r=null,s=0,a=o.length;s<a;s++)for(var l=o[s],u=1,c=l.length;u<c;u++){e=l[u-1],n=l[u];var h=f.LineUtil._sqClosestPointOnSegment(t,e,n,!0);h<i&&(i=h,r=f.LineUtil._sqClosestPointOnSegment(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getBounds:function(){return new f.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var n,i,o=e?t:[];for(n=0,i=t.length;n<i;n++){if(f.Util.isArray(t[n])&&"number"!=typeof t[n][0])return;o[n]=f.latLng(t[n])}return o},_initEvents:function(){f.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,n=f.Path.VML,i=0,o=t.length,r="";i<o;i++)e=t[i],n&&e._round(),r+=(i?"L":"M")+e.x+" "+e.y;return r},_clipPoints:function(){var t,e,n,i=this._originalPoints,o=i.length;if(this.options.noClip)this._parts=[i];else{this._parts=[];var r=this._parts,s=this._map._pathViewport,a=f.LineUtil;for(e=t=0;t<o-1;t++)(n=a.clipSegment(i[t],i[t+1],s,t))&&(r[e]=r[e]||[],r[e].push(n[0]),n[1]===i[t+1]&&t!==o-2||(r[e].push(n[1]),e++))}},_simplifyPoints:function(){for(var t=this._parts,e=f.LineUtil,n=0,i=t.length;n<i;n++)t[n]=e.simplify(t[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),f.Path.prototype._updatePath.call(this))}}),f.polyline=function(t,e){return new f.Polyline(t,e)},f.PolyUtil={},f.PolyUtil.clipPolygon=function(t,e){var n,i,o,r,s,a,l,u,c,h=[1,4,2,8],d=f.LineUtil;for(i=0,l=t.length;i<l;i++)t[i]._code=d._getBitCode(t[i],e);for(r=0;r<4;r++){for(u=h[r],n=[],i=0,o=(l=t.length)-1;i<l;o=i++)s=t[i],a=t[o],s._code&u?a._code&u||((c=d._getEdgeIntersection(a,s,u,e))._code=d._getBitCode(c,e),n.push(c)):(a._code&u&&((c=d._getEdgeIntersection(a,s,u,e))._code=d._getBitCode(c,e),n.push(c)),n.push(s));t=n}return t},f.Polygon=f.Polyline.extend({options:{fill:!0},initialize:function(t,e){f.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,n,i;if(t&&f.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,n=this._holes.length;e<n;e++)(i=this._holes[e]=this._convertLatLngs(this._holes[e]))[0].equals(i[i.length-1])&&i.pop();2<=(t=this._latlngs).length&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){var t,e,n,i;if(f.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(t=0,n=this._holes.length;t<n;t++)for(this._holePoints[t]=[],e=0,i=this._holes[t].length;e<i;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])},setLatLngs:function(t){return t&&f.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):f.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var n=0,i=this._parts.length;n<i;n++){var o=f.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);o.length&&e.push(o)}this._parts=e}},_getPathPartStr:function(t){return f.Polyline.prototype._getPathPartStr.call(this,t)+(f.Browser.svg?"z":"x")}}),f.polygon=function(t,e){return new f.Polygon(t,e)},function(){function t(t){return f.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var n=0,i=e.length;for(this.eachLayer(function(t){n<i?t.setLatLngs(e[n++]):this.removeLayer(t)},this);n<i;)this.addLayer(new t(e[n++],this._options));return this},getLatLngs:function(){var e=[];return this.eachLayer(function(t){e.push(t.getLatLngs())}),e}})}f.MultiPolyline=t(f.Polyline),f.MultiPolygon=t(f.Polygon),f.multiPolyline=function(t,e){return new f.MultiPolyline(t,e)},f.multiPolygon=function(t,e){return new f.MultiPolygon(t,e)}}(),f.Rectangle=f.Polygon.extend({initialize:function(t,e){f.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=f.latLngBounds(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),f.rectangle=function(t,e){return new f.Rectangle(t,e)},f.Circle=f.Path.extend({initialize:function(t,e,n){f.Path.prototype.initialize.call(this,n),this._latlng=f.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=f.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,n=this._latlng;return new f.LatLngBounds([n.lat-e,n.lng-t],[n.lat+e,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":f.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(f.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y}}),f.circle=function(t,e,n){return new f.Circle(t,e,n)},f.CircleMarker=f.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){f.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){f.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return f.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),f.circleMarker=function(t,e){return new f.CircleMarker(t,e)},f.Polyline.include(f.Path.CANVAS?{_containsPoint:function(t,e){var n,i,o,r,s,a,l=this.options.weight/2;for(f.Browser.touch&&(l+=10),n=0,r=this._parts.length;n<r;n++)for(i=0,o=(s=(a=this._parts[n]).length)-1;i<s;o=i++)if((e||0!==i)&&f.LineUtil.pointToSegmentDistance(t,a[o],a[i])<=l)return!0;return!1}}:{}),f.Polygon.include(f.Path.CANVAS?{_containsPoint:function(t){var e,n,i,o,r,s,a,l,u=!1;if(f.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(o=0,a=this._parts.length;o<a;o++)for(r=0,s=(l=(e=this._parts[o]).length)-1;r<l;s=r++)n=e[r],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u}}:{}),f.Circle.include(f.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,n=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+n}}:{}),f.CircleMarker.include(f.Path.CANVAS?{_updateStyle:function(){f.Path.prototype._updateStyle.call(this)}}:{}),f.GeoJSON=f.FeatureGroup.extend({initialize:function(t,e){f.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=f.Util.isArray(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)((i=o[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(o[e]);return this}var r=this.options;if(!r.filter||r.filter(t)){var s=f.GeoJSON.geometryToLayer(t,r.pointToLayer,r.coordsToLatLng,r);return s.feature=f.GeoJSON.asFeature(t),s.defaultOptions=s.options,this.resetStyle(s),r.onEachFeature&&r.onEachFeature(t,s),this.addLayer(s)}},resetStyle:function(t){var e=this.options.style;e&&(f.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(e){this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),f.extend(f.GeoJSON,{geometryToLayer:function(t,e,n,i){var o,r,s,a,l="Feature"===t.type?t.geometry:t,u=l.coordinates,c=[];switch(n=n||this.coordsToLatLng,l.type){case"Point":return o=n(u),e?e(t,o):new f.Marker(o);case"MultiPoint":for(s=0,a=u.length;s<a;s++)o=n(u[s]),c.push(e?e(t,o):new f.Marker(o));return new f.FeatureGroup(c);case"LineString":return r=this.coordsToLatLngs(u,0,n),new f.Polyline(r,i);case"Polygon":if(2===u.length&&!u[1].length)throw new Error("Invalid GeoJSON object.");return r=this.coordsToLatLngs(u,1,n),new f.Polygon(r,i);case"MultiLineString":return r=this.coordsToLatLngs(u,1,n),new f.MultiPolyline(r,i);case"MultiPolygon":return r=this.coordsToLatLngs(u,2,n),new f.MultiPolygon(r,i);case"GeometryCollection":for(s=0,a=l.geometries.length;s<a;s++)c.push(this.geometryToLayer({geometry:l.geometries[s],type:"Feature",properties:t.properties},e,n,i));return new f.FeatureGroup(c);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new f.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){var i,o,r,s=[];for(o=0,r=t.length;o<r;o++)i=e?this.coordsToLatLngs(t[o],e-1,n):(n||this.coordsToLatLng)(t[o]),s.push(i);return s},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==a&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(f.GeoJSON.latLngToCoords(t[n]));return e},getFeature:function(t,e){return t.feature?f.extend({},t.feature,{geometry:e}):f.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var E={toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"Point",coordinates:f.GeoJSON.latLngToCoords(this.getLatLng())})}};f.Marker.include(E),f.Circle.include(E),f.CircleMarker.include(E),f.Polyline.include({toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"LineString",coordinates:f.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),f.Polygon.include({toGeoJSON:function(){var t,e,n,i=[f.GeoJSON.latLngsToCoords(this.getLatLngs())];if(i[0].push(i[0][0]),this._holes)for(t=0,e=this._holes.length;t<e;t++)(n=f.GeoJSON.latLngsToCoords(this._holes[t])).push(n[0]),i.push(n);return f.GeoJSON.getFeature(this,{type:"Polygon",coordinates:i})}}),function(){function o(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),f.GeoJSON.getFeature(this,{type:t,coordinates:e})}}f.MultiPolyline.include({toGeoJSON:o("MultiLineString")}),f.MultiPolygon.include({toGeoJSON:o("MultiPolygon")}),f.LayerGroup.include({toGeoJSON:function(){var e,t=this.feature&&this.feature.geometry,n=[];if(t&&"MultiPoint"===t.type)return o("MultiPoint").call(this);var i=t&&"GeometryCollection"===t.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),n.push(i?e.geometry:f.GeoJSON.asFeature(e)))}),i?f.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}})}(),f.geoJson=function(t,e){return new f.GeoJSON(t,e)},f.DomEvent={addListener:function(e,t,n,i){var o,r,s,a=f.stamp(n),l="_leaflet_"+t+a;return e[l]?this:(o=function(t){return n.call(i||e,t||f.DomEvent._getEvent())},f.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,o,a):(f.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener&&this.addDoubleTapListener(e,o,a),"addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",o,!1),e.addEventListener(t,o,!1)):"mouseenter"===t||"mouseleave"===t?(r=o,s="mouseenter"===t?"mouseover":"mouseout",o=function(t){if(f.DomEvent._checkMouse(e,t))return r(t)},e.addEventListener(s,o,!1)):("click"===t&&f.Browser.android&&(r=o,o=function(t){return f.DomEvent._filterClick(t,r)}),e.addEventListener(t,o,!1)):"attachEvent"in e&&e.attachEvent("on"+t,o),e[l]=o,this))},removeListener:function(t,e,n){var i=f.stamp(n),o="_leaflet_"+e+i,r=t[o];return r&&(f.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,i):f.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",r,!1),t.removeEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1):t.removeEventListener(e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[o]=null),this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,f.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=f.DomEvent.stopPropagation;return f.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=f.DomEvent.stopPropagation,n=f.Draggable.START.length-1;0<=n;n--)f.DomEvent.on(t,f.Draggable.START[n],e);return f.DomEvent.on(t,"click",f.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return f.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new f.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new f.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){f.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t},_getEvent:function(){var t=s.event;if(!t)for(var e=arguments.callee.caller;e&&(!(t=e.arguments[0])||s.Event!==t.constructor);)e=e.caller;return t},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent.timeStamp,i=f.DomEvent._lastClick&&n-f.DomEvent._lastClick;if(!(i&&100<i&&i<500||t.target._simulatedClick&&!t._simulated))return f.DomEvent._lastClick=n,e(t);f.DomEvent.stop(t)}},f.DomEvent.on=f.DomEvent.addListener,f.DomEvent.off=f.DomEvent.removeListener,f.Draggable=f.Class.extend({includes:f.Mixin.Events,statics:{START:f.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=f.Draggable.START.length-1;0<=t;t--)f.DomEvent.on(this._dragStartTarget,f.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=f.Draggable.START.length-1;0<=t;t--)f.DomEvent.off(this._dragStartTarget,f.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(f.DomEvent.stopPropagation(t),!f.Draggable._disabled&&(f.DomUtil.disableImageDrag(),f.DomUtil.disableTextSelection(),!this._moving))){var e=t.touches?t.touches[0]:t;this._startPoint=new f.Point(e.clientX,e.clientY),this._startPos=this._newPos=f.DomUtil.getPosition(this._element),f.DomEvent.on(d,f.Draggable.MOVE[t.type],this._onMove,this).on(d,f.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&1<t.touches.length)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new f.Point(e.clientX,e.clientY).subtract(this._startPoint);(n.x||n.y)&&(f.Browser.touch&&Math.abs(n.x)+Math.abs(n.y)<3||(f.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=f.DomUtil.getPosition(this._element).subtract(n),f.DomUtil.addClass(d.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,f.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))}},_updatePosition:function(){this.fire("predrag"),f.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){for(var t in f.DomUtil.removeClass(d.body,"leaflet-dragging"),this._lastTarget&&(f.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),f.Draggable.MOVE)f.DomEvent.off(d,f.Draggable.MOVE[t],this._onMove).off(d,f.Draggable.END[t],this._onUp);f.DomUtil.enableImageDrag(),f.DomUtil.enableTextSelection(),this._moved&&this._moving&&(f.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),f.Handler=f.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),f.Map.mergeOptions({dragging:!0,inertia:!f.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:f.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),f.Map.Drag=f.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new f.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),200<t-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,s=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=+new Date-this._lastTime,o=!n.inertia||i>n.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),o)e.fire("moveend");else{var r=this._lastPos.subtract(this._positions[0]),s=(this._lastTime+i-this._times[0])/1e3,a=n.easeLinearity,l=r.multiplyBy(a/s),u=l.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,u),h=l.multiplyBy(c/u),d=c/(n.inertiaDeceleration*a),p=h.multiplyBy(-d/2).round();p.x&&p.y?(p=e._limitOffset(p,e.options.maxBounds),f.Util.requestAnimFrame(function(){e.panBy(p,{duration:d,easeLinearity:a,noMoveStart:!0})})):e.fire("moveend")}}}),f.Map.addInitHook("addHandler","dragging",f.Map.Drag),f.Map.mergeOptions({doubleClickZoom:!0}),f.Map.DoubleClickZoom=f.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}}),f.Map.addInitHook("addHandler","doubleClickZoom",f.Map.DoubleClickZoom),f.Map.mergeOptions({scrollWheelZoom:!0}),f.Map.ScrollWheelZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),f.DomEvent.on(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault),this._delta=0},removeHooks:function(){f.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),f.DomEvent.off(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=f.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f.bind(this._performZoom,this),n),f.DomEvent.preventDefault(t),f.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,n=t.getZoom();e=0<e?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(n+e)-n,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(n+e):t.setZoomAround(this._lastMousePos,n+e))}}),f.Map.addInitHook("addHandler","scrollWheelZoom",f.Map.ScrollWheelZoom),f.extend(f.DomEvent,{_touchstart:f.Browser.msPointer?"MSPointerDown":f.Browser.pointer?"pointerdown":"touchstart",_touchend:f.Browser.msPointer?"MSPointerUp":f.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,r,e){var s,a,l=!1,n=this._touchstart,i=this._touchend,u=[];function o(t){if(!(1<(f.Browser.pointer?(u.push(t.pointerId),u.length):t.touches.length))){var e=Date.now(),n=e-(s||e);a=t.touches?t.touches[0]:t,l=0<n&&n<=250,s=e}}function c(t){if(f.Browser.pointer){var e=u.indexOf(t.pointerId);if(-1===e)return;u.splice(e,1)}if(l){if(f.Browser.pointer){var n,i={};for(var o in a)n=a[o],i[o]="function"==typeof n?n.bind(a):n;a=i}a.type="dblclick",r(a),s=null}}t["_leaflet_"+n+e]=o,t["_leaflet_"+i+e]=c;var h=f.Browser.pointer?d.documentElement:t;return t.addEventListener(n,o,!1),h.addEventListener(i,c,!1),f.Browser.pointer&&h.addEventListener(f.DomEvent.POINTER_CANCEL,c,!1),this},removeDoubleTapListener:function(t,e){var n="_leaflet_";return t.removeEventListener(this._touchstart,t[n+this._touchstart+e],!1),(f.Browser.pointer?d.documentElement:t).removeEventListener(this._touchend,t[n+this._touchend+e],!1),f.Browser.pointer&&d.documentElement.removeEventListener(f.DomEvent.POINTER_CANCEL,t[n+this._touchend+e],!1),this}}),f.extend(f.DomEvent,{POINTER_DOWN:f.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:f.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:f.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:f.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,n,i){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,n,i);case"touchend":return this.addPointerListenerEnd(t,e,n,i);case"touchmove":return this.addPointerListenerMove(t,e,n,i);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,e,i,n){var o=this._pointers,r=function(t){"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&f.DomEvent.preventDefault(t);for(var e=!1,n=0;n<o.length;n++)if(o[n].pointerId===t.pointerId){e=!0;break}e||o.push(t),t.touches=o.slice(),t.changedTouches=[t],i(t)};if(t["_leaflet_touchstart"+n]=r,t.addEventListener(this.POINTER_DOWN,r,!1),!this._pointerDocumentListener){var s=function(t){for(var e=0;e<o.length;e++)if(o[e].pointerId===t.pointerId){o.splice(e,1);break}};d.documentElement.addEventListener(this.POINTER_UP,s,!1),d.documentElement.addEventListener(this.POINTER_CANCEL,s,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,n,i){var o=this._pointers;function r(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<o.length;e++)if(o[e].pointerId===t.pointerId){o[e]=t;break}t.touches=o.slice(),t.changedTouches=[t],n(t)}}return t["_leaflet_touchmove"+i]=r,t.addEventListener(this.POINTER_MOVE,r,!1),this},addPointerListenerEnd:function(t,e,n,i){var o=this._pointers,r=function(t){for(var e=0;e<o.length;e++)if(o[e].pointerId===t.pointerId){o.splice(e,1);break}t.touches=o.slice(),t.changedTouches=[t],n(t)};return t["_leaflet_touchend"+i]=r,t.addEventListener(this.POINTER_UP,r,!1),t.addEventListener(this.POINTER_CANCEL,r,!1),this},removePointerListener:function(t,e,n){var i=t["_leaflet_"+e+n];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,i,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,i,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,i,!1),t.removeEventListener(this.POINTER_CANCEL,i,!1)}return this}}),f.Map.mergeOptions({touchZoom:f.Browser.touch&&!f.Browser.android23,bounceAtZoomLimits:!0}),f.Map.TouchZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),i=e.mouseEventToLayerPoint(t.touches[1]),o=e._getCenterLayerPoint();this._startCenter=n.add(i)._divideBy(2),this._startDist=n.distanceTo(i),this._moved=!1,this._zooming=!0,this._centerOffset=o.subtract(this._startCenter),e._panAnim&&e._panAnim.stop(),f.DomEvent.on(d,"touchmove",this._onTouchMove,this).on(d,"touchend",this._onTouchEnd,this),f.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),i=e.mouseEventToLayerPoint(t.touches[1]);this._scale=n.distanceTo(i)/this._startDist,this._delta=n._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(!e.options.bounceAtZoomLimits&&(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&1<this._scale)||(this._moved||(f.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),f.DomEvent.preventDefault(t)))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),i=t.getScaleZoom(this._scale);t._animateZoom(n,i,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(this._moved&&this._zooming){var t=this._map;this._zooming=!1,f.DomUtil.removeClass(t._mapPane,"leaflet-touching"),f.Util.cancelAnimFrame(this._animRequest),f.DomEvent.off(d,"touchmove",this._onTouchMove).off(d,"touchend",this._onTouchEnd);var e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),i=t.getZoom(),o=t.getScaleZoom(this._scale)-i,r=0<o?Math.ceil(o):Math.floor(o),s=t._limitZoom(i+r),a=t.getZoomScale(s)/this._scale;t._animateZoom(n,s,e,a)}else this._zooming=!1},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),f.Map.addInitHook("addHandler","touchZoom",f.Map.TouchZoom),f.Map.mergeOptions({tap:!0,tapTolerance:15}),f.Map.Tap=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(f.DomEvent.preventDefault(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new f.Point(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&f.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(f.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),f.DomEvent.on(d,"touchmove",this._onMove,this).on(d,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),f.DomEvent.off(d,"touchmove",this._onMove,this).off(d,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&f.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new f.Point(e.clientX,e.clientY)},_simulateEvent:function(t,e){var n=d.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,s,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}),f.Browser.touch&&!f.Browser.pointer&&f.Map.addInitHook("addHandler","tap",f.Map.Tap),f.Map.mergeOptions({boxZoom:!0}),f.Map.BoxZoom=f.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){f.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){f.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){if(this._moved=!1,!t.shiftKey||1!==t.which&&1!==t.button)return!1;f.DomUtil.disableTextSelection(),f.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),f.DomEvent.on(d,"mousemove",this._onMouseMove,this).on(d,"mouseup",this._onMouseUp,this).on(d,"keydown",this._onKeyDown,this)},_onMouseMove:function(t){this._moved||(this._box=f.DomUtil.create("div","leaflet-zoom-box",this._pane),f.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,n=this._box,i=this._map.mouseEventToLayerPoint(t),o=i.subtract(e),r=new f.Point(Math.min(i.x,e.x),Math.min(i.y,e.y));f.DomUtil.setPosition(n,r),this._moved=!0,n.style.width=Math.max(0,Math.abs(o.x)-4)+"px",n.style.height=Math.max(0,Math.abs(o.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),f.DomUtil.enableTextSelection(),f.DomUtil.enableImageDrag(),f.DomEvent.off(d,"mousemove",this._onMouseMove).off(d,"mouseup",this._onMouseUp).off(d,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,n=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(n)){var i=new f.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(n));e.fitBounds(i),e.fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),f.Map.addInitHook("addHandler","boxZoom",f.Map.BoxZoom),f.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),f.Map.Keyboard=f.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),f.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;f.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var t=d.body,e=d.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),s.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){f.DomEvent.on(d,"keydown",this._onKeyDown,this)},_removeHooks:function(){f.DomEvent.off(d,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[e]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(e in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[e])}f.DomEvent.stop(t)}}),f.Map.addInitHook("addHandler","keyboard",f.Map.Keyboard),f.Handler.MarkerDrag=f.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new f.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),f.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),f.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,n=f.DomUtil.getPosition(t._icon),i=t._map.layerPointToLatLng(n);e&&f.DomUtil.setPosition(e,n),t._latlng=i,t.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),f.Control=f.Class.extend({options:{position:"topright"},initialize:function(t){f.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return f.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},removeFrom:function(t){var e=this.getPosition();return t._controlCorners[e].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),f.control=function(t){return new f.Control(t)},f.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){var i=this._controlCorners={},o="leaflet-",r=this._controlContainer=f.DomUtil.create("div",o+"control-container",this._container);function t(t,e){var n=o+t+" "+o+e;i[t+e]=f.DomUtil.create("div",n,r)}t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),f.Control.Zoom=f.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=f.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",n,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,n,i,o,r){var s=f.DomUtil.create("a",n,i);s.innerHTML=t,s.href="#",s.title=e;var a=f.DomEvent.stopPropagation;return f.DomEvent.on(s,"click",a).on(s,"mousedown",a).on(s,"dblclick",a).on(s,"click",f.DomEvent.preventDefault).on(s,"click",o,r).on(s,"click",this._refocusOnMap,r),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";f.DomUtil.removeClass(this._zoomInButton,e),f.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&f.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&f.DomUtil.addClass(this._zoomInButton,e)}}),f.Map.mergeOptions({zoomControl:!0}),f.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new f.Control.Zoom,this.addControl(this.zoomControl))}),f.control.zoom=function(t){return new f.Control.Zoom(t)},f.Control.Attribution=f.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){f.setOptions(this,t),this._attributions={}},onAdd:function(t){for(var e in this._container=f.DomUtil.create("div","leaflet-control-attribution"),f.DomEvent.disableClickPropagation(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){if(t)return this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this},removeAttribution:function(t){if(t)return this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),f.Map.mergeOptions({attributionControl:!0}),f.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new f.Control.Attribution).addTo(this))}),f.control.attribution=function(t){return new f.Control.Attribution(t)},f.Control.Scale=f.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",n=f.DomUtil.create("div",e),i=this.options;return this._addScales(i,e,n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=f.DomUtil.create("div",e+"-line",n)),t.imperial&&(this._iScale=f.DomUtil.create("div",e+"-line",n))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180)*(t.getNorthEast().lng-t.getSouthWest().lng)/180,i=this._map.getSize(),o=this.options,r=0;0<i.x&&(r=n*(o.maxWidth/i.x)),this._updateScales(o,r)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=e<1e3?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,n,i,o=3.2808399*t,r=this._iScale;r.innerHTML=5280<o?(e=o/5280,n=this._getRoundNum(e),r.style.width=this._getScaleWidth(n/e)+"px",n+" mi"):(i=this._getRoundNum(o),r.style.width=this._getScaleWidth(i/o)+"px",i+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=10<=n?10:5<=n?5:3<=n?3:2<=n?2:1)}}),f.control.scale=function(t){return new f.Control.Scale(t)},f.Control.Layers=f.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,n){for(var i in f.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=f.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=f.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),f.Browser.touch?f.DomEvent.on(e,"click",f.DomEvent.stopPropagation):f.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var n=this._form=f.DomUtil.create("form",t+"-list");if(this.options.collapsed){f.Browser.android||f.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var i=this._layersLink=f.DomUtil.create("a",t+"-toggle",e);i.href="#",i.title="Layers",f.Browser.touch?f.DomEvent.on(i,"click",f.DomEvent.stop).on(i,"click",this._expand,this):f.DomEvent.on(i,"focus",this._expand,this),f.DomEvent.on(n,"click",function(){setTimeout(f.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=f.DomUtil.create("div",t+"-base",n),this._separator=f.DomUtil.create("div",t+"-separator",n),this._overlaysList=f.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_addLayer:function(t,e,n){var i=f.stamp(t);this._layers[i]={layer:t,name:e,overlay:n},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,n=!1,i=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),i=i||e.overlay,n=n||!e.overlay;this._separator.style.display=i&&n?"":"none"}},_onLayerChange:function(t){var e=this._layers[f.stamp(t.layer)];if(e){this._handlingClick||this._update();var n=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)}},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';e&&(n+=' checked="checked"'),n+="/>";var i=d.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=d.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=d.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers",i),e.layerId=f.stamp(t.layer),f.DomEvent.on(e,"click",this._onInputClick,this);var o=d.createElement("span");return o.innerHTML=" "+t.name,n.appendChild(e),n.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),n},_onInputClick:function(){var t,e,n,i=this._form.getElementsByTagName("input"),o=i.length;for(this._handlingClick=!0,t=0;t<o;t++)e=i[t],n=this._layers[e.layerId],e.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!e.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){f.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),f.control.layers=function(t,e,n){return new f.Control.Layers(t,e,n)},f.PosAnimation=f.Class.extend({includes:f.Mixin.Events,run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[f.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(i||.5)+",1)",f.DomEvent.on(t,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),f.DomUtil.setPosition(t,e),f.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(f.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(f.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),f.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();t?(this._el._leaflet_pos=t,this.fire("step")):this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var t,e,n,i=this._el,o=s.getComputedStyle(i);if(f.Browser.any3d){if(!(n=o[f.DomUtil.TRANSFORM].match(this._transformRe)))return;t=parseFloat(n[1]),e=parseFloat(n[2])}else t=parseFloat(o.left),e=parseFloat(o.top);return new f.Point(t,e,!0)},_onTransitionEnd:function(){f.DomEvent.off(this._el,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[f.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),f.Map.include({setView:function(t,e,n){if((e=e===a?this._zoom:this._limitZoom(e),t=this._limitCenter(f.latLng(t),e,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&!0!==n)&&(n.animate!==a&&(n.zoom=f.extend({animate:n.animate},n.zoom),n.pan=f.extend({animate:n.animate},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},panBy:function(t,e){if(e=e||{},!(t=f.point(t).round()).x&&!t.y)return this;if(this._panAnim||(this._panAnim=new f.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){f.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){f.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)}}),f.PosAnimation=f.DomUtil.TRANSITION?f.PosAnimation:f.PosAnimation.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=f.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=f.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;t<e?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));f.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){f.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),f.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),f.DomUtil.TRANSITION&&f.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&f.DomUtil.TRANSITION&&f.Browser.any3d&&!f.Browser.android23&&!f.Browser.mobileOpera,this._zoomAnimated&&f.DomEvent.on(this._mapPane,f.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),f.Map.include(f.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i),r=this._getCenterLayerPoint()._add(o);return!(!0!==n.animate&&!this.getSize().contains(o))&&(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,r,i,null,!0),!0)},_animateZoom:function(t,e,n,i,o,r,s){s||(this._animatingZoom=!0),f.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,f.Draggable&&(f.Draggable._disabled=!0),f.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:n,scale:i,delta:o,backwards:r}),setTimeout(f.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,f.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),f.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),f.Draggable&&(f.Draggable._disabled=!1)},this))}}:{}),f.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,n=f.DomUtil.TRANSFORM,i=t.delta?f.DomUtil.getTranslateString(t.delta):e.style[n],o=f.DomUtil.getScaleString(t.scale,t.origin);e.style[n]=t.backwards?o+" "+i:i+" "+o},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),f.Util.falseFn(e.offsetWidth);var n=this._map.getZoom();(n>this.options.maxZoom||n<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[f.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,n=this._getLoadedTilesPercentage(e),i=this._getLoadedTilesPercentage(t);if(e&&.5<n&&i<.5)return t.style.visibility="hidden",void this._stopLoadingImages(t);e.style.visibility="hidden",e.style[f.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),clearTimeout(this._clearBgBufferTimer)},_getLoadedTilesPercentage:function(t){var e,n,i=t.getElementsByTagName("img"),o=0;for(e=0,n=i.length;e<n;e++)i[e].complete&&o++;return o/n},_stopLoadingImages:function(t){var e,n,i,o=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,n=o.length;e<n;e++)(i=o[e]).complete||(i.onload=f.Util.falseFn,i.onerror=f.Util.falseFn,i.src=f.Util.emptyImageUrl,i.parentNode.removeChild(i))}}),f.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=f.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=f.bind(this._handleGeolocationResponse,this),n=f.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new f.LatLng(e,n),o=180*t.coords.accuracy/40075017,r=o/Math.cos(f.LatLng.DEG_TO_RAD*e),s=f.latLngBounds([e-o,n-r],[e+o,n+r]),a=this._locateOptions;if(a.setView){var l=Math.min(this.getBoundsZoom(s),a.maxZoom);this.setView(i,l)}var u={latlng:i,bounds:s,timestamp:t.timestamp};for(var c in t.coords)"number"==typeof t.coords[c]&&(u[c]=t.coords[c]);this.fire("locationfound",u)}})}(window,document),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.reductio=t()}}(function(){return function r(s,a,l){function u(n,t){if(!a[n]){if(!s[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(c)return c(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var o=a[n]={exports:{}};s[n][0].call(o.exports,function(t){var e=s[n][1][t];return u(e||t)},o,o.exports,r,s,a,l)}return a[n].exports}for(var c="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(r,s,t){(function(t){var e=r("./build.js"),n=r("./accessors.js"),i=r("./parameters.js"),h=r("./postprocess"),d="undefined"!=typeof window?window.crossfilter:void 0!==t?t.crossfilter:null;function o(){var u=i(),c={};function t(t){if(c={reduceAdd:function(t){return t},reduceRemove:function(t){return t},reduceInitial:function(){return{}}},e.build(u,c),u.groupAll)if(t.top)console.warn("'groupAll' is defined but attempting to run on a standard dimension.group(). Must run on dimension.groupAll().");else{var i,o,r,s,a,l=d.bisect.by(function(t){return t.key}).left;t.reduce(function(t,e,n){for(r=u.groupAll(e),s=r.length,o=0;o<s;o++)a=r[o],t[i=l(t,a,0,t.length)]&&t[i].key===a||t.splice(i,0,{key:a,value:c.reduceInitial()}),c.reduceAdd(t[i].value,e,n);return t},function(t,e,n){for(r=u.groupAll(e),s=r.length,o=0;o<s;o++)i=l(t,r[o],0,t.length),c.reduceRemove(t[i].value,e,n);return t},function(){return[]}),t.all||(t.all=function(){return this.value()})}else t.reduce(c.reduceAdd,c.reduceRemove,c.reduceInitial);return h(t,u,c),t}return n.build(t,u),t}r("./postprocessors")(o),h=h(o),s.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessors.js":2,"./build.js":6,"./parameters.js":19,"./postprocess":20,"./postprocessors":21}],2:[function(t,e,n){var s=t("./parameters.js");_assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;++n){var i=arguments[n];if(null!=i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e};var i={build:function n(i,o){function e(t){if("string"!=typeof t)return t;var e=t;return function(t){return t[e]}}function r(t){if("string"!=typeof t)return t;var e=t;return function(t){return+t[e]}}i.fromObject=function(t){return arguments.length?(_assign(o,t),i):o},i.toObject=function(){return o},i.count=function(t,e){return arguments.length?(e||(e="count"),o.count=e,i):o.count},i.sum=function(t){return arguments.length?(t=r(t),o.sum=t,i):o.sum},i.avg=function(t){return arguments.length?("function"==typeof(t=r(t))?(o.sum&&o.sum!==t&&console.warn("SUM aggregation is being overwritten by AVG aggregation"),o.sum=t,o.avg=!0,o.count="count"):o.avg=t,i):o.avg},i.exception=function(t){return arguments.length?(t=e(t),o.exceptionAccessor=t,i):o.exceptionAccessor},i.filter=function(t){return arguments.length?(o.filter=t,i):o.filter},i.valueList=function(t){return arguments.length?(t=e(t),o.valueList=t,i):o.valueList},i.median=function(t){return arguments.length?("function"==typeof(t=r(t))&&(o.valueList&&o.valueList!==t&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),o.valueList=t),o.median=t,i):o.median},i.min=function(t){return arguments.length?("function"==typeof(t=r(t))&&(o.valueList&&o.valueList!==t&&console.warn("VALUELIST accessor is being overwritten by min aggregation"),o.valueList=t),o.min=t,i):o.min},i.max=function(t){return arguments.length?("function"==typeof(t=r(t))&&(o.valueList&&o.valueList!==t&&console.warn("VALUELIST accessor is being overwritten by max aggregation"),o.valueList=t),o.max=t,i):o.max},i.exceptionCount=function(t){return arguments.length?(t=e(t),o.exceptionCount="function"==typeof t?(o.exceptionAccessor&&o.exceptionAccessor!==t&&console.warn("EXCEPTION accessor is being overwritten by exception count aggregation"),o.exceptionAccessor=t,!0):t,i):o.exceptionCount},i.exceptionSum=function(t){return arguments.length?(t=r(t),o.exceptionSum=t,i):o.exceptionSum},i.histogramValue=function(t){return arguments.length?(t=r(t),o.histogramValue=t,i):o.histogramValue},i.histogramBins=function(t){return arguments.length?(o.histogramThresholds=t,i):o.histogramThresholds},i.std=function(t){return arguments.length?(t=r(t),o.std="function"==typeof t?(o.sumOfSquares=t,o.sum=t,o.count="count",!0):t,i):o.std},i.sumOfSq=function(t){return arguments.length?(t=r(t),o.sumOfSquares=t,i):o.sumOfSquares},i.value=function(t,e){if(arguments.length&&"string"==typeof t)return o.values||(o.values={}),o.values[t]={},o.values[t].parameters=s(),n(o.values[t],o.values[t].parameters),e&&(o.values[t].accessor=e),o.values[t];console.error("'value' requires a string argument.")},i.nest=function(t){return arguments.length?(t.map(e),o.nestKeys=t,i):o.nestKeys},i.alias=function(t){return arguments.length?(o.aliasKeys=t,i):o.aliasKeys},i.aliasProp=function(t){return arguments.length?(o.aliasPropKeys=t,i):o.aliasPropKeys},i.groupAll=function(t){return arguments.length?(o.groupAll=t,i):o.groupAll},i.dataList=function(t){return arguments.length?(o.dataList=t,i):o.dataList},i.custom=function(t){return arguments.length?(o.custom=t,i):o.custom}}};e.exports=i},{"./parameters.js":19}],3:[function(t,e,n){e.exports={initial:function(i,o,r){return function(e){function t(t){return function(){return r[t](o(e))}}for(var n in i&&(e=i(e)),r)o(e)[n]=t(n);return e}}}},{}],4:[function(t,e,n){e.exports={add:function(o,r,s){return function(t,e,n){for(var i in r&&r(t,e,n),o)s(t)[i]=o[i](s(t),e);return t}}}},{}],5:[function(t,e,n){e.exports={add:function(t,i,o){return function(t,e,n){return i&&i(t,e,n),0<o(t).count?o(t).avg=o(t).sum/o(t).count:o(t).avg=0,t}},remove:function(t,i,o){return function(t,e,n){return i&&i(t,e,n),0<o(t).count?o(t).avg=o(t).sum/o(t).count:o(t).avg=0,t}},initial:function(e,n){return function(t){return t=e(t),n(t).avg=0,t}}}},{}],6:[function(t,e,n){var s=t("./filter.js"),a=t("./count.js"),l=t("./sum.js"),u=t("./avg.js"),c=t("./median.js"),h=t("./min.js"),d=t("./max.js"),p=t("./value-count.js"),f=t("./value-list.js"),m=t("./exception-count.js"),g=t("./exception-sum.js"),v=t("./histogram.js"),y=t("./sum-of-squares.js"),b=t("./std.js"),_=t("./nest.js"),w=t("./alias.js"),x=t("./aliasProp.js"),C=t("./data-list.js"),k=t("./custom.js");var i={build:function t(i,o,r){r||(r=function(t){return t});var e={reduceAdd:o.reduceAdd,reduceRemove:o.reduceRemove,reduceInitial:o.reduceInitial};(i.count||i.std)&&(o.reduceAdd=a.add(o.reduceAdd,r,i.count),o.reduceRemove=a.remove(o.reduceRemove,r,i.count),o.reduceInitial=a.initial(o.reduceInitial,r,i.count)),i.sum&&(o.reduceAdd=l.add(i.sum,o.reduceAdd,r),o.reduceRemove=l.remove(i.sum,o.reduceRemove,r),o.reduceInitial=l.initial(o.reduceInitial,r)),i.avg&&(i.count&&i.sum?(o.reduceAdd=u.add(i.sum,o.reduceAdd,r),o.reduceRemove=u.remove(i.sum,o.reduceRemove,r),o.reduceInitial=u.initial(o.reduceInitial,r)):console.error("You must set .count(true) and define a .sum(accessor) to use .avg(true).")),i.exceptionCount&&(i.exceptionAccessor?(o.reduceAdd=m.add(i.exceptionAccessor,o.reduceAdd,r),o.reduceRemove=m.remove(i.exceptionAccessor,o.reduceRemove,r),o.reduceInitial=m.initial(o.reduceInitial,r)):console.error("You must define an .exception(accessor) to use .exceptionCount(true).")),i.exceptionSum&&(i.exceptionAccessor?(o.reduceAdd=g.add(i.exceptionAccessor,i.exceptionSum,o.reduceAdd,r),o.reduceRemove=g.remove(i.exceptionAccessor,i.exceptionSum,o.reduceRemove,r),o.reduceInitial=g.initial(o.reduceInitial,r)):console.error("You must define an .exception(accessor) to use .exceptionSum(accessor).")),(i.valueList||i.median||i.min||i.max)&&(o.reduceAdd=f.add(i.valueList,o.reduceAdd,r),o.reduceRemove=f.remove(i.valueList,o.reduceRemove,r),o.reduceInitial=f.initial(o.reduceInitial,r)),i.dataList&&(o.reduceAdd=C.add(i.dataList,o.reduceAdd,r),o.reduceRemove=C.remove(i.dataList,o.reduceRemove,r),o.reduceInitial=C.initial(o.reduceInitial,r)),i.median&&(o.reduceAdd=c.add(o.reduceAdd,r),o.reduceRemove=c.remove(o.reduceRemove,r),o.reduceInitial=c.initial(o.reduceInitial,r)),i.min&&(o.reduceAdd=h.add(o.reduceAdd,r),o.reduceRemove=h.remove(o.reduceRemove,r),o.reduceInitial=h.initial(o.reduceInitial,r)),i.max&&(o.reduceAdd=d.add(o.reduceAdd,r),o.reduceRemove=d.remove(o.reduceRemove,r),o.reduceInitial=d.initial(o.reduceInitial,r)),i.exceptionAccessor&&(o.reduceAdd=p.add(i.exceptionAccessor,o.reduceAdd,r),o.reduceRemove=p.remove(i.exceptionAccessor,o.reduceRemove,r),o.reduceInitial=p.initial(o.reduceInitial,r)),i.histogramValue&&i.histogramThresholds&&(o.reduceAdd=v.add(i.histogramValue,o.reduceAdd,r),o.reduceRemove=v.remove(i.histogramValue,o.reduceRemove,r),o.reduceInitial=v.initial(i.histogramThresholds,o.reduceInitial,r)),i.sumOfSquares&&(o.reduceAdd=y.add(i.sumOfSquares,o.reduceAdd,r),o.reduceRemove=y.remove(i.sumOfSquares,o.reduceRemove,r),o.reduceInitial=y.initial(o.reduceInitial,r)),i.std&&(i.sumOfSquares&&i.sum?(o.reduceAdd=b.add(o.reduceAdd,r),o.reduceRemove=b.remove(o.reduceRemove,r),o.reduceInitial=b.initial(o.reduceInitial,r)):console.error("You must set .sumOfSq(accessor) and define a .sum(accessor) to use .std(true). Or use .std(accessor).")),i.custom&&(o.reduceAdd=k.add(o.reduceAdd,r,i.custom.add),o.reduceRemove=k.remove(o.reduceRemove,r,i.custom.remove),o.reduceInitial=k.initial(o.reduceInitial,r,i.custom.initial)),i.nestKeys&&(o.reduceAdd=_.add(i.nestKeys,o.reduceAdd,r),o.reduceRemove=_.remove(i.nestKeys,o.reduceRemove,r),o.reduceInitial=_.initial(o.reduceInitial,r)),i.aliasKeys&&(o.reduceInitial=w.initial(o.reduceInitial,r,i.aliasKeys)),i.aliasPropKeys&&(o.reduceAdd=x.add(i.aliasPropKeys,o.reduceAdd,r),o.reduceRemove=x.add(i.aliasPropKeys,o.reduceRemove,r)),i.filter&&(o.reduceAdd=s.add(i.filter,o.reduceAdd,e.reduceAdd,r),o.reduceRemove=s.remove(i.filter,o.reduceRemove,e.reduceRemove,r)),i.values&&Object.getOwnPropertyNames(i.values).forEach(function(e){var n;o.reduceInitial=(n=o.reduceInitial,function(t){return t=n(t),r(t)[e]={},t}),t(i.values[e].parameters,o,function(t){return t[e]})})}};e.exports=i},{"./alias.js":3,"./aliasProp.js":4,"./avg.js":5,"./count.js":8,"./custom.js":9,"./data-list.js":10,"./exception-count.js":11,"./exception-sum.js":12,"./filter.js":13,"./histogram.js":14,"./max.js":15,"./median.js":16,"./min.js":17,"./nest.js":18,"./std.js":23,"./sum-of-squares.js":24,"./sum.js":25,"./value-count.js":26,"./value-list.js":27}],7:[function(t,e,n){var i=function(e){return function(t){return t[e]}};_grouper=function(o,r){return o||(o=function(t){return t}),function(t,e){r&&r(t,e);var n=o(t),i=o(e);return void 0!==i.count&&(n.count+=i.count),void 0!==i.sum&&(n.sum+=i.sum),void 0!==i.avg&&(n.avg=n.sum/n.count),t}},reductio_cap=function(a,l,t){l.reduceInitial();var e=t.values?Object.keys(t.values):[],u=_grouper();if(e.length)for(var n=0;n<e.length;++n)u=_grouper(i(e[n]),u);return function(t,e){if(!arguments.length)return a();if(t===1/0||!t)return a();var n=a(),i=t-1;if(n.length<=t)return n;var o=n.slice(0,i),r={key:e||"Others"};r.value=l.reduceInitial();for(var s=i;s<n.length;++s)u(r.value,n[s].value);return o.push(r),o}},e.exports=reductio_cap},{}],8:[function(t,e,n){e.exports={add:function(i,o,r){return function(t,e,n){return i&&i(t,e,n),o(t)[r]++,t}},remove:function(i,o,r){return function(t,e,n){return i&&i(t,e,n),o(t)[r]--,t}},initial:function(e,n,i){return function(t){return e&&(t=e(t)),n(t)[i]=0,t}}}},{}],9:[function(t,e,n){e.exports={add:function(i,t,o){return function(t,e,n){return i&&i(t,e,n),o(t,e)}},remove:function(i,t,o){return function(t,e,n){return i&&i(t,e,n),o(t,e)}},initial:function(e,t,n){return function(t){return e&&(t=e(t)),n(t)}}}},{}],10:[function(t,e,n){e.exports={add:function(t,i,o){return function(t,e,n){return i&&i(t,e,n),o(t).dataList.push(e),t}},remove:function(t,i,o){return function(t,e,n){return i&&i(t,e,n),o(t).dataList.splice(o(t).dataList.indexOf(e),1),t}},initial:function(e,n){return function(t){return e&&(t=e(t)),n(t).dataList=[],t}}}},{}],11:[function(t,e,n){e.exports={add:function(i,o,r){var s,a;return function(t,e,n){return o&&o(t,e,n),s=r(t).bisect(r(t).values,i(e),0,r(t).values.length),(a=r(t).values[s])&&a[0]===i(e)&&0!==a[1]||r(t).exceptionCount++,t}},remove:function(i,o,r){var s,a;return function(t,e,n){return o&&o(t,e,n),s=r(t).bisect(r(t).values,i(e),0,r(t).values.length),(a=r(t).values[s])&&a[0]===i(e)&&1===a[1]&&r(t).exceptionCount--,t}},initial:function(e,n){return function(t){return t=e(t),n(t).exceptionCount=0,t}}}},{}],12:[function(t,e,n){e.exports={add:function(i,o,r,s){var a,l;return function(t,e,n){return r&&r(t,e,n),a=s(t).bisect(s(t).values,i(e),0,s(t).values.length),(l=s(t).values[a])&&l[0]===i(e)&&0!==l[1]||(s(t).exceptionSum=s(t).exceptionSum+o(e)),t}},remove:function(i,o,r,s){var a,l;return function(t,e,n){return r&&r(t,e,n),a=s(t).bisect(s(t).values,i(e),0,s(t).values.length),(l=s(t).values[a])&&l[0]===i(e)&&1===l[1]&&(s(t).exceptionSum=s(t).exceptionSum-o(e)),t}},initial:function(e,n){return function(t){return t=e(t),n(t).exceptionSum=0,t}}}},{}],13:[function(t,e,n){e.exports={add:function(i,o,r){return function(t,e,n){return i(e,n)?o&&o(t,e,n):r&&r(t,e,n),t}},remove:function(i,o,r){return function(t,e,n){return i(e,n)?o&&o(t,e,n):r&&r(t,e,n),t}}}},{}],14:[function(t,i,e){(function(t){var e="undefined"!=typeof window?window.crossfilter:void 0!==t?t.crossfilter:null,n={add:function(i,o,r){var s,a=e.bisect.by(function(t){return t}).left,l=e.bisect.by(function(t){return t.x}).right;return function(t,e,n){return o&&o(t,e,n),(s=r(t).histogram[l(r(t).histogram,i(e),0,r(t).histogram.length)-1]).y++,s.splice(a(s,i(e),0,s.length),0,i(e)),t}},remove:function(i,o,r){var s,a=e.bisect.by(function(t){return t}).left,l=e.bisect.by(function(t){return t.x}).right;return function(t,e,n){return o&&o(t,e,n),(s=r(t).histogram[l(r(t).histogram,i(e),0,r(t).histogram.length)-1]).y--,s.splice(a(s,i(e),0,s.length),1),t}},initial:function(i,o,r){return function(t){t=o(t),r(t).histogram=[];for(var e=[],n=1;n<i.length;n++)(e=[]).x=i[n-1],e.dx=i[n]-i[n-1],e.y=0,r(t).histogram.push(e);return t}}};i.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(t,e,n){var i={add:function(i,o){return function(t,e,n){return i&&i(t,e,n),o(t).max=o(t).valueList[o(t).valueList.length-1],t}},remove:function(i,o){return function(t,e,n){return i&&i(t,e,n),0===o(t).valueList.length?o(t).max=void 0:o(t).max=o(t).valueList[o(t).valueList.length-1],t}},initial:function(e,n){return function(t){return t=e(t),n(t).max=void 0,t}}};e.exports=i},{}],16:[function(t,e,n){var i={add:function(i,o){var r;return function(t,e,n){return i&&i(t,e,n),r=Math.floor(o(t).valueList.length/2),o(t).valueList.length%2?o(t).median=o(t).valueList[r]:o(t).median=(o(t).valueList[r-1]+o(t).valueList[r])/2,t}},remove:function(i,o){var r;return function(t,e,n){return i&&i(t,e,n),r=Math.floor(o(t).valueList.length/2),0===o(t).valueList.length?o(t).median=void 0:1===o(t).valueList.length||o(t).valueList.length%2?o(t).median=o(t).valueList[r]:o(t).median=(o(t).valueList[r-1]+o(t).valueList[r])/2,t}},initial:function(e,n){return function(t){return t=e(t),n(t).median=void 0,t}}};e.exports=i},{}],17:[function(t,e,n){var i={add:function(i,o){return function(t,e,n){return i&&i(t,e,n),o(t).min=o(t).valueList[0],t}},remove:function(i,o){return function(t,e,n){return i&&i(t,e,n),0===o(t).valueList.length?o(t).min=void 0:o(t).min=o(t).valueList[0],t}},initial:function(e,n){return function(t){return t=e(t),n(t).min=void 0,t}}};e.exports=i},{}],18:[function(t,e,n){(function(t){"undefined"!=typeof window?window.crossfilter:void 0!==t&&t.crossfilter;e.exports={add:function(i,o,r){var s,a;return function(t,n,e){return o&&o(t,n,e),s=r(t).nest,i.forEach(function(e){s=(a=s.filter(function(t){return t.key===e(n)})[0])?a.values:(a=[],s.push({key:e(n),values:a}),a)}),s.push(n),t}},remove:function(i,o,r){var s;return function(t,n,e){return o&&o(t,n,e),s=r(t).nest,i.forEach(function(e){s=s.filter(function(t){return t.key===e(n)})[0].values}),s.splice(s.indexOf(n),1),t}},initial:function(e,n){return function(t){return t=e(t),n(t).nest=[],t}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(t,e,n){e.exports=function(){return{order:!1,avg:!1,count:!1,sum:!1,exceptionAccessor:!1,exceptionCount:!1,exceptionSum:!1,filter:!1,valueList:!1,median:!1,histogramValue:!1,min:!1,max:!1,histogramThresholds:!1,std:!1,sumOfSquares:!1,values:!1,nestKeys:!1,aliasKeys:!1,aliasPropKeys:!1,groupAll:!1,dataList:!1,custom:!1}}},{}],20:[function(t,e,n){e.exports=function(e){return function(t,r,s){t.post=function(){var i=function(){return i.all()};i.all=function(){return t.all()};var o=e.postprocessors;return Object.keys(o).forEach(function(n){i[n]=function(){var t=i.all,e=[].slice.call(arguments);return i.all=function(){return o[n](t,s,r).apply(null,e)},i}}),i}}}},{}],21:[function(t,e,n){e.exports=function(n){n.postprocessors={},n.registerPostProcessor=function(t,e){n.postprocessors[t]=e},n.registerPostProcessor("cap",t("./cap")),n.registerPostProcessor("sortBy",t("./sortBy"))}},{"./cap":7,"./sortBy":22}],22:[function(t,e,n){function r(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}e.exports=function(o){return function(t,e){return 1===arguments.length&&(e=r),o().sort((n=function(e){if("function"==typeof e)return e;if(~e.indexOf(".")){var n=e.split(".");return function(t){return n.reduce(function(t,e){return t[e]},t)}}return function(t){return t[e]}}(t),i=e,function(t,e){return i(n(t),n(e))}));var n,i}}},{}],23:[function(t,e,n){var i={add:function(o,r){return function(t,e,n){if(o&&o(t,e,n),0<r(t).count){r(t).std=0;var i=r(t).sumOfSq-r(t).sum*r(t).sum/r(t).count;0<i&&(r(t).std=Math.sqrt(i/(r(t).count-1)))}else r(t).std=0;return t}},remove:function(o,r){return function(t,e,n){if(o&&o(t,e,n),0<r(t).count){r(t).std=0;var i=r(t).sumOfSq-r(t).sum*r(t).sum/r(t).count;0<i&&(r(t).std=Math.sqrt(i/(r(t).count-1)))}else r(t).std=0;return t}},initial:function(e,n){return function(t){return t=e(t),n(t).std=0,t}}};e.exports=i},{}],24:[function(t,e,n){e.exports={add:function(i,o,r){return function(t,e,n){return o&&o(t,e,n),r(t).sumOfSq=r(t).sumOfSq+i(e)*i(e),t}},remove:function(i,o,r){return function(t,e,n){return o&&o(t,e,n),r(t).sumOfSq=r(t).sumOfSq-i(e)*i(e),t}},initial:function(e,n){return function(t){return t=e(t),n(t).sumOfSq=0,t}}}},{}],25:[function(t,e,n){e.exports={add:function(i,o,r){return function(t,e,n){return o&&o(t,e,n),r(t).sum=r(t).sum+i(e),t}},remove:function(i,o,r){return function(t,e,n){return o&&o(t,e,n),r(t).sum=r(t).sum-i(e),t}},initial:function(e,n){return function(t){return t=e(t),n(t).sum=0,t}}}},{}],26:[function(t,n,e){(function(t){var i="undefined"!=typeof window?window.crossfilter:void 0!==t?t.crossfilter:null,e={add:function(i,o,r){var s,a;return function(t,e,n){return o&&o(t,e,n),s=r(t).bisect(r(t).values,i(e),0,r(t).values.length),(a=r(t).values[s])&&a[0]===i(e)?a[1]++:r(t).values.splice(s,0,[i(e),1]),t}},remove:function(i,o,r){var s;return function(t,e,n){return o&&o(t,e,n),s=r(t).bisect(r(t).values,i(e),0,r(t).values.length),r(t).values[s][1]--,t}},initial:function(e,n){return function(t){return t=e(t),n(t).values=[],n(t).bisect=i.bisect.by(function(t){return t[0]}).left,t}}};n.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(t,i,e){(function(t){var e="undefined"!=typeof window?window.crossfilter:void 0!==t?t.crossfilter:null,n={add:function(i,o,r){var s,a=e.bisect.by(function(t){return t}).left;return function(t,e,n){return o&&o(t,e,n),s=a(r(t).valueList,i(e),0,r(t).valueList.length),r(t).valueList.splice(s,0,i(e)),t}},remove:function(i,o,r){var s,a=e.bisect.by(function(t){return t}).left;return function(t,e,n){return o&&o(t,e,n),s=a(r(t).valueList,i(e),0,r(t).valueList.length),r(t).valueList.splice(s,1),t}},initial:function(e,n){return function(t){return t=e(t),n(t).valueList=[],t}}};i.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),function(t){"use strict";function n(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}var i,o,r;function e(t,e){(i(t,e)?r:o)(t,e)}r="classList"in document.documentElement?(i=function(t,e){return t.classList.contains(e)},o=function(t,e){t.classList.add(e)},function(t,e){t.classList.remove(e)}):(i=function(t,e){return n(e).test(t.className)},o=function(t,e){i(t,e)||(t.className=t.className+" "+e)},function(t,e){t.className=t.className.replace(n(e)," ")});var s={hasClass:i,addClass:o,removeClass:r,toggleClass:e,has:i,add:o,remove:r,toggle:e};"function"==typeof define&&define.amd?define(s):"object"==typeof exports?module.exports=s:t.classie=s}(window),function(){var d="object"==typeof window?window:"object"==typeof self?self:this,i=d.BlobBuilder||d.WebKitBlobBuilder||d.MSBlobBuilder||d.MozBlobBuilder;d.URL=d.URL||d.webkitURL||function(t,e){return(e=document.createElement("a")).href=t,e};var n=d.Blob,p=URL.createObjectURL,f=URL.revokeObjectURL,r=d.Symbol&&d.Symbol.toStringTag,t=!1,e=!1,m=!!d.ArrayBuffer,o=i&&i.prototype.append&&i.prototype.getBlob;try{t=2===new Blob([""]).size,e=2===new Blob([new Uint8Array([1,2])]).size}catch(t){}function s(t){return t.map(function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t})}function a(t,e){e=e||{};var n=new i;return s(t).forEach(function(t){n.append(t)}),e.type?n.getBlob(e.type):n.getBlob()}function l(t,e){return new n(s(t),e||{})}function u(){var t=!!d.ActiveXObject||"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,e=d.XMLHttpRequest&&d.XMLHttpRequest.prototype.send;t&&e&&(XMLHttpRequest.prototype.send=function(t){t instanceof Blob&&this.setRequestHeader("Content-Type",t.type),e.call(this,t)});try{new File([],"")}catch(t){try{var n=new Function('class File extends Blob {constructor(chunks, name, opts) {opts = opts || {};super(chunks, opts || {});this.name = name;this.lastModifiedDate = opts.lastModified ? new Date(opts.lastModified) : new Date;this.lastModified = +this.lastModifiedDate;}};return new File([], ""), File')();d.File=n}catch(t){n=function(t,e,n){var i=new Blob(t,n),o=n&&void 0!==n.lastModified?new Date(n.lastModified):new Date;return i.name=e,i.lastModifiedDate=o,i.lastModified=+o,i.toString=function(){return"[object File]"},r&&(i[r]="File"),i};d.File=n}}}d.Blob&&(a.prototype=Blob.prototype,l.prototype=Blob.prototype),r&&(File.prototype[r]="File",Blob.prototype[r]="Blob",FileReader.prototype[r]="FileReader"),t?(u(),d.Blob=e?d.Blob:l):o?(u(),d.Blob=a):function(){function s(t){for(var e=[],n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||57344<=i?e.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}function e(t){var e,n,i,o,r,s;for(e="",i=t.length,n=0;n<i;)switch((o=t[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(o);break;case 12:case 13:r=t[n++],e+=String.fromCharCode((31&o)<<6|63&r);break;case 14:r=t[n++],s=t[n++],e+=String.fromCharCode((15&o)<<12|(63&r)<<6|(63&s)<<0)}return e}function a(t){for(var e=new Array(t.byteLength),n=new Uint8Array(t),i=e.length;i--;)e[i]=n[i];return e}function n(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],i=0;i<t.length;i+=3){var o=t[i],r=i+1<t.length,s=r?t[i+1]:0,a=i+2<t.length,l=a?t[i+2]:0,u=o>>2,c=(3&o)<<4|s>>4,h=(15&s)<<2|l>>6,d=63&l;a||(d=64,r||(h=64)),n.push(e[u],e[c],e[h],e[d])}return n.join("")}var t=Object.create||function(t){function e(){}return e.prototype=t,new e};if(m)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&-1<i.indexOf(Object.prototype.toString.call(t))};function u(t,e){for(var n=0,i=(t=t||[]).length;n<i;n++){var o=t[n];o instanceof u?t[n]=o._buffer:"string"==typeof o?t[n]=s(o):m&&(ArrayBuffer.prototype.isPrototypeOf(o)||l(o))?t[n]=a(o):m&&(r=o)&&DataView.prototype.isPrototypeOf(r)?t[n]=a(o.buffer):t[n]=s(String(o))}var r;this._buffer=[].concat.apply([],t),this.size=this._buffer.length,this.type=e&&e.type||""}function o(t,e,n){var i=u.call(this,t,n=n||{})||this;return i.name=e,i.lastModifiedDate=n.lastModified?new Date(n.lastModified):new Date,i.lastModified=+i.lastModifiedDate,i}if(u.prototype.slice=function(t,e,n){return new u([this._buffer.slice(t||0,e||this._buffer.length)],{type:n})},u.prototype.toString=function(){return"[object Blob]"},(o.prototype=t(u.prototype)).constructor=o,Object.setPrototypeOf)Object.setPrototypeOf(o,u);else try{o.__proto__=u}catch(t){}function r(){if(!(this instanceof r))throw new TypeError("Failed to construct 'FileReader': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");var n=document.createDocumentFragment();this.addEventListener=n.addEventListener,this.dispatchEvent=function(t){var e=this["on"+t.type];"function"==typeof e&&e(t),n.dispatchEvent(t)},this.removeEventListener=n.removeEventListener}function c(t,e,n){if(!(e instanceof u))throw new TypeError("Failed to execute '"+n+"' on 'FileReader': parameter 1 is not of type 'Blob'.");t.result="",setTimeout(function(){this.readyState=r.LOADING,t.dispatchEvent(new Event("load")),t.dispatchEvent(new Event("loadend"))})}o.prototype.toString=function(){return"[object File]"},r.EMPTY=0,r.LOADING=1,r.DONE=2,r.prototype.error=null,r.prototype.onabort=null,r.prototype.onerror=null,r.prototype.onload=null,r.prototype.onloadend=null,r.prototype.onloadstart=null,r.prototype.onprogress=null,r.prototype.readAsDataURL=function(t){c(this,t,"readAsDataURL"),this.result="data:"+t.type+";base64,"+n(t._buffer)},r.prototype.readAsText=function(t){c(this,t,"readAsText"),this.result=e(t._buffer)},r.prototype.readAsArrayBuffer=function(t){c(this,t,"readAsText"),this.result=t._buffer.slice()},r.prototype.abort=function(){},URL.createObjectURL=function(t){return t instanceof u?"data:"+t.type+";base64,"+n(t._buffer):p.call(URL,t)},URL.revokeObjectURL=function(t){f&&f.call(URL,t)};var h=d.XMLHttpRequest&&d.XMLHttpRequest.prototype.send;h&&(XMLHttpRequest.prototype.send=function(t){t instanceof u?(this.setRequestHeader("Content-Type",t.type),h.call(this,e(t._buffer))):h.call(this,t)}),d.FileReader=r,d.File=o,d.Blob=u}()}(),function(){"use strict";var g={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(t){switch(t.which){case g.COMMAND:case g.SHIFT:case g.CTRL:case g.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return 112<=(t=t.which?t.which:t)&&t<=123},isVerticalMovement:function(t){return~[g.UP,g.DOWN].indexOf(t)},isHorizontalMovement:function(t){return~[g.LEFT,g.RIGHT,g.BACKSPACE,g.DELETE].indexOf(t)},toSeparator:function(t){var e={ENTER:"\n",TAB:"\t",SPACE:" "}[t];return e||(g[t]?void 0:t)}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(t){return angular.element(this[0].querySelectorAll(t))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(t){for(var e=this[0],n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e;){if(n.bind(e)(t))return e;e=e.parentElement}return!1});var t=0,e=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,skipFocusser:!1,dropdownPosition:"auto",generateId:function(){return t++},appendToBody:!1}).service("uiSelectMinErr",function(){var e=angular.$$minErr("ui.select");return function(){var t=e.apply(this,arguments).message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(t)}}).directive("uisTranscludeAppend",function(){return{link:function(t,e,n,i,o){o(t,function(t){e.append(t)})}}}).filter("highlight",function(){return function(t,e){return e&&t?(""+t).replace(new RegExp((""+e).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),'<span class="ui-select-highlight">$&</span>'):t}}).factory("uisOffset",["$document","$window",function(n,i){return function(t){var e=t[0].getBoundingClientRect();return{width:e.width||t.prop("offsetWidth"),height:e.height||t.prop("offsetHeight"),top:e.top+(i.pageYOffset||n[0].documentElement.scrollTop),left:e.left+(i.pageXOffset||n[0].documentElement.scrollLeft)}}}]);e.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(c,h,d,p,f){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){return t.addClass("ui-select-choices"),(t.parent().attr("theme")||c.theme)+"/choices.tpl.html"},compile:function(t,e){if(!e.repeat)throw d("repeat","Expected 'repeat' expression.");return function(e,t,n,i,o){var r=n.groupBy,s=n.groupFilter;if(i.parseRepeatAttr(n.repeat,r,s),i.disableChoiceExpression=n.uiDisableChoice,i.onHighlightCallback=n.onHighlight,i.dropdownPosition=n.position?n.position.toLowerCase():c.dropdownPosition,r){var a=t.querySelectorAll(".ui-select-choices-group");if(1!==a.length)throw d("rows","Expected 1 .ui-select-choices-group but got '{0}'.",a.length);a.attr("ng-repeat",h.getGroupNgRepeatExpression())}var l=t.querySelectorAll(".ui-select-choices-row");if(1!==l.length)throw d("rows","Expected 1 .ui-select-choices-row but got '{0}'.",l.length);l.attr("ng-repeat",i.parserResult.repeatExpression(r)).attr("ng-if","$select.open"),f.document.addEventListener&&l.attr("ng-mouseenter","$select.setActiveItem("+i.parserResult.itemName+")").attr("ng-click","$select.select("+i.parserResult.itemName+",$select.skipFocusser,$event)");var u=t.querySelectorAll(".ui-select-choices-row-inner");if(1!==u.length)throw d("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",u.length);u.attr("uis-transclude-append",""),f.document.addEventListener||u.attr("ng-mouseenter","$select.setActiveItem("+i.parserResult.itemName+")").attr("ng-click","$select.select("+i.parserResult.itemName+",$select.skipFocusser,$event)"),p(t,o)(e),e.$watch("$select.search",function(t){t&&!i.open&&i.multiple&&i.activate(!1,!0),i.activeIndex=i.tagging.isActivated?-1:0,!n.minimumInputLength||i.search.length>=n.minimumInputLength?i.refresh(n.refresh):i.items=[]}),n.$observe("refreshDelay",function(){var t=e.$eval(n.refreshDelay);i.refreshDelay=void 0!==t?t:c.refreshDelay})}}}}]),e.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector","$window",function(r,s,o,t,a,l,e,u,n,i){var c,h=this,d="";if(h.placeholder=e.placeholder,h.searchEnabled=e.searchEnabled,h.sortable=e.sortable,h.refreshDelay=e.refreshDelay,h.paste=e.paste,h.removeSelected=!1,h.closeOnSelect=!0,h.skipFocusser=!1,h.search=d,h.activeIndex=0,h.items=[],h.open=!1,h.focus=!1,h.disabled=!1,h.selected=void 0,h.dropdownPosition="auto",h.focusser=void 0,h.resetSearchInput=!0,h.multiple=void 0,h.disableChoiceExpression=void 0,h.tagging={isActivated:!1,fct:void 0},h.taggingTokens={isActivated:!1,tokens:void 0},h.lockChoiceExpression=void 0,h.clickTriggeredSelect=!1,h.$filter=t,h.$animate=function(){try{return n.get("$animate")}catch(t){return null}}(),h.searchInput=s.querySelectorAll("input.ui-select-search"),1!==h.searchInput.length)throw l("searchInput","Expected 1 input.ui-select-search but got '{0}'.",h.searchInput.length);function p(){(h.resetSearchInput||void 0===h.resetSearchInput&&e.resetSearchInput)&&(h.search=d,h.selected&&h.items.length&&!h.multiple&&(h.activeIndex=function(t,e,n){if(t.findIndex)return t.findIndex(e,n);for(var i,o=Object(t),r=o.length>>>0,s=0;s<r;s++)if(i=o[s],e.call(n,i,s,o))return s;return-1}(h.items,function(t){return angular.equals(this,t)},h.selected)))}h.isEmpty=function(){return angular.isUndefined(h.selected)||null===h.selected||""===h.selected||h.multiple&&0===h.selected.length},h.activate=function(n,t){if(!h.disabled&&!h.open){t||p(),r.$broadcast("uis:activate"),h.open=!0,h.activeIndex=h.activeIndex>=h.items.length?0:h.activeIndex,-1===h.activeIndex&&!1!==h.taggingLabel&&(h.activeIndex=0);var e=s.querySelectorAll(".ui-select-choices-content");h.$animate&&h.$animate.on&&h.$animate.enabled(e[0])?h.$animate.on("enter",e[0],function(t,e){"close"===e&&o(function(){h.focusSearchInput(n)})}):o(function(){h.focusSearchInput(n),!h.tagging.isActivated&&1<h.items.length&&m()})}},h.focusSearchInput=function(t){h.search=t||h.search,h.searchInput[0].focus()},h.findGroupByName=function(e){return h.groups&&h.groups.filter(function(t){return t.name===e})[0]},h.parseRepeatAttr=function(t,n,o){h.setItemsFn=n?function(t){var i=r.$eval(n);if(h.groups=[],angular.forEach(t,function(t){var e=angular.isFunction(i)?i(t):t[i],n=h.findGroupByName(e);n?n.items.push(t):h.groups.push({name:e,items:[t]})}),o){var e=r.$eval(o);angular.isFunction(e)?h.groups=e(h.groups):angular.isArray(e)&&(h.groups=function(t,e){var n,i,o=[];for(n=0;n<e.length;n++)for(i=0;i<t.length;i++)t[i].name==[e[n]]&&o.push(t[i]);return o}(h.groups,e))}h.items=[],h.groups.forEach(function(t){h.items=h.items.concat(t.items)})}:function(t){h.items=t},h.parserResult=a.parse(t),h.isGrouped=!!n,h.itemProperty=h.parserResult.itemName;var e=h.parserResult.source,i=function(){var n=e(r);r.$uisSource=Object.keys(n).map(function(t){var e={};return e[h.parserResult.keyName]=t,e.value=n[t],e})};h.parserResult.keyName&&(i(),h.parserResult.source=u("$uisSource"+h.parserResult.filters),r.$watch(e,function(t,e){t!==e&&i()},!0)),h.refreshItems=function(t){t=t||h.parserResult.source(r);var n=h.selected;if(h.isEmpty()||angular.isArray(n)&&!n.length||!h.removeSelected)h.setItemsFn(t);else if(void 0!==t){var e=t.filter(function(e){return n.every(function(t){return!angular.equals(e,t)})});h.setItemsFn(e)}"auto"!==h.dropdownPosition&&"up"!==h.dropdownPosition||r.calculateDropdownPos()},r.$watchCollection(h.parserResult.source,function(t){if(null==t)h.items=[];else{if(!angular.isArray(t))throw l("items","Expected an array but got '{0}'.",t);h.refreshItems(t),h.ngModel.$modelValue=null}})},h.refresh=function(t){void 0!==t&&(c&&o.cancel(c),c=o(function(){r.$eval(t)},h.refreshDelay))},h.isActive=function(t){if(!h.open)return!1;var e=h.items.indexOf(t[h.itemProperty]),n=e==h.activeIndex;return!(!n||e<0&&!1!==h.taggingLabel||e<0&&!1===h.taggingLabel)&&(n&&!angular.isUndefined(h.onHighlightCallback)&&t.$eval(h.onHighlightCallback),n)},h.isDisabled=function(t){if(h.open){var e,n=h.items.indexOf(t[h.itemProperty]),i=!1;return 0<=n&&!angular.isUndefined(h.disableChoiceExpression)&&(e=h.items[n],i=!!t.$eval(h.disableChoiceExpression),e._uiSelectChoiceDisabled=i),i}},h.select=function(e,t,n){if(void 0===e||!e._uiSelectChoiceDisabled){if(!h.items&&!h.search&&!h.tagging.isActivated)return;if(!e||!e._uiSelectChoiceDisabled){if(h.tagging.isActivated){if(!1===h.taggingLabel)if(h.activeIndex<0){if(!(e=void 0!==h.tagging.fct?h.tagging.fct(h.search):h.search)||angular.equals(h.items[0],e))return}else e=h.items[h.activeIndex];else if(0===h.activeIndex){if(void 0===e)return;if(void 0!==h.tagging.fct&&"string"==typeof e){if(!(e=h.tagging.fct(e)))return}else"string"==typeof e&&(e=e.replace(h.taggingLabel,"").trim())}if(h.selected&&angular.isArray(h.selected)&&0<h.selected.filter(function(t){return angular.equals(t,e)}).length)return void h.close(t)}r.$broadcast("uis:select",e);var i={};i[h.parserResult.itemName]=e,o(function(){h.onSelectCallback(r,{$item:e,$model:h.parserResult.modelMapper(r,i)})}),h.closeOnSelect&&h.close(t),n&&"click"===n.type&&(h.clickTriggeredSelect=!0)}}},h.close=function(t){h.open&&(h.ngModel&&h.ngModel.$setTouched&&h.ngModel.$setTouched(),p(),h.open=!1,r.$broadcast("uis:close",t))},h.setFocus=function(){h.focus||h.focusInput[0].focus()},h.clear=function(t){h.select(void 0),t.stopPropagation(),o(function(){h.focusser[0].focus()},0,!1)},h.toggle=function(t){h.open?(h.close(),t.preventDefault(),t.stopPropagation()):h.activate()},h.isLocked=function(t,e){var n,i=h.selected[e];return i&&!angular.isUndefined(h.lockChoiceExpression)&&(n=!!t.$eval(h.lockChoiceExpression),i._uiSelectChoiceLocked=n),n};var f=null;function m(){var t=s.querySelectorAll(".ui-select-choices-content"),e=t.querySelectorAll(".ui-select-choices-row");if(e.length<1)throw l("choices","Expected multiple .ui-select-choices-row but got '{0}'.",e.length);if(!(h.activeIndex<0)){var n=e[h.activeIndex],i=n.offsetTop+n.clientHeight-t[0].scrollTop,o=t[0].offsetHeight;o<i?t[0].scrollTop+=i-o:i<n.clientHeight&&(h.isGrouped&&0===h.activeIndex?t[0].scrollTop=0:t[0].scrollTop-=n.clientHeight-i)}}h.sizeSearchInput=function(){var n=h.searchInput[0],t=h.searchInput.parent().parent()[0],e=function(){return t.clientWidth*!!n.offsetParent},i=function(t){if(0===t)return!1;var e=t-n.offsetLeft-10;return e<50&&(e=t),h.searchInput.css("width",e+"px"),!0};h.searchInput.css("width","10px"),o(function(){null!==f||i(e())||(f=r.$watch(e,function(t){i(t)&&(f(),f=null)}))})},h.searchInput.on("keydown",function(n){var i=n.which;~[g.ENTER,g.ESC].indexOf(i)&&(n.preventDefault(),n.stopPropagation()),r.$apply(function(){var t=!1;if((0<h.items.length||h.tagging.isActivated)&&(function(t){var e=!0;switch(t){case g.DOWN:!h.open&&h.multiple?h.activate(!1,!0):h.activeIndex<h.items.length-1&&h.activeIndex++;break;case g.UP:!h.open&&h.multiple?h.activate(!1,!0):(0<h.activeIndex||0===h.search.length&&h.tagging.isActivated&&-1<h.activeIndex)&&h.activeIndex--;break;case g.TAB:h.multiple&&!h.open||h.select(h.items[h.activeIndex],!0);break;case g.ENTER:h.open&&(h.tagging.isActivated||0<=h.activeIndex)?h.select(h.items[h.activeIndex],h.skipFocusser):h.activate(!1,!0);break;case g.ESC:h.close();break;default:e=!1}}(i),h.taggingTokens.isActivated)){for(var e=0;e<h.taggingTokens.tokens.length;e++)h.taggingTokens.tokens[e]===g.MAP[n.keyCode]&&0<h.search.length&&(t=!0);t&&o(function(){h.searchInput.triggerHandler("tagged");var t=h.search.replace(g.MAP[n.keyCode],"").trim();h.tagging.fct&&(t=h.tagging.fct(t)),t&&h.select(t,!0)})}}),g.isVerticalMovement(i)&&0<h.items.length&&m(),i!==g.ENTER&&i!==g.ESC||(n.preventDefault(),n.stopPropagation())}),h.searchInput.on("paste",function(t){var e;if(e=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):(t.originalEvent||t).clipboardData.getData("text/plain"),(e=h.search+e)&&0<e.length)if(h.taggingTokens.isActivated){var n=g.toSeparator(h.taggingTokens.tokens[0]),i=e.split(n||h.taggingTokens.tokens[0]);if(i&&0<i.length){var o=h.search;angular.forEach(i,function(t){var e=h.tagging.fct?h.tagging.fct(t):t;e&&h.select(e,!0)}),h.search=o||d,t.preventDefault(),t.stopPropagation()}}else h.paste&&(h.paste(e),h.search=d,t.preventDefault(),t.stopPropagation())}),h.searchInput.on("tagged",function(){o(function(){p()})}),r.$on("$destroy",function(){h.searchInput.off("keyup keydown tagged blur paste")}),angular.element(i).bind("resize",function(){h.sizeSearchInput()})}]),e.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(m,g,v,y,t,b,_){return{restrict:"EA",templateUrl:function(t,e){return(e.theme||g.theme)+(angular.isDefined(e.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(t,e){var n=/{(.*)}\s*{(.*)}/.exec(e.ngClass);if(n){var i="{"+n[1]+", "+n[2]+"}";e.ngClass=i,t.attr("ng-class",i)}return angular.isDefined(e.multiple)?t.append("<ui-select-multiple/>").removeAttr("multiple"):t.append("<ui-select-single/>"),e.inputId&&(t.querySelectorAll("input.ui-select-search")[0].id=e.inputId),function(i,r,e,t,n){var s=t[0],o=t[1];function a(t){if(s.open){if(!(window.jQuery?window.jQuery.contains(r[0],t.target):r[0].contains(t.target))&&!s.clickTriggeredSelect){var e;if(s.skipFocusser)e=!0;else{var n=angular.element(t.target).controller("uiSelect");(e=n&&n!==s)||(e=~["input","button","textarea","select"].indexOf(t.target.tagName.toLowerCase()))}s.close(e),i.$digest()}s.clickTriggeredSelect=!1}}s.generatedId=g.generateId(),s.baseTitle=e.title||"Select box",s.focusserTitle=s.baseTitle+" focus",s.focusserId="focusser-"+s.generatedId,s.closeOnSelect=angular.isDefined(e.closeOnSelect)?b(e.closeOnSelect)():g.closeOnSelect,i.$watch("skipFocusser",function(){var t=i.$eval(e.skipFocusser);s.skipFocusser=void 0!==t?t:g.skipFocusser}),s.onSelectCallback=b(e.onSelect),s.onRemoveCallback=b(e.onRemove),s.limit=angular.isDefined(e.limit)?parseInt(e.limit,10):void 0,s.ngModel=o,s.choiceGrouped=function(t){return s.isGrouped&&t&&t.name},e.tabindex&&e.$observe("tabindex",function(t){s.focusInput.attr("tabindex",t),r.removeAttr("tabindex")}),i.$watch("searchEnabled",function(){var t=i.$eval(e.searchEnabled);s.searchEnabled=void 0!==t?t:g.searchEnabled}),i.$watch("sortable",function(){var t=i.$eval(e.sortable);s.sortable=void 0!==t?t:g.sortable}),e.$observe("disabled",function(){s.disabled=void 0!==e.disabled&&e.disabled}),e.$observe("resetSearchInput",function(){var t=i.$eval(e.resetSearchInput);s.resetSearchInput=void 0===t||t}),e.$observe("paste",function(){s.paste=i.$eval(e.paste)}),e.$observe("tagging",function(){if(void 0!==e.tagging){var t=i.$eval(e.tagging);s.tagging={isActivated:!0,fct:!0!==t?t:void 0}}else s.tagging={isActivated:!1,fct:void 0}}),e.$observe("taggingLabel",function(){void 0!==e.tagging&&("false"===e.taggingLabel?s.taggingLabel=!1:s.taggingLabel=void 0!==e.taggingLabel?e.taggingLabel:"(new)")}),e.$observe("taggingTokens",function(){if(void 0!==e.tagging){var t=void 0!==e.taggingTokens?e.taggingTokens.split("|"):[",","ENTER"];s.taggingTokens={isActivated:!0,tokens:t}}}),angular.isDefined(e.autofocus)&&_(function(){s.setFocus()}),angular.isDefined(e.focusOn)&&i.$on(e.focusOn,function(){_(function(){s.setFocus()})}),m.on("click",a),i.$on("$destroy",function(){m.off("click",a)}),n(i,function(t){var e=angular.element("<div>").append(t),n=e.querySelectorAll(".ui-select-match");if(n.removeAttr("ui-select-match"),n.removeAttr("data-ui-select-match"),1!==n.length)throw v("transcluded","Expected 1 .ui-select-match but got '{0}'.",n.length);r.querySelectorAll(".ui-select-match").replaceWith(n);var i=e.querySelectorAll(".ui-select-choices");if(i.removeAttr("ui-select-choices"),i.removeAttr("data-ui-select-choices"),1!==i.length)throw v("transcluded","Expected 1 .ui-select-choices but got '{0}'.",i.length);r.querySelectorAll(".ui-select-choices").replaceWith(i)});var l=i.$eval(e.appendToBody);(void 0!==l?l:g.appendToBody)&&(i.$watch("$select.open",function(t){var e;t?(e=y(r),(u=angular.element('<div class="ui-select-placeholder"></div>'))[0].style.width=e.width+"px",u[0].style.height=e.height+"px",r.after(u),c=r[0].style.width,m.find("body").append(r),r[0].style.position="absolute",r[0].style.left=e.left+"px",r[0].style.top=e.top+"px",r[0].style.width=e.width+"px"):h()}),i.$on("$destroy",function(){h()}));var u=null,c="";function h(){null!==u&&(u.replaceWith(r),u=null,r[0].style.position="",r[0].style.left="",r[0].style.top="",r[0].style.width=c,s.setFocus())}var d=null,p="direction-up";i.$watch("$select.open",function(){"auto"!==s.dropdownPosition&&"up"!==s.dropdownPosition||i.calculateDropdownPos()});var f=function(t,e){t=t||y(r),e=e||y(d),d[0].style.position="absolute",d[0].style.top=-1*e.height+"px",r.addClass(p)};i.calculateDropdownPos=function(){if(s.open){if(0===(d=angular.element(r).querySelectorAll(".ui-select-dropdown")).length)return;d[0].style.opacity=0,_(function(){if("up"===s.dropdownPosition)f();else{r.removeClass(p);var t=y(r),e=y(d),n=m[0].documentElement.scrollTop||m[0].body.scrollTop;t.top+t.height+e.height>n+m[0].documentElement.clientHeight?f(t,e):(i=t,o=e,r.removeClass(p),i=i||y(r),o=o||y(d),d[0].style.position="",d[0].style.top="")}var i,o;d[0].style.opacity=1})}else{if(null===d||0===d.length)return;d[0].style.position="",d[0].style.top="",r.removeClass(p)}}}}}}]),e.directive("uiSelectMatch",["uiSelectConfig",function(r){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){return t.addClass("ui-select-match"),(t.parent().attr("theme")||r.theme)+(t.parent().attr("multiple")?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,e,n,i){function o(t){i.allowClear=!!angular.isDefined(t)&&(""===t||"true"===t.toLowerCase())}i.lockChoiceExpression=n.uiLockChoice,n.$observe("placeholder",function(t){i.placeholder=void 0!==t?t:r.placeholder}),n.$observe("allowClear",o),o(n.allowClear),i.multiple&&i.sizeSearchInput()}}}]),e.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(o,r){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(i,o){var t,r=this,s=i.$select;angular.isUndefined(s.selected)&&(s.selected=[]),i.$evalAsync(function(){t=i.ngModel}),r.activeMatchIndex=-1,r.updateModel=function(){t.$setViewValue(Date.now()),r.refreshComponent()},r.refreshComponent=function(){s.refreshItems(),s.sizeSearchInput()},r.removeChoice=function(t){var e=s.selected[t];if(!e._uiSelectChoiceLocked){var n={};n[s.parserResult.itemName]=e,s.selected.splice(t,1),r.activeMatchIndex=-1,s.sizeSearchInput(),o(function(){s.onRemoveCallback(i,{$item:e,$model:s.parserResult.modelMapper(i,n)})}),r.updateModel()}},r.getPlaceholder=function(){if(!s.selected||!s.selected.length)return s.placeholder}}],controllerAs:"$selectMultiple",link:function(l,t,e,n){var u=n[0],i=l.ngModel=n[1],c=l.$selectMultiple;function h(t){return void 0!==t&&void 0!==u.search&&0<t.filter(function(t){return void 0!==u.search.toUpperCase()&&void 0!==t&&t.toUpperCase()===u.search.toUpperCase()}).length}function d(t,e){var n=-1;if(angular.isArray(t))for(var i=angular.copy(t),o=0;o<i.length;o++)if(void 0===u.tagging.fct)i[o]+" "+u.taggingLabel===e&&(n=o);else{var r=i[o];angular.isObject(r)&&(r.isTag=!0),angular.equals(r,e)&&(n=o)}return n}u.multiple=!0,u.removeSelected=!0,u.focusInput=u.searchInput,i.$isEmpty=function(t){return!t||0===t.length},i.$parsers.unshift(function(){for(var t,e={},n=[],i=u.selected.length-1;0<=i;i--)(e={})[u.parserResult.itemName]=u.selected[i],t=u.parserResult.modelMapper(l,e),n.unshift(t);return n}),i.$formatters.unshift(function(t){var r,e=u.parserResult.source(l,{$select:{search:""}}),s={};if(!e)return t;var a=[],n=function(t,e){if(t&&t.length){for(var n=t.length-1;0<=n;n--){if(s[u.parserResult.itemName]=t[n],r=u.parserResult.modelMapper(l,s),u.parserResult.trackByExp){var i=/(\w*)\./.exec(u.parserResult.trackByExp),o=/\.([^\s]+)/.exec(u.parserResult.trackByExp);if(i&&0<i.length&&i[1]==u.parserResult.itemName&&o&&0<o.length&&r[o[1]]==e[o[1]])return a.unshift(t[n]),!0}if(angular.equals(r,e))return a.unshift(t[n]),!0}return!1}};if(!t)return a;for(var i=t.length-1;0<=i;i--)n(u.selected,t[i])||n(e,t[i])||a.unshift(t[i]);return a}),l.$watchCollection(function(){return i.$modelValue},function(t,e){e!=t&&(i.$modelValue=null,c.refreshComponent())}),i.$render=function(){if(!angular.isArray(i.$viewValue)){if(!angular.isUndefined(i.$viewValue)&&null!==i.$viewValue)throw o("multiarr","Expected model value to be array but got '{0}'",i.$viewValue);u.selected=[]}u.selected=i.$viewValue,c.refreshComponent(),l.$evalAsync()},l.$on("uis:select",function(t,e){u.selected.length>=u.limit||(u.selected.push(e),c.updateModel())}),l.$on("uis:activate",function(){c.activeMatchIndex=-1}),l.$watch("$select.disabled",function(t,e){e&&!t&&u.sizeSearchInput()}),u.searchInput.on("keydown",function(e){var n=e.which;l.$apply(function(){var t=!1;g.isHorizontalMovement(n)&&(t=function(t){var e=(l=u.searchInput[0],angular.isNumber(l.selectionStart)?l.selectionStart:l.value.length),n=u.selected.length,i=n-1,o=c.activeMatchIndex,r=c.activeMatchIndex+1,s=c.activeMatchIndex-1,a=o;var l;if(0<e||u.search.length&&t==g.RIGHT)return!1;u.close(),a=function(){switch(t){case g.LEFT:return~c.activeMatchIndex?s:i;case g.RIGHT:return~c.activeMatchIndex&&o!==i?r:(u.activate(),!1);case g.BACKSPACE:return~c.activeMatchIndex?(c.removeChoice(o),s):i;case g.DELETE:return!!~c.activeMatchIndex&&(c.removeChoice(c.activeMatchIndex),o)}}(),u.selected.length&&!1!==a?c.activeMatchIndex=Math.min(i,Math.max(0,a)):c.activeMatchIndex=-1;return!0}(n)),t&&n!=g.TAB&&(e.preventDefault(),e.stopPropagation())})}),u.searchInput.on("keyup",function(t){if(g.isVerticalMovement(t.which)||l.$evalAsync(function(){u.activeIndex=!1===u.taggingLabel?-1:0}),u.tagging.isActivated&&0<u.search.length){if(t.which===g.TAB||g.isControl(t)||g.isFunctionKey(t)||t.which===g.ESC||g.isVerticalMovement(t.which))return;if(u.activeIndex=!1===u.taggingLabel?-1:0,!1===u.taggingLabel)return;var e,n,i,o=angular.copy(u.items),r=angular.copy(u.items),s=!1,a=-1;if(void 0!==u.tagging.fct){if(0<(n=u.$filter("filter")(o,{isTag:!0})).length&&(i=n[0]),0<o.length&&i&&(s=!0,o=o.slice(1,o.length),r=r.slice(1,r.length)),e=u.tagging.fct(u.search),r.some(function(t){return angular.equals(t,u.tagging.fct(u.search))})||u.selected.some(function(t){return angular.equals(t,e)}))return void l.$evalAsync(function(){u.activeIndex=0,u.items=o});e.isTag=!0}else{if(0<(n=u.$filter("filter")(o,function(t){return t.match(u.taggingLabel)})).length&&(i=n[0]),void 0!==o[0]&&0<o.length&&i&&(s=!0,o=o.slice(1,o.length),r=r.slice(1,r.length)),e=u.search+" "+u.taggingLabel,-1<d(u.selected,u.search))return;if(h(r.concat(u.selected)))return void(s&&(o=r,l.$evalAsync(function(){u.activeIndex=0,u.items=o})));if(h(r))return void(s&&(u.items=r.slice(1,r.length)))}s&&(a=d(u.selected,e)),o=-1<a?o.slice(a+1,o.length-1):((o=[]).push(e),o.concat(r)),l.$evalAsync(function(){u.activeIndex=0,u.items=o})}}),u.searchInput.on("blur",function(){r(function(){c.activeMatchIndex=-1})})}}}]),e.directive("uiSelectSingle",["$timeout","$compile",function(a,l){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(r,t,e,n){var s=n[0],i=n[1];i.$parsers.unshift(function(t){var e={};return e[s.parserResult.itemName]=t,s.parserResult.modelMapper(r,e)}),i.$formatters.unshift(function(e){var t=s.parserResult.source(r,{$select:{search:""}}),n={};if(t){var i=function(t){return n[s.parserResult.itemName]=t,s.parserResult.modelMapper(r,n)==e};if(s.selected&&i(s.selected))return s.selected;for(var o=t.length-1;0<=o;o--)if(i(t[o]))return t[o]}return e}),r.$watch("$select.selected",function(t){i.$viewValue!==t&&i.$setViewValue(t)}),i.$render=function(){s.selected=i.$viewValue},r.$on("uis:select",function(t,e){s.selected=e}),r.$on("uis:close",function(t,e){a(function(){s.focusser.prop("disabled",!1),e||s.focusser[0].focus()},0,!1)}),r.$on("uis:activate",function(){o.prop("disabled",!0)});var o=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");l(o)(r),s.focusser=o,s.focusInput=o,t.parent().append(o),o.bind("focus",function(){r.$evalAsync(function(){s.focus=!0})}),o.bind("blur",function(){r.$evalAsync(function(){s.focus=!1})}),o.bind("keydown",function(t){if(t.which===g.BACKSPACE)return t.preventDefault(),t.stopPropagation(),s.select(void 0),void r.$apply();t.which===g.TAB||g.isControl(t)||g.isFunctionKey(t)||t.which===g.ESC||(t.which!=g.DOWN&&t.which!=g.UP&&t.which!=g.ENTER&&t.which!=g.SPACE||(t.preventDefault(),t.stopPropagation(),s.activate()),r.$digest())}),o.bind("keyup input",function(t){t.which===g.TAB||g.isControl(t)||g.isFunctionKey(t)||t.which===g.ESC||t.which==g.ENTER||t.which===g.BACKSPACE||(s.activate(o.val()),o.val(""),r.$digest())})}}}]),e.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(p,t,f){return{require:"^^uiSelect",link:function(o,r,s,t){if(null===o[s.uiSelectSort])throw f("sort","Expected a list to sort");var e=angular.extend({axis:"horizontal"},o.$eval(s.uiSelectSortOptions)).axis,n="dragging",a="dropping",l="dropping-before",u="dropping-after";o.$watch(function(){return t.sortable},function(t){t?r.attr("draggable",!0):r.removeAttr("draggable")}),r.on("dragstart",function(t){r.addClass(n),(t.dataTransfer||t.originalEvent.dataTransfer).setData("text",o.$index.toString())}),r.on("dragend",function(){r.removeClass(n)});var i,c=function(t){t.preventDefault(),("vertical"===e?t.offsetY||t.layerY||(t.originalEvent?t.originalEvent.offsetY:0):t.offsetX||t.layerX||(t.originalEvent?t.originalEvent.offsetX:0))<this["vertical"===e?"offsetHeight":"offsetWidth"]/2?(r.removeClass(u),r.addClass(l)):(r.removeClass(l),r.addClass(u))},h=function(t){t.preventDefault();var e=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text"),10);p.cancel(i),i=p(function(){d(e)},20)},d=function(t){var e=o.$eval(s.uiSelectSort),n=e[t],i=null;i=r.hasClass(l)?t<o.$index?o.$index-1:o.$index:t<o.$index?o.$index:o.$index+1,function(t,e){this.splice(e,0,this.splice(t,1)[0])}.apply(e,[t,i]),o.$apply(function(){o.$emit("uiSelectSort:change",{array:e,item:n,from:t,to:i})}),r.removeClass(a),r.removeClass(l),r.removeClass(u),r.off("drop",h)};r.on("dragenter",function(){r.hasClass(n)||(r.addClass(a),r.on("dragover",c),r.on("drop",h))}),r.on("dragleave",function(t){t.target==r&&(r.removeClass(a),r.removeClass(l),r.removeClass(u),r.off("dragover",c),r.off("drop",h))})}}}]),e.service("uisRepeatParser",["uiSelectMinErr","$parse",function(r,s){this.parse=function(t){var e;if(!(e=t.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/)))throw r("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",t);var n=e[5],i="";if(e[3]){n=e[5].replace(/(^\()|(\)$)/g,"");var o=e[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);o&&o[1].trim()&&(i=o[1],n=n.replace(i,""))}return{itemName:e[4]||e[2],keyName:e[3],source:s(n),filters:i,trackByExp:e[6],modelMapper:s(e[1]||e[4]||e[2]),repeatExpression:function(t){var e=this.itemName+" in "+(t?"$group.items":"$select.items");return this.trackByExp&&(e+=" track by "+this.trackByExp),e}}},this.getGroupNgRepeatExpression=function(){return"$group in $select.groups"}}])}(),angular.module("ui.select").run(["$templateCache",function(t){t.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" role="listbox" ng-show="$select.open"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><a href="" class="ui-select-choices-row-inner"></a></div></li></ul>'),t.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),t.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty()" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),t.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div></div>'),t.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="form-control ui-select-search" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.searchEnabled && $select.open"><div class="ui-select-choices"></div></div>'),t.put("select2/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul role="listbox" id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),t.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),t.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),t.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="ui-select-choices"></div></div></div>'),t.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="select2-search" ng-show="$select.searchEnabled"><input type="text" autocomplete="off" autocorrect="false" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div></div></div>'),t.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown single"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup" role="listbox"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),t.put("selectize/match.tpl.html",'<div ng-hide="($select.open || $select.isEmpty())" class="ui-select-match" ng-transclude=""></div>'),t.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.searchEnabled || ($select.selected && !$select.open)" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div></div>')}]),function r(s,a,l){function u(n,t){if(!a[n]){if(!s[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(c)return c(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var o=a[n]={exports:{}};s[n][0].call(o.exports,function(t){var e=s[n][1][t];return u(e||t)},o,o.exports,r,s,a,l)}return a[n].exports}for(var c="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,n){void 0!==e&&(e.exports=function(t,e,n){function i(){var t;void 0===s.status||200<=(t=s.status)&&t<300||304===t?e.call(s,null,s):e.call(s,s,null)}var o=!1;if(void 0===window.XMLHttpRequest)return e(Error("Browser not supported"));if(void 0===n){var r=t.match(/^\s*https?:\/\/[^\/]*/);n=r&&r[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var s=new window.XMLHttpRequest;if(n&&!("withCredentials"in s)){s=new window.XDomainRequest;var a=e;e=function(){if(o)a.apply(this,arguments);else{var t=this,e=arguments;setTimeout(function(){a.apply(t,e)},0)}}}return"onload"in s?s.onload=i:s.onreadystatechange=function(){4===s.readyState&&i()},s.onerror=function(t){e.call(this,t||!0,null),e=function(){}},s.onprogress=function(){},s.ontimeout=function(t){e.call(this,t,null),e=function(){}},s.onabort=function(t){e.call(this,t,null),e=function(){}},s.open("GET",t,!0),s.send(null),o=!0,s})},{}],2:[function(t,P,e){!function(s,d,a){var e,n,t=s.L,f={};f.version="0.7.2","object"==typeof P&&"object"==typeof P.exports?P.exports=f:"function"==typeof define&&define.amd&&define(f),f.noConflict=function(){return s.L=t,this},(s.L=f).Util={extend:function(t){var e,n,i,o,r=Array.prototype.slice.call(arguments,1);for(n=0,i=r.length;n<i;n++)for(e in o=r[n]||{})o.hasOwnProperty(e)&&(t[e]=o[e]);return t},bind:function(t,e){var n=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,n||arguments)}},stamp:(e=0,n="_leaflet_id",function(t){return t[n]=t[n]||++e,t[n]}),invokeEach:function(t,e,n){var i,o;if("object"!=typeof t)return!1;for(i in o=Array.prototype.slice.call(arguments,3),t)e.apply(n,[i,t[i]].concat(o));return!0},limitExecByInterval:function(n,i,o){var r,s;return function t(){var e=arguments;return r?void(s=!0):(r=!0,setTimeout(function(){r=!1,s&&(t.apply(o,e),s=!1)},i),void n.apply(o,e))}},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return f.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=f.extend({},t.options,e),t.options},getParamString:function(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,i){return t.replace(/\{ *([\w_]+) *\}/g,function(t,e){var n=i[e];if(n===a)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(i)),n})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var e,n,i=["webkit","moz","o","ms"];for(e=0;e<i.length&&!n;e++)n=s[i[e]+t];return n}function o(t){var e=+new Date,n=Math.max(0,16-(e-i));return i=e+n,s.setTimeout(t,n)}var i=0,r=s.requestAnimationFrame||t("RequestAnimationFrame")||o,e=s.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){s.clearTimeout(t)};f.Util.requestAnimFrame=function(t,e,n,i){return t=f.bind(t,e),n&&r===o?void t():r.call(s,t,i)},f.Util.cancelAnimFrame=function(t){t&&e.call(s,t)}}(),f.extend=f.Util.extend,f.bind=f.Util.bind,f.stamp=f.Util.stamp,f.setOptions=f.Util.setOptions,f.Class=function(){},f.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var i=new n;for(var o in(i.constructor=e).prototype=i,this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);t.statics&&(f.extend(e,t.statics),delete t.statics),t.includes&&(f.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=f.extend({},i.options,t.options)),f.extend(i,t),i._initHooks=[];var r=this;return e.__super__=r.prototype,i.callInitHooks=function(){if(!this._initHooksCalled){r.prototype.callInitHooks&&r.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;t<e;t++)i._initHooks[t].call(this)}},e},f.Class.include=function(t){f.extend(this.prototype,t)},f.Class.mergeOptions=function(t){f.extend(this.prototype.options,t)},f.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var i,o,r,l,u,c,h,p,m,g,v,y,b,_,w,x,C,k,$,T,S,M,D,L="_leaflet_events";f.Mixin={},f.Mixin.Events={addEventListener:function(t,e,n){if(f.Util.invokeEach(t,this.addEventListener,this,e,n))return this;var i,o,r,s,a,l,u,c=this[L]=this[L]||{},h=n&&n!==this&&f.stamp(n);for(i=0,o=(t=f.Util.splitWords(t)).length;i<o;i++)r={action:e,context:n||this},s=t[i],h?(l=(a=s+"_idx")+"_len",(u=c[a]=c[a]||{})[h]||(u[h]=[],c[l]=(c[l]||0)+1),u[h].push(r)):(c[s]=c[s]||[],c[s].push(r));return this},hasEventListeners:function(t){var e=this[L];return!!e&&(t in e&&0<e[t].length||t+"_idx"in e&&0<e[t+"_idx_len"])},removeEventListener:function(t,e,n){if(!this[L])return this;if(!t)return this.clearAllEventListeners();if(f.Util.invokeEach(t,this.removeEventListener,this,e,n))return this;var i,o,r,s,a,l,u,c,h=this[L],d=n&&n!==this&&f.stamp(n);for(i=0,o=(t=f.Util.splitWords(t)).length;i<o;i++)if(u=(l=(r=t[i])+"_idx")+"_len",c=h[l],e){if(s=d&&c?c[d]:h[r]){for(a=s.length-1;0<=a;a--)s[a].action!==e||n&&s[a].context!==n||(s.splice(a,1)[0].action=f.Util.falseFn);n&&c&&0===s.length&&(delete c[d],h[u]--)}}else delete h[r],delete h[l],delete h[u];return this},clearAllEventListeners:function(){return delete this[L],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var n,i,o,r,s,a=f.Util.extend({},e,{type:t,target:this}),l=this[L];if(l[t])for(i=0,o=(n=l[t].slice()).length;i<o;i++)n[i].action.call(n[i].context,a);for(s in r=l[t+"_idx"])if(n=r[s].slice())for(i=0,o=n.length;i<o;i++)n[i].action.call(n[i].context,a);return this},addOneTimeEventListener:function(t,e,n){if(f.Util.invokeEach(t,this.addOneTimeEventListener,this,e,n))return this;var i=f.bind(function(){this.removeEventListener(t,e,n).removeEventListener(t,i,n)},this);return this.addEventListener(t,e,n).addEventListener(t,i,n)}},f.Mixin.Events.on=f.Mixin.Events.addEventListener,f.Mixin.Events.off=f.Mixin.Events.removeEventListener,f.Mixin.Events.once=f.Mixin.Events.addOneTimeEventListener,f.Mixin.Events.fire=f.Mixin.Events.fireEvent,u=(l="ActiveXObject"in s)&&!d.addEventListener,c=navigator.userAgent.toLowerCase(),h=-1!==c.indexOf("webkit"),p=-1!==c.indexOf("chrome"),m=-1!==c.indexOf("phantom"),g=-1!==c.indexOf("android"),v=-1!==c.search("android [23]"),y=-1!==c.indexOf("gecko"),b=typeof orientation!=a+"",_=s.navigator&&s.navigator.msPointerEnabled&&s.navigator.msMaxTouchPoints&&!s.PointerEvent,w=s.PointerEvent&&s.navigator.pointerEnabled&&s.navigator.maxTouchPoints||_,x="devicePixelRatio"in s&&1<s.devicePixelRatio||"matchMedia"in s&&s.matchMedia("(min-resolution:144dpi)")&&s.matchMedia("(min-resolution:144dpi)").matches,C=d.documentElement,k=l&&"transition"in C.style,$="WebKitCSSMatrix"in s&&"m11"in new s.WebKitCSSMatrix&&!v,T="MozPerspective"in C.style,S="OTransition"in C.style,M=!s.L_DISABLE_3D&&(k||$||T||S)&&!m,D=!s.L_NO_TOUCH&&!m&&function(){var t="ontouchstart";if(w||t in C)return!0;var e=d.createElement("div"),n=!1;return!!e.setAttribute&&(e.setAttribute(t,"return;"),"function"==typeof e[t]&&(n=!0),e.removeAttribute(t),e=null,n)}(),f.Browser={ie:l,ielt9:u,webkit:h,gecko:y&&!h&&!s.opera&&!l,android:g,android23:v,chrome:p,ie3d:k,webkit3d:$,gecko3d:T,opera3d:S,any3d:M,mobile:b,mobileWebkit:b&&h,mobileWebkit3d:b&&$,mobileOpera:b&&s.opera,touch:D,msPointer:_,pointer:w,retina:x},f.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},f.Point.prototype={clone:function(){return new f.Point(this.x,this.y)},add:function(t){return this.clone()._add(f.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(f.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){var e=(t=f.point(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=f.point(t)).x===this.x&&t.y===this.y},contains:function(t){return t=f.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+f.Util.formatNum(this.x)+", "+f.Util.formatNum(this.y)+")"}},f.point=function(t,e,n){return t instanceof f.Point?t:f.Util.isArray(t)?new f.Point(t[0],t[1]):t===a||null===t?t:new f.Point(t,e,n)},f.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},f.Bounds.prototype={extend:function(t){return t=f.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new f.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new f.Point(this.min.x,this.max.y)},getTopRight:function(){return new f.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof f.Point?f.point(t):f.bounds(t))instanceof f.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=f.bounds(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>=e.x&&i.x<=n.x,s=o.y>=e.y&&i.y<=n.y;return r&&s},isValid:function(){return!(!this.min||!this.max)}},f.bounds=function(t,e){return!t||t instanceof f.Bounds?t:new f.Bounds(t,e)},f.Transformation=function(t,e,n,i){this._a=t,this._b=e,this._c=n,this._d=i},f.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new f.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},f.DomUtil={get:function(t){return"string"==typeof t?d.getElementById(t):t},getStyle:function(t,e){var n=t.style[e];if(!n&&t.currentStyle&&(n=t.currentStyle[e]),(!n||"auto"===n)&&d.defaultView){var i=d.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n},getViewportOffset:function(t){var e,n=0,i=0,o=t,r=d.body,s=d.documentElement;do{if(n+=o.offsetTop||0,i+=o.offsetLeft||0,n+=parseInt(f.DomUtil.getStyle(o,"borderTopWidth"),10)||0,i+=parseInt(f.DomUtil.getStyle(o,"borderLeftWidth"),10)||0,e=f.DomUtil.getStyle(o,"position"),o.offsetParent===r&&"absolute"===e)break;if("fixed"===e){n+=r.scrollTop||s.scrollTop||0,i+=r.scrollLeft||s.scrollLeft||0;break}if("relative"===e&&!o.offsetLeft){var a=f.DomUtil.getStyle(o,"width"),l=f.DomUtil.getStyle(o,"max-width"),u=o.getBoundingClientRect();("none"!==a||"none"!==l)&&(i+=u.left+o.clientLeft),n+=u.top+(r.scrollTop||s.scrollTop||0);break}o=o.offsetParent}while(o);o=t;do{if(o===r)break;n-=o.scrollTop||0,i-=o.scrollLeft||0,o=o.parentNode}while(o);return new f.Point(i,n)},documentIsLtr:function(){return f.DomUtil._docIsLtrCached||(f.DomUtil._docIsLtrCached=!0,f.DomUtil._docIsLtr="ltr"===f.DomUtil.getStyle(d.body,"direction")),f.DomUtil._docIsLtr},create:function(t,e,n){var i=d.createElement(t);return i.className=e,n&&n.appendChild(i),i},hasClass:function(t,e){if(t.classList!==a)return t.classList.contains(e);var n=f.DomUtil._getClass(t);return 0<n.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==a)for(var n=f.Util.splitWords(e),i=0,o=n.length;i<o;i++)t.classList.add(n[i]);else if(!f.DomUtil.hasClass(t,e)){var r=f.DomUtil._getClass(t);f.DomUtil._setClass(t,(r?r+" ":"")+e)}},removeClass:function(t,e){t.classList!==a?t.classList.remove(e):f.DomUtil._setClass(t,f.Util.trim((" "+f.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===a?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===a?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}},testProp:function(t){for(var e=d.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},getTranslateString:function(t){var e=f.Browser.webkit3d,n=(e?",0":"")+")";return"translate"+(e?"3d":"")+"("+t.x+"px,"+t.y+"px"+n},getScaleString:function(t,e){return f.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t)))+(" scale("+t+") ")},setPosition:function(t,e,n){t._leaflet_pos=e,!n&&f.Browser.any3d?t.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},f.DomUtil.TRANSFORM=f.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),f.DomUtil.TRANSITION=f.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),f.DomUtil.TRANSITION_END="webkitTransition"===f.DomUtil.TRANSITION||"OTransition"===f.DomUtil.TRANSITION?f.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in d)f.extend(f.DomUtil,{disableTextSelection:function(){f.DomEvent.on(s,"selectstart",f.DomEvent.preventDefault)},enableTextSelection:function(){f.DomEvent.off(s,"selectstart",f.DomEvent.preventDefault)}});else{var e=f.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);f.extend(f.DomUtil,{disableTextSelection:function(){if(e){var t=d.documentElement.style;this._userSelect=t[e],t[e]="none"}},enableTextSelection:function(){e&&(d.documentElement.style[e]=this._userSelect,delete this._userSelect)}})}f.extend(f.DomUtil,{disableImageDrag:function(){f.DomEvent.on(s,"dragstart",f.DomEvent.preventDefault)},enableImageDrag:function(){f.DomEvent.off(s,"dragstart",f.DomEvent.preventDefault)}})}(),f.LatLng=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,n!==a&&(this.alt=parseFloat(n))},f.extend(f.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),f.LatLng.prototype={equals:function(t){return!!t&&(t=f.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=f.LatLng.MAX_MARGIN)},toString:function(t){return"LatLng("+f.Util.formatNum(this.lat,t)+", "+f.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=f.latLng(t);var e=f.LatLng.DEG_TO_RAD,n=(t.lat-this.lat)*e,i=(t.lng-this.lng)*e,o=this.lat*e,r=t.lat*e,s=Math.sin(n/2),a=Math.sin(i/2),l=s*s+a*a*Math.cos(o)*Math.cos(r);return 12756274*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))},wrap:function(t,e){var n=this.lng;return n=(n+(e=e||180))%(e-(t=t||-180))+(n<t||n===e?e:t),new f.LatLng(this.lat,n)}},f.latLng=function(t,e){return t instanceof f.LatLng?t:f.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new f.LatLng(t[0],t[1],t[2]):null:t===a||null===t?t:"object"==typeof t&&"lat"in t?new f.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===a?null:new f.LatLng(t,e)},f.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},f.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=f.latLng(t);return(t=null!==e?e:f.latLngBounds(t))instanceof f.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new f.LatLng(t.lat,t.lng),this._northEast=new f.LatLng(t.lat,t.lng)):t instanceof f.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new f.LatLngBounds(new f.LatLng(e.lat-i,e.lng-o),new f.LatLng(n.lat+i,n.lng+o))},getCenter:function(){return new f.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new f.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new f.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof f.LatLng?f.latLng(t):f.latLngBounds(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof f.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=f.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&i.lat<=n.lat,s=o.lng>=e.lng&&i.lng<=n.lng;return r&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=f.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},f.latLngBounds=function(t,e){return!t||t instanceof f.LatLngBounds?t:new f.LatLngBounds(t,e)},f.Projection={},f.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=f.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=t.lng*e,r=i*e;return r=Math.log(Math.tan(Math.PI/4+r/2)),new f.Point(o,r)},unproject:function(t){var e=f.LatLng.RAD_TO_DEG,n=t.x*e,i=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new f.LatLng(i,n)}},f.Projection.LonLat={project:function(t){return new f.Point(t.lng,t.lat)},unproject:function(t){return new f.LatLng(t.y,t.x)}},f.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return f.point(e,e)}},f.CRS.Simple=f.extend({},f.CRS,{projection:f.Projection.LonLat,transformation:new f.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),f.CRS.EPSG3857=f.extend({},f.CRS,{code:"EPSG:3857",projection:f.Projection.SphericalMercator,transformation:new f.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){return this.projection.project(t).multiplyBy(6378137)}}),f.CRS.EPSG900913=f.extend({},f.CRS.EPSG3857,{code:"EPSG:900913"}),f.CRS.EPSG4326=f.extend({},f.CRS,{code:"EPSG:4326",projection:f.Projection.LonLat,transformation:new f.Transformation(1/360,.5,-1/360,.5)}),f.Map=f.Class.extend({includes:f.Mixin.Events,options:{crs:f.CRS.EPSG3857,fadeAnimation:f.DomUtil.TRANSITION&&!f.Browser.android23,trackResize:!0,markerZoomAnimation:f.DomUtil.TRANSITION&&f.Browser.any3d},initialize:function(t,e){e=f.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=f.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==a&&this.setView(f.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===a?this.getZoom():e,this._resetView(f.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),r=(t instanceof f.Point?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/i),s=this.containerPointToLatLng(o.add(r));return this.setView(s,e,{zoom:n})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():f.latLngBounds(t);var n=f.point(e.paddingTopLeft||e.padding||[0,0]),i=f.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i)),r=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o),l=this.unproject(s.add(a).divideBy(2).add(r),o);return o=e&&e.maxZoom?Math.min(e.maxZoom,o):o,this.setView(l,o,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(f.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=f.latLngBounds(t),(this.options.maxBounds=t)?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var n=this.getCenter(),i=this._limitCenter(n,this._zoom,t);return n.equals(i)?this:this.panTo(i,e)},addLayer:function(t){var e=f.stamp(t);return this._layers[e]||(!(this._layers[e]=t).options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&t instanceof f.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t)),this},removeLayer:function(t){var e=f.stamp(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&t instanceof f.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this))),this},hasLayer:function(t){return!!t&&f.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=f.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),i=e.divideBy(2).round(),o=n.divideBy(2).round(),r=i.subtract(o);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=a}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new f.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===a?this._layersMinZoom===a?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===a?this._layersMaxZoom===a?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=f.latLngBounds(t);var i,o=this.getMinZoom()-(e?1:0),r=this.getMaxZoom(),s=this.getSize(),a=t.getNorthWest(),l=t.getSouthEast(),u=!0;for(n=f.point(n||[0,0]);o++,i=this.project(l,o).subtract(this.project(a,o)).add(n),(u=e?i.x<s.x||i.y<s.y:s.contains(i))&&o<=r;);return u&&e?null:e?o:o-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new f.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new f.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===a?this._zoom:e,this.options.crs.latLngToPoint(f.latLng(t),e)},unproject:function(t,e){return e=e===a?this._zoom:e,this.options.crs.pointToLatLng(f.point(t),e)},layerPointToLatLng:function(t){var e=f.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(f.latLng(t))._round()._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return f.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return f.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(f.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(f.latLng(t)))},mouseEventToContainerPoint:function(t){return f.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=f.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;f.DomUtil.addClass(t,"leaflet-container"+(f.Browser.touch?" leaflet-touch":"")+(f.Browser.retina?" leaflet-retina":"")+(f.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=f.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(f.DomUtil.addClass(t.markerPane,e),f.DomUtil.addClass(t.shadowPane,e),f.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return f.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){for(var e=0,n=(t=t?f.Util.isArray(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_resetView:function(t,e,n,i){var o=this._zoom!==e;i||(this.fire("movestart"),o&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),n?this._initialTopLeftPoint._add(this._getMapPanePos()):f.DomUtil.setPosition(this._mapPane,new f.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var r=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),r&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(o||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(t){f.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,n=-1/0,i=this._getZoomSpan();for(t in this._zoomBoundLayers){var o=this._zoomBoundLayers[t];isNaN(o.options.minZoom)||(e=Math.min(e,o.options.minZoom)),isNaN(o.options.maxZoom)||(n=Math.max(n,o.options.maxZoom))}t===a?this._layersMaxZoom=this._layersMinZoom=a:(this._layersMaxZoom=n,this._layersMinZoom=e),i!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(f.DomEvent){t=t||"on",f.DomEvent[t](this._container,"click",this._onMouseClick,this);var e,n,i=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(e=0,n=i.length;e<n;e++)f.DomEvent[t](this._container,i[e],this._fireMouseEvent,this);this.options.trackResize&&f.DomEvent[t](s,"resize",this._onResize,this)}},_onResize:function(){f.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=f.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||f.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!f.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&f.DomEvent.preventDefault(t);var n=this.mouseEventToContainerPoint(t),i=this.containerPointToLayerPoint(n),o=this.layerPointToLatLng(i);this.fire(e,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return f.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewTopLeftPoint(n,e).add(this._getMapPanePos());return this.project(t,e)._subtract(i)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),r=new f.Bounds(i.subtract(o),i.add(o)),s=this._getBoundsOffset(r,n,e);return this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new f.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=this.project(e.getNorthWest(),n).subtract(t.min),o=this.project(e.getSouthEast(),n).subtract(t.max),r=this._rebound(i.x,-o.x),s=this._rebound(i.y,-o.y);return new f.Point(r,s)},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom();return Math.max(e,Math.min(n,t))}}),f.map=function(t,e){return new f.Map(t,e)},f.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=f.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=this.R_MAJOR,r=this.R_MINOR,s=t.lng*e*o,a=i*e,l=r/o,u=Math.sqrt(1-l*l),c=u*Math.sin(a);c=Math.pow((1-c)/(1+c),.5*u);var h=Math.tan(.5*(.5*Math.PI-a))/c;return a=-o*Math.log(h),new f.Point(s,a)},unproject:function(t){for(var e,n=f.LatLng.RAD_TO_DEG,i=this.R_MAJOR,o=this.R_MINOR,r=t.x*n/i,s=o/i,a=Math.sqrt(1-s*s),l=Math.exp(-t.y/i),u=Math.PI/2-2*Math.atan(l),c=15,h=.1;1e-7<Math.abs(h)&&0<--c;)e=a*Math.sin(u),u+=h=Math.PI/2-2*Math.atan(l*Math.pow((1-e)/(1+e),.5*a))-u;return new f.LatLng(u*n,r)}},f.CRS.EPSG3395=f.extend({},f.CRS,{code:"EPSG:3395",projection:f.Projection.Mercator,transformation:(o=f.Projection.Mercator.R_MAJOR,r=.5/(Math.PI*o),new f.Transformation(r,.5,-r,.5))}),f.TileLayer=f.Class.extend({includes:f.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:f.Browser.mobile,updateWhenIdle:f.Browser.mobile},initialize:function(t,e){(e=f.setOptions(this,e)).detectRetina&&f.Browser.retina&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,0<e.minZoom&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=f.latLngBounds(e.bounds)),this._url=t;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=f.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==a&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var n,i,o,r=t.children,s=-e(1/0,-1/0);for(i=0,o=r.length;i<o;i++)r[i]!==this._container&&(n=parseInt(r[i].style.zIndex,10),isNaN(n)||(s=e(s,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(s)?s:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(f.Browser.ielt9)for(t in e)f.DomUtil.setOpacity(e[t],this.options.opacity);else f.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=f.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=f.DomUtil.create("div",e,this._container),this._tileContainer=f.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,i=this.options.tileSize;return n&&n<e&&(i=Math.round(t.getZoomScale(e)/t.getZoomScale(n)*i)),i},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),n=t.getZoom(),i=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var o=f.bounds(e.min.divideBy(i)._floor(),e.max.divideBy(i)._floor());this._addTilesFromCenterOut(o),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(o)}}},_addTilesFromCenterOut:function(t){var e,n,i,o=[],r=t.getCenter();for(e=t.min.y;e<=t.max.y;e++)for(n=t.min.x;n<=t.max.x;n++)i=new f.Point(n,e),this._tileShouldBeLoaded(i)&&o.push(i);var s=o.length;if(0!==s){o.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)});var a=d.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=s,n=0;n<s;n++)this._addTile(o[n],a);this._tileContainer.appendChild(a)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var n=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=n.x)||t.y<0||t.y>=n.y)return!1}if(e.bounds){var i=e.tileSize,o=t.multiplyBy(i),r=o.add([i,i]),s=this._map.unproject(o),a=this._map.unproject(r);if(e.continuousWorld||e.noWrap||(s=s.wrap(),a=a.wrap()),!e.bounds.intersects([s,a]))return!1}return!0},_removeOtherTiles:function(t){var e,n,i,o;for(o in this._tiles)e=o.split(":"),n=parseInt(e[0],10),i=parseInt(e[1],10),(n<t.min.x||n>t.max.x||i<t.min.y||i>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(f.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),f.Browser.android||(e.onload=null,e.src=f.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var n=this._getTilePos(t),i=this._getTile();f.DomUtil.setPosition(i,n,f.Browser.chrome),this._tiles[t.x+":"+t.y]=i,this._loadTile(i,t),i.parentNode!==this._tileContainer&&e.appendChild(i)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),n=this._getTileSize();return t.multiplyBy(n).subtract(e)},getTileUrl:function(t){return f.Util.template(this._url,f.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&0<this._unusedTiles.length){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=f.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=f.Util.falseFn,f.Browser.ielt9&&this.options.opacity!==a&&f.DomUtil.setOpacity(t,this.options.opacity),f.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&f.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(f.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==f.Util.emptyImageUrl&&(f.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),f.tileLayer=function(t,e){return new f.TileLayer(t,e)},f.TileLayer.WMS=f.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var n=f.extend({},this.defaultWmsParams),i=e.tileSize||this.options.tileSize;for(var o in e.detectRetina&&f.Browser.retina?n.width=n.height=2*i:n.width=n.height=i,e)this.options.hasOwnProperty(o)||"crs"===o||(n[o]=e[o]);this.wmsParams=n,f.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,f.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,n=this.options.tileSize,i=t.multiplyBy(n),o=i.add([n,n]),r=this._crs.project(e.unproject(i,t.z)),s=this._crs.project(e.unproject(o,t.z)),a=1.3<=this._wmsVersion&&this._crs===f.CRS.EPSG4326?[s.y,r.x,r.y,s.x].join(","):[r.x,s.y,s.x,r.y].join(","),l=f.Util.template(this._url,{s:this._getSubdomain(t)});return l+f.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+a},setParams:function(t,e){return f.extend(this.wmsParams,t),e||this.redraw(),this}}),f.tileLayer.wms=function(t,e){return new f.TileLayer.WMS(t,e)},f.TileLayer.Canvas=f.TileLayer.extend({options:{async:!1},initialize:function(t){f.setOptions(this,t)},redraw:function(){for(var t in this._map&&(this._reset({hard:!0}),this._update()),this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=f.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=f.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),f.tileLayer.canvas=function(t){return new f.TileLayer.Canvas(t)},f.ImageOverlay=f.Class.extend({includes:f.Mixin.Events,options:{opacity:1},initialize:function(t,e,n){this._url=t,this._bounds=f.latLngBounds(e),f.setOptions(this,n)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&f.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=f.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&f.Browser.any3d?f.DomUtil.addClass(this._image,"leaflet-zoom-animated"):f.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),f.extend(this._image,{galleryimg:"no",onselectstart:f.Util.falseFn,onmousemove:f.Util.falseFn,onload:f.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,n=this._image,i=e.getZoomScale(t.zoom),o=this._bounds.getNorthWest(),r=this._bounds.getSouthEast(),s=e._latLngToNewLayerPoint(o,t.zoom,t.center),a=e._latLngToNewLayerPoint(r,t.zoom,t.center)._subtract(s),l=s._add(a._multiplyBy(.5*(1-1/i)));n.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(l)+" scale("+i+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);f.DomUtil.setPosition(t,e),t.style.width=n.x+"px",t.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){f.DomUtil.setOpacity(this._image,this.options.opacity)}}),f.imageOverlay=function(t,e,n){return new f.ImageOverlay(t,e,n)},f.Icon=f.Class.extend({options:{className:""},initialize:function(t){f.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n,i=this._getIconUrl(t);if(i)return n=e&&"IMG"===e.tagName?this._createImg(i,e):this._createImg(i),this._setIconStyles(n,t),n;if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null},_setIconStyles:function(t,e){var n,i=this.options,o=f.point(i[e+"Size"]);!(n=f.point("shadow"===e&&i.shadowAnchor||i.iconAnchor))&&o&&(n=o.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+i.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||d.createElement("img")).src=t,e},_getIconUrl:function(t){return f.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),f.icon=function(t){return new f.Icon(t)},f.Icon.Default=f.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];f.Browser.retina&&"icon"===t&&(t+="-2x");var n=f.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+t+".png"}}),f.Icon.Default.imagePath=function(){var t,e,n,i,o=d.getElementsByTagName("script"),r=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=o.length;t<e;t++)if((n=o[t].src).match(r))return((i=n.split(r)[0])?i+"/":"")+"images"}(),f.Marker=f.Class.extend({includes:f.Mixin.Events,options:{icon:new f.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){f.setOptions(this,e),this._latlng=f.latLng(t)},onAdd:function(t){(this._map=t).on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=f.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,n=e.options.zoomAnimation&&e.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",i=t.icon.createIcon(this._icon),o=!1;i!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(i.title=t.title),t.alt&&(i.alt=t.alt)),f.DomUtil.addClass(i,n),t.keyboard&&(i.tabIndex="0"),this._icon=i,this._initInteraction(),t.riseOnHover&&f.DomEvent.on(i,"mouseover",this._bringToFront,this).on(i,"mouseout",this._resetZIndex,this);var r=t.icon.createShadow(this._shadow),s=!1;r!==this._shadow&&(this._removeShadow(),s=!0),r&&f.DomUtil.addClass(r,n),this._shadow=r,t.opacity<1&&this._updateOpacity();var a=this._map._panes;o&&a.markerPane.appendChild(this._icon),r&&s&&a.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&f.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){f.DomUtil.setPosition(this._icon,t),this._shadow&&f.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];f.DomUtil.addClass(t,"leaflet-clickable"),f.DomEvent.on(t,"click",this._onMouseClick,this),f.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)f.DomEvent.on(t,e[n],this._fireMouseEvent,this);f.Handler.MarkerDrag&&(this.dragging=new f.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&f.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&f.DomEvent.preventDefault(t),"mousedown"!==t.type?f.DomEvent.stopPropagation(t):f.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){f.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&f.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),f.marker=function(t,e){return new f.Marker(t,e)},f.DivIcon=f.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:d.createElement("div"),n=this.options;return!1!==n.html?e.innerHTML=n.html:e.innerHTML="",n.bgPos&&(e.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),f.divIcon=function(t){return new f.DivIcon(t)},f.Map.mergeOptions({closePopupOnClick:!0}),f.Popup=f.Class.extend({includes:f.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){f.setOptions(this,t),this._source=e,this._animated=f.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&f.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&f.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),f.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&f.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=f.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",n=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=f.DomUtil.create("div",n);this.options.closeButton&&((t=this._closeButton=f.DomUtil.create("a",e+"-close-button",i)).href="#close",t.innerHTML="&#215;",f.DomEvent.disableClickPropagation(t),f.DomEvent.on(t,"click",this._onCloseButtonClick,this));var o=this._wrapper=f.DomUtil.create("div",e+"-content-wrapper",i);f.DomEvent.disableClickPropagation(o),this._contentNode=f.DomUtil.create("div",e+"-content",o),f.DomEvent.disableScrollPropagation(this._contentNode),f.DomEvent.on(o,"contextmenu",f.DomEvent.stopPropagation),this._tipContainer=f.DomUtil.create("div",e+"-tip-container",i),this._tip=f.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&o<i?(e.height=o+"px",f.DomUtil.addClass(t,r)):f.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,n=f.point(this.options.offset);e&&f.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);f.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,n=this._containerWidth,i=new f.Point(this._containerLeft,-e-this._containerBottom);this._animated&&i._add(f.DomUtil.getPosition(this._container));var o=t.layerPointToContainerPoint(i),r=f.point(this.options.autoPanPadding),s=f.point(this.options.autoPanPaddingTopLeft||r),a=f.point(this.options.autoPanPaddingBottomRight||r),l=t.getSize(),u=0,c=0;o.x+n+a.x>l.x&&(u=o.x+n-l.x+a.x),o.x-u-s.x<0&&(u=o.x-s.x),o.y+e+a.y>l.y&&(c=o.y+e-l.y+a.y),o.y-c-s.y<0&&(c=o.y-s.y),(u||c)&&t.fire("autopanstart").panBy([u,c])}},_onCloseButtonClick:function(t){this._close(),f.DomEvent.stop(t)}}),f.popup=function(t,e){return new f.Popup(t,e)},f.Map.include({openPopup:function(t,e,n){if(this.closePopup(),!(t instanceof f.Popup)){var i=t;t=new f.Popup(n).setLatLng(e).setContent(i)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),f.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var n=f.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(f.Popup.prototype.options.offset),e&&e.offset&&(n=n.add(e.offset)),e=f.extend({offset:n},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof f.Popup?(f.setOptions(t,e),this._popup=t):this._popup=new f.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),f.LayerGroup=f.Class.extend({initialize:function(t){var e,n;if(this._layers={},t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return f.stamp(t)}}),f.layerGroup=function(t){return new f.LayerGroup(t)},f.FeatureGroup=f.LayerGroup.extend({includes:f.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.off(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new f.LatLngBounds;return this.eachLayer(function(t){e.extend(t instanceof f.Marker?t.getLatLng():t.getBounds())}),e},_propagateEvent:function(t){t=f.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),f.featureGroup=function(t){return new f.FeatureGroup(t)},f.Path=f.Class.extend({includes:[f.Mixin.Events],statics:{CLIP_PADDING:(i=((f.Browser.mobile?1280:2e3)/Math.max(s.outerWidth,s.outerHeight)-1)/2,Math.max(0,Math.min(.5,i)))},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){f.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,f.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return f.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),f.Map.include({_updatePathViewport:function(){var t=f.Path.CLIP_PADDING,e=this.getSize(),n=f.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),i=n.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new f.Bounds(n,i)}}),f.Path.SVG_NS="http://www.w3.org/2000/svg",f.Browser.svg=!(!d.createElementNS||!d.createElementNS(f.Path.SVG_NS,"svg").createSVGRect),f.Path=f.Path.extend({statics:{SVG:f.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,n=t.firstChild;return e&&n!==e&&t.insertBefore(e,n),this},getPathString:function(){},_createElement:function(t){return d.createElementNS(f.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&f.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(f.Browser.svg||!f.Browser.vml)&&f.DomUtil.addClass(this._path,"leaflet-clickable"),f.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)f.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,n=e.mouseEventToContainerPoint(t),i=e.containerPointToLayerPoint(n),o=e.layerPointToLatLng(i);this.fire(t.type,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:t}),"contextmenu"===t.type&&f.DomEvent.preventDefault(t),"mousemove"!==t.type&&f.DomEvent.stopPropagation(t)}}}),f.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=f.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&f.Browser.any3d?(f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),n=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(n)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max,i=n.x-e.x,o=n.y-e.y,r=this._pathRoot,s=this._panes.overlayPane;f.Browser.mobileWebkit&&s.removeChild(r),f.DomUtil.setPosition(r,e),r.setAttribute("width",i),r.setAttribute("height",o),r.setAttribute("viewBox",[e.x,e.y,i,o].join(" ")),f.Browser.mobileWebkit&&s.appendChild(r)}}}),f.Path.include({bindPopup:function(t,e){return t instanceof f.Popup?this._popup=t:((!this._popup||e)&&(this._popup=new f.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),f.Browser.vml=!f.Browser.svg&&function(){try{var t=d.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),f.Path=f.Browser.svg||!f.Browser.vml?f.Path:f.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return d.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return d.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return d.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");f.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&f.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,n=this.options,i=this._container;i.stroked=n.stroke,i.filled=n.fill,n.stroke?(t||((t=this._stroke=this._createElement("stroke")).endcap="round",i.appendChild(t)),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=f.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",n.lineCap&&(t.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(t.joinstyle=n.lineJoin)):t&&(i.removeChild(t),this._stroke=null),n.fill?(e||(e=this._fill=this._createElement("fill"),i.appendChild(e)),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(i.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),f.Map.include(f.Browser.svg||!f.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=d.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),f.Browser.canvas=!!d.createElement("canvas").getContext,f.Path=f.Path.SVG&&!s.L_PREFER_CANVAS||!f.Browser.canvas?f.Path:f.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return f.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!f.Path._updateRequest&&(f.Path._updateRequest=f.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){f.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,n,i,o,r;for(this._ctx.beginPath(),t=0,n=this._parts.length;t<n;t++){for(e=0,i=this._parts[t].length;e<i;e++)o=this._parts[t][e],r=(0===e?"move":"line")+"To",this._ctx[r](o.x,o.y);this instanceof f.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),f.Map.include(f.Path.SVG&&!s.L_PREFER_CANVAS||!f.Browser.canvas?{}:{_initPathRoot:function(){var t,e=this._pathRoot;e||((e=this._pathRoot=d.createElement("canvas")).style.position="absolute",(t=this._canvasCtx=e.getContext("2d")).lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max.subtract(e),i=this._pathRoot;f.DomUtil.setPosition(i,e),i.width=n.x,i.height=n.y,i.getContext("2d").translate(-e.x,-e.y)}}}),f.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,i=new(typeof Uint8Array!=a+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,this._simplifyDPStep(t,i,e,0,n-1);var o,r=[];for(o=0;o<n;o++)i[o]&&r.push(t[o]);return r},_simplifyDPStep:function(t,e,n,i,o){var r,s,a,l=0;for(s=i+1;s<=o-1;s++)l<(a=this._sqClosestPointOnSegment(t[s],t[i],t[o],!0))&&(r=s,l=a);n<l&&(e[r]=1,this._simplifyDPStep(t,e,n,i,r),this._simplifyDPStep(t,e,n,r,o))},_reducePoints:function(t,e){for(var n=[t[0]],i=1,o=0,r=t.length;i<r;i++)this._sqDist(t[i],t[o])>e&&(n.push(t[i]),o=i);return o<r-1&&n.push(t[r-1]),n},clipSegment:function(t,e,n,i){var o,r,s,a=i?this._lastCode:this._getBitCode(t,n),l=this._getBitCode(e,n);for(this._lastCode=l;;){if(!(a|l))return[t,e];if(a&l)return!1;o=a||l,r=this._getEdgeIntersection(t,e,o,n),s=this._getBitCode(r,n),o===a?(t=r,a=s):(e=r,l=s)}},_getEdgeIntersection:function(t,e,n,i){var o=e.x-t.x,r=e.y-t.y,s=i.min,a=i.max;return 8&n?new f.Point(t.x+o*(a.y-t.y)/r,a.y):4&n?new f.Point(t.x+o*(s.y-t.y)/r,s.y):2&n?new f.Point(a.x,t.y+r*(a.x-t.x)/o):1&n?new f.Point(s.x,t.y+r*(s.x-t.x)/o):void 0},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,n,i){var o,r=e.x,s=e.y,a=n.x-r,l=n.y-s,u=a*a+l*l;return 0<u&&(1<(o=((t.x-r)*a+(t.y-s)*l)/u)?(r=n.x,s=n.y):0<o&&(r+=a*o,s+=l*o)),a=t.x-r,l=t.y-s,i?a*a+l*l:new f.Point(r,s)}},f.Polyline=f.Path.extend({initialize:function(t,e){f.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;t<e;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,n="";t<e;t++)n+=this._getPathPartStr(this._parts[t]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(f.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,n,i=1/0,o=this._parts,r=null,s=0,a=o.length;s<a;s++)for(var l=o[s],u=1,c=l.length;u<c;u++){e=l[u-1],n=l[u];var h=f.LineUtil._sqClosestPointOnSegment(t,e,n,!0);h<i&&(i=h,r=f.LineUtil._sqClosestPointOnSegment(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getBounds:function(){return new f.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var n,i,o=e?t:[];for(n=0,i=t.length;n<i;n++){if(f.Util.isArray(t[n])&&"number"!=typeof t[n][0])return;o[n]=f.latLng(t[n])}return o},_initEvents:function(){f.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,n=f.Path.VML,i=0,o=t.length,r="";i<o;i++)e=t[i],n&&e._round(),r+=(i?"L":"M")+e.x+" "+e.y;return r},_clipPoints:function(){var t,e,n,i=this._originalPoints,o=i.length;if(this.options.noClip)this._parts=[i];else{this._parts=[];var r=this._parts,s=this._map._pathViewport,a=f.LineUtil;for(e=t=0;t<o-1;t++)(n=a.clipSegment(i[t],i[t+1],s,t))&&(r[e]=r[e]||[],r[e].push(n[0]),(n[1]!==i[t+1]||t===o-2)&&(r[e].push(n[1]),e++))}},_simplifyPoints:function(){for(var t=this._parts,e=f.LineUtil,n=0,i=t.length;n<i;n++)t[n]=e.simplify(t[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),f.Path.prototype._updatePath.call(this))}}),f.polyline=function(t,e){return new f.Polyline(t,e)},f.PolyUtil={},f.PolyUtil.clipPolygon=function(t,e){var n,i,o,r,s,a,l,u,c,h=[1,4,2,8],d=f.LineUtil;for(i=0,l=t.length;i<l;i++)t[i]._code=d._getBitCode(t[i],e);for(r=0;r<4;r++){for(u=h[r],n=[],i=0,o=(l=t.length)-1;i<l;o=i++)s=t[i],a=t[o],s._code&u?a._code&u||((c=d._getEdgeIntersection(a,s,u,e))._code=d._getBitCode(c,e),n.push(c)):(a._code&u&&((c=d._getEdgeIntersection(a,s,u,e))._code=d._getBitCode(c,e),n.push(c)),n.push(s));t=n}return t},f.Polygon=f.Polyline.extend({options:{fill:!0},initialize:function(t,e){f.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,n,i;if(t&&f.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,n=this._holes.length;e<n;e++)(i=this._holes[e]=this._convertLatLngs(this._holes[e]))[0].equals(i[i.length-1])&&i.pop();2<=(t=this._latlngs).length&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){var t,e,n,i;if(f.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(t=0,n=this._holes.length;t<n;t++)for(this._holePoints[t]=[],e=0,i=this._holes[t].length;e<i;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])},setLatLngs:function(t){return t&&f.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):f.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var n=0,i=this._parts.length;n<i;n++){var o=f.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);o.length&&e.push(o)}this._parts=e}},_getPathPartStr:function(t){return f.Polyline.prototype._getPathPartStr.call(this,t)+(f.Browser.svg?"z":"x")}}),f.polygon=function(t,e){return new f.Polygon(t,e)},function(){function t(t){return f.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var n=0,i=e.length;for(this.eachLayer(function(t){n<i?t.setLatLngs(e[n++]):this.removeLayer(t)},this);n<i;)this.addLayer(new t(e[n++],this._options));return this},getLatLngs:function(){var e=[];return this.eachLayer(function(t){e.push(t.getLatLngs())}),e}})}f.MultiPolyline=t(f.Polyline),f.MultiPolygon=t(f.Polygon),f.multiPolyline=function(t,e){return new f.MultiPolyline(t,e)},f.multiPolygon=function(t,e){return new f.MultiPolygon(t,e)}}(),f.Rectangle=f.Polygon.extend({initialize:function(t,e){f.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=f.latLngBounds(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),f.rectangle=function(t,e){return new f.Rectangle(t,e)},f.Circle=f.Path.extend({initialize:function(t,e,n){f.Path.prototype.initialize.call(this,n),this._latlng=f.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=f.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,n=this._latlng;return new f.LatLngBounds([n.lat-e,n.lng-t],[n.lat+e,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":f.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(f.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y}}),f.circle=function(t,e,n){return new f.Circle(t,e,n)},f.CircleMarker=f.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){f.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){f.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return f.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),f.circleMarker=function(t,e){return new f.CircleMarker(t,e)},f.Polyline.include(f.Path.CANVAS?{_containsPoint:function(t,e){var n,i,o,r,s,a,l=this.options.weight/2;for(f.Browser.touch&&(l+=10),n=0,r=this._parts.length;n<r;n++)for(i=0,o=(s=(a=this._parts[n]).length)-1;i<s;o=i++)if((e||0!==i)&&f.LineUtil.pointToSegmentDistance(t,a[o],a[i])<=l)return!0;return!1}}:{}),f.Polygon.include(f.Path.CANVAS?{_containsPoint:function(t){var e,n,i,o,r,s,a,l,u=!1;if(f.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(o=0,a=this._parts.length;o<a;o++)for(r=0,s=(l=(e=this._parts[o]).length)-1;r<l;s=r++)n=e[r],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u}}:{}),f.Circle.include(f.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,n=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+n}}:{}),f.CircleMarker.include(f.Path.CANVAS?{_updateStyle:function(){f.Path.prototype._updateStyle.call(this)}}:{}),f.GeoJSON=f.FeatureGroup.extend({initialize:function(t,e){f.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=f.Util.isArray(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)((i=o[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(o[e]);return this}var r=this.options;if(!r.filter||r.filter(t)){var s=f.GeoJSON.geometryToLayer(t,r.pointToLayer,r.coordsToLatLng,r);return s.feature=f.GeoJSON.asFeature(t),s.defaultOptions=s.options,this.resetStyle(s),r.onEachFeature&&r.onEachFeature(t,s),this.addLayer(s)}},resetStyle:function(t){var e=this.options.style;e&&(f.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(e){this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),f.extend(f.GeoJSON,{geometryToLayer:function(t,e,n,i){var o,r,s,a,l="Feature"===t.type?t.geometry:t,u=l.coordinates,c=[];switch(n=n||this.coordsToLatLng,l.type){case"Point":return o=n(u),e?e(t,o):new f.Marker(o);case"MultiPoint":for(s=0,a=u.length;s<a;s++)o=n(u[s]),c.push(e?e(t,o):new f.Marker(o));return new f.FeatureGroup(c);case"LineString":return r=this.coordsToLatLngs(u,0,n),new f.Polyline(r,i);case"Polygon":if(2===u.length&&!u[1].length)throw new Error("Invalid GeoJSON object.");return r=this.coordsToLatLngs(u,1,n),new f.Polygon(r,i);case"MultiLineString":return r=this.coordsToLatLngs(u,1,n),new f.MultiPolyline(r,i);case"MultiPolygon":return r=this.coordsToLatLngs(u,2,n),new f.MultiPolygon(r,i);case"GeometryCollection":for(s=0,a=l.geometries.length;s<a;s++)c.push(this.geometryToLayer({geometry:l.geometries[s],type:"Feature",properties:t.properties},e,n,i));return new f.FeatureGroup(c);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new f.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){var i,o,r,s=[];for(o=0,r=t.length;o<r;o++)i=e?this.coordsToLatLngs(t[o],e-1,n):(n||this.coordsToLatLng)(t[o]),s.push(i);return s},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==a&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(f.GeoJSON.latLngToCoords(t[n]));return e},getFeature:function(t,e){return t.feature?f.extend({},t.feature,{geometry:e}):f.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var E={toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"Point",coordinates:f.GeoJSON.latLngToCoords(this.getLatLng())})}};f.Marker.include(E),f.Circle.include(E),f.CircleMarker.include(E),f.Polyline.include({toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"LineString",coordinates:f.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),f.Polygon.include({toGeoJSON:function(){var t,e,n,i=[f.GeoJSON.latLngsToCoords(this.getLatLngs())];if(i[0].push(i[0][0]),this._holes)for(t=0,e=this._holes.length;t<e;t++)(n=f.GeoJSON.latLngsToCoords(this._holes[t])).push(n[0]),i.push(n);return f.GeoJSON.getFeature(this,{type:"Polygon",coordinates:i})}}),function(){function o(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),f.GeoJSON.getFeature(this,{type:t,coordinates:e})}}f.MultiPolyline.include({toGeoJSON:o("MultiLineString")}),f.MultiPolygon.include({toGeoJSON:o("MultiPolygon")}),f.LayerGroup.include({toGeoJSON:function(){var e,t=this.feature&&this.feature.geometry,n=[];if(t&&"MultiPoint"===t.type)return o("MultiPoint").call(this);var i=t&&"GeometryCollection"===t.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),n.push(i?e.geometry:f.GeoJSON.asFeature(e)))}),i?f.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}})}(),f.geoJson=function(t,e){return new f.GeoJSON(t,e)},f.DomEvent={addListener:function(e,t,n,i){var o,r,s,a=f.stamp(n),l="_leaflet_"+t+a;return e[l]?this:(o=function(t){return n.call(i||e,t||f.DomEvent._getEvent())},f.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,o,a):(f.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener&&this.addDoubleTapListener(e,o,a),"addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",o,!1),e.addEventListener(t,o,!1)):"mouseenter"===t||"mouseleave"===t?(r=o,s="mouseenter"===t?"mouseover":"mouseout",o=function(t){return f.DomEvent._checkMouse(e,t)?r(t):void 0},e.addEventListener(s,o,!1)):("click"===t&&f.Browser.android&&(r=o,o=function(t){return f.DomEvent._filterClick(t,r)}),e.addEventListener(t,o,!1)):"attachEvent"in e&&e.attachEvent("on"+t,o),e[l]=o,this))},removeListener:function(t,e,n){var i=f.stamp(n),o="_leaflet_"+e+i,r=t[o];return r&&(f.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,i):f.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",r,!1),t.removeEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1):t.removeEventListener(e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[o]=null),this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,f.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=f.DomEvent.stopPropagation;return f.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=f.DomEvent.stopPropagation,n=f.Draggable.START.length-1;0<=n;n--)f.DomEvent.on(t,f.Draggable.START[n],e);return f.DomEvent.on(t,"click",f.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return f.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new f.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new f.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){f.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t},_getEvent:function(){var t=s.event;if(!t)for(var e=arguments.callee.caller;e&&(!(t=e.arguments[0])||s.Event!==t.constructor);)e=e.caller;return t},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent.timeStamp,i=f.DomEvent._lastClick&&n-f.DomEvent._lastClick;return i&&100<i&&i<500||t.target._simulatedClick&&!t._simulated?void f.DomEvent.stop(t):(f.DomEvent._lastClick=n,e(t))}},f.DomEvent.on=f.DomEvent.addListener,f.DomEvent.off=f.DomEvent.removeListener,f.Draggable=f.Class.extend({includes:f.Mixin.Events,statics:{START:f.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=f.Draggable.START.length-1;0<=t;t--)f.DomEvent.on(this._dragStartTarget,f.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=f.Draggable.START.length-1;0<=t;t--)f.DomEvent.off(this._dragStartTarget,f.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!(t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(f.DomEvent.stopPropagation(t),f.Draggable._disabled||(f.DomUtil.disableImageDrag(),f.DomUtil.disableTextSelection(),this._moving)))){var e=t.touches?t.touches[0]:t;this._startPoint=new f.Point(e.clientX,e.clientY),this._startPos=this._newPos=f.DomUtil.getPosition(this._element),f.DomEvent.on(d,f.Draggable.MOVE[t.type],this._onMove,this).on(d,f.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&1<t.touches.length)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new f.Point(e.clientX,e.clientY).subtract(this._startPoint);(n.x||n.y)&&(f.Browser.touch&&Math.abs(n.x)+Math.abs(n.y)<3||(f.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=f.DomUtil.getPosition(this._element).subtract(n),f.DomUtil.addClass(d.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,f.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))}},_updatePosition:function(){this.fire("predrag"),f.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){for(var t in f.DomUtil.removeClass(d.body,"leaflet-dragging"),this._lastTarget&&(f.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),f.Draggable.MOVE)f.DomEvent.off(d,f.Draggable.MOVE[t],this._onMove).off(d,f.Draggable.END[t],this._onUp);f.DomUtil.enableImageDrag(),f.DomUtil.enableTextSelection(),this._moved&&this._moving&&(f.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),f.Handler=f.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),f.Map.mergeOptions({dragging:!0,inertia:!f.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:f.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),f.Map.Drag=f.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new f.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),200<t-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,s=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=+new Date-this._lastTime,o=!n.inertia||i>n.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),o)e.fire("moveend");else{var r=this._lastPos.subtract(this._positions[0]),s=(this._lastTime+i-this._times[0])/1e3,a=n.easeLinearity,l=r.multiplyBy(a/s),u=l.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,u),h=l.multiplyBy(c/u),d=c/(n.inertiaDeceleration*a),p=h.multiplyBy(-d/2).round();p.x&&p.y?(p=e._limitOffset(p,e.options.maxBounds),f.Util.requestAnimFrame(function(){e.panBy(p,{duration:d,easeLinearity:a,noMoveStart:!0})})):e.fire("moveend")}}}),f.Map.addInitHook("addHandler","dragging",f.Map.Drag),f.Map.mergeOptions({doubleClickZoom:!0}),f.Map.DoubleClickZoom=f.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}}),f.Map.addInitHook("addHandler","doubleClickZoom",f.Map.DoubleClickZoom),f.Map.mergeOptions({scrollWheelZoom:!0}),f.Map.ScrollWheelZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),f.DomEvent.on(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault),this._delta=0},removeHooks:function(){f.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),f.DomEvent.off(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=f.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f.bind(this._performZoom,this),n),f.DomEvent.preventDefault(t),f.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,n=t.getZoom();e=0<e?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(n+e)-n,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(n+e):t.setZoomAround(this._lastMousePos,n+e))}}),f.Map.addInitHook("addHandler","scrollWheelZoom",f.Map.ScrollWheelZoom),f.extend(f.DomEvent,{_touchstart:f.Browser.msPointer?"MSPointerDown":f.Browser.pointer?"pointerdown":"touchstart",_touchend:f.Browser.msPointer?"MSPointerUp":f.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,r,e){function n(t){if(!(1<(f.Browser.pointer?(c.push(t.pointerId),c.length):t.touches.length))){var e=Date.now(),n=e-(s||e);a=t.touches?t.touches[0]:t,l=0<n&&n<=250,s=e}}function i(t){if(f.Browser.pointer){var e=c.indexOf(t.pointerId);if(-1===e)return;c.splice(e,1)}if(l){if(f.Browser.pointer){var n,i={};for(var o in a)n=a[o],i[o]="function"==typeof n?n.bind(a):n;a=i}a.type="dblclick",r(a),s=null}}var s,a,l=!1,o=this._touchstart,u=this._touchend,c=[];t["_leaflet_"+o+e]=n,t["_leaflet_"+u+e]=i;var h=f.Browser.pointer?d.documentElement:t;return t.addEventListener(o,n,!1),h.addEventListener(u,i,!1),f.Browser.pointer&&h.addEventListener(f.DomEvent.POINTER_CANCEL,i,!1),this},removeDoubleTapListener:function(t,e){var n="_leaflet_";return t.removeEventListener(this._touchstart,t[n+this._touchstart+e],!1),(f.Browser.pointer?d.documentElement:t).removeEventListener(this._touchend,t[n+this._touchend+e],!1),f.Browser.pointer&&d.documentElement.removeEventListener(f.DomEvent.POINTER_CANCEL,t[n+this._touchend+e],!1),this}}),f.extend(f.DomEvent,{POINTER_DOWN:f.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:f.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:f.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:f.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,n,i){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,n,i);case"touchend":return this.addPointerListenerEnd(t,e,n,i);case"touchmove":return this.addPointerListenerMove(t,e,n,i);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,e,i,n){var o=this._pointers,r=function(t){f.DomEvent.preventDefault(t);for(var e=!1,n=0;n<o.length;n++)if(o[n].pointerId===t.pointerId){e=!0;break}e||o.push(t),t.touches=o.slice(),t.changedTouches=[t],i(t)};if(t["_leaflet_touchstart"+n]=r,t.addEventListener(this.POINTER_DOWN,r,!1),!this._pointerDocumentListener){var s=function(t){for(var e=0;e<o.length;e++)if(o[e].pointerId===t.pointerId){o.splice(e,1);break}};d.documentElement.addEventListener(this.POINTER_UP,s,!1),d.documentElement.addEventListener(this.POINTER_CANCEL,s,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,n,i){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r[e]=t;break}t.touches=r.slice(),t.changedTouches=[t],n(t)}}var r=this._pointers;return t["_leaflet_touchmove"+i]=o,t.addEventListener(this.POINTER_MOVE,o,!1),this},addPointerListenerEnd:function(t,e,n,i){var o=this._pointers,r=function(t){for(var e=0;e<o.length;e++)if(o[e].pointerId===t.pointerId){o.splice(e,1);break}t.touches=o.slice(),t.changedTouches=[t],n(t)};return t["_leaflet_touchend"+i]=r,t.addEventListener(this.POINTER_UP,r,!1),t.addEventListener(this.POINTER_CANCEL,r,!1),this},removePointerListener:function(t,e,n){var i=t["_leaflet_"+e+n];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,i,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,i,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,i,!1),t.removeEventListener(this.POINTER_CANCEL,i,!1)}return this}}),f.Map.mergeOptions({touchZoom:f.Browser.touch&&!f.Browser.android23,bounceAtZoomLimits:!0}),f.Map.TouchZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),i=e.mouseEventToLayerPoint(t.touches[1]),o=e._getCenterLayerPoint();this._startCenter=n.add(i)._divideBy(2),this._startDist=n.distanceTo(i),this._moved=!1,this._zooming=!0,this._centerOffset=o.subtract(this._startCenter),e._panAnim&&e._panAnim.stop(),f.DomEvent.on(d,"touchmove",this._onTouchMove,this).on(d,"touchend",this._onTouchEnd,this),f.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),i=e.mouseEventToLayerPoint(t.touches[1]);this._scale=n.distanceTo(i)/this._startDist,this._delta=n._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(e.options.bounceAtZoomLimits||!(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&1<this._scale))&&(this._moved||(f.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),f.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),i=t.getScaleZoom(this._scale);t._animateZoom(n,i,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(this._moved&&this._zooming){var t=this._map;this._zooming=!1,f.DomUtil.removeClass(t._mapPane,"leaflet-touching"),f.Util.cancelAnimFrame(this._animRequest),f.DomEvent.off(d,"touchmove",this._onTouchMove).off(d,"touchend",this._onTouchEnd);var e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),i=t.getZoom(),o=t.getScaleZoom(this._scale)-i,r=0<o?Math.ceil(o):Math.floor(o),s=t._limitZoom(i+r),a=t.getZoomScale(s)/this._scale;t._animateZoom(n,s,e,a)}else this._zooming=!1},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),f.Map.addInitHook("addHandler","touchZoom",f.Map.TouchZoom),f.Map.mergeOptions({tap:!0,tapTolerance:15}),f.Map.Tap=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(f.DomEvent.preventDefault(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new f.Point(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&f.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(f.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),f.DomEvent.on(d,"touchmove",this._onMove,this).on(d,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),f.DomEvent.off(d,"touchmove",this._onMove,this).off(d,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&f.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new f.Point(e.clientX,e.clientY)},_simulateEvent:function(t,e){var n=d.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,s,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}),f.Browser.touch&&!f.Browser.pointer&&f.Map.addInitHook("addHandler","tap",f.Map.Tap),f.Map.mergeOptions({boxZoom:!0}),f.Map.BoxZoom=f.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){f.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){f.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){return this._moved=!1,!(!t.shiftKey||1!==t.which&&1!==t.button)&&(f.DomUtil.disableTextSelection(),f.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),void f.DomEvent.on(d,"mousemove",this._onMouseMove,this).on(d,"mouseup",this._onMouseUp,this).on(d,"keydown",this._onKeyDown,this))},_onMouseMove:function(t){this._moved||(this._box=f.DomUtil.create("div","leaflet-zoom-box",this._pane),f.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,n=this._box,i=this._map.mouseEventToLayerPoint(t),o=i.subtract(e),r=new f.Point(Math.min(i.x,e.x),Math.min(i.y,e.y));f.DomUtil.setPosition(n,r),this._moved=!0,n.style.width=Math.max(0,Math.abs(o.x)-4)+"px",n.style.height=Math.max(0,Math.abs(o.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),f.DomUtil.enableTextSelection(),f.DomUtil.enableImageDrag(),f.DomEvent.off(d,"mousemove",this._onMouseMove).off(d,"mouseup",this._onMouseUp).off(d,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,n=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(n)){var i=new f.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(n));e.fitBounds(i),e.fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),f.Map.addInitHook("addHandler","boxZoom",f.Map.BoxZoom),f.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),f.Map.Keyboard=f.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),f.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;f.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var t=d.body,e=d.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),s.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){f.DomEvent.on(d,"keydown",this._onKeyDown,this)},_removeHooks:function(){f.DomEvent.off(d,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[e]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(e in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[e])}f.DomEvent.stop(t)}}),f.Map.addInitHook("addHandler","keyboard",f.Map.Keyboard),f.Handler.MarkerDrag=f.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new f.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),f.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),f.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,n=f.DomUtil.getPosition(t._icon),i=t._map.layerPointToLatLng(n);e&&f.DomUtil.setPosition(e,n),t._latlng=i,t.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),f.Control=f.Class.extend({options:{position:"topright"},initialize:function(t){f.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return f.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},removeFrom:function(t){var e=this.getPosition();return t._controlCorners[e].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),f.control=function(t){return new f.Control(t)},f.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,e){var n=o+t+" "+o+e;i[t+e]=f.DomUtil.create("div",n,r)}var i=this._controlCorners={},o="leaflet-",r=this._controlContainer=f.DomUtil.create("div",o+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),f.Control.Zoom=f.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=f.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",n,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,n,i,o,r){var s=f.DomUtil.create("a",n,i);s.innerHTML=t,s.href="#",s.title=e;var a=f.DomEvent.stopPropagation;return f.DomEvent.on(s,"click",a).on(s,"mousedown",a).on(s,"dblclick",a).on(s,"click",f.DomEvent.preventDefault).on(s,"click",o,r).on(s,"click",this._refocusOnMap,r),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";f.DomUtil.removeClass(this._zoomInButton,e),f.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&f.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&f.DomUtil.addClass(this._zoomInButton,e)}}),f.Map.mergeOptions({zoomControl:!0}),f.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new f.Control.Zoom,this.addControl(this.zoomControl))}),f.control.zoom=function(t){return new f.Control.Zoom(t)},f.Control.Attribution=f.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){f.setOptions(this,t),this._attributions={}},onAdd:function(t){for(var e in this._container=f.DomUtil.create("div","leaflet-control-attribution"),f.DomEvent.disableClickPropagation(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):void 0},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):void 0},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),f.Map.mergeOptions({attributionControl:!0}),f.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new f.Control.Attribution).addTo(this))}),f.control.attribution=function(t){return new f.Control.Attribution(t)},f.Control.Scale=f.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",n=f.DomUtil.create("div",e),i=this.options;return this._addScales(i,e,n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=f.DomUtil.create("div",e+"-line",n)),t.imperial&&(this._iScale=f.DomUtil.create("div",e+"-line",n))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180)*(t.getNorthEast().lng-t.getSouthWest().lng)/180,i=this._map.getSize(),o=this.options,r=0;0<i.x&&(r=n*(o.maxWidth/i.x)),this._updateScales(o,r)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=e<1e3?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,n,i,o=3.2808399*t,r=this._iScale;r.innerHTML=5280<o?(e=o/5280,n=this._getRoundNum(e),r.style.width=this._getScaleWidth(n/e)+"px",n+" mi"):(i=this._getRoundNum(o),r.style.width=this._getScaleWidth(i/o)+"px",i+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=10<=n?10:5<=n?5:3<=n?3:2<=n?2:1)}}),f.control.scale=function(t){return new f.Control.Scale(t)},f.Control.Layers=f.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,n){for(var i in f.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=f.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=f.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),f.Browser.touch?f.DomEvent.on(e,"click",f.DomEvent.stopPropagation):f.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var n=this._form=f.DomUtil.create("form",t+"-list");if(this.options.collapsed){f.Browser.android||f.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var i=this._layersLink=f.DomUtil.create("a",t+"-toggle",e);i.href="#",i.title="Layers",f.Browser.touch?f.DomEvent.on(i,"click",f.DomEvent.stop).on(i,"click",this._expand,this):f.DomEvent.on(i,"focus",this._expand,this),f.DomEvent.on(n,"click",function(){setTimeout(f.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=f.DomUtil.create("div",t+"-base",n),this._separator=f.DomUtil.create("div",t+"-separator",n),this._overlaysList=f.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_addLayer:function(t,e,n){var i=f.stamp(t);this._layers[i]={layer:t,name:e,overlay:n},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,n=!1,i=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),i=i||e.overlay,n=n||!e.overlay;this._separator.style.display=i&&n?"":"none"}},_onLayerChange:function(t){var e=this._layers[f.stamp(t.layer)];if(e){this._handlingClick||this._update();var n=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)}},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';e&&(n+=' checked="checked"'),n+="/>";var i=d.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=d.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=d.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers",i),e.layerId=f.stamp(t.layer),f.DomEvent.on(e,"click",this._onInputClick,this);var o=d.createElement("span");return o.innerHTML=" "+t.name,n.appendChild(e),n.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),n},_onInputClick:function(){var t,e,n,i=this._form.getElementsByTagName("input"),o=i.length;for(this._handlingClick=!0,t=0;t<o;t++)e=i[t],n=this._layers[e.layerId],e.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!e.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){f.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),f.control.layers=function(t,e,n){return new f.Control.Layers(t,e,n)},f.PosAnimation=f.Class.extend({includes:f.Mixin.Events,run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[f.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(i||.5)+",1)",f.DomEvent.on(t,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),f.DomUtil.setPosition(t,e),f.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(f.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(f.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),f.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var t,e,n,i=this._el,o=s.getComputedStyle(i);if(f.Browser.any3d){if(!(n=o[f.DomUtil.TRANSFORM].match(this._transformRe)))return;t=parseFloat(n[1]),e=parseFloat(n[2])}else t=parseFloat(o.left),e=parseFloat(o.top);return new f.Point(t,e,!0)},_onTransitionEnd:function(){f.DomEvent.off(this._el,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[f.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),f.Map.include({setView:function(t,e,n){if((e=e===a?this._zoom:this._limitZoom(e),t=this._limitCenter(f.latLng(t),e,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&!0!==n)&&(n.animate!==a&&(n.zoom=f.extend({animate:n.animate},n.zoom),n.pan=f.extend({animate:n.animate},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},panBy:function(t,e){if(e=e||{},!(t=f.point(t).round()).x&&!t.y)return this;if(this._panAnim||(this._panAnim=new f.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){f.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){f.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)}}),f.PosAnimation=f.DomUtil.TRANSITION?f.PosAnimation:f.PosAnimation.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=f.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=f.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;t<e?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));f.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){f.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),f.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),f.DomUtil.TRANSITION&&f.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&f.DomUtil.TRANSITION&&f.Browser.any3d&&!f.Browser.android23&&!f.Browser.mobileOpera,this._zoomAnimated&&f.DomEvent.on(this._mapPane,f.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),f.Map.include(f.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i),r=this._getCenterLayerPoint()._add(o);return!(!0!==n.animate&&!this.getSize().contains(o))&&(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,r,i,null,!0),!0)},_animateZoom:function(t,e,n,i,o,r,s){s||(this._animatingZoom=!0),f.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,f.Draggable&&(f.Draggable._disabled=!0),f.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:n,scale:i,delta:o,backwards:r})},this)},_onZoomTransitionEnd:function(){this._animatingZoom=!1,f.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),f.Draggable&&(f.Draggable._disabled=!1)}}:{}),f.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,n=f.DomUtil.TRANSFORM,i=t.delta?f.DomUtil.getTranslateString(t.delta):e.style[n],o=f.DomUtil.getScaleString(t.scale,t.origin);e.style[n]=t.backwards?o+" "+i:i+" "+o},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),f.Util.falseFn(e.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[f.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,n=this._getLoadedTilesPercentage(e),i=this._getLoadedTilesPercentage(t);return e&&.5<n&&i<.5?(t.style.visibility="hidden",void this._stopLoadingImages(t)):(e.style.visibility="hidden",e.style[f.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(t){var e,n,i=t.getElementsByTagName("img"),o=0;for(e=0,n=i.length;e<n;e++)i[e].complete&&o++;return o/n},_stopLoadingImages:function(t){var e,n,i,o=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,n=o.length;e<n;e++)(i=o[e]).complete||(i.onload=f.Util.falseFn,i.onerror=f.Util.falseFn,i.src=f.Util.emptyImageUrl,i.parentNode.removeChild(i))}}),f.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=f.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=f.bind(this._handleGeolocationResponse,this),n=f.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new f.LatLng(e,n),o=180*t.coords.accuracy/40075017,r=o/Math.cos(f.LatLng.DEG_TO_RAD*e),s=f.latLngBounds([e-o,n-r],[e+o,n+r]),a=this._locateOptions;if(a.setView){var l=Math.min(this.getBoundsZoom(s),a.maxZoom);this.setView(i,l)}var u={latlng:i,bounds:s,timestamp:t.timestamp};for(var c in t.coords)"number"==typeof t.coords[c]&&(u[c]=t.coords[c]);this.fire("locationfound",u)}})}(window,document)},{}],3:[function(t,e,i){!function(t,e){if("object"==typeof i&&i)e(i);else{var n={};e(n),"function"==typeof define&&define.amd?define(n):t.Mustache=n}}(this,function(y){function b(t){return e=i,n=t,!o.call(e,n);var e,n}function m(t){return"function"==typeof t}function _(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function w(t){this.string=t,this.tail=t,this.pos=0}function s(t,e){this.view=null==t?{}:t,this.parent=e,this._cache={".":this.view}}function t(){this.clearCache()}function x(t){return[new RegExp(_(t[0])+"\\s*"),new RegExp("\\s*"+_(t[1]))]}var C=/\s*/,k=/\s+/,i=/\S/,$=/\s*=/,T=/\s*\}/,S=/#|\^|\/|>|\{|&|=|!/,o=RegExp.prototype.test,e=Object.prototype.toString,g=Array.isArray||function(t){return"[object Array]"===e.call(t)},n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};w.prototype.eos=function(){return""===this.tail},w.prototype.scan=function(t){var e=this.tail.match(t);if(e&&0===e.index){var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n}return""},w.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},s.make=function(t){return t instanceof s?t:new s(t)},s.prototype.push=function(t){return new s(t,this)},s.prototype.lookup=function(t){var e;if(t in this._cache)e=this._cache[t];else{for(var n=this;n;){if(0<t.indexOf(".")){e=n.view;for(var i=t.split("."),o=0;null!=e&&o<i.length;)e=e[i[o++]]}else e=n.view[t];if(null!=e)break;n=n.parent}this._cache[t]=e}return m(e)&&(e=e.call(this.view)),e},t.prototype.clearCache=function(){this._cache={},this._partialCache={}},t.prototype.compile=function(t,e){var n=this._cache[t];if(!n){var i=y.parse(t,e);n=this._cache[t]=this.compileTokens(i,t)}return n},t.prototype.compilePartial=function(t,e,n){var i=this.compile(e,n);return this._partialCache[t]=i},t.prototype.getPartial=function(t){return t in this._partialCache||!this._loadPartial||this.compilePartial(t,this._loadPartial(t)),this._partialCache[t]},t.prototype.compileTokens=function(i,o){var r=this;return function(t,e){if(e)if(m(e))r._loadPartial=e;else for(var n in e)r.compilePartial(n,e[n]);return function t(e,n,i,o){function r(t){return n.render(t,i)}for(var s,a,l,u="",c=0,h=e.length;c<h;++c)switch(s=e[c],a=s[1],s[0]){case"#":if("object"==typeof(l=i.lookup(a))||"string"==typeof l)if(g(l))for(var d=0,p=l.length;d<p;++d)u+=t(s[4],n,i.push(l[d]),o);else l&&(u+=t(s[4],n,i.push(l),o));else if(m(l)){var f=null==o?null:o.slice(s[3],s[5]);null!=(l=l.call(i.view,f,r))&&(u+=l)}else l&&(u+=t(s[4],n,i,o));break;case"^":(!(l=i.lookup(a))||g(l)&&0===l.length)&&(u+=t(s[4],n,i,o));break;case">":m(l=n.getPartial(a))&&(u+=l(i));break;case"&":null!=(l=i.lookup(a))&&(u+=l);break;case"name":null!=(l=i.lookup(a))&&(u+=y.escape(l));break;case"text":u+=a}return u}(i,r,s.make(t),o)}},t.prototype.render=function(t,e,n){return this.compile(t)(e,n)},y.name="mustache.js",y.version="0.7.3",y.tags=["{{","}}"],y.Scanner=w,y.Context=s,y.Writer=t,y.parse=function(t,e){function n(){if(f&&!m)for(;p.length;)delete d[p.pop()];else p=[];m=f=!1}if(t=t||"","string"==typeof(e=e||y.tags)&&(e=e.split(k)),2!==e.length)throw new Error("Invalid tags: "+e.join(", "));for(var i,o,r,s,a,l,u=x(e),c=new w(t),h=[],d=[],p=[],f=!1,m=!1;!c.eos();){if(i=c.pos,r=c.scanUntil(u[0]))for(var g=0,v=r.length;g<v;++g)b(s=r.charAt(g))?p.push(d.length):m=!0,d.push(["text",s,i,i+1]),i+=1,"\n"==s&&n();if(!c.scan(u[0]))break;if(f=!0,o=c.scan(S)||"name",c.scan(C),"="===o?(r=c.scanUntil($),c.scan($),c.scanUntil(u[1])):"{"===o?(r=c.scanUntil(new RegExp("\\s*"+_("}"+e[1]))),c.scan(T),c.scanUntil(u[1]),o="&"):r=c.scanUntil(u[1]),!c.scan(u[1]))throw new Error("Unclosed tag at "+c.pos);if(a=[o,r,i,c.pos],d.push(a),"#"===o||"^"===o)h.push(a);else if("/"===o){if(!(l=h.pop()))throw new Error('Unopened section "'+r+'" at '+i);if(l[1]!==r)throw new Error('Unclosed section "'+l[1]+'" at '+i)}else if("name"===o||"{"===o||"&"===o)m=!0;else if("="===o){if(2!==(e=r.split(k)).length)throw new Error("Invalid tags at "+i+": "+e.join(", "));u=x(e)}}if(l=h.pop())throw new Error('Unclosed section "'+l[1]+'" at '+c.pos);return function(t){for(var e,n=[],i=n,o=[],r=0,s=t.length;r<s;++r)switch(e=t[r],e[0]){case"#":case"^":o.push(e),i.push(e),i=e[4]=[];break;case"/":o.pop()[5]=e[2],i=0<o.length?o[o.length-1][4]:n;break;default:i.push(e)}return n}(function(t){for(var e,n,i=[],o=0,r=t.length;o<r;++o)(e=t[o])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(n=e,i.push(e)));return i}(d))},y.escape=function(t){return String(t).replace(/[&<>"'\/]/g,function(t){return n[t]})};var r=new t;y.clearCache=function(){return r.clearCache()},y.compile=function(t,e){return r.compile(t,e)},y.compilePartial=function(t,e,n){return r.compilePartial(t,e,n)},y.compileTokens=function(t,e){return r.compileTokens(t,e)},y.render=function(t,e,n){return r.render(t,e,n)},y.to_html=function(t,e,n,i){var o=y.render(t,e,n);return m(i)?void i(o):o}})},{}],4:[function(t,e,n){function i(t){"use strict";return/^https?/.test(t.getScheme())?t.toString():/^mailto?/.test(t.getScheme())?t.toString():"data"==t.getScheme()&&/^image/.test(t.getPath())?t.toString():void 0}function o(t){return t}var r=t("./sanitizer-bundle.js");e.exports=function(t){return t?r(t,i,o):""}},{"./sanitizer-bundle.js":5}],5:[function(t,e,n){var F=function(){function n(t){var e=(""+t).match(s);return e?new d(o(e[1]),o(e[2]),o(e[3]),o(e[4]),o(e[5]),o(e[6]),o(e[7])):null}function l(t){return"string"==typeof t?encodeURIComponent(t):null}function u(t,e){return"string"==typeof t?encodeURI(t).replace(e,c):null}function c(t){var e=t.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(e>>4&15)+"0123456789ABCDEF".charAt(15&e)}function h(t){if(null===t)return null;for(var e,n=t.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/"),i=r;(e=n.replace(i,"$1"))!=n;n=e);return n}function i(t,e){var n=t.clone(),i=e.hasScheme();i?n.setRawScheme(e.getRawScheme()):i=e.hasCredentials(),i?n.setRawCredentials(e.getRawCredentials()):i=e.hasDomain(),i?n.setRawDomain(e.getRawDomain()):i=e.hasPort();var o=e.getRawPath(),r=h(o);if(i)n.setPort(e.getPort()),r=r&&r.replace(p,"");else if(i=!!o){if(47!==r.charCodeAt(0)){var s=h(n.getRawPath()||"").replace(p,""),a=s.lastIndexOf("/")+1;r=h((a?s.substring(0,a):"")+h(o)).replace(p,"")}}else(r=r&&r.replace(p,""))!==o&&n.setRawPath(r);return i?n.setRawPath(r):i=e.hasQuery(),i?n.setRawQuery(e.getRawQuery()):i=e.hasFragment(),i&&n.setRawFragment(e.getRawFragment()),n}function d(t,e,n,i,o,r,s){this.scheme_=t,this.credentials_=e,this.domain_=n,this.port_=i,this.path_=o,this.query_=r,this.fragment_=s,this.paramCache_=null}function o(t){return"string"==typeof t&&0<t.length?t:null}var t=new RegExp("(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)"),r=new RegExp(t),p=/^(?:\.\.\/)*(?:\.\.$)?/;d.prototype.toString=function(){var t=[];return null!==this.scheme_&&t.push(this.scheme_,":"),null!==this.domain_&&(t.push("//"),null!==this.credentials_&&t.push(this.credentials_,"@"),t.push(this.domain_),null!==this.port_&&t.push(":",this.port_.toString())),null!==this.path_&&t.push(this.path_),null!==this.query_&&t.push("?",this.query_),null!==this.fragment_&&t.push("#",this.fragment_),t.join("")},d.prototype.clone=function(){return new d(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_)},d.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase()},d.prototype.getRawScheme=function(){return this.scheme_},d.prototype.setScheme=function(t){return this.scheme_=u(t,f),this},d.prototype.setRawScheme=function(t){return this.scheme_=t||null,this},d.prototype.hasScheme=function(){return null!==this.scheme_},d.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_)},d.prototype.getRawCredentials=function(){return this.credentials_},d.prototype.setCredentials=function(t){return this.credentials_=u(t,f),this},d.prototype.setRawCredentials=function(t){return this.credentials_=t||null,this},d.prototype.hasCredentials=function(){return null!==this.credentials_},d.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_)},d.prototype.getRawDomain=function(){return this.domain_},d.prototype.setDomain=function(t){return this.setRawDomain(t&&encodeURIComponent(t))},d.prototype.setRawDomain=function(t){return this.domain_=t||null,this.setRawPath(this.path_)},d.prototype.hasDomain=function(){return null!==this.domain_},d.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_)},d.prototype.setPort=function(t){if(t){if((t=Number(t))!==(65535&t))throw new Error("Bad port number "+t);this.port_=""+t}else this.port_=null;return this},d.prototype.hasPort=function(){return null!==this.port_},d.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_)},d.prototype.getRawPath=function(){return this.path_},d.prototype.setPath=function(t){return this.setRawPath(u(t,m))},d.prototype.setRawPath=function(t){return this.path_=t?(t=String(t),!this.domain_||/^\//.test(t)?t:"/"+t):null,this},d.prototype.hasPath=function(){return null!==this.path_},d.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g," ")},d.prototype.getRawQuery=function(){return this.query_},d.prototype.setQuery=function(t){return this.paramCache_=null,this.query_=l(t),this},d.prototype.setRawQuery=function(t){return this.paramCache_=null,this.query_=t||null,this},d.prototype.hasQuery=function(){return null!==this.query_},d.prototype.setAllParameters=function(t){if("object"==typeof t&&!(t instanceof Array)&&(t instanceof Object||"[object Array]"!==Object.prototype.toString.call(t))){var e=[],n=-1;for(var i in t){"string"==typeof(a=t[i])&&(e[++n]=i,e[++n]=a)}t=e}this.paramCache_=null;for(var o=[],r="",s=0;s<t.length;){i=t[s++];var a=t[s++];o.push(r,encodeURIComponent(i.toString())),r="&",a&&o.push("=",encodeURIComponent(a.toString()))}return this.query_=o.join(""),this},d.prototype.checkParameterCache_=function(){if(!this.paramCache_){var t=this.query_;if(t){for(var e=t.split(/[&\?]/),n=[],i=-1,o=0;o<e.length;++o){var r=e[o].match(/^([^=]*)(?:=(.*))?$/);n[++i]=decodeURIComponent(r[1]).replace(/\+/g," "),n[++i]=decodeURIComponent(r[2]||"").replace(/\+/g," ")}this.paramCache_=n}else this.paramCache_=[]}},d.prototype.setParameterValues=function(t,e){"string"==typeof e&&(e=[e]),this.checkParameterCache_();for(var n=0,i=this.paramCache_,o=[],r=0;r<i.length;r+=2)t===i[r]?n<e.length&&o.push(t,e[n++]):o.push(i[r],i[r+1]);for(;n<e.length;)o.push(t,e[n++]);return this.setAllParameters(o),this},d.prototype.removeParameter=function(t){return this.setParameterValues(t,[])},d.prototype.getAllParameters=function(){return this.checkParameterCache_(),this.paramCache_.slice(0,this.paramCache_.length)},d.prototype.getParameterValues=function(t){this.checkParameterCache_();for(var e=[],n=0;n<this.paramCache_.length;n+=2)t===this.paramCache_[n]&&e.push(this.paramCache_[n+1]);return e},d.prototype.getParameterMap=function(t){this.checkParameterCache_();for(var e={},n=0;n<this.paramCache_.length;n+=2){var i=this.paramCache_[n++],o=this.paramCache_[n++];i in e?e[i].push(o):e[i]=[o]}return e},d.prototype.getParameterValue=function(t){this.checkParameterCache_();for(var e=0;e<this.paramCache_.length;e+=2)if(t===this.paramCache_[e])return this.paramCache_[e+1];return null},d.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_)},d.prototype.getRawFragment=function(){return this.fragment_},d.prototype.setFragment=function(t){return this.fragment_=t?encodeURIComponent(t):null,this},d.prototype.setRawFragment=function(t){return this.fragment_=t||null,this},d.prototype.hasFragment=function(){return null!==this.fragment_};var s=new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),f=/[#\/\?@]/g,m=/[\#\?]/g;return d.parse=n,d.create=function(t,e,n,i,o,r,s){var a=new d(u(t,f),u(e,f),l(n),0<i?i.toString():null,u(o,m),null,l(s));return r&&("string"==typeof r?a.setRawQuery(r.replace(/[^?&=0-9A-Za-z_\-~.%]/g,c)):a.setAllParameters(r)),a},d.resolve=i,d.collapse_dots=h,d.utils={mimeTypeOf:function(t){var e=n(t);return/\.html$/.test(e.getPath())?"text/html":"application/javascript"},resolve:function(t,e){return t?i(n(t),n(e)).toString():""+e}},d}(),i={atype:{NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13}};if(i.atype=i.atype,i.ATTRIBS={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"select::tabindex":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::tabindex":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::width":0},i.ATTRIBS=i.ATTRIBS,i.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},i.eflags=i.eflags,i.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:16,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,var:0,video:0,wbr:2},i.ELEMENTS=i.ELEMENTS,i.ELEMENT_DOM_INTERFACES={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement",var:"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},i.ELEMENT_DOM_INTERFACES=i.ELEMENT_DOM_INTERFACES,i.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},i.ueffects=i.ueffects,i.URIEFFECTS={"a::href":2,"area::href":2,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1},i.URIEFFECTS=i.URIEFFECTS,i.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0},i.ltypes=i.ltypes,i.LOADERTYPES={"a::href":2,"area::href":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1},i.LOADERTYPES=i.LOADERTYPES,"i"!=="I".toLowerCase())throw"I/i problem";var o=function(S){function e(t,e){return function(t){if(l.hasOwnProperty(t))return l[t];var e=t.match(u);if(e)return String.fromCharCode(parseInt(e[1],10));if(e=t.match(c))return String.fromCharCode(parseInt(e[1],16));if(p&&d.test(t)){p.innerHTML="&"+t+";";var n=p.textContent;return l[t]=n}return"&"+t+";"}(e)}function m(t){return t.replace(f,e)}function g(t){return(""+t).replace(k,"&amp;").replace(T,"&lt;").replace(P,"&gt;").replace(A,"&#34;")}function h(t){return t.replace($,"&amp;$1").replace(T,"&lt;").replace(P,"&gt;")}function n(t){var r={cdata:t.cdata||t.cdata,comment:t.comment||t.comment,endDoc:t.endDoc||t.endDoc,endTag:t.endTag||t.endTag,pcdata:t.pcdata||t.pcdata,rcdata:t.rcdata||t.rcdata,startDoc:t.startDoc||t.startDoc,startTag:t.startTag||t.startTag};return function(t,e){return n=r,i=e,o=function(t){var e=/(<\/|<\!--|<[!?]|[&<>])/g;if(t+="",I)return t.split(e);for(var n,i=[],o=0;null!==(n=e.exec(t));)i.push(t.substring(o,n.index)),i.push(n[0]),o=n.index+n[0].length;return i.push(t.substring(o)),i}(t),void s(n,o,0,{noMoreGT:!1,noMoreEndComments:!1},i);var n,i,o}}function M(t,e,n,i,o){return function(){s(t,e,n,i,o)}}function s(t,e,n,i,o){try{t.startDoc&&0==n&&t.startDoc(o);for(var r,s,a,l=n,u=e.length;l<u;){var c=e[l++],h=e[l];switch(c){case"&":E.test(h)?(t.pcdata&&t.pcdata("&"+h,o,R,M(t,e,l,i,o)),l++):t.pcdata&&t.pcdata("&amp;",o,R,M(t,e,l,i,o));break;case"</":(r=/^([-\w:]+)[^\'\"]*/.exec(h))?r[0].length===h.length&&">"===e[l+1]?(l+=2,a=r[1].toLowerCase(),t.endTag&&t.endTag(a,o,R,M(t,e,l,i,o))):(x=t,C=o,k=R,$=i,void 0,l=(T=L(_=e,w=l))?(x.endTag&&x.endTag(T.name,C,k,M(x,_,w,$,C)),T.next):_.length):t.pcdata&&t.pcdata("&lt;/",o,R,M(t,e,l,i,o));break;case"<":if(r=/^([-\w:]+)\s*\/?/.exec(h))if(r[0].length===h.length&&">"===e[l+1]){l+=2,a=r[1].toLowerCase(),t.startTag&&t.startTag(a,[],o,R,M(t,e,l,i,o));var d=S.ELEMENTS[a];if(d&N)l=D(e,{name:a,next:l,eflags:d},t,o,R,i)}else m=t,g=o,v=R,y=i,void 0,l=(b=L(f=e,l))?(m.startTag&&m.startTag(b.name,b.attrs,g,v,M(m,f,b.next,y,g)),b.eflags&N?D(f,b,m,g,v,y):b.next):f.length;else t.pcdata&&t.pcdata("&lt;",o,R,M(t,e,l,i,o));break;case"\x3c!--":if(!i.noMoreEndComments){for(s=l+1;s<u&&(">"!==e[s]||!/--$/.test(e[s-1]));s++);if(s<u){if(t.comment){var p=e.slice(l,s).join("");t.comment(p.substr(0,p.length-2),o,R,M(t,e,s+1,i,o))}l=s+1}else i.noMoreEndComments=!0}i.noMoreEndComments&&t.pcdata&&t.pcdata("&lt;!--",o,R,M(t,e,l,i,o));break;case"<!":if(/^\w/.test(h)){if(!i.noMoreGT){for(s=l+1;s<u&&">"!==e[s];s++);s<u?l=s+1:i.noMoreGT=!0}i.noMoreGT&&t.pcdata&&t.pcdata("&lt;!",o,R,M(t,e,l,i,o))}else t.pcdata&&t.pcdata("&lt;!",o,R,M(t,e,l,i,o));break;case"<?":if(!i.noMoreGT){for(s=l+1;s<u&&">"!==e[s];s++);s<u?l=s+1:i.noMoreGT=!0}i.noMoreGT&&t.pcdata&&t.pcdata("&lt;?",o,R,M(t,e,l,i,o));break;case">":t.pcdata&&t.pcdata("&gt;",o,R,M(t,e,l,i,o));break;case"":break;default:t.pcdata&&t.pcdata(c,o,R,M(t,e,l,i,o))}}t.endDoc&&t.endDoc(o)}catch(t){if(t!==R)throw t}var f,m,g,v,y,b,_,w,x,C,k,$,T}function D(t,e,n,i,o,r){var s=t.length;z.hasOwnProperty(e.name)||(z[e.name]=new RegExp("^"+e.name+"(?:[\\s\\/]|$)","i"));for(var a=z[e.name],l=e.next,u=e.next+1;u<s&&("</"!==t[u-1]||!a.test(t[u]));u++);u<s&&(u-=1);var c=t.slice(l,u).join("");if(e.eflags&S.eflags.CDATA)n.cdata&&n.cdata(c,i,o,M(n,t,u,r,i));else{if(!(e.eflags&S.eflags.RCDATA))throw new Error("bug");n.rcdata&&n.rcdata(h(c),i,o,M(n,t,u,r,i))}return u}function L(t,e){var n=/^([-\w:]+)/.exec(t[e]),i={};i.name=n[1].toLowerCase(),i.eflags=S.ELEMENTS[i.name];for(var o=t[e].substr(n[0].length),r=e+1,s=t.length;r<s&&">"!==t[r];r++)o+=t[r];if(!(s<=r)){for(var a=[];""!==o;)if(n=O.exec(o)){if(n[4]&&!n[5]||n[6]&&!n[7]){for(var l=n[4]||n[6],u=!1,c=[o,t[r++]];r<s;r++){if(u){if(">"===t[r])break}else 0<=t[r].indexOf(l)&&(u=!0);c.push(t[r])}if(s<=r)break;o=c.join("");continue}var h=n[1].toLowerCase(),d=n[2]?(p=n[3],void 0,(34===(f=p.charCodeAt(0))||39===f)&&(p=p.substr(1,p.length-2)),m(p.replace(C,""))):"";a.push(h,d),o=o.substr(n[0].length)}else o=o.replace(/^[\s\S][^a-z\s]*/,"");var p,f;return i.attrs=a,i.next=r+1,i}}function i(d){var p,f,t=function(t,e){f||e.push(t)};return n({startDoc:function(t){f=!(p=[])},startTag:function(t,e,n){if(!f&&S.ELEMENTS.hasOwnProperty(t)){var i=S.ELEMENTS[t];if(!(i&S.eflags.FOLDABLE)){var o,r,s=d(t,e);if(!s)return void(f=!(i&S.eflags.EMPTY));if("object"!=typeof s)throw new Error("tagPolicy did not return object (old API?)");if(!("attribs"in s))throw new Error("tagPolicy gave no attribs");if(e=s.attribs,o="tagName"in s?(r=s.tagName,S.ELEMENTS[r]):(r=t,i),i&S.eflags.OPTIONAL_ENDTAG){var a=p[p.length-1];!a||a.orig!==t||a.rep===r&&t===r||n.push("</",a.rep,">")}i&S.eflags.EMPTY||p.push({orig:t,rep:r}),n.push("<",r);for(var l=0,u=e.length;l<u;l+=2){var c=e[l],h=e[l+1];null!=h&&n.push(" ",c,'="',g(h),'"')}n.push(">"),i&S.eflags.EMPTY&&!(o&S.eflags.EMPTY)&&n.push("</",r,">")}}},endTag:function(t,e){if(f)f=!1;else if(S.ELEMENTS.hasOwnProperty(t)){var n=S.ELEMENTS[t];if(!(n&(S.eflags.EMPTY|S.eflags.FOLDABLE))){var i;if(n&S.eflags.OPTIONAL_ENDTAG)for(i=p.length;0<=--i;){var o=p[i].orig;if(o===t)break;if(!(S.ELEMENTS[o]&S.eflags.OPTIONAL_ENDTAG))return}else for(i=p.length;0<=--i&&p[i].orig!==t;);if(i<0)return;for(var r=p.length;--r>i;){var s=p[r].rep;S.ELEMENTS[s]&S.eflags.OPTIONAL_ENDTAG||e.push("</",s,">")}i<p.length&&(t=p[i].rep),p.length=i,e.push("</",t,">")}}},pcdata:t,rcdata:t,cdata:t,endDoc:function(t){for(;p.length;p.length--)t.push("</",p[p.length-1].rep,">")}})}function v(t,e,n,i,o){if(!o)return null;try{var r=F.parse(""+t);if(r&&(!r.hasScheme()||U.test(r.getScheme()))){var s=o(r,e,n,i);return s?s.toString():null}}catch(t){return null}return null}function y(t,e,n,i,o){if(n||t(e+" removed",{change:"removed",tagName:e}),i!==o){var r="changed";i&&!o?r="removed":!i&&o&&(r="added"),t(e+"."+n+" "+r,{change:r,tagName:e,attribName:n,oldValue:i,newValue:o})}}function b(t,e,n){var i;return i=e+"::"+n,t.hasOwnProperty(i)?t[i]:(i="*::"+n,t.hasOwnProperty(i)?t[i]:void 0)}function r(t,e,o,n,i){for(var r=0;r<e.length;r+=2){var s,a=e[r],l=e[r+1],u=l,c=null;if(s=t+"::"+a,(S.ATTRIBS.hasOwnProperty(s)||(s="*::"+a,S.ATTRIBS.hasOwnProperty(s)))&&(c=S.ATTRIBS[s]),null!==c)switch(c){case S.atype.NONE:break;case S.atype.SCRIPT:l=null,i&&y(i,t,a,u,l);break;case S.atype.STYLE:if(void 0===_){l=null,i&&y(i,t,a,u,l);break}var h=[];_(l,{declaration:function(t,e){var n=t.toLowerCase(),i=x[n];i&&(w(n,i,e,o?function(t){return v(t,S.ueffects.SAME_DOCUMENT,S.ltypes.SANDBOXED,{TYPE:"CSS",CSS_PROP:n},o)}:null),h.push(t+": "+e.join(" ")))}}),l=0<h.length?h.join(" ; "):null,i&&y(i,t,a,u,l);break;case S.atype.ID:case S.atype.IDREF:case S.atype.IDREFS:case S.atype.GLOBAL_NAME:case S.atype.LOCAL_NAME:case S.atype.CLASSES:l=n?n(l):l,i&&y(i,t,a,u,l);break;case S.atype.URI:l=v(l,(f=t,m=a,b(S.URIEFFECTS,f,m)),(d=t,p=a,b(S.LOADERTYPES,d,p)),{TYPE:"MARKUP",XML_ATTR:a,XML_TAG:t},o),i&&y(i,t,a,u,l);break;case S.atype.URI_FRAGMENT:l&&"#"===l.charAt(0)?(l=l.substring(1),null!=(l=n?n(l):l)&&(l="#"+l)):l=null,i&&y(i,t,a,u,l);break;default:l=null,i&&y(i,t,a,u,l)}else l=null,i&&y(i,t,a,u,l);e[r+1]=l}var d,p,f,m;return e}function o(n,i,o){return function(t,e){return S.ELEMENTS[t]&S.eflags.UNSAFE?void(o&&y(o,t,void 0,void 0,void 0)):{attribs:r(t,e,n,i,o)}}}function a(t,e){var n=[];return i(e)(t,n),n.join("")}var _,w,x;"undefined"!=typeof window&&(_=window.parseCssDeclarations,w=window.sanitizeCssProperty,x=window.cssSchema);var l={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:""},u=/^#(\d+)$/,c=/^#x([0-9A-Fa-f]+)$/,d=/^[A-Za-z][A-za-z0-9]+$/,p="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):null,C=/\0/g,f=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,E=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,k=/&/g,$=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,T=/[<]/g,P=/>/g,A=/\"/g,O=new RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?","i"),I=3==="a,b".split(/(,)/).length,N=S.eflags.CDATA|S.eflags.RCDATA,R={},z={},U=/^(?:https?|mailto|data)$/i,t={};return t.escapeAttrib=t.escapeAttrib=g,t.makeHtmlSanitizer=t.makeHtmlSanitizer=i,t.makeSaxParser=t.makeSaxParser=n,t.makeTagPolicy=t.makeTagPolicy=o,t.normalizeRCData=t.normalizeRCData=h,t.sanitize=t.sanitize=function(t,e,n,i){return a(t,o(e,n,i))},t.sanitizeAttribs=t.sanitizeAttribs=r,t.sanitizeWithPolicy=t.sanitizeWithPolicy=a,t.unescapeEntities=t.unescapeEntities=m,t}(i).sanitize;i.ATTRIBS["*::style"]=0,i.ELEMENTS.style=0,i.ATTRIBS["a::target"]=0,i.ELEMENTS.video=0,i.ATTRIBS["video::src"]=0,i.ATTRIBS["video::poster"]=0,i.ATTRIBS["video::controls"]=0,i.ELEMENTS.audio=0,i.ATTRIBS["audio::src"]=0,i.ATTRIBS["video::autoplay"]=0,void(i.ATTRIBS["video::controls"]=0)!==e&&(e.exports=o)},{}],6:[function(t,e,n){e.exports={author:"Mapbox",name:"mapbox.js",description:"mapbox javascript api",version:"2.1.9",homepage:"http://mapbox.com/",repository:{type:"git",url:"git://github.com/mapbox/mapbox.js.git"},main:"src/index.js",dependencies:{leaflet:"0.7.3",mustache:"0.7.3",corslite:"0.0.6","sanitize-caja":"0.1.3"},scripts:{test:"jshint src/*.js && mocha-phantomjs test/index.html"},devDependencies:{browserify:"^6.3.2","clean-css":"~2.0.7","expect.js":"0.3.1",happen:"0.1.3",jshint:"2.4.4","leaflet-fullscreen":"0.0.4","leaflet-hash":"0.2.1",marked:"~0.3.0",minifyify:"^6.1.0",minimist:"0.0.5",mocha:"1.17.1","mocha-phantomjs":"3.1.6",sinon:"1.10.2"},optionalDependencies:{},engines:{node:"*"}}},{}],7:[function(t,e,n){"use strict";e.exports={HTTP_URL:"http://a.tiles.mapbox.com/v4",HTTPS_URL:"https://a.tiles.mapbox.com/v4",FORCE_HTTPS:!1,REQUIRE_ACCESS_TOKEN:!0}},{}],8:[function(t,e,n){"use strict";var i=t("./util"),o=t("./url"),r=t("./request"),c=t("./marker"),h=t("./simplestyle"),s=L.FeatureGroup.extend({options:{filter:function(){return!0},sanitizer:t("sanitize-caja"),style:h.style,popupOptions:{closeButton:!1}},initialize:function(t,e){L.setOptions(this,e),this._layers={},"string"==typeof t?i.idUrl(t,this):t&&"object"==typeof t&&this.setGeoJSON(t)},setGeoJSON:function(t){return this._geojson=t,this.clearLayers(),this._initialize(t),this},getGeoJSON:function(){return this._geojson},loadURL:function(n){return this._request&&"abort"in this._request&&this._request.abort(),this._request=r(n,L.bind(function(t,e){this._request=null,t&&"abort"!==t.type?(i.log("could not load features at "+n),this.fire("error",{error:t})):e&&(this.setGeoJSON(e),this.fire("ready"))},this)),this},loadID:function(t){return this.loadURL(o("/"+t+"/features.json",this.options.accessToken))},setFilter:function(t){return this.options.filter=t,this._geojson&&(this.clearLayers(),this._initialize(this._geojson)),this},getFilter:function(){return this.options.filter},_initialize:function(t){var e,n,i=L.Util.isArray(t)?t:t.features;if(i)for(e=0,n=i.length;e<n;e++)(i[e].geometries||i[e].geometry||i[e].features)&&this._initialize(i[e]);else if(this.options.filter(t)){var o={accessToken:this.options.accessToken},r=this.options.pointToLayer||function(t,e){return c.style(t,e,o)},s=L.GeoJSON.geometryToLayer(t,r),a=c.createPopup(t,this.options.sanitizer),l=this.options.style,u=l===h.style;!(l&&"setStyle"in s)||u&&(s instanceof L.Circle||s instanceof L.CircleMarker)||("function"==typeof l&&(l=l(t)),s.setStyle(l)),s.feature=t,a&&s.bindPopup(a,this.options.popupOptions),this.addLayer(s)}}});e.exports.FeatureLayer=s,e.exports.featureLayer=function(t,e){return new s(t,e)}},{"./marker":23,"./request":24,"./simplestyle":26,"./url":28,"./util":29,"sanitize-caja":4}],9:[function(t,e,n){"use strict";var i=L.Class.extend({includes:L.Mixin.Events,data:{},record:function(t){L.extend(this.data,t),this.fire("change")}});e.exports=new i},{}],10:[function(t,e,n){"use strict";var o=t("./util"),i=t("./url"),r=t("./feedback"),a=t("./request");e.exports=function(t,e){var s={};return o.strict(t,"string"),-1===t.indexOf("/")&&(t=i("/geocode/"+t+"/{query}.json",e&&e.accessToken)),s.getURL=function(){return t},s.queryURL=function(t){var e;if("string"!=typeof t){for(var n=[],i=0;i<t.length;i++)n[i]=encodeURIComponent(t[i]);e=n.join(";")}else e=encodeURIComponent(t);return r.record({geocoding:e}),L.Util.template(s.getURL(),{query:e})},s.query=function(t,i){return o.strict(i,"function"),a(s.queryURL(t),function(t,e){if(e&&(e.length||e.features)){var n={results:e};e.features&&e.features.length&&(n.latlng=[e.features[0].center[1],e.features[0].center[0]],e.features[0].bbox&&(n.bounds=e.features[0].bbox,n.lbounds=o.lbounds(n.bounds))),i(null,n)}else i(t||!0)}),s},s.reverseQuery=function(t,n){function e(t){return void 0!==t.lat&&void 0!==t.lng?t.lng+","+t.lat:void 0!==t.lat&&void 0!==t.lon?t.lon+","+t.lat:t[0]+","+t[1]}var i="";if(t.length&&t[0].length){for(var o=0,r=[];o<t.length;o++)r.push(e(t[o]));i=r.join(";")}else i=e(t);return a(s.queryURL(i),function(t,e){n(t,e)}),s},s}},{"./feedback":9,"./request":24,"./url":28,"./util":29}],11:[function(t,e,n){"use strict";var i=t("./geocoder"),o=t("./util"),r=L.Control.extend({includes:L.Mixin.Events,options:{position:"topleft",pointZoom:16,keepOpen:!1,autocomplete:!1},initialize:function(t,e){L.Util.setOptions(this,e),this.setURL(t),this._updateSubmit=L.bind(this._updateSubmit,this),this._updateAutocomplete=L.bind(this._updateAutocomplete,this),this._chooseResult=L.bind(this._chooseResult,this)},setURL:function(t){return this.geocoder=i(t,{accessToken:this.options.accessToken}),this},getURL:function(){return this.geocoder.getURL()},setID:function(t){return this.setURL(t)},setTileJSON:function(t){return this.setURL(t.geocoder)},_toggle:function(t){t&&L.DomEvent.stop(t),L.DomUtil.hasClass(this._container,"active")?(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur()):(L.DomUtil.addClass(this._container,"active"),this._input.focus(),this._input.select())},_closeIfOpen:function(t){L.DomUtil.hasClass(this._container,"active")&&!this.options.keepOpen&&(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur())},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-mapbox-geocoder leaflet-bar leaflet-control"),n=L.DomUtil.create("a","leaflet-control-mapbox-geocoder-toggle mapbox-icon mapbox-icon-geocoder",e),i=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-results",e),o=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-wrap",e),r=L.DomUtil.create("form","leaflet-control-mapbox-geocoder-form",o),s=L.DomUtil.create("input","",r);return n.href="#",n.innerHTML="&nbsp;",s.type="text",s.setAttribute("placeholder","Search"),L.DomEvent.addListener(r,"submit",this._geocode,this),L.DomEvent.addListener(s,"keyup",this._autocomplete,this),L.DomEvent.disableClickPropagation(e),this._map=t,this._results=i,this._input=s,this._form=r,this.options.keepOpen?L.DomUtil.addClass(e,"active"):(this._map.on("click",this._closeIfOpen,this),L.DomEvent.addListener(n,"click",this._toggle,this)),e},_updateSubmit:function(t,e){if(L.DomUtil.removeClass(this._container,"searching"),this._results.innerHTML="",t||!e)this.fire("error",{error:t});else{var n=[];e.results&&e.results.features&&(n=e.results.features),1===n.length?(this.fire("autoselect",{feature:n[0]}),this.fire("found",{results:e.results}),this._chooseResult(n[0]),this._closeIfOpen()):(1<n.length&&this.fire("found",{results:e.results}),this._displayResults(n))}},_updateAutocomplete:function(t,e){if(this._results.innerHTML="",t||!e)this.fire("error",{error:t});else{var n=[];e.results&&e.results.features&&(n=e.results.features),n.length&&this.fire("found",{results:e.results}),this._displayResults(n)}},_displayResults:function(t){for(var e=0,n=Math.min(t.length,5);e<n;e++){var i=t[e],o=i.place_name;if(o.length){var r=L.DomUtil.create("a","",this._results);r["innerText"in r?"innerText":"textContent"]=o,r.href="#",L.bind(function(e){L.DomEvent.addListener(r,"click",function(t){this._chooseResult(e),L.DomEvent.stop(t),this.fire("select",{feature:e})},this)},this)(i)}}5<t.length&&(L.DomUtil.create("span","",this._results).innerHTML="Top 5 of "+t.length+"  results")},_chooseResult:function(t){t.bbox?this._map.fitBounds(o.lbounds(t.bbox)):t.center&&this._map.setView([t.center[1],t.center[0]],void 0===this._map.getZoom()?this.options.pointZoom:Math.max(this._map.getZoom(),this.options.pointZoom))},_geocode:function(t){return L.DomEvent.preventDefault(t),""===this._input.value?this._updateSubmit():(L.DomUtil.addClass(this._container,"searching"),void this.geocoder.query(this._input.value,this._updateSubmit))},_autocomplete:function(t){return this.options.autocomplete?""===this._input.value?this._updateAutocomplete():void this.geocoder.query(this._input.value,this._updateAutocomplete):void 0}});e.exports.GeocoderControl=r,e.exports.geocoderControl=function(t,e){return new r(t,e)}},{"./geocoder":10,"./util":29}],12:[function(t,e,n){"use strict";e.exports=function(r){return function(t,e){if(r){var n=(93<=(o=r.grid[e].charCodeAt(t))&&o--,35<=o&&o--,o-32),i=r.keys[n];return r.data[i]}var o}}},{}],13:[function(t,e,n){"use strict";var i=t("./util"),o=t("mustache"),r=L.Control.extend({options:{pinnable:!0,follow:!1,sanitizer:t("sanitize-caja"),touchTeaser:!0,location:!0},_currentContent:"",_pinned:!1,initialize:function(t,e){L.Util.setOptions(this,e),i.strict_instance(t,L.Class,"L.mapbox.gridLayer"),this._layer=t},setTemplate:function(t){return i.strict(t,"string"),this.options.template=t,this},_template:function(t,e){if(e){var n=this.options.template||this._layer.getTileJSON().template;if(n){var i={};return i["__"+t+"__"]=!0,this.options.sanitizer(o.to_html(n,L.extend(i,e)))}}},_show:function(t,e){t!==this._currentContent&&(this._currentContent=t,this.options.follow?(this._popup.setContent(t).setLatLng(e.latLng),this._map._popup!==this._popup&&this._popup.openOn(this._map)):(this._container.style.display="block",this._contentWrapper.innerHTML=t))},hide:function(){return this._pinned=!1,this._currentContent="",this._map.closePopup(),this._container.style.display="none",this._contentWrapper.innerHTML="",L.DomUtil.removeClass(this._container,"closable"),this},_mouseover:function(t){if(t.data?L.DomUtil.addClass(this._map._container,"map-clickable"):L.DomUtil.removeClass(this._map._container,"map-clickable"),!this._pinned){var e=this._template("teaser",t.data);e?this._show(e,t):this.hide()}},_mousemove:function(t){this._pinned||this.options.follow&&this._popup.setLatLng(t.latLng)},_navigateTo:function(t){window.top.location.href=t},_click:function(t){var e=this._template("location",t.data);if(this.options.location&&e&&0===e.search(/^https?:/))return this._navigateTo(this._template("location",t.data));if(this.options.pinnable){var n=this._template("full",t.data);!n&&this.options.touchTeaser&&L.Browser.touch&&(n=this._template("teaser",t.data)),n?(L.DomUtil.addClass(this._container,"closable"),this._pinned=!0,this._show(n,t)):this._pinned&&(L.DomUtil.removeClass(this._container,"closable"),this._pinned=!1,this.hide())}},_onPopupClose:function(){this._currentContent=null,this._pinned=!1},_createClosebutton:function(t,e){var n=L.DomUtil.create("a","close",t);return n.innerHTML="close",n.href="#",n.title="close",L.DomEvent.on(n,"click",L.DomEvent.stopPropagation).on(n,"mousedown",L.DomEvent.stopPropagation).on(n,"dblclick",L.DomEvent.stopPropagation).on(n,"click",L.DomEvent.preventDefault).on(n,"click",e,this),n},onAdd:function(t){this._map=t;var e=L.DomUtil.create("div","leaflet-control-grid map-tooltip"),n=L.DomUtil.create("div","map-tooltip-content");return e.style.display="none",this._createClosebutton(e,this.hide),e.appendChild(n),this._contentWrapper=n,this._popup=new L.Popup({autoPan:!1,closeOnClick:!1}),t.on("popupclose",this._onPopupClose,this),L.DomEvent.disableClickPropagation(e).addListener(e,"mousewheel",L.DomEvent.stopPropagation),this._layer.on("mouseover",this._mouseover,this).on("mousemove",this._mousemove,this).on("click",this._click,this),e},onRemove:function(t){t.off("popupclose",this._onPopupClose,this),this._layer.off("mouseover",this._mouseover,this).off("mousemove",this._mousemove,this).off("click",this._click,this)}});e.exports.GridControl=r,e.exports.gridControl=function(t,e){return new r(t,e)}},{"./util":29,mustache:3,"sanitize-caja":4}],14:[function(t,e,n){"use strict";var i=t("./util"),s=t("./request"),a=t("./grid"),o=L.Class.extend({includes:[L.Mixin.Events,t("./load_tilejson")],options:{template:function(){return""}},_mouseOn:null,_tilejson:{},_cache:{},initialize:function(t,e){L.Util.setOptions(this,e),this._loadTileJSON(t)},_setTileJSON:function(t){return i.strict(t,"object"),L.extend(this.options,{grids:t.grids,minZoom:t.minzoom,maxZoom:t.maxzoom,bounds:t.bounds&&i.lbounds(t.bounds)}),this._tilejson=t,this._cache={},this._update(),this},getTileJSON:function(){return this._tilejson},active:function(){return!!(this._map&&this.options.grids&&this.options.grids.length)},addTo:function(t){return t.addLayer(this),this},onAdd:function(t){this._map=t,this._update(),this._map.on("click",this._click,this).on("mousemove",this._move,this).on("moveend",this._update,this)},onRemove:function(){this._map.off("click",this._click,this).off("mousemove",this._move,this).off("moveend",this._update,this)},getData:function(t,i){if(this.active()){var e=this._map,o=e.project(t.wrap()),r=Math.floor(o.x/256),s=Math.floor(o.y/256),n=e.options.crs.scale(e.getZoom())/256;return r=(r+n)%n,s=(s+n)%n,this._getTile(e.getZoom(),r,s,function(t){var e=Math.floor((o.x-256*r)/4),n=Math.floor((o.y-256*s)/4);i(t(e,n))}),this}},_click:function(e){this.getData(e.latlng,L.bind(function(t){this.fire("click",{latLng:e.latlng,data:t})},this))},_move:function(e){this.getData(e.latlng,L.bind(function(t){t!==this._mouseOn?(this._mouseOn&&this.fire("mouseout",{latLng:e.latlng,data:this._mouseOn}),this.fire("mouseover",{latLng:e.latlng,data:t}),this._mouseOn=t):this.fire("mousemove",{latLng:e.latlng,data:t})},this))},_getTileURL:function(t){var e=this.options.grids,n=e[(t.x+t.y)%e.length];return L.Util.template(n,t)},_update:function(){if(this.active()){var t=this._map.getPixelBounds(),e=this._map.getZoom();if(!(e>this.options.maxZoom||e<this.options.minZoom))for(var n=L.bounds(t.min.divideBy(256)._floor(),t.max.divideBy(256)._floor()),i=this._map.options.crs.scale(e)/256,o=n.min.x;o<=n.max.x;o++)for(var r=n.min.y;r<=n.max.y;r++)this._getTile(e,(o%i+i)%i,(r%i+i)%i)}},_getTile:function(t,e,n,i){var o=t+"_"+e+"_"+n,r=L.point(e,n);if(r.z=t,this._tileShouldBeLoaded(r)){if(o in this._cache){if(!i)return;return void("function"==typeof this._cache[o]?i(this._cache[o]):this._cache[o].push(i))}this._cache[o]=[],i&&this._cache[o].push(i),s(this._getTileURL(r),L.bind(function(t,e){var n=this._cache[o];this._cache[o]=a(e);for(var i=0;i<n.length;++i)n[i](this._cache[o])},this))}},_tileShouldBeLoaded:function(t){if(t.z>this.options.maxZoom||t.z<this.options.minZoom)return!1;if(this.options.bounds){var e=t.multiplyBy(256),n=e.add(new L.Point(256,256)),i=this._map.unproject(e),o=this._map.unproject(n),r=new L.LatLngBounds([i,o]);if(!this.options.bounds.intersects(r))return!1}return!0}});e.exports.GridLayer=o,e.exports.gridLayer=function(t,e){return new o(t,e)}},{"./grid":12,"./load_tilejson":19,"./request":24,"./util":29}],15:[function(t,e,n){t("./leaflet"),t("./mapbox")},{"./leaflet":17,"./mapbox":21}],16:[function(t,e,n){"use strict";var i=L.Control.extend({options:{position:"bottomright",sanitizer:t("sanitize-caja")},initialize:function(t){L.setOptions(this,t),this._info={},console.warn("infoControl has been deprecated and will be removed in mapbox.js v3.0.0. Use the default attribution control instead, which is now responsive.")},onAdd:function(t){this._container=L.DomUtil.create("div","mapbox-control-info mapbox-small"),this._content=L.DomUtil.create("div","map-info-container",this._container);var e=L.DomUtil.create("a","mapbox-info-toggle mapbox-icon mapbox-icon-info",this._container);for(var n in e.href="#",L.DomEvent.addListener(e,"click",this._showInfo,this),L.DomEvent.disableClickPropagation(this._container),t._layers)t._layers[n].getAttribution&&this.addInfo(t._layers[n].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd,this).off("layerremove",this._onLayerRemove,this)},addInfo:function(t){return t?(this._info[t]||(this._info[t]=0),this._info[t]=!0,this._update()):this},removeInfo:function(t){return t?(this._info[t]&&(this._info[t]=!1),this._update()):this},_showInfo:function(t){return L.DomEvent.preventDefault(t),!0===this._active?this._hidecontent():(L.DomUtil.addClass(this._container,"active"),this._active=!0,void this._update())},_hidecontent:function(){this._content.innerHTML="",this._active=!1,L.DomUtil.removeClass(this._container,"active")},_update:function(){if(!this._map)return this;this._content.innerHTML="";var t="none",e=[];for(var n in this._info)this._info.hasOwnProperty(n)&&this._info[n]&&(e.push(this.options.sanitizer(n)),t="block");return this._content.innerHTML+=e.join(" | "),this._container.style.display=t,this},_onLayerAdd:function(t){t.layer.getAttribution&&t.layer.getAttribution()?this.addInfo(t.layer.getAttribution()):"on"in t.layer&&t.layer.getAttribution&&t.layer.on("ready",L.bind(function(){this.addInfo(t.layer.getAttribution())},this))},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeInfo(t.layer.getAttribution())}});e.exports.InfoControl=i,e.exports.infoControl=function(t){return new i(t)}},{"sanitize-caja":4}],17:[function(t,e,n){window.L=t("leaflet/dist/leaflet-src")},{"leaflet/dist/leaflet-src":2}],18:[function(t,e,n){"use strict";var i=L.Control.extend({options:{position:"bottomright",sanitizer:t("sanitize-caja")},initialize:function(t){L.setOptions(this,t),this._legends={}},onAdd:function(t){return this._container=L.DomUtil.create("div","map-legends wax-legends"),L.DomEvent.disableClickPropagation(this._container),this._update(),this._container},addLegend:function(t){return t?(this._legends[t]||(this._legends[t]=0),this._legends[t]++,this._update()):this},removeLegend:function(t){return t?(this._legends[t]&&this._legends[t]--,this._update()):this},_update:function(){if(!this._map)return this;this._container.innerHTML="";var t="none";for(var e in this._legends)if(this._legends.hasOwnProperty(e)&&this._legends[e]){L.DomUtil.create("div","map-legend wax-legend",this._container).innerHTML=this.options.sanitizer(e),t="block"}return this._container.style.display=t,this}});e.exports.LegendControl=i,e.exports.legendControl=function(t){return new i(t)}},{"sanitize-caja":4}],19:[function(t,e,n){"use strict";var i=t("./request"),o=t("./url"),r=t("./util");e.exports={_loadTileJSON:function(n){"string"==typeof n?(n=o.tileJSON(n,this.options&&this.options.accessToken),i(n,L.bind(function(t,e){t?(r.log("could not load TileJSON at "+n),this.fire("error",{error:t})):e&&(this._setTileJSON(e),this.fire("ready"))},this))):n&&"object"==typeof n&&this._setTileJSON(n)}}},{"./request":24,"./url":28,"./util":29}],20:[function(t,e,n){"use strict";function o(t,e){return!e||t.accessToken?t:L.extend({accessToken:e},t)}t("./util");var r=t("./tile_layer").tileLayer,s=t("./feature_layer").featureLayer,a=t("./grid_layer").gridLayer,l=t("./grid_control").gridControl,u=t("./info_control").infoControl,c=t("./share_control").shareControl,h=t("./legend_control").legendControl,d=t("./mapbox_logo").mapboxLogoControl,p=t("./feedback"),i=L.Map.extend({includes:[t("./load_tilejson")],options:{tileLayer:{},featureLayer:{},gridLayer:{},legendControl:{},gridControl:{},infoControl:!1,shareControl:!1,sanitizer:t("sanitize-caja")},_tilejson:{},initialize:function(t,e,n){if(L.Map.prototype.initialize.call(this,t,L.extend({},L.Map.prototype.options,n)),this.attributionControl){this.attributionControl.setPrefix("");var i=this.options.attributionControl.compact;(i||!1!==i&&this._container.offsetWidth<=640)&&L.DomUtil.addClass(this.attributionControl._container,"leaflet-compact-attribution"),void 0===i&&this.on("resize",function(){640<this._container.offsetWidth?L.DomUtil.removeClass(this.attributionControl._container,"leaflet-compact-attribution"):L.DomUtil.addClass(this.attributionControl._container,"leaflet-compact-attribution")})}this.options.tileLayer&&(this.tileLayer=r(void 0,o(this.options.tileLayer,this.options.accessToken)),this.addLayer(this.tileLayer)),this.options.featureLayer&&(this.featureLayer=s(void 0,o(this.options.featureLayer,this.options.accessToken)),this.addLayer(this.featureLayer)),this.options.gridLayer&&(this.gridLayer=a(void 0,o(this.options.gridLayer,this.options.accessToken)),this.addLayer(this.gridLayer)),this.options.gridLayer&&this.options.gridControl&&(this.gridControl=l(this.gridLayer,this.options.gridControl),this.addControl(this.gridControl)),this.options.infoControl&&(this.infoControl=u(this.options.infoControl),this.addControl(this.infoControl)),this.options.legendControl&&(this.legendControl=h(this.options.legendControl),this.addControl(this.legendControl)),this.options.shareControl&&(this.shareControl=c(void 0,o(this.options.shareControl,this.options.accessToken)),this.addControl(this.shareControl)),this._mapboxLogoControl=d(this.options.mapboxLogoControl),this.addControl(this._mapboxLogoControl),this._loadTileJSON(e),this.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this).on("moveend",this._updateMapFeedbackLink,this),this.whenReady(function(){p.on("change",this._updateMapFeedbackLink,this)}),this.on("unload",function(){p.off("change",this._updateMapFeedbackLink,this)})},_setTileJSON:function(t){return this._tilejson=t,this._initialize(t),this},getTileJSON:function(){return this._tilejson},_initialize:function(t){if(this.tileLayer&&(this.tileLayer._setTileJSON(t),this._updateLayer(this.tileLayer)),this.featureLayer&&!this.featureLayer.getGeoJSON()&&t.data&&t.data[0]&&this.featureLayer.loadURL(t.data[0]),this.gridLayer&&(this.gridLayer._setTileJSON(t),this._updateLayer(this.gridLayer)),this.infoControl&&t.attribution&&(this.infoControl.addInfo(this.options.sanitizer(t.attribution)),this._updateMapFeedbackLink()),this.legendControl&&t.legend&&this.legendControl.addLegend(t.legend),this.shareControl&&this.shareControl._setTileJSON(t),this._mapboxLogoControl._setTileJSON(t),!this._loaded&&t.center){var e=void 0!==this.getZoom()?this.getZoom():t.center[2],n=L.latLng(t.center[1],t.center[0]);this.setView(n,e)}},_updateMapFeedbackLink:function(){if(this._controlContainer.getElementsByClassName){var t=this._controlContainer.getElementsByClassName("mapbox-improve-map");if(t.length&&this._loaded){var e=this.getCenter().wrap(),n="#"+((this._tilejson||{}).id||"")+"/"+e.lng.toFixed(3)+"/"+e.lat.toFixed(3)+"/"+this.getZoom();for(var i in p.data)n+="/"+i+"="+p.data[i];for(var o=0;o<t.length;o++)t[o].hash=n}}},_onLayerAdd:function(t){"on"in t.layer&&t.layer.on("ready",this._onLayerReady,this),window.setTimeout(L.bind(this._updateMapFeedbackLink,this),0)},_onLayerRemove:function(t){"on"in t.layer&&t.layer.off("ready",this._onLayerReady,this),window.setTimeout(L.bind(this._updateMapFeedbackLink,this),0)},_onLayerReady:function(t){this._updateLayer(t.target)},_updateLayer:function(t){t.options&&(this.infoControl&&this._loaded&&this.infoControl.addInfo(t.options.infoControl),this.attributionControl&&this._loaded&&t.getAttribution&&this.attributionControl.addAttribution(t.getAttribution()),L.stamp(t)in this._zoomBoundLayers||!t.options.maxZoom&&!t.options.minZoom||(this._zoomBoundLayers[L.stamp(t)]=t),this._updateMapFeedbackLink(),this._updateZoomLevels())}});e.exports.Map=i,e.exports.map=function(t,e,n){return new i(t,e,n)}},{"./feature_layer":8,"./feedback":9,"./grid_control":13,"./grid_layer":14,"./info_control":16,"./legend_control":18,"./load_tilejson":19,"./mapbox_logo":22,"./share_control":25,"./tile_layer":27,"./util":29,"sanitize-caja":4}],21:[function(t,e,n){"use strict";var i=t("./geocoder_control"),o=t("./grid_control"),r=t("./feature_layer"),s=t("./legend_control"),a=t("./share_control"),l=t("./tile_layer"),u=t("./info_control"),c=t("./map"),h=t("./grid_layer");L.mapbox=e.exports={VERSION:t("../package.json").version,geocoder:t("./geocoder"),marker:t("./marker"),simplestyle:t("./simplestyle"),tileLayer:l.tileLayer,TileLayer:l.TileLayer,infoControl:u.infoControl,InfoControl:u.InfoControl,shareControl:a.shareControl,ShareControl:a.ShareControl,legendControl:s.legendControl,LegendControl:s.LegendControl,geocoderControl:i.geocoderControl,GeocoderControl:i.GeocoderControl,gridControl:o.gridControl,GridControl:o.GridControl,gridLayer:h.gridLayer,GridLayer:h.GridLayer,featureLayer:r.featureLayer,FeatureLayer:r.FeatureLayer,map:c.map,Map:c.Map,config:t("./config"),sanitize:t("sanitize-caja"),template:t("mustache").to_html,feedback:t("./feedback")},window.L.Icon.Default.imagePath=("https:"==document.location.protocol||"http:"==document.location.protocol?"":"https:")+"//api.tiles.mapbox.com/mapbox.js/v"+t("../package.json").version+"/images"},{"../package.json":6,"./config":7,"./feature_layer":8,"./feedback":9,"./geocoder":10,"./geocoder_control":11,"./grid_control":13,"./grid_layer":14,"./info_control":16,"./legend_control":18,"./map":20,"./marker":23,"./share_control":25,"./simplestyle":26,"./tile_layer":27,mustache:3,"sanitize-caja":4}],22:[function(t,e,n){"use strict";var i=L.Control.extend({options:{position:"bottomleft"},initialize:function(t){L.setOptions(this,t)},onAdd:function(t){return this._container=L.DomUtil.create("div","mapbox-logo"),this._container},_setTileJSON:function(t){t.mapbox_logo&&L.DomUtil.addClass(this._container,"mapbox-logo-true")}});e.exports.MapboxLogoControl=i,e.exports.mapboxLogoControl=function(t){return new i(t)}},{}],23:[function(t,e,n){"use strict";function i(t,e){var n={small:[20,50],medium:[30,70],large:[35,90]},i=(t=t||{})["marker-size"]||"medium",o="marker-symbol"in t&&""!==t["marker-symbol"]?"-"+t["marker-symbol"]:"",r=(t["marker-color"]||"7e7e7e").replace("#","");return L.icon({iconUrl:s("/marker/pin-"+i.charAt(0)+o+"+"+r+(L.Browser.retina?"@2x":"")+".png",e&&e.accessToken),iconSize:n[i],iconAnchor:[n[i][0]/2,n[i][1]/2],popupAnchor:[0,-n[i][1]/2]})}var s=t("./url"),o=t("./util"),r=t("sanitize-caja");e.exports={icon:i,style:function(t,e,n){return L.marker(e,{icon:i(t.properties,n),title:o.strip_tags(r(t.properties&&t.properties.title||""))})},createPopup:function(t,e){if(!t||!t.properties)return"";var n="";return t.properties.title&&(n+='<div class="marker-title">'+t.properties.title+"</div>"),t.properties.description&&(n+='<div class="marker-description">'+t.properties.description+"</div>"),(e||r)(n)}}},{"./url":28,"./util":29,"sanitize-caja":4}],24:[function(t,e,n){"use strict";var i=t("corslite"),o=t("./util").strict,r=t("./config"),s=/^(https?:)?(?=\/\/(.|api)\.tiles\.mapbox\.com\/)/;e.exports=function(t,n){return o(t,"string"),o(n,"function"),t=t.replace(s,function(t,e){return"withCredentials"in new window.XMLHttpRequest?"https:"===e||"https:"===document.location.protocol||r.FORCE_HTTPS?"https:":"http:":document.location.protocol}),i(t,function(t,e){!t&&e&&(e=JSON.parse(e.responseText)),n(t,e)})}},{"./config":7,"./util":29,corslite:1}],25:[function(t,e,n){"use strict";var p=t("./url"),i=L.Control.extend({includes:[t("./load_tilejson")],options:{position:"topleft",url:""},initialize:function(t,e){L.setOptions(this,e),this._loadTileJSON(t)},_setTileJSON:function(t){this._tilejson=t},onAdd:function(t){this._map=t;var e=L.DomUtil.create("div","leaflet-control-mapbox-share leaflet-bar"),n=L.DomUtil.create("a","mapbox-share mapbox-icon mapbox-icon-share",e);return n.href="#",this._modal=L.DomUtil.create("div","mapbox-modal",this._map._container),this._mask=L.DomUtil.create("div","mapbox-modal-mask",this._modal),this._content=L.DomUtil.create("div","mapbox-modal-content",this._modal),L.DomEvent.addListener(n,"click",this._shareClick,this),L.DomEvent.disableClickPropagation(e),this._map.on("mousedown",this._clickOut,this),e},_clickOut:function(t){return this._sharing?(L.DomEvent.preventDefault(t),L.DomUtil.removeClass(this._modal,"active"),this._content.innerHTML="",void(this._sharing=null)):void 0},_shareClick:function(t){if(L.DomEvent.stop(t),this._sharing)return this._clickOut(t);var e=this._tilejson||this._map._tilejson||{},n=encodeURIComponent(this.options.url||e.webpage||window.location),i=encodeURIComponent(e.name),o=p("/"+e.id+"/"+this._map.getCenter().lng+","+this._map.getCenter().lat+","+this._map.getZoom()+"/600x600.png",this.options.accessToken),r=p("/"+e.id+".html",this.options.accessToken),s="//twitter.com/intent/tweet?status="+i+" "+n,a="//www.facebook.com/sharer.php?u="+n+"&t="+encodeURIComponent(e.name),l="//www.pinterest.com/pin/create/button/?url="+n+"&media="+o+"&description="+e.name,u="<h3>Share this map</h3><div class='mapbox-share-buttons'><a class='mapbox-button mapbox-button-icon mapbox-icon-facebook' target='_blank' href='{{facebook}}'>Facebook</a><a class='mapbox-button mapbox-button-icon mapbox-icon-twitter' target='_blank' href='{{twitter}}'>Twitter</a><a class='mapbox-button mapbox-button-icon mapbox-icon-pinterest' target='_blank' href='{{pinterest}}'>Pinterest</a></div>".replace("{{twitter}}",s).replace("{{facebook}}",a).replace("{{pinterest}}",l),c='<iframe width="100%" height="500px" frameBorder="0" src="{{embed}}"></iframe>'.replace("{{embed}}",r);L.DomUtil.addClass(this._modal,"active"),this._sharing=L.DomUtil.create("div","mapbox-modal-body",this._content),this._sharing.innerHTML=u;var h=L.DomUtil.create("input","mapbox-embed",this._sharing);h.type="text",h.value=c,L.DomUtil.create("label","mapbox-embed-description",this._sharing).innerHTML="Copy and paste this <strong>HTML code</strong> into documents to embed this map on web pages.";var d=L.DomUtil.create("a","leaflet-popup-close-button",this._sharing);d.href="#",L.DomEvent.disableClickPropagation(this._sharing),L.DomEvent.addListener(d,"click",this._clickOut,this),L.DomEvent.addListener(h,"click",function(t){t.target.focus(),t.target.select()})}});e.exports.ShareControl=i,e.exports.shareControl=function(t,e){return new i(t,e)}},{"./load_tilejson":19,"./url":28}],26:[function(t,e,n){"use strict";var i={stroke:"#555555","stroke-width":2,"stroke-opacity":1,fill:"#555555","fill-opacity":.5},o=[["stroke","color"],["stroke-width","weight"],["stroke-opacity","opacity"],["fill","fillColor"],["fill-opacity","fillOpacity"]];e.exports={style:function(t){return function(t){for(var e={},n=0;n<o.length;n++)e[o[n][1]]=t[o[n][0]];return e}(function(t,e){var n={};for(var i in e)void 0===t[i]?n[i]=e[i]:n[i]=t[i];return n}(t.properties||{},i))},defaults:i}},{}],27:[function(t,e,n){"use strict";var i=t("./util"),o=/\.((?:png|jpg)\d*)(?=$|\?)/,r=L.TileLayer.extend({includes:[t("./load_tilejson")],options:{sanitizer:t("sanitize-caja")},formats:["png","jpg","png32","png64","png128","png256","jpg70","jpg80","jpg90"],scalePrefix:"@2x.",initialize:function(t,e){L.TileLayer.prototype.initialize.call(this,void 0,e),this._tilejson={},e&&e.format&&i.strict_oneof(e.format,this.formats),this._loadTileJSON(t)},setFormat:function(t){return i.strict(t,"string"),this.options.format=t,this.redraw(),this},setUrl:null,_setTileJSON:function(t){return i.strict(t,"object"),this.options.format=this.options.format||t.tiles[0].match(o)[1],L.extend(this.options,{tiles:t.tiles,attribution:this.options.sanitizer(t.attribution),minZoom:t.minzoom||0,maxZoom:t.maxzoom||18,tms:"tms"===t.scheme,bounds:t.bounds&&i.lbounds(t.bounds)}),this._tilejson=t,this.redraw(),this},getTileJSON:function(){return this._tilejson},getTileUrl:function(t){var e=this.options.tiles,n=e[Math.floor(Math.abs(t.x+t.y)%e.length)],i=L.Util.template(n,t);return i?i.replace(o,(L.Browser.retina?this.scalePrefix:".")+this.options.format):i},_update:function(){this.options.tiles&&L.TileLayer.prototype._update.call(this)}});e.exports.TileLayer=r,e.exports.tileLayer=function(t,e){return new r(t,e)}},{"./load_tilejson":19,"./util":29,"sanitize-caja":4}],28:[function(t,i,e){"use strict";var o=t("./config"),r=t("../package.json").version;i.exports=function(t,e){if(!(e=e||L.mapbox.accessToken)&&o.REQUIRE_ACCESS_TOKEN)throw new Error("An API access token is required to use Mapbox.js. See https://www.mapbox.com/mapbox.js/api/v"+r+"/api-access-tokens/");var n="https:"===document.location.protocol||o.FORCE_HTTPS?o.HTTPS_URL:o.HTTP_URL;if(n+=t,n+=-1!==n.indexOf("?")?"&access_token=":"?access_token=",o.REQUIRE_ACCESS_TOKEN){if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox.js, not a secret access token (sk.*). See https://www.mapbox.com/mapbox.js/api/v"+r+"/api-access-tokens/");n+=e}return n},i.exports.tileJSON=function(t,e){if(-1!==t.indexOf("/"))return t;var n=i.exports("/"+t+".json",e);return 0===n.indexOf("https")&&(n+="&secure"),n}},{"../package.json":6,"./config":7}],29:[function(t,e,n){"use strict";e.exports={idUrl:function(t,e){-1==t.indexOf("/")?e.loadID(t):e.loadURL(t)},log:function(t){"object"==typeof console&&"function"==typeof console.error&&console.error(t)},strict:function(t,e){if(typeof t!==e)throw new Error("Invalid argument: "+e+" expected")},strict_instance:function(t,e,n){if(!(t instanceof e))throw new Error("Invalid argument: "+n+" expected")},strict_oneof:function(t,e){if(!function(t,e){if(!e||!e.length)return!1;for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}(t,e))throw new Error("Invalid argument: "+t+" given, valid values are "+e.join(", "))},strip_tags:function(t){return t.replace(/<[^<]+>/g,"")},lbounds:function(t){return new L.LatLngBounds([[t[1],t[0]],[t[3],t[2]]])}}},{}]},{},[15]),angular.module("colorpicker.module",[]).factory("Helper",function(){"use strict";return{closestSlider:function(t){return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector).bind(t)("I")?t.parentNode:t},getOffset:function(t,e){for(var n=0,i=0,o=t.getBoundingClientRect();t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e||"BODY"!==t.tagName?(n+=t.scrollLeft,i+=t.scrollTop):(n+=document.documentElement.scrollLeft||t.scrollLeft,i+=document.documentElement.scrollTop||t.scrollTop),t=t.offsetParent;return{top:o.top+window.pageYOffset,left:o.left+window.pageXOffset,scrollX:n,scrollY:i}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}]}}).factory("Color",["Helper",function(r){"use strict";return{value:{h:1,s:1,b:1,a:1},rgb:function(){var t=this.toRGB();return"rgb("+t.r+","+t.g+","+t.b+")"},rgba:function(){var t=this.toRGB();return"rgba("+t.r+","+t.g+","+t.b+","+t.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(t,e,n,i){var o,r;return t/=255,e/=255,n/=255,{h:((0===(r=(o=Math.max(t,e,n))-Math.min(t,e,n))?null:o===t?(e-n)/r:o===e?(n-t)/r+2:(t-e)/r+4)+360)%6*60/360||1,s:0===r?0:r/o,b:o,a:i||1}},setColor:function(t){for(var e in t=t?t.toLowerCase():t,r.stringParsers)if(r.stringParsers.hasOwnProperty(e)){var n=r.stringParsers[e],i=n.re.exec(t),o=i&&n.parse(i);if(o)return this.value=this.RGBtoHSB.apply(null,o),!1}},setHue:function(t){this.value.h=1-t},setSaturation:function(t){this.value.s=t},setLightness:function(t){this.value.b=1-t},setAlpha:function(t){this.value.a=parseInt(100*(1-t),10)/100},toRGB:function(t,e,n,i){var o,r,s,a,l;return t||(t=this.value.h,e=this.value.s,n=this.value.b),t=(t*=360)%360/60,o=r=s=n-(l=n*e),o+=[l,a=l*(1-Math.abs(t%2-1)),0,0,a,l][t=~~t],r+=[a,l,l,a,0,0][t],s+=[0,0,a,l,l,a][t],{r:Math.round(255*o),g:Math.round(255*r),b:Math.round(255*s),a:i||this.value.a}},toHex:function(t,e,n,i){var o=this.toRGB(t,e,n,i);return"#"+(1<<24|parseInt(o.r,10)<<16|parseInt(o.g,10)<<8|parseInt(o.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(a){"use strict";var l={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},u={};return{getSlider:function(){return l},getLeftPosition:function(t){return Math.max(0,Math.min(l.maxLeft,l.left+((t.pageX||u.left)-u.left)))},getTopPosition:function(t){return Math.max(0,Math.min(l.maxTop,l.top+((t.pageY||u.top)-u.top)))},setSlider:function(t,e){var n=a.closestSlider(t.target),i=a.getOffset(n,e),o=n.getBoundingClientRect(),r=t.clientX-o.left,s=t.clientY-o.top;l.knob=n.children[0].style,l.left=t.pageX-i.left-window.pageXOffset+i.scrollX,l.top=t.pageY-i.top-window.pageYOffset+i.scrollY,u={left:t.pageX-(r-l.left),top:t.pageY-(s-l.top)}},setSaturation:function(t,e,n){l={maxLeft:n,maxTop:n,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(t,e)},setHue:function(t,e,n){l={maxLeft:0,maxTop:n,callLeft:!1,callTop:"setHue"},this.setSlider(t,e)},setAlpha:function(t,e,n){l={maxLeft:0,maxTop:n,callLeft:!1,callTop:"setAlpha"},this.setSlider(t,e)},setKnob:function(t,e){l.knob.top=t+"px",l.knob.left=e+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper",function(L,E,P,A,O){"use strict";return{require:"?ngModel",restrict:"A",link:function(r,s,n,a){var t,l=n.colorpicker?n.colorpicker:"hex",i=angular.isDefined(n.colorpickerPosition)?n.colorpickerPosition:"bottom",o=!!angular.isDefined(n.colorpickerInline)&&n.colorpickerInline,e=!!angular.isDefined(n.colorpickerFixedPosition)&&n.colorpickerFixedPosition,u=angular.isDefined(n.colorpickerParent)?s.parent():angular.element(document.body),c=!!angular.isDefined(n.colorpickerWithInput)&&n.colorpickerWithInput,h=angular.isDefined(n.colorpickerSize)?n.colorpickerSize:100,d=h+"px",p='<div class="colorpicker dropdown"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+(c?'<input type="text" name="colorpicker-input" spellcheck="false">':"")+(o?"":'<button type="button" class="close close-colorpicker">&times;</button>')+"</div></div>",f=angular.element(p),m=P,g=f.find("colorpicker-hue"),v=f.find("colorpicker-saturation"),y=f.find("colorpicker-preview"),b=f.find("i");if(E(f)(r),f.css("min-width",parseInt(h)+29+"px"),v.css({width:d,height:d}),g.css("height",d),c){var _=f.find("input");_.css("width",d),_.on("mousedown",function(t){t.stopPropagation()}).on("keyup",function(){var t=this.value;s.val(t),a&&a.$modelValue!==t&&(r.$apply(a.$setViewValue(t)),$(!0))})}function w(){L.on("mousemove",C),L.on("mouseup",k)}function x(){try{y.css("backgroundColor",m[l]())}catch(t){y.css("backgroundColor",m.toHex())}v.css("backgroundColor",m.toHex(m.value.h,1,1,1)),"rgba"===l&&(t.css.backgroundColor=m.toHex())}function C(t){var e=A.getLeftPosition(t),n=A.getTopPosition(t),i=A.getSlider();A.setKnob(n,e),i.callLeft&&m[i.callLeft].call(m,e/h),i.callTop&&m[i.callTop].call(m,n/h),x();var o=m[l]();return s.val(o),a&&r.$apply(a.$setViewValue(o)),c&&_.val(o),!1}function k(){M("colorpicker-selected"),L.off("mousemove",C),L.off("mouseup",k)}function $(t){m.setColor(s.val()),c&&!t&&_.val(s.val()),b.eq(0).css({left:m.value.s*h+"px",top:h-m.value.b*h+"px"}),b.eq(1).css("top",h*(1-m.value.h)+"px"),b.eq(2).css("top",h*(1-m.value.a)+"px"),x()}function T(){D()}function S(){var t,e;f.hasClass("colorpicker-visible")||($(),f.addClass("colorpicker-visible").css((e=O.getOffset(s[0]),angular.isDefined(n.colorpickerParent)&&(e.left=0,e.top=0),"top"===i?t={top:e.top-147,left:e.left}:"right"===i?t={top:e.top,left:e.left+126}:"bottom"===i?t={top:e.top+s[0].offsetHeight+2,left:e.left}:"left"===i&&(t={top:e.top,left:e.left-150}),{top:t.top+"px",left:t.left+"px"})),M("colorpicker-shown"),!1===o&&L.on("mousedown",T),n.colorpickerIsOpen&&(r[n.colorpickerIsOpen]=!0,r.$$phase||r.$digest()))}function M(t){a&&r.$emit(t,{name:n.ngModel,value:a.$modelValue})}function D(){f.hasClass("colorpicker-visible")&&(f.removeClass("colorpicker-visible"),M("colorpicker-closed"),L.off("mousedown",T),n.colorpickerIsOpen&&(r[n.colorpickerIsOpen]=!1,r.$$phase||r.$digest()))}"rgba"===l&&(f.addClass("alpha"),(t=f.find("colorpicker-alpha")).css("height",d),t.on("click",function(t){A.setAlpha(t,e,h),C(t)}).on("mousedown",function(t){A.setAlpha(t,e,h),w()}).on("mouseup",function(t){M("colorpicker-selected-alpha")})),g.on("click",function(t){A.setHue(t,e,h),C(t)}).on("mousedown",function(t){A.setHue(t,e,h),w()}).on("mouseup",function(t){M("colorpicker-selected-hue")}),v.on("click",function(t){A.setSaturation(t,e,h),C(t),angular.isDefined(n.colorpickerCloseOnSelect)&&D()}).on("mousedown",function(t){A.setSaturation(t,e,h),w()}).on("mouseup",function(t){M("colorpicker-selected-saturation")}),e&&f.addClass("colorpicker-fixed-position"),f.addClass("colorpicker-position-"+i),"true"===o&&f.addClass("colorpicker-inline"),u.append(f),a&&(a.$render=function(){s.val(a.$viewValue),$()}),s.on("blur keyup change",function(){$()}),s.on("$destroy",function(){f.remove()}),!1===o?s.on("click",S):S(),f.on("mousedown",function(t){t.stopPropagation(),t.preventDefault()}),f.find("button").on("click",function(){D()}),n.colorpickerIsOpen&&r.$watch(n.colorpickerIsOpen,function(t){!0===t?S():!1===t&&D()})}}}]),function(t,w,e){"use strict";w.module("ui.sortable",[]).value("uiSortableConfig",{items:"> [ng-repeat],> [data-ng-repeat],> [x-ng-repeat]"}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(y,b,_){return{require:"?ngModel",scope:{ngModel:"=",uiSortable:"="},link:function(l,u,t,r){var c;function n(t,e){var n=e&&"function"==typeof e;return t&&"function"==typeof t&&n?function(){t.apply(this,arguments),e.apply(this,arguments)}:n?e:t}function s(t){var e=t.data("ui-sortable");return e&&"object"==typeof e&&"ui-sortable"===e.widgetFullName?e:null}function a(t,e){return m[t]?("stop"===t&&(e=n(e=n(e,function(){l.$apply()}),i)),e=n(m[t],e)):g[t]&&(e=g[t](e)),e||("items"===t?e=y.items:"ui-model-items"===t&&(e=y.items)),e}function o(i,t,n){w.forEach(m,function(t,e){e in p||(p[e]=null)});var o,r=null;t&&w.forEach(t,function(t,e){if(!(i&&e in i)){if(e in f)return void(p[e]="ui-floating"===e?"auto":a(e,void 0));o||(o=w.element.ui.sortable().options);var n=o[e];n=a(e,n),r||(r={}),r[e]=n,p[e]=n}});return w.forEach(i,function(t,e){if(e in f)return"ui-floating"!==e||!1!==t&&!0!==t||!n||(n.floating=t),void(p[e]=a(e,t));t=a(e,t),r||(r={}),r[e]=t,p[e]=t}),r}function h(t,e,n){var i,o,r=null;return i=e,("clone"===(o=t.sortable("option","helper"))||"function"==typeof o&&i.item.sortable.isCustomHelperUsed())&&"parent"===t.sortable("option","appendTo")&&(r=n.last()),r}function i(t,e){e.item.sortable._destroy()}function d(t){return t.item.parent().find(p["ui-model-items"]).index(t.item)}var p={},f={"ui-floating":void 0,"ui-model-items":y.items},m={receive:null,remove:null,start:null,stop:null,update:null},g={helper:null};function e(){l.$watchCollection("ngModel",function(){b(function(){s(u)&&u.sortable("refresh")},0,!1)}),m.start=function(t,n){if("auto"===p["ui-floating"]){var e=n.item.siblings();s(w.element(t.target)).floating=/left|right/.test((i=e).css("float"))||/inline|table-cell/.test(i.css("display"))}var i,o=d(n);n.item.sortable={model:r.$modelValue[o],index:o,source:n.item.parent(),sourceModel:r.$modelValue,cancel:function(){n.item.sortable._isCanceled=!0},isCanceled:function(){return n.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!n.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:n.item.sortable._isCustomHelperUsed,_destroy:function(){w.forEach(n.item.sortable,function(t,e){n.item.sortable[e]=void 0})}}},m.activate=function(t,e){c=u.contents();var n,i,o,r=function(t){var e=t.sortable("option","placeholder");if(e&&e.element&&"function"==typeof e.element){var n=e.element();return n=w.element(n)}return null}(u);if(r&&r.length){var s=(n=u,i=r,o=p["ui-model-items"].replace(/[^,]*>/g,""),n.find('[class="'+i.attr("class")+'"]:not('+o+")"));c=c.not(s)}var a=e.item.sortable._connectedSortables||[];a.push({element:u,scope:l}),e.item.sortable._connectedSortables=a},m.update=function(t,e){if(!e.item.sortable.received){e.item.sortable.dropindex=d(e);var n=e.item.parent();e.item.sortable.droptarget=n;var i=function(t,e){for(var n=null,i=0;i<t.length;i++){var o=t[i];if(o.element[0]===e[0]){n=o.scope;break}}return n}(e.item.sortable._connectedSortables,n);e.item.sortable.droptargetModel=i.ngModel,u.sortable("cancel")}var o=!e.item.sortable.received&&h(u,e,c);o&&o.length&&(c=c.not(o)),c.appendTo(u),e.item.sortable.received&&(c=null),e.item.sortable.received&&!e.item.sortable.isCanceled()&&l.$apply(function(){r.$modelValue.splice(e.item.sortable.dropindex,0,e.item.sortable.moved)})},m.stop=function(t,e){if(!e.item.sortable.received&&"dropindex"in e.item.sortable&&!e.item.sortable.isCanceled())l.$apply(function(){r.$modelValue.splice(e.item.sortable.dropindex,0,r.$modelValue.splice(e.item.sortable.index,1)[0])});else if((!("dropindex"in e.item.sortable)||e.item.sortable.isCanceled())&&!w.equals(u.contents(),c)){var n=h(u,e,c);n&&n.length&&(c=c.not(n)),c.appendTo(u)}c=null},m.receive=function(t,e){e.item.sortable.received=!0},m.remove=function(t,e){"dropindex"in e.item.sortable||(u.sortable("cancel"),e.item.sortable.cancel()),e.item.sortable.isCanceled()||l.$apply(function(){e.item.sortable.moved=r.$modelValue.splice(e.item.sortable.index,1)[0]})},g.helper=function(i){return i&&"function"==typeof i?function(t,e){var n=i.apply(this,arguments);return e.sortable._isCustomHelperUsed=e!==n,n}:i},l.$watchCollection("uiSortable",function(t,e){var n=s(u);if(n){var i=o(t,e,n);i&&u.sortable("option",i)}},!0),o(p)}function v(){return(!l.uiSortable||!l.uiSortable.disabled)&&(r?e():_.info("ui.sortable: ngModel not provided!",u),u.sortable(p),v.cancelWatcher(),v.cancelWatcher=w.noop,!0)}w.extend(p,f,y,l.uiSortable),w.element.fn&&w.element.fn.jquery?(v.cancelWatcher=w.noop,v()||(v.cancelWatcher=l.$watch("uiSortable.disabled",v))):_.error("ui.sortable: jQuery should be included before AngularJS!")}}}])}(window,window.angular),angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",uiCodemirrorDirective),uiCodemirrorDirective.$inject=["$timeout","uiCodemirrorConfig"],function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SvgSaver=t()}}(function(){return function r(s,a,l){function u(n,t){if(!a[n]){if(!s[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(c)return c(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var o=a[n]={exports:{}};s[n][0].call(o.exports,function(t){var e=s[n][1][t];return u(e||t)},o,o.exports,r,s,a,l)}return a[n].exports}for(var c="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function o(t){return t&&t.__esModule?t:{default:t}}var r=o(t("computed-styles")),s=o(t("file-saver")),a={"alignment-baseline":"auto","baseline-shift":"baseline",clip:"auto","clip-path":"none","clip-rule":"nonzero",color:"rgb(51, 51, 51)","color-interpolation":"srgb","color-interpolation-filters":"linearrgb","color-profile":"auto","color-rendering":"auto",cursor:"auto",direction:"ltr",display:"inline","dominant-baseline":"auto","enable-background":"",fill:"rgb(0, 0, 0)","fill-opacity":"1","fill-rule":"nonzero",filter:"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1",font:"","font-family":"normal","font-size":"medium","font-size-adjust":"auto","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"400","glyph-orientation-horizontal":"0deg","glyph-orientation-vertical":"auto","image-rendering":"auto",kerning:"auto","letter-spacing":"0","lighting-color":"rgb(255, 255, 255)",marker:"","marker-end":"none","marker-mid":"none","marker-start":"none",mask:"none",opacity:"1",overflow:"visible","paint-order":"fill","pointer-events":"auto","shape-rendering":"auto","stop-color":"rgb(0, 0, 0)","stop-opacity":"1",stroke:"none","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-opacity":"1","stroke-width":"1","text-anchor":"start","text-decoration":"none","text-rendering":"auto","unicode-bidi":"normal",visibility:"visible","word-spacing":"0px","writing-mode":"lr-tb"},l=["id","xml: base","xml: lang","xml: space","height","result","width","x","y","xlink: href","href","style","class","d","pathLength","x","y","dx","dy","glyphRef","format","x1","y1","x2","y2","rotate","textLength","cx","cy","r","rx","ry","fx","fy","width","height","refX","refY","orient","markerUnits","markerWidth","markerHeight","maskUnits","transform","viewBox","version","preserveAspectRatio","xmlns","points","offset","xlink:href"],u=["clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cursor","direction","fill","fill-opacity","fill-rule","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","kerning","letter-spacing","marker","marker-end","marker-mid","marker-start","pointer-events","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-rendering","transform","visibility","white-space","word-spacing","writing-mode"],c=function(t){return void 0!==t},h=function(t){return void 0===t},d=function(t){return null!==t&&"object"==typeof t};function p(t,a,l){var e=t.cloneNode(!0);return function t(e,n,i,o){i(e,n);for(var r=e.childNodes,s=0;s<r.length;s++)t(r[s],n.childNodes[s],i,o);o(e,n)}(t,e,function(t,e){e.style&&(0,r.default)(t,e.style,l)},function(t,e){var n,i,o,r,s;e.style&&e.parentNode&&(n=e,i=i||n.parentNode.style,u.forEach(function(t){n.style[t]===i[t]&&n.style.removeProperty(t)})),e.attributes&&(o=e,s=l,!0!==(r=a)&&Array.prototype.slice.call(o.attributes).forEach(function(t){t.specified&&(""===r||!1===r||h(s[t.name])&&r.indexOf(t.name)<0)&&o.removeAttribute(t.name)}))}),e}var f="undefined"!=typeof document&&"download"in document.createElement("a")&&"function"==typeof MouseEvent;function m(t,e){if(f){var n=document.createElement("a");return n.setAttribute("href",t),n.setAttribute("download",e),n.dispatchEvent(new MouseEvent("click")),!0}return"undefined"!=typeof window&&(window.open(t,"_blank",""),!0)}function g(t,e,n){var i=document.createElement("canvas"),o=i.getContext("2d"),r=new Image;return r.onload=function(){i.width=r.width,i.height=r.height,o.drawImage(r,0,0),n(i)},r.src=t,!0}var v=!!window.MSInputMethodContext&&!!document.documentMode;u.forEach(function(t){t in a&&(a[t]=!0)});var y=function(){function o(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.attrs,n=t.styles;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.attrs=void 0===e?l:e,this.styles=void 0===n?a:n}return i(o,null,[{key:"getSvg",value:function(t){if(h(t)||""===t?t=document.body.querySelector("svg"):"string"==typeof t&&(t=document.body.querySelector(t)),t&&"svg"!==t.tagName&&(t=t.querySelector("svg")),!d(e=t)||!(c(window)&&d(window.Node)?e instanceof window.Node:"number"==typeof e.nodeType&&"string"==typeof e.nodeName))throw new Error("svgsaver: Can't find an svg element");var e;return t}},{key:"getFilename",value:function(t,e,n){return e&&""!==e||(e=(t.getAttribute("title")||"untitled")+"."+n),encodeURI(e)}}]),i(o,[{key:"cloneSVG",value:function(t){var e=p(t=o.getSvg(t),this.attrs,this.styles);return e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttribute("version",1.1),e.setAttribute("width",e.getAttribute("width")||"500"),e.setAttribute("height",e.getAttribute("height")||"900"),e}},{key:"getHTML",value:function(t){var e=this.cloneSVG(t),n=e.outerHTML;return n||(e.removeAttribute("xmlns"),e.removeAttribute("xmlns:xlink"),e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),(new window.XMLSerializer).serializeToString(e))}},{key:"getBlob",value:function(t){var e=this.getHTML(t);return new Blob([e],{type:"text/xml"})}},{key:"getUri",value:function(t){var e=encodeURIComponent(this.getHTML(t));return c(window.btoa)?"data:image/svg+xml;base64,"+window.btoa(unescape(e)):"data:image/svg+xml,"+e}},{key:"asSvg",value:function(t,e){return t=o.getSvg(t),e=o.getFilename(t,e,"svg"),"function"==typeof Blob?s.default.saveAs(this.getBlob(t),e):m(this.getUri(t),e)}},{key:"getPngUri",value:function(t,e){v&&console.error("svgsaver: getPngUri not supported on IE11"),t=o.getSvg(t);o.getFilename(t,null,"png");return g(this.getUri(t),0,function(t){e(t.toDataURL("image/png"))})}},{key:"asPng",value:function(t,e){return v&&console.error("svgsaver: asPng not supported on IE11"),t=o.getSvg(t),e=o.getFilename(t,e,"png"),n=this.getUri(t),i=e,g(n,0,function(t){c(t.toBlob)?t.toBlob(function(t){s.default.saveAs(t,i)}):m(t.toDataURL("image/png"),i)});var n,i}}]),o}();n.default=y,e.exports=n.default},{"computed-styles":2,"file-saver":3}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var h=function(t){return void 0!==t},d=function(t){return null!==t&&"object"==typeof t};var p=h(window)&&h(window.getComputedStyle);n.default=function(t){var e,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments.length<=2||void 0===arguments[2]||arguments[2];if(!d(e=t)||!(h(window)&&d(window.Node)?e instanceof window.Node:"number"==typeof e.nodeType&&"string"==typeof e.nodeName))throw new Error("parameter 1 is not of type 'Element'");if(!1===i)return n;if(p)var o=t.ownerDocument.defaultView.getComputedStyle(t,null),r=!0===i?o:Object.keys(i);else o=h(t.currentStyle)?t.currentStyle:t.style,r=!0===i?Object.keys(o):Object.keys(i);for(var s=0,a=r.length;s<a;s++){var l=r[s],u=!0===i||i[l];if(!1!==u&&h(u)){var c=p?o.getPropertyValue(l):o[l];"string"==typeof c&&""!==c&&(!0!==u&&c===u||(n[l]=c))}}return n},e.exports=n.default},{}],3:[function(t,e,n){var i=i||function(a){"use strict";if(!(void 0===a||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=a.document,l=function(){return a.URL||a.webkitURL||a},u=t.createElementNS("http://www.w3.org/1999/xhtml","a"),c="download"in u,h=/constructor/i.test(a.HTMLElement)||a.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent),p=function(t){(a.setImmediate||a.setTimeout)(function(){throw t},0)},f=function(t){setTimeout(function(){"string"==typeof t?l().revokeObjectURL(t):t.remove()},4e4)},m=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},i=function(t,n,e){e||(t=m(t));var i,o=this,r="application/octet-stream"===t.type,s=function(){!function(t,e,n){for(var i=(e=[].concat(e)).length;i--;){var o=t["on"+e[i]];if("function"==typeof o)try{o.call(t,n||t)}catch(t){p(t)}}}(o,"writestart progress write writeend".split(" "))};if(o.readyState=o.INIT,c)return i=l().createObjectURL(t),void setTimeout(function(){var t,e;u.href=i,u.download=n,t=u,e=new MouseEvent("click"),t.dispatchEvent(e),s(),f(i),o.readyState=o.DONE});!function(){if((d||r&&h)&&a.FileReader){var e=new FileReader;return e.onloadend=function(){var t=d?e.result:e.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(t,"_blank")||(a.location.href=t),t=void 0,o.readyState=o.DONE,s()},e.readAsDataURL(t),o.readyState=o.INIT}i||(i=l().createObjectURL(t)),r?a.location.href=i:a.open(i,"_blank")||(a.location.href=i);o.readyState=o.DONE,s(),f(i)}()},e=i.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=m(t)),navigator.msSaveOrOpenBlob(t,e)}:(e.abort=function(){},e.readyState=e.INIT=0,e.WRITING=1,e.DONE=2,e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null,function(t,e,n){return new i(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports&&(e.exports.saveAs=i)},{}]},{},[1])(1)}),function(o){"use strict";var r=function(t,e){this.element=o(t),this.options=o.extend(!0,{},o.fn.tag.defaults,e),this.values=this.options.values||[],this.show()};r.prototype={constructor:r,show:function(){var i=this;i.element.parent().prepend(i.element.detach().hide()),i.element.wrap(o('<div class="tags span12">')).parent().on("click",function(){i.input.focus()}),i.values.length&&o.each(i.values,function(){i.createBadge(this)}),i.input=o('<input type="text">').attr("placeholder",i.options.placeholder).insertAfter(i.element).on("focus",function(){i.element.parent().addClass("tags-hover")}).on("blur",function(){i.skip||(i.process(),i.element.parent().removeClass("tags-hover"),i.element.siblings(".tag").removeClass("tag-important")),i.skip=!1}).on("keydown",function(t){if(13==t.keyCode||9==t.keyCode)!o.trim(o(this).val())||i.element.siblings(".typeahead").length&&!i.element.siblings(".typeahead").is(":hidden")?13==t.keyCode&&(!i.element.siblings(".typeahead").length||i.element.siblings(".typeahead").is(":hidden")||(i.input.data("typeahead").select(),t.stopPropagation()),t.preventDefault()):(9!=t.keyCode&&t.preventDefault(),i.process());else if(o.trim(o(this).val())||8!=t.keyCode)i.element.siblings(".tag").removeClass("tag-important");else{var e=i.element.siblings(".tag").length;if(e){var n=i.element.siblings(".tag:eq("+(e-1)+")");n.hasClass("tag-important")?i.remove(e-1):n.addClass("tag-important")}}}).typeahead({source:i.options.source,matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())&&(-1==i.inValues(t)||i.options.allowDuplicates)},updater:o.proxy(i.add,i)}),o(i.input.data("typeahead").$menu).on("mousedown",function(){i.skip=!0}),this.element.trigger("shown")},inValues:function(n){if(this.options.caseInsensitive){var i=-1;return o.each(this.values,function(t,e){if(e.toLowerCase()==n.toLowerCase())return i=t,!1}),i}return o.inArray(n,this.values)},createBadge:function(t){var e=this;o("<span/>",{class:"tag"}).text(t).append(o('<button type="button" class="close">&times;</button>').on("click",function(){e.remove(e.element.siblings(".tag").index(o(this).closest(".tag")))})).insertBefore(e.element)},add:function(t){if(!this.options.allowDuplicates){var e=this.inValues(t);if(-1!=e){var n=this.element.siblings(".tag:eq("+e+")");return n.addClass("tag-warning"),void setTimeout(function(){o(n).removeClass("tag-warning")},500)}}this.values.push(t),this.createBadge(t),this.element.val(this.values.join(", ")),this.element.trigger("added",[this.values])},remove:function(t){if(0<=t){this.values.splice(t,1);this.element.siblings(".tag:eq("+t+")").remove(),this.element.val(this.values.join(", ")),this.element.trigger("removed",[this.values])}},process:function(){var t=o.grep(o.map([this.input.val()],o.trim),function(t){return 0<t.length}),e=this;o.each(t,function(){e.add(this)}),this.input.val("")},skip:!1};var t=o.fn.tag;o.fn.tag=function(i){return this.each(function(){var t=o(this),e=t.data("tag"),n="object"==typeof i&&i;e||t.data("tag",e=new r(this,n)),"string"==typeof i&&e[i]()})},o.fn.tag.defaults={allowDuplicates:!1,caseInsensitive:!0,placeholder:"",source:[]},o.fn.tag.Constructor=r,o.fn.tag.noConflict=function(){return o.fn.tag=t,this},o(window).on("load",function(){o('[data-provide="tag"]').each(function(){var t=o(this);t.data("tag")||t.tag(t.data())})})}(window.jQuery),function(){var r;r=function(o,r){var t,s;return t=d3.select(this),s=function(t){var e,n,i;return e=[0,0],i=d3.select("body"),"mouse"===o.placement?e=d3.mouse(i.node()):(n=this.ownerSVGElement.getBoundingClientRect(),e[0]=n.left,e[1]=n.top,e[0]+=o.position[0],e[1]+=o.position[1],e[0]+=window.scrollX,e[1]+=window.scrollY),e[0]+=o.displacement[0],e[1]+=o.displacement[1],t.style("left",e[0]+"px").style("top",e[1]+"px").style("display","block")},t.on("mouseover.tooltip",function(t,e,n){var i;return(i=r()).classed("annotation",!0).classed(o.gravity,!0).classed("fade",!0).style("display","none"),i.append("div").attr("class","arrow"),setTimeout(function(){return i.classed("in",!0)},10),i.style("display","").call(s.bind(this))}),o.mousemove&&t.on("mousemove.tooltip",function(){return d3.select(".annotation").call(s.bind(this))}),t.on("mouseout.tooltip",function(){var t;return t=d3.selectAll(".annotation").classed("in",!1),setTimeout(function(){return t.remove()},150)})},d3.selection.prototype.popover=function(i){var o;return o=d3.select("body"),this.each(function(t,e){var n;return n=i.apply(this,arguments),r.call(this,n,function(){var t,e;return(t=(e=o.append("div").classed("popover",!0)).append("div").attr("class","popover-inner")).append("h3").text(n.title).attr("class","popover-title"),t.append("div").attr("class","popover-content").append("p").html(n.content.innerHTML),e})})},d3.selection.prototype.tooltip=function(i){var o;return o=d3.select("body"),this.each(function(t,e){var n;return n=i.apply(this,arguments),r.call(this,n,function(){var t;return(t=o.append("div").classed("tooltip",!0)).append("div").html(n.text).attr("class","tooltip-inner"),t})})}}(),angular.module("palladio",[]).constant("version","1.2.9").factory("palladioService",["$compile","$rootScope","$q",function(t,e,n){var i,o=d3.map(),r=function(t){o.remove(t)},s=!1,a=!1,l=function(){s?a=!0:(s=!0,u.forEach(function(t){t()}),n.all(o.values().map(function(t){var e=n.defer();return setTimeout(function(){t(),e.resolve()}),e.promise})).then(function(){c.forEach(function(t){t()}),a?(a=s=!1,l()):a=s=!1}))},u=[],c=[],h=d3.map(),d=function(t){h.remove(t),l()},p=d3.map(),f=function(t){p.remove(t)},m=function(){i=function(){return!0},p.values().forEach(function(t){t()}),l()};m();var g=d3.map(),v=function(t){g.remove(t)},y=d3.map(),b=function(t){y.remove(t)},_=d3.map(),w=d3.map(),x=function(t){_.remove(t)},C=d3.map();C.set("file_downloaded",[]),C.set("file_loaded",[]),C.set("file_processing_progress",[]),C.set("file_processed",[]);return{onUpdate:function(t,e){return o.set(t,e),r.bind(this,t)},update:l,setFilter:function(t,e,n,i){return t&&e&&n&&i?h.set(t,[e,n,i]):console.error("Must provide id, titleText, filterText, and a removal callback."),d.bind(this,t)},getFilters:function(){return h},removeFilter:d,setHighlight:function(t){return"function"==typeof t?(i=t,p.values().forEach(function(t){t()})):console.error("setHighlight only takes a function as its argument."),m},getHighlight:function(){return i},watchHighlight:function(t,e){return p.set(t,e),f.bind(this,t)},unwatchHighlight:f,removeHighlight:m,onReset:function(t,e){return g.set(t,e),v.bind(this,t)},reset:function(){g.values().forEach(function(t){t()})},onSearch:function(t,e){return y.set(t,e),b.bind(this,t)},search:function(e){y.values().forEach(function(t){t(e)})},registerStateFunctions:function(t,e,n,i,o,r){return o&&o.forEach(function(t){w.set(t,r)}),w.has(e)?w.get(e)(t,e,n,i):(_.set(t,{type:e,export:n,import:i}),x.bind(null,t))},getStateFunctions:function(){return _.values()},preUpdate:function(t){u.push(t)},postUpdate:function(t){c.push(t)},on:function(t,e){if(C.has(t)){var n=C.get(t);return n.push(e),C.set(t,n),function(){C.set(t,C.get(t).filter(function(t){return t!==e}))}}console.log('"'+t+'" is not a supported event type.')},event:function(t,e){C.get(t).forEach(function(t){t(e)})}}}]),angular.module("palladio.directives.dimension",["palladio"]).directive("palladioDimension",["palladioService",function(t){return{scope:{model:"=",checkFunc:"="},template:'<span palladio-draggable model="model" class="dimension-pill" data-ng-class="{\'dimension-pill-checked\': check(model)}"><i data-ng-show="!sortableOptions.disabled" class="icon-move"></i><label class="checkbox"><input type="checkbox" ng-checked="check(model)"> {{model.description}}</label></span>',link:function(t){t.checkFunc?t.check=t.checkFunc:t.check=function(){return!1}}}}]).directive("palladioDraggable",function(){return{scope:{model:"="},link:function(t,e){$(e[0]).draggable({revert:!0,revertDuration:0,start:function(t,e){$(".blur-on-drag").addClass("blur")},stop:function(t,e){$(".blur-on-drag").removeClass("blur")},zIndex:1e3})}}}).directive("palladioDroppable",function(){return{scope:{model:"="},link:function(n,t,e){var i=$(t[0]),o=angular.element(t[0]);i.droppable({over:function(t,e){o.addClass("over-drop"),e.draggable.addClass("over-drop")},out:function(t,e){o.removeClass("over-drop"),e.draggable.removeClass("over-drop")},drop:function(e,t){n.$apply(function(t){t.model=angular.copy(angular.element(e.toElement).scope().model)}),o.removeClass("over-drop"),t.draggable.removeClass("over-drop")},activate:function(t,e){o.addClass("active-drag")},deactivate:function(t,e){o.removeClass("active-drag")}})}}}),angular.module("palladio.directives",["palladio.directives.dimension","palladio.directives.group","palladio.directives.tag","palladio.directives.specials","palladio.directives.draggable","palladio.directives.droppable","palladio.directives.modal","palladio.directives.optionsDisabled","palladio.directives.resizable","ui.sortable","ngSanitize","palladio"]).directive("resizable",function(){return{restrict:"A",link:function(t,e,n){n.handles=n.handles||"e, s, se",n.options=n.options||{};var i={handles:n.handles,resize:function(t,e){e.element.css("position","fixed"),e.element.css("bottom","0px"),e.element.css("top","")}};i=angular.extend(i,n.options),$(e).resizable(i)}}}),angular.module("palladio.directives.draggable",[]).directive("draggable",function(){return{scope:!1,link:function(t,e,n){$(e[0]).draggable({revert:!0,start:function(t,e){$(".blur-on-drag").addClass("blur")},stop:function(t,e){$(".blur-on-drag").removeClass("blur")},zIndex:1e3})}}}),angular.module("palladio.directives.droppable",[]).directive("droppable",function(){return{scope:!1,link:function(n,t,i){var e=$(t[0]),o=angular.element(t[0]);!0===o.scope().field.uniqueKey?e.droppable({over:function(t,e){o.addClass("over-drop"),e.draggable.addClass("over-drop")},out:function(t,e){o.removeClass("over-drop"),e.draggable.removeClass("over-drop")},drop:function(t,e){i.droppableCallback&&n[i.droppableCallback](t,e),o.removeClass("over-drop"),e.draggable.removeClass("over-drop")}}):e.addClass("blur-on-drag")}}}),angular.module("palladio.directives.group",[]).directive("group",function(){return{restrict:"A",link:function(t,e,n){t.$watch(n.watch,function(t){},!0)}}}),angular.module("palladio.directives.modal",[]).directive("modal",function(){return{replace:!0,scope:{dimensions:"=",description:"@",model:"=",toggleKey:"=",sortable:"@",descriptionAccessor:"="},template:'<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button><span>{{ description ? description : "Choose the dimension(s)" }}</span></div><div class="modal-body"><ul ui-sortable="sortableOptions" class="list-unstyled" data-ng-model="internalDimensions"><li ng-repeat="field in internalDimensions" class="pill" data-ng-class="{checked: check(field)}" ng-click="change(field)"><i data-ng-show="!sortableOptions.disabled" class="fa fa-arrows"></i><span class="checkbox"><input type="checkbox" ng-checked="check(field)"> {{getDescription(field)}}</span></li></ul></div><div class="modal-footer"><button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Close</button></div></div></div></div>',link:function(n,t,e){function i(){Array.isArray(n.model)&&"true"===n.sortable&&(n.model=n.internalDimensions.filter(function(e){return n.model.filter(function(t){return e.key===t.key}).length}))}function o(t){return t.field?t:{blanks:t.blanks,cardinality:t.cardinality,confirmed:t.confirmed,countBy:t.countBy,countDescription:t.countDescription,countable:t.countable,delete:t.delete,description:t.description,descriptiveField:t.descriptiveField,errors:t.errors.slice(0),hierDelimiter:t.hierDelimiter,ignore:t.ignore,key:t.key,mvDelimiter:t.mvDelimiter,originFileId:t.originFileId,special:t.special.slice(0),type:t.type,typeField:t.typeField,unassignedSpecialChars:t.unassignedSpecialChars?t.unassignedSpecialChars.slice(0):void 0,uniqueKey:t.uniqueKey,uniques:t.uniques.slice(0)}}n.internalDimensions=n.dimensions.map(o),n.change=function(e){Array.isArray(n.model)?(n.check(e)?n.model=n.model.filter(function(t){return e.key!==t.key}):n.model=n.model.concat(e),i()):n.check(e)?n.model=null:n.model=e},n.$watchCollection("dimensions",function(){n.internalDimensions=n.dimensions.map(o)}),n.$watchCollection("internalDimensions",function(){i()}),n.$watch("toggleKey",function(e){e&&n.change(n.internalDimensions.filter(function(t){return e===t.key})[0])}),n.check=function(e){return Array.isArray(n.model)?0<n.model.filter(function(t){return e.key===t.key}).length:!!n.model&&e.key===n.model.key},n.getDescription=function(t){return n.descriptionAccessor?n.descriptionAccessor(t):t.description},n.sortableOptions={disabled:"true"!==n.sortable}}}}),angular.module("palladio.directives.optionsDisabled",[]).directive("optionsDisabled",["$parse",function(l){var u=function(i,o,t,r,s){$("option[value!='?']",t).each(function(t,e){var n={};n[o]=r[t],$(this).attr("disabled",s(i,n))})};return{priority:0,require:"ngModel",link:function(i,o,t,e){var r=t.optionsDisabled.match(/^\s*(.+)\s+for\s+(.+)\s+in\s+(.+)?\s*/),s=r[3],a=l(r[1]);i.$watch(s,function(t,e){t&&u(i,r[2],o,t,a)},!0),i.$watch(t.ngModel,function(t,e){var n=l(s)(i);t&&u(i,r[2],o,n,a)},!0)}}}]),angular.module("palladio.directives.resizable",[]).directive("resizable",function(){return{restrict:"A",link:function(t,e,n){n.handles=n.handles||"e, s, se",n.options=n.options||{};var i={handles:n.handles,resize:function(t,e){e.element.css("position","fixed"),e.element.css("bottom","0px"),e.element.css("top","")}};i=angular.extend(i,n.options),$(e).resizable(i)}}}),angular.module("palladio.directives.specials",[]).directive("specials",function(){return{restrict:"A",scope:!1,template:'<a data-ng-repeat="char in selectedFieldMetadata.unassignedSpecialChars" class="tag"data-ng-class="{ \'error-glow\': (selectedFieldMetadata.verifiedSpecialChars.indexOf(char) === -1) }"data-tooltip="Click to search this value"data-ng-click="verifyAndFilterUniquesOnChar(char, $event)">{{char}}</a>',link:function(i,o,t){i.$watch("selectedFieldMetadata.unassignedSpecialChars",function(t){$(".tag").tooltip()}),i.verifyAndFilterUniquesOnChar=function(t,e){-1===i.selectedFieldMetadata.verifiedSpecialChars.indexOf(t)&&i.selectedFieldMetadata.verifiedSpecialChars.push(t);var n=angular.element(e.target);angular.element(o[0]).children(".tag").removeClass("tag-selected"),i.selectedSpecialChar===t?i.selectedSpecialChar=null:(i.selectedSpecialChar=t,n.addClass("tag-selected")),i.updateUniques()}}}}),angular.module("palladio.directives.tag",[]).directive("tag",function(){return{restrict:"A",link:function(n,e,t){n.$watch("selectedFieldMetadata",function(t){t&&(d3.select(e[0]).selectAll(".tags").remove(),d3.select(e[0]).append("input").attr("id","ignore").attr("class","input-tag").attr("type","text").attr("name","tags").attr("data-provide","tag"),e.find(".input-tag").tag({caseInsensitive:!1,values:t.ignore||[]}).on("added",function(t,e){n.selectedFieldMetadata.ignore=e,n.updateMetadata(),n.$apply()}).on("removed",function(t,e){n.selectedFieldMetadata.ignore=e,n.updateMetadata(),n.$apply()}))})}}}),angular.module("palladio.filters",[]).filter("titleCase",function(){return function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}}).filter("confirmed",function(){return function(t){return t.filter(function(t){return t.confirmed}).length}}).filter("special",function(){return function(t){return t.filter(function(t){return t.special.length}).length}}).filter("unique",function(){return function(t){return t.filter(function(t){return t.uniqueKey}).length}}).filter("notSameFile",function(){return function(t,e){return t.filter(function(t){return t.id!==e})}});var crossfilterHelpers={countByDimensionWithInitialCountAndData:function(n,i){var o;return{add:function(t,e){return t.unique.has(n(e))?(o=t.unique.get(n(e)),t.unique.set(n(e),o+1)):(t.unique.set(n(e),1),t.data=i(e,t.data,"add"),++t.count),t.count>t.initialCount&&(t.initialCount=t.count),t},remove:function(t,e){return t.unique.has(n(e))&&(1==(o=t.unique.get(n(e)))?(t.unique.remove(n(e)),t.data=i(e,t.data,"remove"),--t.count):t.unique.set(n(e),o-1)),t},init:function(){return{data:void 0,unique:d3.map(),count:0,initialCount:0}}}},countByDimensionWithInitialCount:function(n){var i;return{add:function(t,e){return t.unique.has(n(e))?(i=t.unique.get(n(e)),t.unique.set(n(e),i+1)):(t.unique.set(n(e),1),++t.count),t.count>t.initialCount&&(t.initialCount=t.count),t},remove:function(t,e){return t.unique.has(n(e))&&(1==(i=t.unique.get(n(e)))?(t.unique.remove(n(e)),--t.count):t.unique.set(n(e),i-1)),t},init:function(){return{unique:d3.map(),count:0,initialCount:0}}}},countByDimension:function(n){var i;return{add:function(t,e){return t.unique.has(n(e))?(i=t.unique.get(n(e)),t.unique.set(n(e),i+1)):(t.unique.set(n(e),1),++t.count),t},remove:function(t,e){return t.unique.has(n(e))&&(1==(i=t.unique.get(n(e)))?(t.unique.remove(n(e)),--t.count):t.unique.set(n(e),i-1)),t},init:function(){return{unique:d3.map(),count:0}}}}};d3.graph=function(){var r,s,o,a,l,u,c,h,d,p,f,m,g,v,y,b,_,w,x=700,C=600,k=!0,$="",e=!1,T=!1,S=function(){},M=function(){},D=function(){},L=function(){};b=function(){},y=d3.map(),h=d3.map(),w=[],g=d3.map(),v=[];var E=d3.scale.sqrt().range([5,20]);function n(t){function e(t,n){m.classed("strong",function(t,e){return e==n})}function n(t,e){m.classed("strong",!1)}function i(){r=d3.layout.force().size([x,C]).charge(-300).on("tick",A),s=d3.layout.force().gravity(0).linkDistance(0).linkStrength(8).charge(-70).size([x,C]),o=r.drag().on("dragstart",function(t){d3.event.sourceEvent.stopPropagation(),t.fixed=!0}).on("drag.force",function(t){t.px=t.x+d3.event.dx/l.scale(),t.py=t.y+d3.event.dy/l.scale(),r.resume(),s.resume()}),a=d3.svg.line().interpolate("bundle"),l=d3.behavior.zoom().scaleExtent([.1,10]).on("zoom",function(){P=!0,A()}),O(2),(u=t.selectAll("rect.overlay").data(function(t){return[t]})).attr("width",x).attr("height",C).attr("fill","none"),u.enter().append("rect").attr("class","overlay").attr("width",x).attr("height",C).attr("fill","none"),u.exit().remove(),t.call(l),(c=t.selectAll("g.main").data([{}])).enter().append("g").attr("class","main"),c.exit().remove(),t.each(function(t){t.forEach(function(t){y.has(t.data.source)?y.set(t.data.source,y.get(t.data.source)+t.data.initialAgg):y.set(t.data.source,t.data.initialAgg),y.has(t.data.target)?y.set(t.data.target,y.get(t.data.target)+t.data.initialAgg):y.set(t.data.target,t.data.initialAgg)})}),_=d3.select(t[0][0].parentElement).select("canvas").node().getContext("2d")}t.each(function(t){r||i(),h.keys().forEach(function(t){h.get(t).current=!1,h.get(t).agg=0}),t.forEach(function(t){h.has(t.data.source)?(h.get(t.data.source).current=!0,h.get(t.data.source).agg+=t.data.agg,"target"===h.get(t.data.source).dimension&&(h.get(t.data.source).dimension="target source")):(h.set(t.data.source,{name:t.data.source,current:!0,agg:t.data.agg,initialAgg:y.get(t.data.source),dimension:"source",x:x/2+10*Math.random(),y:C/2+10*Math.random()}),g.set(t.data.source,{name:t.data.source,node:h.get(t.data.source)}),g.set(t.data.source+"__$",{name:t.data.source+"__$",node:h.get(t.data.source),fake:!0})),h.has(t.data.target)?(h.get(t.data.target).current=!0,h.get(t.data.target).agg+=t.data.agg,"source"===h.get(t.data.target).dimension&&(h.get(t.data.target).dimension="source target")):(h.set(t.data.target,{name:t.data.target,current:!0,agg:t.data.agg,initialAgg:y.get(t.data.target),dimension:"target",x:x/2+10*Math.random(),y:C/2+10*Math.random()}),g.set(t.data.target,{name:t.data.target,node:h.get(t.data.target)}),g.set(t.data.target+"__$",{name:t.data.target+"__$",node:h.get(t.data.target),fake:!0}))}),h.keys().forEach(function(t){h.get(t).current||(h.remove(t),g.remove(t),g.remove(t+"__$"))}),E.domain([d3.min(h.values(),function(t){return t.initialAgg}),d3.max(h.values(),function(t){return t.initialAgg})]),w=t.map(function(t){return{source:h.get(t.data.source),target:h.get(t.data.target),agg:t.data.agg}}),v=[],v=g.entries().filter(function(t){return!t.value.fake}).map(function(t,e){return{source:g.get(t.key),target:g.get(t.key+"__$"),weight:1}}),r.nodes(h.values()).links(w).start(),s.nodes(g.values()).links(v).start(),c.selectAll(".layer").remove(),c.append("g").attr("class","layer nodes"),c.append("g").attr("class","layer labels"),p=document.createElement("g"),(d=d3.select(p).attr("class","layer links").selectAll("path.link").data(k?r.links():[],function(t){return t.source.name+"-"+t.target.name})).exit().remove(),d.enter().append("svg:path").attr("class","link").style("fill","none").style("stroke-opacity",".5").style("stroke","#666").style("stroke-width",1),(f=c.select(".nodes").selectAll(".node").data(r.nodes(),function(t){return t.name})).exit().remove(),f.enter().append("circle").attr("class",function(t){return"node "+t.dimension}).classed("fixed",function(t){return t.fixed}).attr("r",function(t){return T?E(t.agg):5}).on("mouseover",e).on("mouseout",n).call(o),(m=c.select(".labels").selectAll("g.anchor-node").data((showLabels?s.nodes():[]).filter(function(t){return!t.fake}),function(t){return t.name})).exit().remove(),m.enter().append("g").attr("class",function(t){return"anchor-node "+t.node.dimension}).append("svg:text").style("font-family","karla, Arial, Helvetica").style("font-size",11).text(function(t,e){return t.fake?"":t.node.name})}),S=function(){f=c.selectAll("g.node").data(r.nodes(),function(t){return t.name}).attr("r",function(t){return T?E(t.agg):5})},M=function(){c.selectAll(".node").classed("highlighted",!1),c.selectAll(".source").classed("highlighted",!0)},D=function(){c.selectAll(".node").classed("highlighted",!1),c.selectAll(".target").classed("highlighted",!0)},L=function(){c.selectAll(".node").classed("highlighted",!1)},b=function(){f&&f.remove(),d&&d.remove(),h=d3.map(),g=d3.map(),v=[],w=[],y=d3.map(),r=null,i()}}function i(t){var e=t.source,n=t.target,i=e.x*l.scale()+l.translate()[0],o=e.y*l.scale()+l.translate()[1],r=n.x*l.scale()+l.translate()[0],s=n.y*l.scale()+l.translate()[1];return a([[i,o],[r,s]])}function t(){this.attr("transform",function(t){return"translate("+(t.x*l.scale()+l.translate()[0])+","+(t.y*l.scale()+l.translate()[1])+")"})}var P=!0;function A(){var e,n,i,o;f.classed("hidden",function(t){return $&&-1===t.name.toLowerCase().indexOf($.toLowerCase())}),m.classed("hidden",function(t){return $&&-1===t.node.name.toLowerCase().indexOf($.toLowerCase())}),_.clearRect(0,0,x,C),_.strokeStyle="#ccc",_.beginPath(),d.each(function(t){$&&-1===t.source.name.toLowerCase().indexOf($.toLowerCase())&&-1===t.target.name.toLowerCase().indexOf($.toLowerCase())||(_.moveTo(t.source.x*l.scale()+l.translate()[0],t.source.y*l.scale()+l.translate()[1]),_.lineTo(t.target.x*l.scale()+l.translate()[0],t.target.y*l.scale()+l.translate()[1]))}),_.stroke(),f.call(t),s.nodes().forEach(function(t){t.fake&&(t.x=t.node.x,t.y=t.node.y)}),m.each(function(t){P&&(t.width=this.childNodes[0].getBBox().width),n=t.x-t.node.x,i=t.y-t.node.y,o=Math.sqrt(n*n+i*i),e=t.width*(n-o)/(2*o),(e=Math.max(-t.width,Math.min(0,e)))&&this.childNodes[0].setAttribute("transform","translate("+e+",5)")}),m.call(t),P=!1}function O(t){P=!0;var e=l.scale(),n=l.scaleExtent(),i=e*t;if(n[0]<=i&&i<=n[1]){var o=l.translate(),r=[x/2,C/2];l.scale(i).translate([r[0]+(o[0]-r[0])/e*i,r[1]+(o[1]-r[1])/e*i])}}return n.height=function(t){return arguments.length?(C=t,n):C},n.width=function(t){return arguments.length?(x=t,n):x},n.showLinks=function(t){return arguments.length?(k=t,n):k},n.showLabels=function(t){return arguments.length?(showLabels=t,n):showLabels},n.searchText=function(t){return arguments.length?($=t,n):$},n.nodeSize=function(t){return arguments.length?(T=t,S(),n):T},n.resetNodes=function(){r.nodes().forEach(function(t){t.fixed=!1}),f.classed("fixed",function(t){return t.fixed}).style("stroke","#eee"),r.resume(),s.resume(),A()},n.circle=function(t){return arguments.length?(e=t,n):e},n.reset=function(){b()},n.highlightSource=function(){M()},n.highlightTarget=function(){D()},n.removeHighlight=function(){L()},n.zoomIn=function(){O(1.5),A()},n.zoomOut=function(){O(.8),A()},n.zoomToData=function(){var e=[0,0],n=[0,0],t=l.scale();for(r.nodes().forEach(function(t){t.y<e[0]&&(e[0]=t.y),t.y>e[1]&&(e[1]=t.y),t.x<n[0]&&(n[0]=t.x),t.x>n[1]&&(n[1]=t.x)});(n[1]-n[0])*t<x||(e[1]-e[0])*t<C;)O(1.2),t=l.scale();for(;(n[1]-n[0])*t>x||(e[1]-e[0])*t>C;)O(.8),t=l.scale();var i=(n[1]+n[0])/2,o=(e[1]+e[0])/2;l.translate([x/2-i*t,C/2-o*t]),A()},n.fixedNodes=function(t){if(!arguments.length)return!!r&&r.nodes().filter(function(t){return t.fixed}).map(function(t){return{name:t.name,x:t.x,y:t.y}});var e=d3.map();return t&&(t.forEach(function(t){e.set(t.name,{x:t.x,y:t.y})}),r.nodes().forEach(function(t){e.has(t.name)&&(t.fixed=!0,t.x=e.get(t.name).x,t.y=e.get(t.name).y,t.px=e.get(t.name).x,t.py=e.get(t.name).y)}),r.resume()),n},n.getSvg=function(){d.attr("d",i).attr("href",function(t){return"#path"+t.source.index+"_"+t.target.index}),d.classed("hidden",function(t){return $&&-1===t.source.name.toLowerCase().indexOf($.toLowerCase())&&-1===t.target.name.toLowerCase().indexOf($.toLowerCase())});var t=c[0][0].parentElement.cloneNode(!0);return t.children[1].appendChild(p),d3.select(t)},n},d3.svg.multibrush=function(){function b(t){return t.rangeExtent?t.rangeExtent():(e=t.range(),n=e[0],i=e[e.length-1],n<i?[n,i]:[i,n]);var e,n,i}var _="onselectstart"in document?null:d3_vendorSymbol(document.documentElement.style,"userSelect"),w=0;var r,x=d3.dispatch("brushstart","brush","brushend"),C=null,k=null,$=[[0,0]],T=[[0,0]],S=[],M=[],D=!0,L=!0,s=d3_svg_brushResizes[0],a=function(){},l=function(){};function E(t){t.each(function(){var t=d3.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",u).on("touchstart.brush",u),e=(r=t).selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),P(t);var n,i=d3.transition(t),o=d3.transition(e);C&&(n=b(C),o.attr("x",n[0]).attr("width",n[1]-n[0]),O(i)),k&&(n=b(k),o.attr("y",n[0]).attr("height",n[1]-n[0]),I(i)),A(i)})}function P(t){var e=$.length>T.length?$:T;e.length;extentArr=e.map(function(t,e){return e}),extentResizes=d3.merge(e.map(function(t,e){return s.map(function(t){return[t,e]})})),t||(t=r);var n=t.selectAll(".extent").data(extentArr,function(t){return t});n.exit().remove(),n.enter().append("rect").attr("class","extent").style("cursor","move").call(l);var i=t.selectAll(".resize").data(extentResizes,function(t){return t[0]+t[1]});i.exit().remove();var o=i.enter().append("g").attr("class",function(t){return"resize "+t[0]}).style("cursor",function(t){return d3_svg_brushCursor[t[0]]});o.append("rect").attr("x",function(t){return/[ew]$/.test(t[0])?-3:null}).attr("y",function(t){return/^[ns]/.test(t[0])?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),o.call(a),i.style("display",function(t){return E.empty(t[1])?"none":null})}function A(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+$[t[1]][+/e$/.test(t[0])]+","+T[t[1]][+/^s/.test(t[0])]+")"})}function O(t){t.selectAll(".extent").attr("x",function(t){return $[t][0]}),t.selectAll(".extent,.n>rect,.s>rect").attr("width",function(t){return $[t][1]-$[t][0]})}function I(t){t.selectAll(".extent").attr("y",function(t){return T[t][0]}),t.selectAll(".extent,.e>rect,.w>rect").attr("height",function(t){return T[t][1]-T[t][0]})}function u(){var h,n,d,i=this,t=d3.select(d3.event.target),o=x.of(i,arguments),r=d3.select(i),e=t.datum()[0],s=!/^(n|s)$/.test(e)&&C,a=!/^(e|w)$/.test(e)&&k,p=t.classed("extent"),l=function(){var n=".dragsuppress-"+ ++w,i="click"+n,o=d3.select(window).on("touchmove"+n,d3.event.preventDefault()).on("dragstart"+n,d3.event.preventDefault()).on("selectstart"+n,d3.event.preventDefault());if(_){var r=d3_documentElement.style,s=r[_];r[_]="none"}return function(t){if(o.on(n,null),_&&(r[_]=s),t){function e(){o.on(i,null)}o.on(i,function(){d3.event.preventDefault(),e()},!0),setTimeout(e,0)}}}(),f=d3.mouse(i),u=d3.select(window).on("keydown.brush",function(){32==d3.event.keyCode&&(p||(h=null,f[0]-=$[d][1],f[1]-=T[d][1],p=2),d3.event.preventDefault())}).on("keyup.brush",function(){32==d3.event.keyCode&&2==p&&(f[0]+=$[d][1],f[1]+=T[d][1],p=0,d3.event.preventDefault())});if(d3.event.changedTouches?u.on("touchmove.brush",g).on("touchend.brush",y):u.on("mousemove.brush",g).on("mouseup.brush",y),r.interrupt().selectAll("*").interrupt(),p)d=t.datum(),f[0]=$[d][0]-f[0],f[1]=T[d][0]-f[1];else if(e){var c=+/w$/.test(e),m=+/^n/.test(e);d=t.datum()[1],n=[$[d][1-c]-f[0],T[d][1-m]-f[1]],f[0]=$[d][c],f[1]=T[d][m]}else d=$.length-1,$.push([0,0]),T.push([0,0]),d3.event.altKey&&(h=f.slice());function g(){var t=d3.mouse(i),e=!1;n&&(t[0]+=n[0],t[1]+=n[1]),p||(d3.event.altKey?(h||(h=[($[d][0]+$[d][1])/2,(T[d][0]+T[d][1])/2]),f[0]=$[d][+(t[0]<h[0])],f[1]=T[d][+(t[1]<h[1])]):h=null),s&&v(t,C,0)&&(O(r),e=!0),a&&v(t,k,1)&&(I(r),e=!0),e&&(A(r),o({type:"brush",mode:p?"move":"resize"}))}function v(t,e,n){var i,o,r=b(e),s=r[0],a=r[1],l=f[n],u=n?T[d]:$[d],c=u[1]-u[0];if(p&&(s-=l,a-=c+l),i=(n?L:D)?Math.max(s,Math.min(a,t[n])):t[n],p?o=(i+=l)+c:(h&&(l=Math.max(s,Math.min(a,2*h[n]-i))),l<i?(o=i,i=l):o=l),u[0]!=i||u[1]!=o)return n?M[d]=null:S[d]=null,u[0]=i,u[1]=o,!0}function y(){g(),(C&&$[d][0]==$[d][1]||k&&T[d][0]==T[d][1])&&E.clear(),r.style("pointer-events","all").selectAll(".resize").style("display",function(t){return E.empty(t[1])?"none":null}),d3.select("body").style("cursor",null),u.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),P(),l(),o({type:"brushend"})}r.style("pointer-events","none"),d3.select("body").style("cursor",t.style("cursor")),p||e||r.selectAll(".resize").style("display",null),o({type:"brushstart"}),g()}return x.of=function(n,i){return function(t){try{var e=t.sourceEvent=d3.event;t.target=E,d3.event=t,x[t.type].apply(n,i)}finally{d3.event=e}}},E.event=function(t){t.each(function(){var i=x.of(this,arguments),o={x:$,y:T,i:S,j:M},t=this.__chart__||o;this.__chart__=o,d3_transitionInheritId?d3.select(this).transition().each("start.brush",function(){S=t.i,M=t.j,$=t.x,T=t.y,i({type:"brushstart"})}).tween("brush:brush",function(){var e=d3_interpolateArray($[0],o.x[0]),n=d3_interpolateArray(T[0],o.y[0]);return S[0]=M[0]=null,function(t){$[0]=o.x[0]=e(t),T[0]=o.y[0]=n(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){S=o.i,M=o.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},E.x=function(t){return arguments.length?(s=d3_svg_brushResizes[!(C=t)<<1|!k],E):C},E.y=function(t){return arguments.length?(s=d3_svg_brushResizes[!C<<1|!(k=t)],E):k},E.resizeAdaption=function(t){return arguments.length?(a=t,E):a},E.extentAdaption=function(t){return arguments.length?(l=t,E):l},E.clamp=function(t){return arguments.length?(C&&k?(D=!!t[0],L=!!t[1]):C?D=!!t:k&&(L=!!t),E):C&&k?[D,L]:C?D:k?L:null},E.extent=function(t){var e,n,i=[];return arguments.length?(C&&(e=t,k&&(e=e.map(function(t){return[t[0][0],t[1][0]]})),e=(S=e).map(function(t){return C.invert?[C(t[0]),C(t[1])]:t}).map(function(t){return t[1]<t[0]?[t[1],t[0]]:t}),$=e,k||(T=e.map(function(){return[0,0]}))),k&&(n=t,C&&(n=n.map(function(t){return[t[0][1],t[1][1]]})),n=(M=n).map(function(t){return k.invert?[k(t[0]),k(t[1])]:t}).map(function(t){return t[1]<t[0]?[t[1],t[0]]:t}),T=n,C||($=n.map(function(){return[0,0]}))),0===$.length&&($=[[0,0]]),0===T.length&&(T=[[0,0]]),E):(C&&(e=S[0]?S:$.map(function(t){return C.invert?[C.invert(t[0]),C.invert(t[1])]:t}).map(function(t){return t[1]<t[0]?[t[1],t[0]]:t}).filter(function(t){return t[1]-t[0]!=0})),k&&(n=M[0]?M:T.map(function(t){return k.invert?[k.invert(t[0]),k.invert(t[1])]:t}).map(function(t){return t[1]<t[0]?[t[1],t[0]]:t}).filter(function(t){return t[1]-t[0]!=0})),C&&k&&e.forEach(function(t,e){i.push([[t[0],n[e][0]],[t[1],n[e][1]]])}),C&&k?i:C?e:k&&n)},E.clear=function(){return $=[[0,0]],T=[[0,0]],S=M=[],P(),C&&O(r),k&&I(r),E},E.empty=function(t){return 1==$.length&&1==T.length&&(t=0),void 0!==t&&(!!C&&$[t][0]==$[t][1]||!!k&&T[t][0]==T[t][1])},d3.rebind(E,x,"on")};var d3_svg_brushCursor={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},d3_svg_brushResizes=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d3.timeline=function(){var v=20,y=null;function e(g){g.each(function(t){var e,o,n=(e=t,o=id=0,d3.nest().key(_).rollup(function(t){var n,i=[];return t.forEach(function(t,e){for(n=0;b(t,i[n]);)n++;i[n]||(i[n]=[]),t.__level=n+o,t.__id=id++,i[n].push(t)}),o++,i}).map(e)),i=d3.sum(d3.values(n).map(function(t){return t.length})),r=20,s=50,a=150,l=d3.time.scale().range([a,1e3]).domain([d3.min(t,w),d3.max(t,x)]),u=d3.svg.axis().scale(l).orient("bottom").tickSize(6,0,0);y?v=(y-r-s)/i:y=v*i+r+s,g.selectAll("svg").remove();var c=g.append("svg:svg").attr("width",1e3).attr("height",y);c.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",1e3-a).attr("height",y).attr("transform","translate("+a+","+r+")");var h=0,d=0,p=c.selectAll("g.itemGroup").data(d3.entries(n)).enter().append("g").attr("class","itemGroup").attr("transform",function(t,e){return d=h,h+=t.value.length*v,"translate(0,"+(r+d)+")"});p.append("line").attr("x1",a).attr("y1",0).attr("x2",1e3).attr("y2",0).attr("stroke","lightgrey"),p.append("text").text(function(t){return t.key}).attr("x",a-10).attr("y",0).attr("dy",function(t){return t.value.length*v/2}).attr("text-anchor","end").attr("class","groupText"),c.append("g").attr("transform","translate(0,"+v*(i+1)+")").attr("class","focus axis date").call(u);var f,m=c.append("g").attr("clip-path","url(#clip)");(f=m.selectAll("rect").data(t,function(t){return t.__id}).attr("x",function(t){return l(w(t))}).attr("width",function(t){return l(x(t))-l(w(t))})).enter().append("rect").attr("x",function(t){return l(w(t))}).attr("y",function(t,e){return v*t.__level+r}).attr("width",function(t){return l(x(t))-l(w(t))}).attr("height",v).attr("class",function(t){return"focusItem"}),f.exit().remove()})}function b(t,e){if(!e)return!1;for(var n in e)if(w(t)<x(e[n])&&x(t)>w(e[n]))return!0;return!1}function _(t){return t.group}function w(t){return t.start}function x(t){return t.end}return e.group=function(t){return arguments.length?(_=t,e):t},e.start=function(t){return arguments.length?(w=t,e):w},e.end=function(t){return arguments.length?(x=t,e):x},e.height=function(t){return arguments.length?(y=t,e):y},e},angular.module("palladio.components",["palladio.services.data","palladio.services.load","palladio"]).factory("componentService",["$compile","$rootScope","$http","loadService","dataService","palladioService",function(l,u,o,r,s,a){var c={},h=[],d=function(t,e,n,i){void 0===n&&(n={}),null==i&&(i=u);var o=i.$new(!1);for(var r in n)o[r]=n[r];var s=c[t](o,n),a=l(s)(o);return $(e).append(a),{getOptions:function(){return o.functions}}},t=function(){return s.getDataSync().metadata},e=function(e){return t().filter(function(t){return t.key===e})[0]};return{loadData:function(t,n,e,i){e||(e=function(){}),i&&(a.on("file_downloaded",function(){i(.3)}),a.on("file_loaded",function(){i(.6)}),a.on("file_processing_progress",function(t){i(.6+t/2.5)}),a.on("file_processed",function(){i(1)})),o.get(t).success(function(t){a.event("file_downloaded"),setTimeout(function(){r.loadJson(t).then(function(){a.event("file_loaded"),setTimeout(function(){s.getData().then(function(e){h.forEach(function(t){t(e)}),setTimeout(n,200)})},200)})},200)}).error(e)},loadJson:function(t,e){return r.loadJson(t,e)},dimensions:t,dimensionFromKey:e,dimensionsFromKeys:function(t){return t.map(function(t){return e(t)})},register:function(t,e){c[t]=e},registerPostDataLoadSetup:function(t){h.push(t)},add:d,promiseAdd:function(t,e,n,i){var o=d(t,e,n,i);return new Promise(function(t,e){window.setTimeout(function(){t(o.getOptions())})})}}}]);var startPalladio=function(t){Array.isArray(t)||(t=[]);var e=["palladio","palladio.components","palladio.services","palladio.directives","palladio.filters","ui.codemirror","ui.bootstrap","ui.router","ui.sortable","ui.select","colorpicker.module","palladioDataUpload","palladioDataDownload","palladioSelectionView"].concat(t),n="palladioApp"+Math.floor(1e4*Math.random());return angular.module(n,e),angular.bootstrap(document.createElement("div"),[n]).get("componentService")};angular.module("palladio.services.data",["palladio.services.parse","palladio.services.validation","palladio.services.spinner","palladio","palladio.services.date"]).factory("dataService",["parseService","validationService","spinnerService","$q","palladioService","dateService",function(a,l,e,n,s,w){var u,c,h,o=!1,d=[],p=0,f=function(t,e){if(0===t.autoFields.filter(function(t){return t.uniqueKey}).length){for(var n="generated";-1!==Object.getOwnPropertyNames(e[0]).indexOf(n);)n="generated"+Math.floor(1e4*Math.random());e.forEach(function(t,e){t[n]=""+e}),t.autoFields=a.getFields(e),t.autoFields.filter(function(t){return"generated"===t.key})[0].type="text"}},m=function(t){return isNaN(+t[t.length-1])?t+"_1":t.substring(0,t.length-1)+(+t[t.length-1]+1)},g=function(t,e){var n=[];e.forEach(function(t){t.fields.forEach(function(t){n.push(t.key)})});var i=[];for(key in t[0])i.push(key);for(;i.reduce(function(t,e){return t||-1!==n.indexOf(e)},!1);){for(var o=void 0,r=void 0,s=0;s<i.length;s++)for(var a=0;a<n.length;a++)n[a]===i[s]&&(o=n[a],r=i[s]);if(o&&r){for(r=m(r);-1!==i.indexOf(r);)r=m(r);for(s=0;s<t.length;s++)t[s][r]=t[s][o],delete t[s][o]}for(key in i=[],t[0])i.push(key)}};function x(t){return{blanks:t.blanks,cardinality:t.cardinality,confirmed:t.confirmed,countBy:t.countBy,countDescription:t.countDescription,countable:t.countable,delete:t.delete,description:t.description,descriptiveField:t.descriptiveField,errors:t.errors.slice(0),existenceDimension:t.existenceDimension,hierDelimiter:t.hierDelimiter,ignore:t.ignore,key:t.key,mvDelimiter:t.mvDelimiter,originFileId:t.originFileId,special:t.special.slice(0),type:t.type,typeField:t.typeField,unassignedSpecialChars:t.unassignedSpecialChars?t.unassignedSpecialChars.slice(0):void 0,uniqueKey:t.uniqueKey,uniques:t.uniques.slice(0)}}var C,k,v,y,b,$=[],r=function(n,i){void 0===i&&$.forEach(function(t,e){t.source.file.uniqueId===n.source.file.uniqueId&&t.source.field.key===n.source.field.key&&t.lookup.file.uniqueId===n.lookup.file.uniqueId&&t.lookup.field.key===n.lookup.field.key&&(i=e)}),$[i].source.field.augmentId=void 0,$.splice(i,1),M()},_=function(e,n){var i,o=d3.map();n.field.uniques.forEach(function(t){i="number"!==n.field.type?t.key:+t.key,o.set(i,!0)});var t=e.field.uniques.length,r=e.field.uniques.map(function(t){return i="number"!==e.field.type?t.key.split(e.field.mvDelimiter)[0].trim():+t.key.split(e.field.mvDelimiter)[0].trim(),o.has(i)}).filter(function(t){return t}).length,s="#33C44A",a="text-success";return r/t<.99&&(s="rgba(226, 217, 0, 1)",a="text-warning"),r/t<.3&&(s="rgb(247, 0, 69)",a="text-danger"),{matches:r,total:t,lookup:n.file.data.length,background:s,claz:a}};function T(){function _(t,e){var n,o,r,s,a,l,u,c,h,d,p,f,m,g,v,y=(f=function(t){var e=[],n={},i={},o=[];t.fields.forEach(function(t){t.delete&&o.push(t)});for(var r=0;r<t.data.length;r++){n=angular.extend({},t.data[r]);for(var s=0;s<o.length;s++)delete n[o[s].key];e.push(n)}return(i={}).autoFields=t.autoFields.map(x),i.data=e,i.fields=t.fields.map(x).filter(function(t){return!t.delete}),i.id=t.id,i.label=t.label,i.sourceFor=t.sourceFor,i.uniqueId=t.uniqueId,i}(function(t){var e=[],n={},i={},o=[],r=0;t.fields.forEach(function(t){"date"===t.type&&o.push(t)});for(var s=0;s<t.data.length;s++){n=angular.extend({},t.data[s]);for(var a=0;a<o.length;a++)""!==n[o[a].key]&&""===w.format.parse(w.format.reformatExternal(n[o[a].key]))&&(n[o[a].key]="",r++);e.push(n)}return 0<r&&console.warn("Palladio removed "+r+" date values that we couldn't process. Look at error reports for Date dimensions in the 'Data' view for more information."),(i={}).autoFields=t.autoFields.map(x),i.data=e,i.fields=t.fields.map(x),i.id=t.id,i.label=t.label,i.sourceFor=t.sourceFor,i.uniqueId=t.uniqueId,i}(t)),m=[],g={},v=[],f.fields.forEach(function(t){t.mvDelimiter&&""!==t.mvDelimiter&&v.push(t)}),0===v.length?m=f.data:f.data.forEach(function(e){var s,a,l;k=angular.extend({},e),v.forEach(function(t){C=[],void 0!==e[t.key]&&(C=e[t.key].split(t.mvDelimiter).map(function(t){return t.trim()})),k[t.key]=C}),v.reduce(function(t,e){return t*(k[e.key].length?k[e.key].length:1)},1)<=1?(v.forEach(function(t){k[t.key]=k[t.key].shift()}),m.push(k)):(C=v.map(function(t){return k[t.key]}),a=[],l=(s=C).length-1,function t(e,n){for(var i=0,o=s[n].length;i<o;i++){var r=e.slice(0);r.push(s[n][i]),n==l?a.push(r):t(r,n+1)}}([],0),(C=a).forEach(function(n){k=angular.extend({},k),v.forEach(function(t,e){k[t.key]=n[e]}),m.push(k)}))}),(g={}).autoFields=f.autoFields.map(x),g.data=m,g.fields=f.fields.map(x),g.id=f.id,g.label=f.label,g.sourceFor=f.sourceFor,g.uniqueId=f.uniqueId,h=[],d={},p=[],(c=g).fields.forEach(function(t){t.ignore&&0<t.ignore.length&&p.push(t)}),h=c.data.map(function(n){return p.forEach(function(e){e.ignore.forEach(function(t){n[e.key]=n[e.key].split(t).join("")})}),n}),(d={}).autoFields=c.autoFields.map(x),d.data=h,d.fields=c.fields.map(x),d.id=c.id,d.label=c.label,d.sourceFor=c.sourceFor,d.uniqueId=c.uniqueId,n=d,r=[],s=[],a={},l=[],u=d3.map(),n.fields.forEach(function(t){t.hierDelimiter&&""!==t.hierDelimiter&&l.push(t)}),r=n.data.map(function(i){return l.forEach(function(n){"string"==typeof i[n.key]&&i[n.key].split(n.hierDelimiter).forEach(function(t,e){0===e?i[n.key]=t:(i[n.key+" "+e]=t,(!u.has(n.key)||u.get(n.key)<e)&&u.set(n.key,e))})}),i}),s=n.fields.map(x),l.forEach(function(t){for(i=1;i<=u.get(t.key);i++)(o=x(t)).key=t.key+" "+i,o.description=t.key+" Level "+(i+1),s.push(o)}),(a={}).autoFields=n.autoFields.map(x),a.data=r,a.fields=s,a.id=n.id,a.label=n.label,a.sourceFor=n.sourceFor,a.uniqueId=n.uniqueId,a);if(0===y.sourceFor(e).length)return y;y.sourceFor(e).forEach(function(i){var n,o,e=(n=d3.map(),o="",i.lookup.file.data.forEach(function(t){o="number"!==i.lookup.field.type?""+t[i.lookup.field.key]:+t[i.lookup.field.key],n.set(o,t)}),function(e){i.lookup.file.fields.forEach(function(t){o="number"!==i.source.field.type?""+e[i.source.field.key]:+e[i.source.field.key],n.has(o)?e[t.key]=n.get(o)[t.key]:e[t.key]=""}),e[i.lookup.field.key+" type"]=i.source.field.key});void 0===y.data[0][i.lookup.field.key+" type"]?y.data.forEach(function(t){e(t)}):y.data.map(function(t){return angular.extend({},t)}).forEach(function(t){e(t),y.data.push(t)});i.lookup.file.fields.forEach(function(e){var t=y.fields.filter(function(t){return t.key===e.key});if(0<t.length)void 0===t[0].typeField&&(t[0].typeField=[]),-1===t[0].typeField.indexOf(i.lookup.field.key+" type")&&t[0].typeField.push(i.lookup.field.key+" type");else{var n=x(e);void 0===n.typeField&&(n.typeField=[]),void 0===n.originFile&&(n.originFileId=i.lookup.file.uniqueId),n.typeField.push(i.lookup.field.key+" type"),y.fields.push(n)}})});var b=e.map(function(t){return{source:{file:t.source.file,field:t.source.field},lookup:{file:t.lookup.file,field:t.lookup.field}}}).filter(function(t){return t.source.file.uniqueId!==y.uniqueId});return y.sourceFor(e).forEach(function(e){b.forEach(function(t){t.source.file.uniqueId===e.lookup.file.uniqueId&&(t.source.file=y)})}),y=_(y,b)}if(C=[],k={},{},1,[],c=[],[],[],[],v=void 0,y=$.map(function(t){return{source:{file:{uniqueId:t.source.file.uniqueId,label:t.source.file.label,fields:t.source.file.fields.map(x),data:t.source.file.data},field:{type:t.source.field.type,key:t.source.field.key}},lookup:{file:{uniqueId:t.lookup.file.uniqueId,label:t.lookup.file.label,fields:t.lookup.file.fields.map(x),data:t.lookup.file.data},field:{type:t.lookup.field.type,key:t.lookup.field.key}},metadata:t.metadata}}),b=[],d.forEach(function(t){S(t),b.push(t)}),b.forEach(function(e){S(e),e.sourceFor=function(t){return t.filter(function(t){return t.source.file.uniqueId===e.uniqueId})}}),$.forEach(function(t){S(t.source.file),S(t.lookup.file)}),y.forEach(function(t){S(t.source.file),S(t.lookup.file)}),d[0]&&(v=b[0]),y.forEach(function(e){v&&v.uniqueId!==e.lookup.file.uniqueId||(v=b.filter(function(t){return t.uniqueId===e.source.file.uniqueId})[0])}),v){h=crossfilter([]),u=[];var t={},o={};t.autoFields=v.autoFields.map(x),t.fields=v.fields,t.id=v.id,t.label=v.label,t.sourceFor=v.sourceFor,t.uniqueId=v.uniqueId;for(var r=d3.map(),e=0;e<v.data.length;e+=3e3)s.event("file_processing_progress",e/v.data.length),(t={}).autoFields=v.autoFields.map(x),t.fields=v.fields,t.id=v.id,t.label=v.label,t.sourceFor=v.sourceFor,t.uniqueId=v.uniqueId,t.data=v.data.slice(e,e+3e3),(o=_(t,y)).fields.forEach(function(e){if("latlong"===e.type){var t,n;r.has(e.key)?t=r.get(e.key):((t=o.fields.filter(function(t){return t.existenceDimension===e.key})[0])||(t={type:"text",key:(n=d.reduce(function(t,e){return{fields:t.fields.concat(e.fields)}},{fields:[]}).fields.filter(function(t){return t.key===e.key})[0])&&n.existenceDimension?n.existenceDimension:e.existenceDimension?e.existenceDimension:Math.random().toString(36),description:e.description+": Exists",existenceDimension:e.key,errors:[],special:[],uniques:[]},e.existenceDimension=t.key,n&&(n.existenceDimension=t.key)),r.set(e.key,t)),o.fields.push(t);for(var i=0;i<o.data.length;i++)o.data[i][t.key]=!!o.data[i][e.key]}}),u=u.concat(o.data),h.add(o.data);s.event("file_processed"),c=o.fields,o.fields.forEach(function(i){void 0!==i.typeField&&0<i.typeField.length&&(i.typeFieldUniques=[],i.typeField.forEach(function(e,n){i.typeFieldUniques[n]=[],u.forEach(function(t){-1===i.typeFieldUniques[n].indexOf(t[e])&&i.typeFieldUniques[n].push(t[e])})}))})}}function S(n){0<n.fields.filter(function(t){return t.uniqueKey}).length?n.fields.filter(function(t){return t.uniqueKey}).forEach(function(t,e){0===e&&(t.countable=!0,t.countDescription=n.label)}):n.fields.filter(function(t){return t.countBy}).forEach(function(t,e){0===e&&(t.countable=!0,t.countDescription=n.label)})}function M(){o=!0}return projectMetadata=[],{getData:function(){var t=n.defer();return o?(e.spin(),setTimeout(function(){T(),t.resolve()},1)):t.resolve(),o=!1,t.promise.then(function(){return e.hide(),{data:u,metadata:c,xfilter:h}})},getDataSync:function(){return o&&(T(),o=!1),{data:u,metadata:c,xfilter:h}},addFile:function(t,e,n){var i={};i.url=n,i.loadFromURL=!!n,i.label=e||"Untitled",i.id=d.length,g(t,d),i.autoFields=a.getFields(t),f(i,t);var o,r=d3.max(i.autoFields,function(t){return t.uniques.length}),s=i.autoFields.filter(function(t){return t.uniques.length===r})[0];i.autoFields.forEach(function(t){t.key!==s.key&&(t.descriptiveField=s)}),0===d.length&&((o=i.autoFields.filter(function(t){return t.uniqueKey})[0])?o.countBy=!0:s.countBy=!0),i.fields=i.autoFields.map(function(e){return{key:e.key,description:e.description,cardinality:e.cardinality,type:e.type,blanks:e.blanks,uniques:e.uniques,uniqueKey:e.uniqueKey,special:e.special,unassignedSpecialChars:e.special.filter(function(t){return!("date"===e.type&&"-"===t||"latlong"===e.type&&("-"===t||","===t)||"url"===e.type&&(":"===t||"/"===t||"_"===t||"-"===t))}),countBy:e.countBy,errors:l(e.uniques.map(function(t){return t.key}),e.type),descriptiveField:e.descriptiveField}}),i.data=t,i.uniqueId=p,p++,d.push(i),M()},addFileRaw:function(t){g(t.data,d),f(t,t.data),d.push(t),p++,M()},deleteFile:function(n){var i=null;d.forEach(function(t,e){t.uniqueId===n&&(i=e)}),null!==i&&d.splice(i,1);var o=[];$.forEach(function(t,e){t.lookup.file.uniqueId!==n&&t.source.file.uniqueId!==n||o.unshift([t,e])}),o.forEach(function(t){r(t[0],t[1])}),M()},getFiles:function(){return d},addLink:function(e){if(void 0===e.lookup.field){var n={},i=-1,o={};e.lookup.file.fields.forEach(function(t){e.lookup.field=t,(n=_(e.source,e.lookup)).matches>i&&(i=n.matches,o=t)}),e.lookup.field=o}void 0===e.metadata&&(e.metadata=_(e.source,e.lookup)),$.push(e),M()},addLinkRaw:function(t){t.metadata=_(t.source,t.lookup),$.push(t),M()},deleteLink:r,getLinks:function(){return $},isDirty:function(){return o},setDirty:M,calcLinkMetadata:_,setCountBy:function(t){d.forEach(function(t){t.fields.forEach(function(t){t.countBy=!1})}),t.countBy=!0},setMetadata:function(t){projectMetadata=t},getMetadata:function(){return projectMetadata}}}]).factory("dataPromise",["dataService",function(t){return t.getData()}]),angular.module("palladio.services.date",[]).factory("dateService",function(){var e,n,i=!0,o=0,r="",s="",a="",l="",u=d3.time.format.iso.parse;function c(t){return i="-"!==(r=""+t)[0],o=r.length,i&&4===o?r:i||5!==o?i&&3===o?"0"+r:i||4!==o?i&&2===o?"00"+r:i||3!==o?i&&1===o?"000"+r:i||2!==o?void 0:"-000"+r.substr(1,1):"-00"+r.substr(1,2):"-0"+r.substr(1,3):r}function h(t){return 2===(r=""+t).length?r:1===r.length?"0"+r:void 0}function d(t){return 2===(r=""+t).length?r:1===r.length?"0"+r:void 0}function p(t){return t&&t.length<=5?c(t)+"-01-01":t&&4<t.length&&t.length<=11&&-1===t.indexOf("/")?(n=t.split("-"),"-"===t[0]?"-"+c(n[1])+"-"+h(n[2])+"-"+d(n[3]):c(n[0])+"-"+h(n[1])+"-"+d(n[2])):t&&4<t.length&&t.length<=11&&-1!==t.indexOf("/")?c((n=t.split("/"))[2])+"-"+h(n[0])+"-"+d(n[1]):t&&9<t.length&&u(t)?""+f(u(t)):""+t}var f=function(t){if(t)return c(t.getUTCFullYear())+"-"+(8<t.getUTCMonth()?t.getUTCMonth()+1:"0"+(t.getUTCMonth()+1))+"-"+(9<t.getUTCDate()?t.getUTCDate():"0"+t.getUTCDate())};f.parse=function(t){return t&&10===t.length|11===t.length?(i=11!==t.length,s=t.substr(0,i?4:5),a=t.substr(i?5:6,2),l=t.substr(i?8:9,2),(e=new Date(Date.UTC(+s,+a-1,+l))).setUTCFullYear(+s),e):""},f.parseExternal=function(t){return f.parse(p(t))},f.reformatExternal=p,f.toString=function(){return"%Y-%m-%d"};var t=function(t){if(t)return c(t.getUTCFullYear())+"-"+(8<t.getUTCMonth()?t.getUTCMonth()+1:"0"+(t.getUTCMonth()+1))};t.parse=function(t){return t&&7===t.length|8===t.length?(i=9!==t.length,s=t.substr(0,i?4:5),a=t.substr(i?5:6,2),(e=new Date(Date.UTC(+s,+a-1,"01"))).setUTCFullYear(+s),e):""},t.toString=function(){return"%Y-%m"};var m=function(t){if(t)return c(t.getUTCFullYear())};return m.parse=function(t){return t&&4===t.length|5===t.length?(i=5!==t.length,s=t.substr(0,i?4:5),(e=new Date(Date.UTC(+s,"01","01"))).setUTCFullYear(+s),e):""},m.toString=function(){return"%Y"},{format:f,formatMonth:t,formatYear:m}}),angular.module("palladio.services.export",[]).factory("exportService",function(){return function(t,e){var n=window.Blob||window.WebKitBlob||window.MozBlob,i=t.attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").attr("style","").node(),o=$("<div></div>").html($(i).clone()).html();if(-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")){var r="data:image/svg+xml;utf8,"+o;window.open(r,"download")}else{var s=new n([o],{type:"data:image/svg+xml"});saveAs(s,e)}}}),angular.module("palladio.services.filter",["palladio"]).factory("filterService",["$q","palladioService",function(i,t){var o=[],r=[];return r.push(t.update),{filter:function(t,e){if(t.filterRunning)t.filterQueued=e;else{o.forEach(function(t){t()});var n=i.defer();setTimeout(function(){t.filterRunning=!0,e(t),r.forEach(function(t){t()}),t.filterRunning=!1,t.filterQueued?e(t,t.filterQueued).then(function(){n.resolve()}):n.resolve()}),t.filterPromise=n.promise}return t.filterPromise},preFilter:function(t){o.push(t)},postFilter:function(t){r.push(t)}}}]),angular.module("palladio.services.load",["palladio.services.data"]).factory("loadService",["dataService","$q","parseService","validationService","$rootScope",function(t,e,o,r,n){var s,a={},l=!1;return{loadJson:function(i){return new Promise(function(t,e){var n=[];i.files.forEach(function(e){e.loadFromURL&&e.url&&n.push(o.parseUrl(e.url).then(function(t){e.data=o.parseText(t)}))}),Promise.all(n).then(function(){t()})}).then(function(){i.files.forEach(function(n){n.autoFields=o.getFields(n.data),n.fields.forEach(function(e){var t=o.parseColumn(e.key,n.data,e.mvDelimiter,e.hierDelimiter,[],e.type);e.uniques=t.uniques,e.descriptiveField&&"string"==typeof e.descriptiveField&&(e.descriptiveField=n.fields.filter(function(t){return t.key===e.descriptiveField})[0]),e.errors=r(e.uniques.map(function(t){return t.key}),e.type)}),t.addFileRaw(n)}),i.links.forEach(function(e){e.lookup.file=t.getFiles().filter(function(t){return t.uniqueId===e.lookup.file.uniqueId})[0],e.source.file=t.getFiles().filter(function(t){return t.uniqueId===e.source.file.uniqueId})[0],e.lookup.field=e.lookup.file.fields.filter(function(t){return t.key===e.lookup.field.key})[0],e.source.field=e.source.file.fields.filter(function(t){return t.key===e.source.field.key})[0],t.addLinkRaw(e)}),i.vis&&0<i.vis.length&&(a=i.vis,s=i.layout,l=!0),t.setMetadata(i.metadata),n.$digest()})},build:function(t){if(l){var e=d3.map();a.forEach(function(t){e.has(t.type)?e.get(t.type).push(t.importJson):e.set(t.type,[t.importJson])}),t.forEach(function(t){e.has(t.type)&&0<e.get(t.type).length&&(t.import(e.get(t.type).shift()),0===e.get(t.type).length&&e.remove(t.type))}),e.keys().forEach(function(t){console.warn("It looks like this import file includes a visualization with type "+t.type+" that didn't match any visualizations in this application.")})}},layout:function(){return s}}}]),angular.module("palladio.services.parse",[]).factory("parseService",["$http","$q",function(n,i){var l=function(o,t,r,s,a,e){""===r&&(r=null),""===s&&(s=null);var l=["-","","",";",":","_",",","?","/","!","~"],n=t.reduce(function(n,t,e,i){return null===t[o]||void 0===t[o]||""===t[o]?n.blanks=n.blanks+1:(l.forEach(function(e){-1!==t[o].indexOf(e)&&(n.specials.push(e),l=l.filter(function(t){return t!==e}))}),t[o].split(r).map(function(e){return a&&a.forEach(function(t){e=e.split(t).join("")}),e.trim()}).forEach(function(t){t=t.replace(s,"&rarr;"),n.map.has(t)?n.map.set(t,n.map.get(t)+1):(n.card=n.card+1,n.map.set(t,1))})),n},{card:0,blanks:0,map:d3.map(),specials:[]});return{uniques:n.map.entries(),cardinality:n.card,blanks:n.blanks,special:n.specials,uniqueKey:n.map.keys().length===t.length}};return{getFields:function(n){var r=function(t){return!isNaN(t.replace(",","."))},t=function(t){return null==t||0===t.length?"null":null!==(e=t)&&"object"==typeof e?"object":"[object Array]"==t.toString()?"array":(n=t,RegExp("^[-]?\\d\\d\\d\\d($)|([-](0[0-9]|1[012]|[0-9])[-](0[0-9]|[12][0-9]|3[01]|[0-9])$)").test(n)?"date":"number"==typeof t?"number":0===(i=t).indexOf("https://")||0===i.indexOf("http://")||0===i.indexOf("www.")?"url":r(t)?"number":2===(o=t.split(",")).length&&r(o[0])&&r(o[1])?"latlong":"string"==typeof t?"text":null);var e,n,i,o},i=function(t){var e=d3.entries(t).sort(function(t,e){return t.value<e.value});return"null"==e[0].key&&1<e.length?e[1].key:e[0].key},o=function(t,e){var n=t;if(!(e=e?e.split("."):null))return t;for(var i=0,o=e.length;i<o;i++)n=n[e[i]];return n};count=function(t,e){return d3.nest().key(function(t){return o(t,e)}).rollup(function(t){return t.length}).map(t)};var s={};d3.keys(n[0]).forEach(function(t){s[t]=[]});for(var e=0;e<n.length;e++)for(var a in s)s[a].push(t(n[e][a]));return d3.keys(n[0]).map(function(t){var e=l(t,n,"","",[],i(count(s[t])));return{key:t,description:t,type:i(count(s[t])),cardinality:e.cardinality,blanks:e.blanks,countBy:!1,uniques:e.uniques,special:e.special,unassignedSpecialChars:e.special,uniqueKey:e.uniqueKey,errors:[]}})},detectDelimiter:function(t,e){if(arguments.length){e||(e=[",",";",":","\t"]);for(var n,i=t.split("\n"),o=e.map(function(t){return 0}),r=!1,s=!0,a=0;a<1;a++)if(i[a].length)for(var l=0;l<i[a].length-1;l++){switch(n=i[a][l]){case'"':r?'"'!=i[a][l+1]?r=!1:l++:s&&(r=!0);break;default:if(!r){var u=e.indexOf(n);if(-1!==u){o[u]++,s=!0;continue}}}s&&(s=!1)}var c=d3.max(o);return 0===c?"\0":e[o.indexOf(c)]}},parseText:function(t,e){e||(e=this.detectDelimiter(t));for(var n,i=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),o=[[]],r=[],s=i.exec(t);s;s=i.exec(t))try{var a,l=s[1];l.length&&l!=e&&o.push([]),a=s[2]?s[2].replace(new RegExp('""',"g"),'"'):s[3],o[o.length-1].push(a)}catch(t){throw new Error(t.message)}n=o[0];for(var u=1;u<o.length;u++)if(1!=o[u].length||o[u].length==n.length){if(o[u].length!=n.length)throw new Error("There's something strange at line "+(u+1)+". Please review your data.");var c={};for(var h in n)c[n[h]]=o[u][h];r.push(c)}return r},parseUrl:function(t){var e=i.defer();return n.get(t).success(function(t){e.resolve(t)}).error(function(){e.reject("Sorry, an error occured while fetching the data.")}),e.promise},parseColumn:l}}]),angular.module("palladio.services",["palladio.services.date","palladio.services.spinner","palladio.components","palladio.services.parse","palladio.services.validation","palladio.services.export","palladio.services.data","palladio.services.date","palladio.services.filter","palladio.services.load"]),angular.module("palladio.services.spinner",[]).factory("spinnerService",function(){var t,e,n,i,o={lines:13,length:8,width:4,radius:15,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9},r={lines:13,length:0,width:3,radius:12,corners:1,rotate:0,direction:1,color:"#4EBDE5",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9};return{spin:function(){t||(t=document.getElementById("spinner"),e=new Spinner(o).spin(),t&&t.appendChild(e.el)),t&&$(t).show()},hide:function(){t&&$(t).hide()},pSpin:function(){n||(n=document.getElementById("p-spinner"),i=new Spinner(r).spin(),n&&n.appendChild(i.el)),n&&$(n).show()},pHide:function(){n&&$(n).hide()}}}),angular.module("palladio.services.validation",["palladio.services.date"]).factory("validationService",["dateService",function(r){return function(t,e){var n=[],i=RegExp("^(([-]?\\d{1,4})|([-]?\\d{1,4}[-](0[1-9]|1[012]|[1-9])[-](0[1-9]|[12][0-9]|3[01]|[1-9]))|([-]?\\d{1,4}[-](0[1-9]|1[012]|[1-9])[-](0[1-9]|[12][0-9]|3[01]|[1-9])T[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|[Z]?))|([-]?\\d{1,4}[-](0[1-9]|1[012]|[1-9])[-](0[1-9]|[12][0-9]|3[01]|[1-9])T[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|[Z]?))|([-]?\\d{1,4}[-](0[1-9]|1[012]|[1-9])[-](0[1-9]|[12][0-9]|3[01]|[1-9])T[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|[Z]?)))$"),o=RegExp("^(\\-?\\d+(\\.\\d+)?),\\s*(\\-?\\d+(\\.\\d+)?)$");return t.forEach(function(t){switch(e){case"number":isNaN(+t)&&n.push({value:t,message:'"'+t+'" is not a number'});break;case"date":if(t&&!r.format.parseExternal(t)){n.push({value:t,message:'"'+t+'" is not a date'});break}i.test(t)||n.push({value:t,message:'"'+t+'" has our of range values'});break;case"latlong":(!o.test(t)||+t.split(",")[0]<-90||90<+t.split(",")[0])&&n.push({value:t,message:'"'+t+'" is not a lat/long pair'})}}),n}}]),angular.module("palladioDataDownload",["palladio.services","palladio"]).directive("palladioDataDownload",["dataService","version","palladioService",function(a,l,u){return{transclude:!0,templateUrl:"partials/palladio-data-download/template.html",link:function(r){function s(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}r.exportDataModel=function(){var t=a.getFiles().map(function(t){return(t=s(t)).autoFields=[],t.fields=t.fields.concat([]).map(function(t){return(t=s(t)).descriptiveField&&t.descriptiveField.key&&(t.descriptiveField=t.descriptiveField.key),t.uniques=[],t.errors=[],t}),t.url&&t.loadFromURL&&(t.data=[]),t}),e=a.getLinks().map(function(t){return(t=s(t)).lookup=s(t.lookup),t.source=s(t.source),t.lookup.field=s(t.lookup.field),t.source.field=s(t.source.field),t.lookup.field.uniques=[],t.lookup.field.errors=[],t.source.field.uniques=[],t.source.field.errors=[],t.lookup.field.descriptiveField&&t.lookup.field.descriptiveField.key&&(t.lookup.field.descriptiveField=t.lookup.field.descriptiveField.key),t.source.field.descriptiveField&&t.source.field.descriptiveField.key&&(t.source.field.descriptiveField=t.source.field.descriptiveField.key),t.lookup.file={uniqueId:t.lookup.file.uniqueId},t.source.file={uniqueId:t.source.file.uniqueId},t}),n={version:l,files:t,links:e,layout:r.layout,metadata:r.project,vis:u.getStateFunctions().map(function(t){return{type:t.type,importJson:t.export()}})},i=new Blob([JSON.stringify(n)],{type:"application/json;charset=utf-8"}),o="Data export.palladio."+l+".json";r&&r.project&&r.project.title&&(o=r.project.title+".palladio."+l+".json"),0<=navigator.userAgent.search("Safari")&&navigator.userAgent.search("Chrome")<0?(alert("Unfortunately, because of compatibility issues with Safari, the save file will download as a file with name 'Unknown'.\n\nYou may also be prompted to leave the page. If this happens, click 'Leave'. You will not actually leave the page."),i=new Blob([JSON.stringify(n)],{type:"application/octet-stream"}),saveAs(i,"name")):saveAs(i,o)}}}}]),angular.module("palladioDataUpload",["palladio.services"]).run(["componentService",function(t){t.register("upload",function(t,e){e.onLoad=t.loadFunction;return'<button class="btn" palladio-data-upload on-load="onLoad()"><i class="fa fa-upload"></i>&nbsp;Import a Palladio data model</button>'})}]).directive("palladioDataUpload",["dataService","loadService","spinnerService",function(t,o,e){return{scope:{load:"&onLoad"},transclude:!0,templateUrl:"partials/palladio-data-upload/template.html",link:function(i){i.loadDataModel=function(t){e.spin();var n=new FileReader;n.onload=function(){var e=JSON.parse(n.result);o.loadJson(e).then(function(){i.$apply(function(t){t.load(e)})})},n.readAsText(t.files[0]),t.value=null},i.triggerDataModelSelector=function(){$("#dataModelSelector").click()}}}}]),angular.module("palladioSelectionView",["palladio"]).directive("palladioSelectionView",["palladioService",function(r){return{scope:!0,link:function(t,i){var e="selectionView"+Math.floor(1e4*Math.random()),n=[];function o(){var t=d3.select(i[0]);t.select("ul").empty()&&t.append("ul").attr("class","selection-display");var e=t.select("ul");t.selectAll(".no-filter").remove(),0===r.getFilters().entries().length&&t.append("span").attr("class","no-filter text-muted small").style("margin-left","5px").text("You have no active filters");var n=e.selectAll("li").data(r.getFilters().entries(),function(t){return t.key});n.enter().call(function(t){var e=t.append("li").attr("class","selection-pill");e.append("span").attr("class","selection-label"),e.append("span").attr("class","selection-text"),e.append("span").attr("class","pointer text-danger").attr("tooltip","Remove").attr("tooltip-animation","false").html("&times;").on("click",function(t){t.value[2]()})}),n.exit().remove(),n.call(function(t){t.select("span.selection-label").text(function(t){return t.value[0]}),t.select("span.selection-text").text(function(t){return t.value[1]}).attr("title",function(t){return t.value[1]})})}n.push(r.onUpdate(e,function(){o()})),t.$on("$destroy",function(){n.forEach(function(t){t()})}),o()}}}]),angular.module("palladioIdiographView",["palladio","palladio.services"]).directive("palladioIdiographView",function(p,f){return{scope:!0,templateUrl:"partials/idiograph-view/template.html",link:{pre:function(e){e.uniqueToggleId="idiographView"+Math.floor(1e4*Math.random()),e.metadata=f.getDataSync().metadata,e.xfilter=f.getDataSync().xfilter,e.data=f.getDataSync().data,e.dims={nodes:null,links:null},e.nodeDims=f.getFiles(),e.layouts=[{label:"None"},{label:"Links"},{label:"Groups"}],e.status={isopen:!1},e.toggled=function(t){},e.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),e.status.isopen=!e.status.isopen},e.selectedNode=null,e.selectedNodes=[],e.showNodeModal=function(){$("#node-modal").modal("show")}},post:function(s,a){var l,u,t,e,c,n,h,d;function i(){l||(l=d3.idiograph()),t&&(t.remove(),h=t=void 0),e&&(e.remove(),n=[],c=e=void 0),s.dims.nodes&&(s.nodeKeyField=d=s.dims.nodes.fields.filter(function(t){return t.uniqueKey})[0],t=s.xfilter.dimension(function(t){return""+t[d.key]}),h=t.group(),function(){if(s.dims.nodes){var t=f.getLinks().filter(function(t){return t.lookup.file.id===s.dims.nodes.id}).map(function(t){return t.source.file.id});s.linkDims=f.getFiles().filter(function(e){return 1<t.filter(function(t){return t===e.id}).length})}}(),s.dims.links&&(n=f.getLinks().filter(function(t){return t.source.file.id===s.dims.links.id&&t.lookup.file.id===s.dims.nodes.id}).map(function(t){return t.source.field}),e=s.xfilter.dimension(function(e){return n.map(function(t){return e[t.key]})}),c=e.group()))}function o(){if(l.width(a.width()).height($(window).height()).on("selected",function(n){if(s.selectedNode=null,s.selectedNodes=[],1==n.length)return void s.$apply(function(t){t.selectedNode=t.dims.nodes.data.filter(function(t){return t[d.key]===n[0].data.name})[0]||{},t.selectedNode=d3.entries(t.selectedNode).filter(function(t){return 0!==t.key.indexOf("$$")})});s.$apply(function(t){var e=n.map(function(t){return t.data.name});t.selectedNodes=t.dims.nodes.data.filter(function(t){return-1!==e.indexOf(t[d.key])})||[]})}),s.dims.nodes){var e,n,t=h.top(1/0).map(function(t){return{name:t.key,value:t.value}}),i=d3.map(t.map(function(t,e){return t.index=e,t}),function(t){return t.name}),o=d3.map(),r=[];if(s.dims.links)c.top(1/0).forEach(function(t){for(e=0;e<t.key.length;e++)for(n=0;n<t.key.length;n++)e!==n&&(o.has(t.key[e])?o.get(t.key[e]).targets.push(t.key[n]):o.set(t.key[e],{targets:[t.key[n]]}))}),o.entries().forEach(function(e){e.value.targets.reduce(function(t,e){return t.has(e)?t.set(e,t.get(e)+1):t.set(e,1),t},d3.map()).entries().forEach(function(t){r.push({source:i.get(e.key).index,target:i.get(t.key).index,value:t.value})})});u={nodes:t,links:r},s.nodes=u.nodes,d3.select(a[0]).select(".view").datum(u).call(l)}s.getFieldType=function(e){return s.dims.nodes.fields.filter(function(t){return t.key==e})[0].type},s.getUniques=function(e){return s.dims.nodes.fields.filter(function(t){return t.key==e})[0].uniques.map(function(t){return t.key})}}i(),o(),s.$watchGroup(["dims.nodes","dims.links"],function(){i(),o()});var r=[];r.push(p.onReset(s.uniqueToggleId,function(){})),r.push(p.onUpdate(s.uniqueToggleId,function(){a.is(":visible")&&o()})),s.$watch(function(){return a.is(":visible")},o),s.$on("$destroy",function(){r.forEach(function(t){t()}),r=[]}),r.push(p.registerStateFunctions(s.uniqueToggleId,"idiograph",function(){return{}},function(t){})),$(document).ready(function(){a.find(".settings-toggle").click(function(){a.find(".settings").toggleClass("closed")})})}}}}),d3.idiograph=function(){var c,h,p,d,f,m,g,v,y,b,_,w,x,C,k,$,T,t=d3.dispatch("selected","addNode","addLink"),e=function(u){u.each(function(t){var e,n,i,o,r,s;n=(r=e=t,r.nodes).map(function(t,e){return{id:S(t,e),label:L(t,e),size:+D(t,e),data:t}}),i=(o=e,o.links).map(function(t,e){return{source:(i=t,i.source),target:(n=t,n.target),value:1};var n,i}).filter(function(t,e){return n[t.source]&&n[t.target]}),m={nodes:n,links:i},h||(s=u,x=d3.scale.linear().domain([0,d]).range([0,d]),C=d3.scale.linear().domain([0,f]).range([f,0]),v=d3.behavior.zoom().x(x).y(C).on("zoom",O),$=d3.scale.linear().range([5,200]),w=d3.scale.category20(),h=s.append("canvas").attr("width",d).attr("height",f),p=h.node().getContext("2d"),d3.select("body").attr("tabindex",1).on("keydown.brush",I).on("keyup.brush",I).each(function(){this.focus()}),d3.select(window).on("keydown.pan",E).on("keyup.pan",P),c=s.append("svg").attr("width",d).attr("height",f).call(v),y=c.on("mousedown.zoom"),c.on("mouseup.selection",A).on("dblclick.zoom",null).on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),c.append("g").datum(function(){return{selected:!1,previouslySelected:!1}}).attr("class","brush").call(d3.svg.brush().x(d3.scale.identity().domain([0,d])).y(d3.scale.identity().domain([0,f])).on("brushstart",function(t){g.each(function(t){t.previouslySelected=b&&t.selected})}).on("brush",function(){var e=d3.event.target.extent();g.classed("selected",function(t){return t.selected=t.previouslySelected^(e[0][0]<=x(t.x)&&x(t.x)<e[1][0]&&e[0][1]<=C(t.y)&&C(t.y)<e[1][1])}),A()}).on("brushend",function(){d3.event.target.clear(),d3.select(this).call(d3.event.target)})),g=c.append("g").attr("class","nodes").selectAll(".node"),k=c.append("rect").attr("class","overlay").classed("active",!1).attr("width",d).attr("height",f).attr("fill-opacity",0),T=d3.layout.force().on("tick",O),_=T.drag().on("drag.force",function(t){T.stop(),g.filter(function(t){return t.selected}).each(function(t){t.fixed=!0,t.x+=d3.event.dx/v.scale(),t.y-=d3.event.dy/v.scale(),t.px=t.x,t.py=t.y}),O()}));var a,l=d3.map(T.nodes(),function(t){return t.id});m.nodes.forEach(function(t){(a=l.get(t.id))&&(t.index=a.index,t.x=a.x,t.y=a.y,t.px=a.px,t.py=a.py,t.fixed=a.fixed,t.weight=a.weight)}),T.size([d,f]).nodes(m.nodes).links(m.links).charge(M),T.stop(),$.domain([0,d3.max(m.nodes,function(t){return t.size})]),(g=c.select("g.nodes").selectAll(".node").data(m.nodes,function(t){return t.id})).call(_),g.select(".point").each(N),g.enter().append("g").attr("class","node").call(_).on("mousedown",function(t){var e,n;e=t,n=this,b?d3.select(n).classed("selected",e.selected=!e.selected):e.selected||g.classed("selected",function(t){return t.selected=e===t}),A()}).append("circle").attr("class","point").each(N),g.exit().remove(),T.start()})};function S(t,e){return t.name}function M(t){return-n(t)*n(t)*2}function D(t){return 1}function n(t){return Math.sqrt($(t.size)/Math.PI)}function L(t,e){return e}function w(t){return null}function E(){switch(d3.event.keyCode){case 32:return d3.event.preventDefault(),k.classed("active",!0),c.on("mousedown.zoom",y).on("touchstart.zoom",y).on("touchmove.zoom",y).on("touchend.zoom",y),!1}}function P(t){switch(d3.event.keyCode){case 32:k.classed("active",!1),c.on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null)}}function A(){t.selected(g.filter(function(t){return t.selected}).data())}function O(){p.clearRect(0,0,d,f),p.strokeStyle="rgba(200,200,200,.8)",p.beginPath(),m.links.forEach(function(t,e){var n,i,o,r,s,a,l,u,c,h,d=(i=(n=t).source,o=n.target,r=x(i.x),s=C(i.y),a=x(o.x),l=C(o.y),u=Math.sqrt(Math.pow(a-r,2)+Math.pow(l-s,2))/4,c=Math.atan2(l-s,a-r)-Math.PI/8,h=Math.atan2(s-l,r-a)+Math.PI/8,[r,s,r+u*Math.cos(c),s+u*Math.sin(c),a+u*Math.cos(h),l+u*Math.sin(h),a,l]);p.moveTo(d[0],d[1]),p.bezierCurveTo(d[2],d[3],d[4],d[5],d[6],d[7])}),p.stroke(),g.attr("transform",function(t){return"translate("+x(t.x)+","+C(t.y)+")"})}function I(){b=d3.event.shiftKey}function N(t){d3.select(this).style("fill",function(t){return 0<t.data.value?"#999":"#ddd"}).attr("r",n)}return e.key=function(t){return arguments.length?(S=t,e):S},e.size=function(t){return arguments.length?(D=t,e):D},e.color=function(t){return arguments.length?(w=t,e):w},e.label=function(t){return arguments.length?(L=t,e):L},e.width=function(t){return arguments.length?(d=t,e):d},e.height=function(t){return arguments.length?(f=t,e):f},e.select=function(t){var e;e=t,g&&g.classed("selected",function(t){return t.selected=e(t.data)})},d3.rebind(e,t,"on"),e},angular.module("palladioComponentTemplate",[]).directive("palladioComponentTemplate",function(){return{scope:!0,template:'<div class="row-fluid"></div>',link:{pre:function(t,e,n){},post:function(t,e,n){t.$on("filterReset",function(t){}),t.$on("update",function(t){}),t.$on("search",function(t,e){}),t.$on("$destroy",function(){}),t.$emit("registerStateFunctions",["visualizationName",function(){return{}},function(t){}])}}}}),angular.module("palladioDurationView",["palladio","palladio.services"]).directive("palladioDurationView",function(t,w,e){return{scope:{fullHeight:"@",fullWidth:"@",showControls:"@",showAccordion:"@",view:"@"},templateUrl:"partials/palladio-duration-view/template.html",link:{pre:function(t){t.uniqueToggleId="durationView"+Math.floor(1e4*Math.random()),t.uniqueToggleHref="#"+t.uniqueToggleId,t.uniqueModalId=t.uniqueToggleId+"modal",t.metadata=e.getDataSync().metadata,t.xfilter=e.getDataSync().xfilter,t.data=e.getDataSync().data,t.durationDims=t.metadata.filter(function(t){return"number"===t.type}),t.labelDims=t.metadata,t.tooltipLabelDim=t.labelDims[0],t.xSortDim=t.labelDims[0],t.title="Duration view",t.modes=["Constant duration"],0<t.durationDims.length&&t.modes.push("Actual duration"),t.mode=t.modes[0],t.showDurationModal=function(){$("#"+t.uniqueModalId).find("#duration-modal").modal("show")},t.showTooltipLabelModal=function(){$("#"+t.uniqueModalId).find("#tooltip-label-modal").modal("show")},t.showGroupModal=function(){$("#"+t.uniqueModalId).find("#group-modal").modal("show")},t.showXGroupModal=function(){$("#"+t.uniqueModalId).find("#x-group-modal").modal("show")},t.showXSortModal=function(){$("#"+t.uniqueModalId).find("#x-sort-modal").modal("show")}},post:function(r,n){var i,s,o,a,l,u,c,h,d,p,f,m,g,v="true"===r.fullWidth?$(window).width()-50:.7*$(window).width();function t(){if(!r.tooltipLabelDim||!r.groupDim||!r.xGroupDim||!r.xSortDim||"Actual duration"===r.mode&&!r.durationDim)return!1;m=[],r.data.forEach(function(t){-1===m.indexOf(""+t[r.groupDim.key])&&m.push(""+t[r.groupDim.key])}),m.sort(d3.descending),g=20*m.length+50,(i=d3.select(d3.select(n[0]).select(".main-viz")[0][0].children[0])).select("svg").empty()||i.select("svg").remove(),s=i.append("svg"),i.attr("width",v+50),i.attr("height",g+50),s.attr("width",v+50),s.attr("height",g+50),o&&o.remove(),o=r.xfilter.dimension(function(t){return""+t[r.groupDim.key]}),a=o.group();var t=reductio().count(!0).nest([function(t){return t[r.xGroupDim.key]}]);"Actual duration"===r.mode&&t.sum(function(t){return+t[r.durationDim.key]}),t(a),l=d3.scale.linear().range([0,v-150]),y(),u=d3.scale.ordinal().rangeBands([g-50,0],.2).domain(m),(c=colorbrewer.Greys[9].map(function(t){return t})).splice(1,1),h=d3.scale.ordinal().range(c).domain(r.xGroupDim.uniques),d=d3.svg.axis().orient("bottom").scale(l),p=d3.svg.axis().orient("top").scale(l),f=d3.svg.axis().orient("left").scale(u),grid=d3.svg.axis().orient("top").scale(l).innerTickSize(-(g-50-.5)).outerTickSize(0).tickFormat("");var e=s.append("g").attr("transform","translate(150,25)");e.append("g").attr("class","axis x-axis x-bottom").attr("transform","translate(0,"+(g-50)+")").call(d),e.append("g").attr("class","axis x-axis x-top").call(p),e.append("g").attr("class","axis x-axis x-grid").call(grid),e.append("g").attr("class","axis y-axis").call(f),e.select(".duration-tooltip").empty()&&e.append("g").attr("class","duration-tooltip").attr("pointer-events","none").style("display","none").append("foreignObject").attr("width",100).attr("height",26).attr("pointer-events","none").append("html").style("background-color","rgba(0,0,0,0)").append("div").style("padding-left",3).style("padding-right",3).style("text-align","center").style("white-space","nowrap").style("overflow","hidden").style("text-overflow","ellipsis").style("border-radius","5px").style("background-color","white").style("border","3px solid grey")}function e(){if(!r.tooltipLabelDim||!r.groupDim||!r.xGroupDim||!r.xSortDim||"Actual duration"===r.mode&&!r.durationDim)return!1;y(),d.scale(l),p.scale(l),s.select(".x-bottom").call(d),s.select(".x-top").call(p);var t=s.select("g").selectAll(".duration-group").data(a.top(1/0),function(t){return t.key});t.exit().remove(),t.enter().append("g").attr("class","duration-group").attr("transform",function(t){return"translate(1,"+u(t.key)+")"});var e="Constant duration"===r.mode,n=l(1)-l(0);function i(t){return e?n:isNaN(+t[r.durationDim.key])?0:l(+t[r.durationDim.key])}var o=t.selectAll(".duration-bar").data(function(t,e){var n=0;return t.value.nest.map(function(t){return t.values}).reduce(function(t,e){return t.concat(e)}).sort(function(t,e){return d3.ascending(t[r.xSortDim.key],e[r.xSortDim.key])}).map(function(t){return n+=i(t),{name:t[r.xGroupDim.key],label:t[r.tooltipLabelDim.key],group:e,x:i(t),offset:n-i(t)}})},function(t,e){return t.name+"-"+t.group+"-"+e});o.exit().remove(),o.enter().append("rect").attr("height",u.rangeBand()).attr("class","duration-bar"),o.attr("width",function(t){return t.x?t.x:0}).attr("fill",function(t){return h(t.name)}).attr("stroke",function(t){return h(t.name)}).attr("transform",function(t){return"translate("+(t.offset?t.offset:0)+",0)"}).on("mouseover",function(e){o.attr("fill",function(t){return e.name===t.name?"#67D6E5":h(t.name)}).attr("stroke",function(t){return e.name===t.name?"#67D6E5":h(t.name)})}).on("mouseout",function(){o.attr("fill",function(t){return h(t.name)}).attr("stroke",function(t){return h(t.name)})}).tooltip(function(t){return{text:t.label,displacement:[0,20],position:[0,0],gravity:"right",placement:"mouse",mousemove:!0}})}function y(){"Actual duration"===r.mode?l.domain([0,d3.max(a.top(1/0),function(t){return t.value.sum})]):l.domain([0,d3.max(a.top(1/0),function(t){return t.value.count})])}function b(){o&&(a.remove(),o.remove(),s.remove())}t(),e(),r.filterReset=function(){b(),t(),e()},r.$watchGroup(["mode","durationDim","tooltipLabelDim","groupDim","xGroupDim","xSortDim"],function(){b(),t(),e()});var _=[];_.push(w.onReset(r.uniqueToggleId,function(){r.filterReset()})),_.push(w.onUpdate(r.uniqueToggleId,function(){n.is(":visible")&&e()})),r.$watch(function(){return n.is(":visible")},e),r.$on("$destroy",function(){o&&(a.remove(),o.remove(),o=void 0),_.forEach(function(t){t()}),_=[]}),_.push(w.registerStateFunctions(r.uniqueToggleId,"duration",function(){return{title:r.title,durationDim:r.durationDim?r.durationDim.key:null,tooltipLabelDim:r.tooltipLabelDim?r.tooltipLabelDim.key:null,groupDim:r.groupDim?r.groupDim.key:null,xGroupDim:r.xGroupDim?r.xGroupDim.key:null,xSortDim:r.xSortDim?r.xSortDim.key:null,mode:r.mode}},function(e){r.title=e.title,r.durationDim=r.durationDims?r.durationDims.filter(function(t){return t.key===e.durationDim})[0]:null,r.tooltipLabelDim=r.labelDims?r.labelDims.filter(function(t){return t.key===e.tooltipLabelDim})[0]:null,r.groupDim=r.labelDims?r.labelDims.filter(function(t){return t.key===e.groupDim})[0]:null,r.xGroupDim=r.labelDims?r.labelDims.filter(function(t){return t.key===e.xGroupDim})[0]:null,r.xSortDim=r.labelDims?r.labelDims.filter(function(t){return t.key===e.xSortDim})[0]:null,r.mode=e.mode})),$(n[0]).find("#duration-modal").parent().appendTo("body"),"true"===r.view&&$(document).ready(function(){$(n[0]).find(".toggle").click(function(){$(n[0]).find(".settings").toggleClass("open close")})})}}}}),angular.module("palladioHistogramFilter",[]).directive("palladioHistogramFilter",function(){return{scope:!0,templateUrl:"partials/palladio-histogram-filter/template.html",link:{pre:function(t,e,n){t.uniqueToggleId="histogramFilter"+Math.floor(1e4*Math.random()),t.uniqueToggleHref="#"+t.uniqueToggleId,t.uniqueModalId=t.uniqueToggleId+"modal",t.numDims=t.metadata.filter(function(t){return"number"===t.type}),t.numDim=t.numDims[0],t.title="Histogram Filter",t.showNumberModal=function(){$("#"+t.uniqueModalId).find("#num-modal").modal("show")}},post:function(e,n,t){var i,o,r,s,a,l,u,c,h;function d(){i=d3.select(d3.select(n[0]).select(".main-viz")[0][0].children[0]),o=i.append("svg"),i.attr("width",850),i.attr("height",200),o.attr("width",850),o.attr("height",200),r=e.xfilter.dimension(function(t){return+t[e.numDim.key]}),s=r.group(),a=d3.scale.linear().range([0,800]).domain([+r.bottom(1)[0][e.numDim.key],+r.top(1)[0][e.numDim.key]]),l=d3.scale.linear().range([150,0]).domain([0,s.top(1)[0].value]),u=d3.svg.axis().orient("bottom").scale(a),c=d3.svg.axis().orient("right").scale(l).ticks(5),h=d3.svg.area().x(function(t){return a(t.key)}).y0(function(t){return 150}).y1(function(t){return l(t.value)});var t=o.append("g").attr("transform","translate(25,25)");t.append("g").attr("class","axis x-axis").attr("transform","translate(0,150)").call(u),t.append("g").attr("class","axis y-axis").attr("transform","translate(800, 0)").call(c),t.append("g").attr("class","histogram").datum(s.top(1/0).sort(function(t,e){return t.key<e.key?1:-1})).append("path").attr("d",function(t){return h(t)}).attr("transform","translate(-0.5, -0.5)")}function p(){o.select("g").select(".histogram").select("path").attr("d",function(t){return h(t)})}d(),p(),e.$watch("numDim",function(){s.remove(),r.remove(),o.remove(),d(),p()}),e.$on("filterReset",function(t){p()}),e.$on("update",function(t){p()}),e.$on("search",function(t,e){}),e.$on("$destroy",function(){s.remove(),r.remove()}),e.$emit("registerStateFunctions",["visualizationName",function(){return{}},function(t){}])}}}}),angular.module("palladioPalette",["palladio","palladio.services"]).directive("palladioPalette",function(t,s,a){return{scope:!0,templateUrl:"partials/palladio-palette/template.html",link:{pre:function(t,e,n){var i;function o(){i=s.getDataSync().metadata,t.fields=i?i.filter(function(t){return!0===t.countable}).sort(function(t,e){return t.description<e.description?-1:1}).map(function(t){var e=r(t);return e.propertyDimensions=i.filter(function(t){return t.originFileId===e.originFileId}).map(function(t){return r(t)}),e.description=e.countDescription,e}):[]}function r(t){return{countDescription:t.countDescription,description:t.description,key:t.key,originFileId:t.originFileId,typeField:t.typeField,typeFieldUniques:t.typeFieldUniques}}t.fields=[],o(),t.$watch(function(){return a.path()},function(t,e){t!==e&&o()})},post:function(t,e,n){t.$on("filterReset",function(t){}),t.$on("update",function(t){}),t.$on("search",function(t,e){}),t.$on("$destroy",function(){}),t.$emit("registerStateFunctions",["palette",function(){return{}},function(t){}])}}}}),angular.module("palladioPardurationFilter",["palladio.services.date"]).directive("palladioPardurationFilter",function(i){return{scope:!0,templateUrl:"partials/palladio-parduration-filter/template.html",link:{pre:function(t,e,n){t.uniqueToggleId="pardurationFilter"+Math.floor(1e4*Math.random()),t.uniqueToggleHref="#"+t.uniqueToggleId,t.uniqueModalId=t.uniqueToggleId+"modal",t.dateDims=t.metadata.filter(function(t){return"date"===t.type}),t.dateStartDim=t.dateDims[0],t.dateEndDim=t.dateDims[1],t.title="Parallel Duration Filter",t.showDateStartModal=function(){$("#"+t.uniqueModalId).find("#date-start-modal").modal("show")},t.showDateEndModal=function(){$("#"+t.uniqueModalId).find("#date-end-modal").modal("show")}},post:function(s,a,t){var l,u,c,h,d,p,f,m,g,v=i.format;function e(){l=d3.select(d3.select(a[0]).select(".main-viz")[0][0].children[0]),u=l.append("svg"),l.attr("width",850),l.attr("height",200),u.attr("width",850),u.attr("height",200),c=s.xfilter.dimension(function(t){return[v.reformatExternal(t[s.dateStartDim.key]),v.reformatExternal(t[s.dateEndDim.key])]}),h=c.group();var t=c.top(1/0).map(function(t){return v.reformatExternal(t[s.dateStartDim.key])}).filter(function(t){return""!==t}),e=c.top(1/0).map(function(t){return v.reformatExternal(t[s.dateEndDim.key])}).filter(function(t){return""!==t}),n=d3.max(c.top(1/0).map(function(t){if(t[s.dateEndDim.key]&&t[s.dateStartDim.key])return v.parse(v.reformatExternal(t[s.dateEndDim.key]))-v.parse(v.reformatExternal(t[s.dateStartDim.key]))}));d=d3.time.scale().range([0,800]).domain([v.parse(d3.min(t)),v.parse(d3.max(e))]),d3.scale.linear().range([150,0]).domain([0,1]),p=d3.scale.linear().range([150,0]).domain([0,n]),f=d3.svg.axis().orient("bottom").scale(d),g=d3.svg.axis().orient("top").scale(d),m=d3.svg.axis().orient("left").scale(p).tickFormat(function(t){return Math.round(t/31536e6)});var i=d3.svg.brush().x(d),o=d3.svg.brush().x(d),r=u.append("g").attr("transform","translate(25,25)");r.append("g").attr("class","axis x-axis").attr("transform","translate(0,150)").call(f).call(o),r.append("g").attr("class","axis x-axis").call(g).call(i),r.append("g").attr("class","axis y-axis").call(m)}function n(){var t=u.select("g").selectAll(".path").data(h.top(1/0).filter(function(t){return""!==t.key[0]&&""!==t.key[1]&&0!==t.value}),function(t){return t.key[0]+" - "+t.key[1]});t.enter().append("line").attr("class","path").attr("stroke-width",1).attr("stroke-opacity",.7).attr("stroke","black"),t.exit().remove(),t.attr("x1",function(t){return d(v.parse(t.key[0]))}).attr("y1",p(0)).attr("x2",function(t){return d(v.parse(t.key[1]))}).attr("y2",function(t){return p(v.parse(t.key[1])-v.parse(t.key[0]))})}e(),n(),s.$watchGroup(["dateStartDim","dateEndDim"],function(){h.remove(),c.remove(),u.remove(),e(),n()}),s.$on("filterReset",function(t){n()}),s.$on("update",function(t){n()}),s.$on("search",function(t,e){}),s.$on("$destroy",function(){h.remove(),c.remove()}),s.$emit("registerStateFunctions",["visualizationName",function(){return{}},function(t){}]),$(a[0]).find("#date-start-modal").parent().appendTo("body")}}}}),angular.module("palladioTimespanFilter",["palladio.services.date"]).directive("palladioTimespanFilter",function(n){return{scope:!0,templateUrl:"partials/palladio-timespan-filter/template.html",link:{pre:function(t,e,n){t.uniqueToggleId="timespanFilter"+Math.floor(1e4*Math.random()),t.uniqueToggleHref="#"+t.uniqueToggleId,t.uniqueModalId=t.uniqueToggleId+"modal",t.dateDims=t.metadata.filter(function(t){return"date"===t.type}),t.dateStartDim=t.dateDims[0],t.dateEndDim=t.dateDims[1],t.title="Timespan Filter",t.showDateStartModal=function(){$("#"+t.uniqueModalId).find("#date-start-modal").modal("show")},t.showDateEndModal=function(){$("#"+t.uniqueModalId).find("#date-end-modal").modal("show")}},post:function(r,s,t){var a,l,u,c,h,d,p,f=n.format;function e(){a=d3.select(d3.select(s[0]).select(".main-viz")[0][0].children[0]),l=a.append("svg"),a.attr("width",850),a.attr("height",200),l.attr("width",850),l.attr("height",200),u=r.xfilter.dimension(function(t){return[f.reformatExternal(t[r.dateStartDim.key]),f.reformatExternal(t[r.dateEndDim.key])]}),c=u.group();var t=function(){var e=[],n=[],t=[];c.top(1/0).filter(function(t){return""!==t.key[0]&&""!==t.key[1]}).forEach(function(t){t.placed=!1,e.push(t),n.push(t)}),e.sort(function(t,e){return t.key[0]<e.key[0]?-1:1}),n.sort(function(t,e){return t.key[1]>e.key[1]?-1:1});var i=e.length-1,o=0,r=0,s=0,a=0,l=null;for(;o+r<=2*i;)for(l=null,o<=r?(l=e[o],o++):(l=n[r],r++),s=0;!l.placed;)if(t[s]){for(a=0;a<t[s].length&&!l.placed;)t[s][a].key[1]<l.key[0]&&(!t[s][a+1]||t[s][a+1].key[0]>l.key[1])?(t[s].splice(a+1,0,l),l.placed=!0):t[s][a].key[0]>l.key[1]&&(!t[s][a-1]||t[s][a-1].key[1]<l.key[0])&&(t[s].splice(a,0,l),l.placed=!0),a++;s++}else t[s]=[l],l.placed=!0;return t}(),e=u.top(1/0).map(function(t){return f.reformatExternal(t[r.dateStartDim.key])}).filter(function(t){return""!==t}),n=u.top(1/0).map(function(t){return f.reformatExternal(t[r.dateEndDim.key])}).filter(function(t){return""!==t});h=d3.time.scale().range([0,800]).domain([f.parse(d3.min(e)),f.parse(d3.max(n))]),d=d3.scale.linear().range([150,0]).domain([0,t.length]),p=d3.svg.axis().orient("bottom").scale(h);var i=l.append("g").attr("transform","translate(25,25)");i.append("g").attr("class","axis x-axis").attr("transform","translate(0,150)").call(p);var o=i.selectAll(".lane").data(t);o.enter().append("g").attr("class","lane").attr("transform",function(t,e){return"translate(0,"+d(e+1)+")"}),o.selectAll(".span").data(function(t){return t}).enter().append("rect").attr("height",.25*(d(0)-d(1))).attr("fill","#666666").attr("width",function(t){return h(f.parse(t.key[1]))-h(f.parse(t.key[0]))}).attr("transform",function(t){return"translate("+h(f.parse(t.key[0]))+",0)"})}e(),r.$watchGroup(["dateStartDim","dateEndDim"],function(){c.remove(),u.remove(),l.remove(),e()}),r.$on("filterReset",function(t){}),r.$on("update",function(t){}),r.$on("search",function(t,e){}),r.$on("$destroy",function(){c.remove(),u.remove()}),r.$emit("registerStateFunctions",["visualizationName",function(){return{}},function(t){}]),$(s[0]).find("#date-start-modal").parent().appendTo("body")}}}}),function(g){"use strict";var v=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};v.VERSION="3.3.4",v.TRANSITION_DURATION=150,v.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},v.prototype.init=function(t,e,n){if(this.enabled=!0,this.type=t,this.$element=g(e),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&g(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var r=i[o];if("click"==r)this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",a="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,g.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},v.prototype.getDefaults=function(){return v.DEFAULTS},v.prototype.getOptions=function(t){return(t=g.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},v.prototype.getDelegateOptions=function(){var n={},i=this.getDefaults();return this._options&&g.each(this._options,function(t,e){i[t]!=e&&(n[t]=e)}),n},v.prototype.enter=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e&&e.$tip&&e.$tip.is(":visible"))e.hoverState="in";else{if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)}},v.prototype.leave=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)},v.prototype.show=function(){var t=g.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var e=g.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!e)return;var n=this,i=this.tip(),o=this.getUID(this.type);this.setContent(),i.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&i.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,a=s.test(r);a&&(r=r.replace(s,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var l=this.getPosition(),u=i[0].offsetWidth,c=i[0].offsetHeight;if(a){var h=r,d=this.options.container?g(this.options.container):this.$element.parent(),p=this.getPosition(d);r="bottom"==r&&l.bottom+c>p.bottom?"top":"top"==r&&l.top-c<p.top?"bottom":"right"==r&&l.right+u>p.width?"left":"left"==r&&l.left-u<p.left?"right":r,i.removeClass(h).addClass(r)}var f=this.getCalculatedOffset(r,l,u,c);this.applyPlacement(f,r);var m=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};g.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",m).emulateTransitionEnd(v.TRANSITION_DURATION):m()}},v.prototype.applyPlacement=function(t,e){var n=this.tip(),i=n[0].offsetWidth,o=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),t.top=t.top+r,t.left=t.left+s,g.offset.setOffset(n[0],g.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),n.addClass("in");var a=n[0].offsetWidth,l=n[0].offsetHeight;"top"==e&&l!=o&&(t.top=t.top+o-l);var u=this.getViewportAdjustedDelta(e,t,a,l);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(e),h=c?2*u.left-i+a:2*u.top-o+l,d=c?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(h,n[0][d],c)},v.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},v.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},v.prototype.hide=function(t){var e=this,n=g(this.$tip),i=g.Event("hide.bs."+this.type);function o(){"in"!=e.hoverState&&n.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),t&&t()}if(this.$element.trigger(i),!i.isDefaultPrevented())return n.removeClass("in"),g.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",o).emulateTransitionEnd(v.TRANSITION_DURATION):o(),this.hoverState=null,this},v.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},v.prototype.hasContent=function(){return this.getTitle()},v.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],n="BODY"==e.tagName,i=e.getBoundingClientRect();null==i.width&&(i=g.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=n?{top:0,left:0}:t.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=n?{width:g(window).width(),height:g(window).height()}:null;return g.extend({},i,r,s,o)},v.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},v.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-s.scroll,l=e.top+r-s.scroll+i;a<s.top?o.top=s.top-a:l>s.top+s.height&&(o.top=s.top+s.height-l)}else{var u=e.left-r,c=e.left+r+n;u<s.left?o.left=s.left-u:c>s.width&&(o.left=s.left+s.width-c)}return o},v.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},v.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},v.prototype.tip=function(){return this.$tip=this.$tip||g(this.options.template)},v.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},v.prototype.enable=function(){this.enabled=!0},v.prototype.disable=function(){this.enabled=!1},v.prototype.toggleEnabled=function(){this.enabled=!this.enabled},v.prototype.toggle=function(t){var e=this;t&&((e=g(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e))),e.tip().hasClass("in")?e.leave(e):e.enter(e)},v.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var t=g.fn.tooltip;g.fn.tooltip=function(i){return this.each(function(){var t=g(this),e=t.data("bs.tooltip"),n="object"==typeof i&&i;!e&&/destroy|hide/.test(i)||(e||t.data("bs.tooltip",e=new v(this,n)),"string"==typeof i&&e[i]())})},g.fn.tooltip.Constructor=v,g.fn.tooltip.noConflict=function(){return g.fn.tooltip=t,this}}(jQuery),angular.module("palladio").run(["$templateCache",function(t){t.put("partials/modal.html",'<div class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n    <span style="line-height: normal">Choose the dimensions</span>\n  </div>\n  <div class="modal-body">\n    <ul class="unstyled">\n    \t<li ng-repeat="field in dimensions">\n    \t\t<label class="checkbox">\n\t\t    \t<input type="checkbox" ng-checked="check(field)" ng-click="change(field)"> {{getDescription(field)}}\n\t\t    </label>\n    \t</li>\n    </ul>\n  </div>\n  <div class="modal-footer">\n    <button class="btn" data-dismiss="modal" aria-hidden="true">Done</button>\n  </div>\n</div>\n')}]),angular.module("palladio").run(["$templateCache",function(t){t.put("partials/palladio-data-download/template.html",'<div data-ng-click="exportDataModel()" >\n\t<button class="btn btn-default" ng-transclude></button>\n</div>\n')}]),angular.module("palladio").run(["$templateCache",function(t){t.put("partials/palladio-data-upload/template.html",'<div data-ng-click="triggerDataModelSelector()">\n\t<button class="btn btn-default" ng-transclude></button>\n</div>\n\n<input type="file" id="dataModelSelector" style="display:none" onchange="angular.element(this).scope().loadDataModel(this)" />\n')}]);